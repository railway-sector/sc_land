import{a5 as t,x as a,c8 as u,al as x,fR as d,y as S,fS as I}from"./index-aRi8Xk-b.js";import{e as O}from"./TileInfoTilemapCache-DpPwfrSR.js";const C=y=>{const f=y;let e=class extends f{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(s,l){return l.minLOD!=null&&l.maxLOD!=null?s:0}readMaxScale(s,l){return l.minLOD!=null&&l.maxLOD!=null?s:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(s,l,h){const v=l.capabilities?.includes("Tilemap");let{minLOD:n,maxLOD:r,minScale:c,maxScale:p}=l;if(n==null&&r==null&&(c!==0||p!==0)){const i=o=>Math.round(1e4*o)/1e4;c=i(c||l.tileInfo.lods[0].scale),p=i(p||l.tileInfo.lods[l.tileInfo.lods.length-1].scale);for(const o of l.tileInfo.lods){const m=i(o.scale);n=m>=c?o.level:n,r=m>=p?o.level:r}}if(v)return new I({layer:this,minLOD:n,maxLOD:r});if(l.tileInfo){const i=new d;return i.read(l.tileInfo,h),new O(i,n,r)}return null}};return t([a({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),t([a()],e.prototype,"minScale",void 0),t([u("service","minScale")],e.prototype,"readMinScale",null),t([a()],e.prototype,"maxScale",void 0),t([u("service","maxScale")],e.prototype,"readMaxScale",null),t([a({type:x})],e.prototype,"spatialReference",void 0),t([a({readOnly:!0})],e.prototype,"supportsBlankTile",null),t([a({type:d})],e.prototype,"tileInfo",void 0),t([a()],e.prototype,"tilemapCache",void 0),t([u("service","tilemapCache",["capabilities","tileInfo"])],e.prototype,"readTilemapCache",null),t([a()],e.prototype,"version",void 0),e=t([S("esri.layers.mixins.ArcGISCachedService")],e),e};export{C as p};
