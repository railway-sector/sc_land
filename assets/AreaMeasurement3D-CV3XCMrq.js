import{rD as $,a0 as b,f as A,$ as L,bB as h,_ as t,e as i,g as f,T as x,nO as C,W as g,b2 as V,bK as c,a1 as v}from"./index-CgzAF5Ey.js";import{m as O}from"./AreaMeasurementAnalysis-CBAtWKzT.js";import{e as B}from"./defaultUnit-CrOs0S_r.js";import{_ as k}from"./AnalysisViewModel-NO2orRru.js";import{u as S}from"./MeasurementWidgetContent-BVNP3Pt4.js";import"./Analysis-DLCfG2Mt.js";import"./getDefaultUnitForView-DdQQf52Q.js";import"./UnitSelect-BKaEWZjc.js";let a=class extends k{constructor(e){super(e),this.analysis=null,this._userUnitOptions=null,this._userUnit=null,this.supportedViewType="3d",this.unsupportedErrorMessage="AreaMeasurement3DViewModel is only supported in 3D views.",e?.isDefaultViewModel||$(b.getLogger(this),"Area Measurement 3D","arcgis-area-measurement-3d",{version:"4.33"})}initialize(){this.addHandles(A(()=>({analysis:this.analysis,unit:this.unit}),({analysis:e,unit:r})=>{e!=null&&(e.unit=r)},L))}get state(){return this.disabled||!this.ready?"disabled":this.tool==null?"ready":this.tool.state}get measurement(){if(this.tool==null||this.disabled||this.tool.destroyed)return null;const{analysisView:e}=this;if(e==null)return null;const{viewData:r,areaLabel:o,perimeterLengthLabel:d}=e,u=r.validMeasurement,m=r.mode==="euclidean",l=r.intersectingSegments.size===0,p=l?u?"available":"unavailable":"invalid";return{mode:m?"euclidean":"geodesic",area:{text:l&&u?o:null,state:p},perimeterLength:{text:l&&u?d:null,state:p}}}get unitOptions(){const e=this._userUnitOptions?.filter(r=>h.includes(r));return e&&e.length>0?e:h.slice()}set unitOptions(e){this._userUnitOptions=e}get unit(){const e=this._userUnit,r=this.unitOptions;if(e&&r.includes(e))return e;const o=this.defaultUnit;return o&&r.includes(o)?o:r[0]}set unit(e){this._userUnit=e}constructAnalysis(){return new O}};t([i({type:O})],a.prototype,"analysis",void 0),t([i({readOnly:!0})],a.prototype,"state",null),t([i({readOnly:!0})],a.prototype,"measurement",null),t([i()],a.prototype,"unitOptions",null),t([i()],a.prototype,"_userUnitOptions",void 0),t([i()],a.prototype,"unit",null),t([i()],a.prototype,"_userUnit",void 0),t([i(B)],a.prototype,"defaultUnit",void 0),a=t([f("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel")],a);const _=a,y="esri-area-measurement-3d",w={base:y,newMeasurementButton:`${y}__clear-button`};let n=class extends x{constructor(s,e){super(s,e),this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.viewModel=new _({isDefaultViewModel:!0}),C(b.getLogger(this),"Area Measurement 3D","arcgis-area-measurement-3d",{version:"4.33"})}get view(){return this.viewModel.view}set view(s){this.viewModel.view=s}get visible(){return this.viewModel.visible}set visible(s){this.viewModel.visible=s}get active(){return this.viewModel.active}get analysis(){return this.viewModel.analysis}set analysis(s){this.viewModel.analysis=s}get icon(){return"measure-area"}set icon(s){this._overrideIfSome("icon",s)}get label(){return this.messages?.widgetLabel??""}set label(s){this._overrideIfSome("label",s)}get unitOptions(){return this.viewModel.unitOptions}set unitOptions(s){this.viewModel.unitOptions=s}get unit(){return this.viewModel.unit}set unit(s){this.viewModel.unit=s}render(){const{messages:s,messagesCommon:e,messagesUnits:r,unit:o,unitOptions:d,viewModel:u}=this,{active:m,measurement:l,state:p,supported:U}=u;return g("div",{"aria-label":this.messages.widgetLabel,class:this.classes(w.base,c.widget,c.panel),key:this,role:"presentation"},this.visible?g(S,{active:m,measurementItems:[{key:"direct",title:r.measures.area,value:M(l?.area)},{key:"perimeter",title:s.perimeterLength,value:M(l?.perimeterLength)}],messages:{...s,notApplicable:e.notApplicable},newMeasurementButtonClass:w.newMeasurementButton,state:p,supported:U,unit:o,unitOptions:d,onNewMeasurementClick:()=>{V(this.viewModel.start())},onUnitChange:D=>{this.unit=D}}):null)}};function M(s){return s?.state==="available"?s.text:null}t([i()],n.prototype,"view",null),t([i()],n.prototype,"visible",null),t([i()],n.prototype,"active",null),t([i({nonNullable:!0})],n.prototype,"analysis",null),t([i()],n.prototype,"icon",null),t([i()],n.prototype,"label",null),t([i(),v("esri/widgets/AreaMeasurement3D/t9n/AreaMeasurement3D")],n.prototype,"messages",void 0),t([i(),v("esri/t9n/common")],n.prototype,"messagesCommon",void 0),t([i(),v("esri/core/t9n/Units")],n.prototype,"messagesUnits",void 0),t([i()],n.prototype,"uiStrings",void 0),t([i({type:_})],n.prototype,"viewModel",void 0),t([i()],n.prototype,"unitOptions",null),t([i()],n.prototype,"unit",null),n=t([f("esri.widgets.AreaMeasurement3D")],n);const q=n;export{q as default};
