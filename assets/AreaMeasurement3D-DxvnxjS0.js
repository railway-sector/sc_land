import{qS as $,a4 as b,k as A,a3 as L,qT as h,qU as O,Z as t,$ as i,a0 as f,W as x,mX as C,Y as g,aY as V,bA as c,a6 as v}from"./index-Bp3GeDhQ.js";import{e as k}from"./defaultUnit-Bhu2r0Gs.js";import{_ as S}from"./AnalysisViewModel-C3m7zR5b.js";import{u as B}from"./MeasurementWidgetContent-CCDYDC-p.js";import"./UnitSelect-B86sTHB1.js";let r=class extends S{constructor(e){super(e),this.analysis=null,this._userUnitOptions=null,this._userUnit=null,this.supportedViewType="3d",this.unsupportedErrorMessage="AreaMeasurement3DViewModel is only supported in 3D views.",e?.isDefaultViewModel||$(b.getLogger(this),"Area Measurement 3D","arcgis-area-measurement-3d",{version:"4.33"})}initialize(){this.addHandles(A(()=>({analysis:this.analysis,unit:this.unit}),({analysis:e,unit:a})=>{e!=null&&(e.unit=a)},L))}get state(){return this.disabled||!this.ready?"disabled":this.tool==null?"ready":this.tool.state}get measurement(){if(this.tool==null||this.disabled||this.tool.destroyed)return null;const{analysisView:e}=this;if(e==null)return null;const{viewData:a,areaLabel:o,perimeterLengthLabel:d}=e,u=a.validMeasurement,m=a.mode==="euclidean",l=a.intersectingSegments.size===0,p=l?u?"available":"unavailable":"invalid";return{mode:m?"euclidean":"geodesic",area:{text:l&&u?o:null,state:p},perimeterLength:{text:l&&u?d:null,state:p}}}get unitOptions(){const e=this._userUnitOptions?.filter(a=>h.includes(a));return e&&e.length>0?e:h.slice()}set unitOptions(e){this._userUnitOptions=e}get unit(){const e=this._userUnit,a=this.unitOptions;if(e&&a.includes(e))return e;const o=this.defaultUnit;return o&&a.includes(o)?o:a[0]}set unit(e){this._userUnit=e}constructAnalysis(){return new O}};t([i({type:O})],r.prototype,"analysis",void 0),t([i({readOnly:!0})],r.prototype,"state",null),t([i({readOnly:!0})],r.prototype,"measurement",null),t([i()],r.prototype,"unitOptions",null),t([i()],r.prototype,"_userUnitOptions",void 0),t([i()],r.prototype,"unit",null),t([i()],r.prototype,"_userUnit",void 0),t([i(k)],r.prototype,"defaultUnit",void 0),r=t([f("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel")],r);const U=r,y="esri-area-measurement-3d",w={base:y,newMeasurementButton:`${y}__clear-button`};let n=class extends x{constructor(s,e){super(s,e),this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.viewModel=new U({isDefaultViewModel:!0}),C(b.getLogger(this),"Area Measurement 3D","arcgis-area-measurement-3d",{version:"4.33"})}get view(){return this.viewModel.view}set view(s){this.viewModel.view=s}get visible(){return this.viewModel.visible}set visible(s){this.viewModel.visible=s}get active(){return this.viewModel.active}get analysis(){return this.viewModel.analysis}set analysis(s){this.viewModel.analysis=s}get icon(){return"measure-area"}set icon(s){this._overrideIfSome("icon",s)}get label(){return this.messages?.widgetLabel??""}set label(s){this._overrideIfSome("label",s)}get unitOptions(){return this.viewModel.unitOptions}set unitOptions(s){this.viewModel.unitOptions=s}get unit(){return this.viewModel.unit}set unit(s){this.viewModel.unit=s}render(){const{messages:s,messagesCommon:e,messagesUnits:a,unit:o,unitOptions:d,viewModel:u}=this,{active:m,measurement:l,state:p,supported:_}=u;return g("div",{"aria-label":this.messages.widgetLabel,class:this.classes(w.base,c.widget,c.panel),key:this,role:"presentation"},this.visible?g(B,{active:m,measurementItems:[{key:"direct",title:a.measures.area,value:M(l?.area)},{key:"perimeter",title:s.perimeterLength,value:M(l?.perimeterLength)}],messages:{...s,notApplicable:e.notApplicable},newMeasurementButtonClass:w.newMeasurementButton,state:p,supported:_,unit:o,unitOptions:d,onNewMeasurementClick:()=>{V(this.viewModel.start())},onUnitChange:D=>{this.unit=D}}):null)}};function M(s){return s?.state==="available"?s.text:null}t([i()],n.prototype,"view",null),t([i()],n.prototype,"visible",null),t([i()],n.prototype,"active",null),t([i({nonNullable:!0})],n.prototype,"analysis",null),t([i()],n.prototype,"icon",null),t([i()],n.prototype,"label",null),t([i(),v("esri/widgets/AreaMeasurement3D/t9n/AreaMeasurement3D")],n.prototype,"messages",void 0),t([i(),v("esri/t9n/common")],n.prototype,"messagesCommon",void 0),t([i(),v("esri/core/t9n/Units")],n.prototype,"messagesUnits",void 0),t([i()],n.prototype,"uiStrings",void 0),t([i({type:U})],n.prototype,"viewModel",void 0),t([i()],n.prototype,"unitOptions",null),t([i()],n.prototype,"unit",null),n=t([f("esri.widgets.AreaMeasurement3D")],n);const E=n;export{E as default};
