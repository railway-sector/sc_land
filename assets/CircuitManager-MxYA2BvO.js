const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/createCircuit-BgbFd49D.js","assets/index-BrQW8HOS.js","assets/index-lUE0m221.css","assets/EditCircuitsResult-yp40NqgX.js","assets/utils-jUivJs2N.js","assets/applyEditsUtils-Bdi3ieC8.js","assets/MeshTransform-wQhxY5y6.js","assets/editingSupport-5GkCZdaM.js","assets/CreateAlterCircuitParameters-CXIhUicX.js","assets/UtilityNetwork-BLUMdklD.js","assets/typeUtils-Dszw1S4V.js","assets/networkFieldUtils-CaYZrGFV.js","assets/TelecomNetworkElement-CwMWpoWJ.js","assets/NetworkElement-te1zus-P.js","assets/alterCircuit-CoBqNCo2.js","assets/deleteCircuits-lo6LLlJh.js","assets/DeleteCircuitsParameters-DFfjA_M7.js","assets/exportCircuits-DS4wuRiO.js","assets/ExportCircuitsParameters-BKn1GvHq.js","assets/verifyCircuits-BGqnSf_X.js","assets/VerifyCircuitsParameters-B4pj7lxj.js","assets/queryCircuits-UwLvUi6w.js","assets/QueryCircuitsParameters-CscbBscj.js"])))=>i.map(i=>d[i]);
import{ch as g,f,a4 as _,dM as w,U as a,dz as u,dD as d,dy as h,dt as b,_ as n,e as c,g as T}from"./index-BrQW8HOS.js";import{m as v,N as p}from"./UtilityNetwork-BLUMdklD.js";import"./typeUtils-Dszw1S4V.js";import"./networkFieldUtils-CaYZrGFV.js";import"./TelecomNetworkElement-CwMWpoWJ.js";import"./NetworkElement-te1zus-P.js";let o=class extends g{constructor(e){super(e),this._circuitTable=null,this._circuitSectionTable=null,this._subcircuitTable=null,this.telecomDomainNetwork=null,this.utilityNetwork=null}initialize(){this.addHandles([f(()=>[this.gdbVersion,this.historicMoment],()=>{this._setLayerVersionAndMoment(this._circuitTable),this._setLayerVersionAndMoment(this._circuitSectionTable),this._setLayerVersionAndMoment(this._subcircuitTable)})])}get _circuitTableUrl(){if(this.telecomDomainNetwork==null)return null;const e=this.telecomDomainNetwork.circuitSources?.find(i=>i.utilityNetworkFeatureClassUsageType==="esriUNFCUTCircuit")?.layerId??null;return e==null?null:`${this.featureServiceUrl}/${e}`}get _circuitSectionTableUrl(){if(this.telecomDomainNetwork==null)return null;const e=this.telecomDomainNetwork.circuitSources?.find(i=>i.utilityNetworkFeatureClassUsageType==="esriUNFCUTCircuitSection")?.layerId??null;return e==null?null:`${this.featureServiceUrl}/${e}`}get _subcircuitTableUrl(){if(this.telecomDomainNetwork==null)return null;const e=this.telecomDomainNetwork.circuitSources?.find(i=>i.utilityNetworkFeatureClassUsageType==="esriUNFCUTSubcircuit")?.layerId??null;return e==null?null:`${this.featureServiceUrl}/${e}`}get networkServiceUrl(){return this.utilityNetwork?.networkServiceUrl??null}get featureServiceUrl(){return this.utilityNetwork?.featureServiceUrl??null}get gdbVersion(){return this.utilityNetwork?.gdbVersion??null}get historicMoment(){return this.utilityNetwork?.historicMoment??null}get telecomDomainNetworkName(){return this.telecomDomainNetwork?.domainNetworkName??null}get circuitTable(){if(this._circuitTable!=null)return this._circuitTable;if(this._circuitTableUrl==null)throw new _("circuit-manager:missing-circuit-table-url","Unable to load the circuit table; cannot get layer url from `telecomDomainNetwork.","Ensure `telecomDomainNetwork` was provided to the circuit manager.");return this._circuitTable=new w({url:this._circuitTableUrl,gdbVersion:this.gdbVersion,historicMoment:this.historicMoment}),this._circuitTable}get circuitSectionTable(){if(this._circuitSectionTable!=null)return this._circuitSectionTable;if(this._circuitSectionTableUrl==null)throw new _("circuit-manager:missing-circuit-section-table-url","Unable to load the circuit section table; cannot get layer url from `telecomDomainNetwork.","Ensure `telecomDomainNetwork` was provided to the circuit manager.");return this._circuitSectionTable=new w({url:this._circuitSectionTableUrl,gdbVersion:this.gdbVersion,historicMoment:this.historicMoment}),this._circuitSectionTable}get subcircuitTable(){if(this._subcircuitTable!=null)return this._subcircuitTable;if(this._subcircuitTableUrl==null)throw new _("circuit-manager:missing-subcircuit-table-url","Unable to load the subcircuit table; cannot get layer url from `telecomDomainNetwork.","Ensure `telecomDomainNetwork` was provided to the circuit manager.");return this._subcircuitTable=new w({url:this._subcircuitTableUrl,gdbVersion:this.gdbVersion,historicMoment:this.historicMoment}),this._subcircuitTable}async loadCircuitTable(){return this.circuitTable.load()}async loadCircuitSectionTable(){return this.circuitSectionTable.load()}async loadSubcircuitTable(){return this.subcircuitTable.load()}getCircuit(e,i=!1){return new v({circuitManager:this,name:e,sections:i?new Map:null})}async create(e){const[{createCircuit:i},{default:l}]=await Promise.all([a(()=>import("./createCircuit-BgbFd49D.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),a(()=>import("./CreateAlterCircuitParameters-CXIhUicX.js"),__vite__mapDeps([8,1,2,9,10,11,12,13]))]),t=l.from({circuit:e,domainNetworkName:this.telecomDomainNetworkName});u(this.featureServiceUrl,this.gdbVersion||null)?(t.sessionId=d,await h(this.featureServiceUrl,this.gdbVersion,!0)):t.sessionId=null,t.gdbVersion=this.gdbVersion;const s=b(this.featureServiceUrl,null,this.gdbVersion,!1),r=await i(this.networkServiceUrl,t);e.circuitManager=this,s.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:r.exceededTransferLimit,historicMoment:r.moment,editedFeatures:r.serviceEdits||void 0})}async alter(e){if(e.globalId==null)throw new _("circuit-manager:alter-without-globalid","A circuit being altered must have a globalId","To ensure the circuit has a globalId, query the circuit first");const[{alterCircuit:i},{default:l}]=await Promise.all([a(()=>import("./alterCircuit-CoBqNCo2.js"),__vite__mapDeps([14,1,2,3,4,5,6,7])),a(()=>import("./CreateAlterCircuitParameters-CXIhUicX.js"),__vite__mapDeps([8,1,2,9,10,11,12,13]))]),t=l.from({circuit:e,domainNetworkName:this.telecomDomainNetworkName});u(this.featureServiceUrl,this.gdbVersion||null)?(t.sessionId=d,await h(this.featureServiceUrl,this.gdbVersion,!0)):t.sessionId=null,t.gdbVersion=this.gdbVersion;const s=b(this.featureServiceUrl,null,this.gdbVersion,!1),r=await i(this.networkServiceUrl,t);e.circuitManager=this,s.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:r.exceededTransferLimit,historicMoment:r.moment,editedFeatures:r.serviceEdits||void 0})}async delete(e){const[{deleteCircuits:i},{default:l}]=await Promise.all([a(()=>import("./deleteCircuits-lo6LLlJh.js"),__vite__mapDeps([15,1,2,3,4,5,6,7])),a(()=>import("./DeleteCircuitsParameters-DFfjA_M7.js"),__vite__mapDeps([16,1,2]))]),t=l.from({circuits:e,domainNetworkName:this.telecomDomainNetworkName});u(this.featureServiceUrl,this.gdbVersion||null)?(t.sessionId=d,await h(this.featureServiceUrl,this.gdbVersion,!0)):t.sessionId=null,t.gdbVersion=this.gdbVersion;const s=b(this.featureServiceUrl,null,this.gdbVersion,!1),r=await i(this.networkServiceUrl,t);s.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:r.exceededTransferLimit,historicMoment:r.moment,editedFeatures:r.serviceEdits||void 0})}async export(e){const[{exportCircuits:i},{default:l}]=await Promise.all([a(()=>import("./exportCircuits-DS4wuRiO.js"),__vite__mapDeps([17,1,2,4,5,6,7])),a(()=>import("./ExportCircuitsParameters-BKn1GvHq.js"),__vite__mapDeps([18,1,2]))]),t=l.from(e);u(this.featureServiceUrl,this.gdbVersion||null)?(t.sessionId=d,await h(this.featureServiceUrl,this.gdbVersion,!0)):t.sessionId=null,t.domainNetworkName=this.telecomDomainNetworkName,t.gdbVersion=this.gdbVersion,t.moment=this.historicMoment;const s=b(this.featureServiceUrl,null,this.gdbVersion,!1),r=await i(this.networkServiceUrl,t);return s.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:r.exceededTransferLimit,historicMoment:r.moment,editedFeatures:r.serviceEdits||void 0}),r.circuits}async verify(e,i=!1){const[{verifyCircuits:l},{default:t}]=await Promise.all([a(()=>import("./verifyCircuits-BGqnSf_X.js"),__vite__mapDeps([19,1,2,4,5,6,7])),a(()=>import("./VerifyCircuitsParameters-B4pj7lxj.js"),__vite__mapDeps([20,1,2]))]),s=t.from({circuits:e,synthesizeGeometries:i,domainNetworkName:this.telecomDomainNetworkName});u(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionId=d,await h(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionId=null,s.gdbVersion=this.gdbVersion;const r=b(this.featureServiceUrl,null,this.gdbVersion,!1),m=await l(this.networkServiceUrl,s);return r.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:m.exceededTransferLimit,historicMoment:m.moment,editedFeatures:m.serviceEdits||void 0}),m.circuits}async queryCircuits(e){const[{queryCircuits:i},{default:l}]=await Promise.all([a(()=>import("./queryCircuits-UwLvUi6w.js"),__vite__mapDeps([21,1,2,9,10,11,12,13])),a(()=>import("./QueryCircuitsParameters-CscbBscj.js"),__vite__mapDeps([22,1,2,9,10,11,12,13]))]),t=Array.isArray(e)?{circuits:e}:e,s=l.from(t);u(this.featureServiceUrl,this.gdbVersion||null)?s.sessionId=d:s.sessionId=null,s.domainNetworkName=this.telecomDomainNetworkName,s.resultTypes=["circuit"],s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment;const r=await i(this.networkServiceUrl,s);return r.circuits?.forEach(m=>m.circuitManager=this),r.circuits||[]}async queryCircuitNames(e){const[{queryCircuits:i},{default:l}]=await Promise.all([a(()=>import("./queryCircuits-UwLvUi6w.js"),__vite__mapDeps([21,1,2,9,10,11,12,13])),a(()=>import("./QueryCircuitsParameters-CscbBscj.js"),__vite__mapDeps([22,1,2,9,10,11,12,13]))]),t=l.from(e);return u(this.featureServiceUrl,this.gdbVersion||null)?t.sessionId=d:t.sessionId=null,t.domainNetworkName=this.telecomDomainNetworkName,t.resultTypes=["name"],t.gdbVersion=this.gdbVersion,t.moment=this.historicMoment,(await i(this.networkServiceUrl,t)).circuitNames||[]}_setLayerVersionAndMoment(e){e!=null&&(e.gdbVersion!==this.gdbVersion&&(e.gdbVersion=this.gdbVersion),e.historicMoment!==this.historicMoment&&(e.historicMoment=this.historicMoment))}};n([c()],o.prototype,"_circuitTable",void 0),n([c()],o.prototype,"_circuitSectionTable",void 0),n([c()],o.prototype,"_subcircuitTable",void 0),n([c({constructOnly:!0})],o.prototype,"telecomDomainNetwork",void 0),n([c({type:p,constructOnly:!0})],o.prototype,"utilityNetwork",void 0),n([c()],o.prototype,"networkServiceUrl",null),n([c()],o.prototype,"featureServiceUrl",null),n([c()],o.prototype,"gdbVersion",null),n([c()],o.prototype,"historicMoment",null),n([c()],o.prototype,"telecomDomainNetworkName",null),n([c()],o.prototype,"circuitTable",null),n([c()],o.prototype,"circuitSectionTable",null),n([c()],o.prototype,"subcircuitTable",null),o=n([T("esri.networks.CircuitManager")],o);const D=o;export{D as default};
