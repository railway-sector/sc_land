const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ImageryTileLayer-Bw8EVTFT.js","assets/index-BrQW8HOS.js","assets/index-lUE0m221.css","assets/isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/xmlUtilities-0Gc5qIUC.js","assets/multidimensionalUtils-C73Q5ZGV.js","assets/RasterJobHandlerMixin-MT2g2T_q.js","assets/RasterSymbolizer-B2A1UV2B.js","assets/PixelBlock-BLuOu6Ty.js","assets/pixelRangeUtils-BvOub3JO.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/vectorFieldUtils-BtFp6QX2.js","assets/datasetUtils-DdDUWBI2.js","assets/utils-6_NAbAK3.js","assets/cimSymbolUtils-CmFYUdpV.js","assets/gfxUtils-DDSu4Luj.js","assets/ClassBreaksDefinition-Bdvs4GrJ.js","assets/dataUtils-GsysffW0.js","assets/QueueProcessor-CL6qRd0z.js","assets/RawBlockCache-Dkglau7b.js","assets/rasterProjectionHelper-daQRJxKm.js","assets/clipUtils-C90NVAfo.js","assets/rasterFunctionHelper-CVPDO2RW.js","assets/RasterPresetRendererMixin-B-VKGZPd.js","assets/rasterFieldUtils-Ch69mkjb.js","assets/PolynomialTransform-B3lvtn1Q.js"])))=>i.map(i=>d[i]);
import{dq as g,U as m,ds as p,a4 as u,_ as n,e as d,g as _}from"./index-BrQW8HOS.js";import{i as c}from"./RasterJobHandlerMixin-MT2g2T_q.js";import"./multidimensionalUtils-C73Q5ZGV.js";import"./RasterSymbolizer-B2A1UV2B.js";import"./PixelBlock-BLuOu6Ty.js";import"./pixelRangeUtils-BvOub3JO.js";import"./_commonjsHelpers-DCkdB7M8.js";import"./vectorFieldUtils-BtFp6QX2.js";import"./datasetUtils-DdDUWBI2.js";import"./utils-6_NAbAK3.js";import"./cimSymbolUtils-CmFYUdpV.js";import"./gfxUtils-DDSu4Luj.js";import"./ClassBreaksDefinition-Bdvs4GrJ.js";import"./dataUtils-GsysffW0.js";let a=class extends c(g){constructor(t){super(t)}load(t){return this.addResolvingPromise(this._fetchPixels(t)),Promise.resolve(this)}destroy(){this._source=null}get height(){return this._get("height")}get width(){return this._get("width")}async _fetchPixels(t){const i=(await m(async()=>{const{default:h}=await import("./ImageryTileLayer-Bw8EVTFT.js").then(l=>l.R);return{default:h}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]))).default,e=await i.open({url:this.url,ioConfig:{skipExtensions:["jgw","aux.xml"],skipMapInfo:!0},signal:t?.signal});if(p(t),e==null)throw new u("depth-image-service:open-error","Failed to open depth image raster.",{url:this.url});const{width:r,height:o}=e.rasterInfo;await this._initJobHandler(),p(t),e.rasterJobHandler=this._rasterJobHandler;const{pixelBlock:s}=await e.fetchPixels(e.rasterInfo.nativeExtent.clone(),r,o,{noClip:!1,signal:t?.signal});if(p(t),s==null)throw new u("depth-image-service:fetch-error","Failed to fetch depth image pixels.");this._set("width",s.width),this._set("height",s.height),this._source=s.pixels[0]}_getDepthValue(t,i){const e=Math.max(1,Math.min(this.width,t)),r=Math.max(1,Math.min(this.height,i));return this._source[(r-1)*this.width+(e-1)]}_interpolateDepth(t,i){const e=Math.floor(i),r=Math.ceil(i),o=Math.floor(t),s=Math.ceil(t),h=i-e,l=t-o;return(this._getDepthValue(e,o)*(1-h)+this._getDepthValue(r,o)*h)*(1-l)+(this._getDepthValue(e,s)*(1-h)+this._getDepthValue(r,s)*h)*l}depthAt(t,i){if(!this.loaded||!this._source)throw new Error("DepthImageService must be loaded before sampling depth.");const e=t.x/i.width*this.width,r=t.y/i.height*this.height;return this._interpolateDepth(r,e)}};n([d({readOnly:!0,value:0})],a.prototype,"height",null),n([d()],a.prototype,"url",void 0),n([d({readOnly:!0,value:0})],a.prototype,"width",null),a=n([_("esri.widgets.OrientedImageryViewer.services.DepthImageService")],a);const k=a;export{k as default};
