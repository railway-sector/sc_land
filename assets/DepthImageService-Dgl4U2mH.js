const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ImageryTileLayer-DgPV_a3H.js","assets/index-CgzAF5Ey.js","assets/index-ni9qn0ie.css","assets/isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/xmlUtilities-DhOJzv6R.js","assets/multidimensionalUtils-D7s9wCrf.js","assets/RasterJobHandlerMixin-BTYQtDU0.js","assets/RasterSymbolizer-B91KBOTk.js","assets/PixelBlock-D-6P5OMc.js","assets/pixelRangeUtils-BvOub3JO.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/vectorFieldUtils-BfvwBWsN.js","assets/datasetUtils-DdDUWBI2.js","assets/utils-BxeCvIiv.js","assets/cimSymbolUtils-D8zbHeXT.js","assets/gfxUtils-B1R76T6S.js","assets/ClassBreaksDefinition-8EN4J2v2.js","assets/dataUtils-Bl6288_r.js","assets/QueueProcessor-DIiVPdhP.js","assets/RawBlockCache-CXmw_9Mx.js","assets/rasterProjectionHelper-FtdA54qR.js","assets/clipUtils-CpEsp-yF.js","assets/rasterFunctionHelper-CIXquxIf.js","assets/RasterPresetRendererMixin-B7AjuQMT.js","assets/rasterFieldUtils-owWC2Tqk.js","assets/PolynomialTransform-BTUf5vGs.js"])))=>i.map(i=>d[i]);
import{dn as g,V as m,dq as p,a5 as u,_ as n,e as d,g as _}from"./index-CgzAF5Ey.js";import{i as c}from"./RasterJobHandlerMixin-BTYQtDU0.js";import"./multidimensionalUtils-D7s9wCrf.js";import"./RasterSymbolizer-B91KBOTk.js";import"./PixelBlock-D-6P5OMc.js";import"./pixelRangeUtils-BvOub3JO.js";import"./_commonjsHelpers-DCkdB7M8.js";import"./vectorFieldUtils-BfvwBWsN.js";import"./datasetUtils-DdDUWBI2.js";import"./utils-BxeCvIiv.js";import"./cimSymbolUtils-D8zbHeXT.js";import"./gfxUtils-B1R76T6S.js";import"./ClassBreaksDefinition-8EN4J2v2.js";import"./dataUtils-Bl6288_r.js";let a=class extends c(g){constructor(t){super(t)}load(t){return this.addResolvingPromise(this._fetchPixels(t)),Promise.resolve(this)}destroy(){this._source=null}get height(){return this._get("height")}get width(){return this._get("width")}async _fetchPixels(t){const i=(await m(async()=>{const{default:h}=await import("./ImageryTileLayer-DgPV_a3H.js").then(l=>l.R);return{default:h}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]))).default,e=await i.open({url:this.url,ioConfig:{skipExtensions:["jgw","aux.xml"],skipMapInfo:!0},signal:t?.signal});if(p(t),e==null)throw new u("depth-image-service:open-error","Failed to open depth image raster.",{url:this.url});const{width:r,height:o}=e.rasterInfo;await this._initJobHandler(),p(t),e.rasterJobHandler=this._rasterJobHandler;const{pixelBlock:s}=await e.fetchPixels(e.rasterInfo.nativeExtent.clone(),r,o,{noClip:!1,signal:t?.signal});if(p(t),s==null)throw new u("depth-image-service:fetch-error","Failed to fetch depth image pixels.");this._set("width",s.width),this._set("height",s.height),this._source=s.pixels[0]}_getDepthValue(t,i){const e=Math.max(1,Math.min(this.width,t)),r=Math.max(1,Math.min(this.height,i));return this._source[(r-1)*this.width+(e-1)]}_interpolateDepth(t,i){const e=Math.floor(i),r=Math.ceil(i),o=Math.floor(t),s=Math.ceil(t),h=i-e,l=t-o;return(this._getDepthValue(e,o)*(1-h)+this._getDepthValue(r,o)*h)*(1-l)+(this._getDepthValue(e,s)*(1-h)+this._getDepthValue(r,s)*h)*l}depthAt(t,i){if(!this.loaded||!this._source)throw new Error("DepthImageService must be loaded before sampling depth.");const e=t.x/i.width*this.width,r=t.y/i.height*this.height;return this._interpolateDepth(r,e)}};n([d({readOnly:!0,value:0})],a.prototype,"height",null),n([d()],a.prototype,"url",void 0),n([d({readOnly:!0,value:0})],a.prototype,"width",null),a=n([_("esri.widgets.OrientedImageryViewer.services.DepthImageService")],a);const k=a;export{k as default};
