import{rp as L,$ as w,f as $,Z as U,d7 as c,_ as i,e as s,g as M,S as x,n3 as V,V as m,b1 as z,bJ as v,a0 as h}from"./index-BrQW8HOS.js";import{p as b}from"./DirectLineMeasurementAnalysis-DJejPt6K.js";import{e as C}from"./defaultUnit-DpiDHKcy.js";import{_ as k}from"./AnalysisViewModel-Cz0rMkn4.js";import{u as B}from"./MeasurementWidgetContent-CACDOwBs.js";import"./Analysis-C-6kf-N-.js";import"./getDefaultUnitForView-KDHdLbNY.js";import"./UnitSelect-8DP5dFVk.js";let l=class extends k{constructor(t){super(t),this.analysis=null,this._userUnitOptions=null,this._userUnit=null,this.supportedViewType="3d",this.unsupportedErrorMessage="DirectLineMeasurement3DViewModel is only supported in 3D views.",t?.isDefaultViewModel||L(w.getLogger(this),"Direct Line Measurement 3D","arcgis-direct-line-measurement-3d",{version:"4.33"})}initialize(){this.addHandles($(()=>({analysis:this.analysis,unit:this.unit}),({analysis:t,unit:r})=>{t!=null&&(t.unit=r)},U))}get state(){return this.disabled||!this.ready?"disabled":this.tool==null?"ready":this.tool.state}get measurement(){const{tool:t}=this;if(t==null)return null;const r=()=>({text:null,state:"unavailable"}),o=p=>({text:p,state:"available"}),{analysisViewData:a}=t,u=a.result!=null;return{mode:a.result?.mode??"euclidean",directDistance:u&&a.actualVisualizedMeasurement==="euclidean"?o(a.directLabelText):r(),horizontalDistance:u?o(a.horizontalLabelText):r(),verticalDistance:u?o(a.verticalLabelText):r()}}get unitOptions(){const t=this._userUnitOptions?.filter(r=>c.includes(r));return t&&t.length>0?t:c.slice()}set unitOptions(t){this._userUnitOptions=t}get unit(){const t=this._userUnit,r=this.unitOptions;if(t&&r.includes(t))return t;const o=this.defaultUnit;return o&&r.includes(o)?o:r[0]}set unit(t){this._userUnit=t}constructAnalysis(){return new b}};i([s({type:b})],l.prototype,"analysis",void 0),i([s({readOnly:!0})],l.prototype,"state",null),i([s({readOnly:!0})],l.prototype,"measurement",null),i([s()],l.prototype,"unitOptions",null),i([s()],l.prototype,"_userUnitOptions",void 0),i([s()],l.prototype,"unit",null),i([s()],l.prototype,"_userUnit",void 0),i([s(C)],l.prototype,"defaultUnit",void 0),l=i([M("esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel")],l);const D=l,y="esri-direct-line-measurement-3d",g={base:y,newMeasurementButton:`${y}__clear-button`};let n=class extends x{constructor(e,t){super(e,t),this.messages=null,this.messagesCommon=null,this.viewModel=new D({isDefaultViewModel:!0}),V(w.getLogger(this),"Direct Line Measurement 3D","arcgis-direct-line-measurement-3d",{version:"4.33"})}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}get active(){return this.viewModel.active}get analysis(){return this.viewModel.analysis}set analysis(e){this.viewModel.analysis=e}get icon(){return"measure-line"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get unitOptions(){return this.viewModel.unitOptions}set unitOptions(e){this.viewModel.unitOptions=e}get unit(){return this.viewModel.unit}set unit(e){this.viewModel.unit=e}render(){const{messages:e,messagesCommon:t,unit:r,unitOptions:o,viewModel:a}=this,{active:u,measurement:p,state:f,supported:O}=a;return m("div",{"aria-label":this.messages.widgetLabel,class:this.classes(g.base,v.widget,v.panel),key:this,role:"presentation"},this.visible?m(B,{active:u,measurementItems:[{key:"direct",title:e.direct,value:d(p?.directDistance)},{key:"horizontal",title:e.horizontal,value:d(p?.horizontalDistance)},{key:"vertical",title:e.vertical,value:d(p?.verticalDistance)}],messages:{...e,notApplicable:t?.notApplicable},newMeasurementButtonClass:g.newMeasurementButton,state:f,supported:O,unit:r,unitOptions:o,onNewMeasurementClick:()=>{z(this.viewModel.start())},onUnitChange:_=>{this.unit=_}}):null)}};function d(e){return e?.state==="available"?e.text:null}i([s()],n.prototype,"view",null),i([s()],n.prototype,"visible",null),i([s()],n.prototype,"active",null),i([s({nonNullable:!0})],n.prototype,"analysis",null),i([s()],n.prototype,"icon",null),i([s()],n.prototype,"label",null),i([s(),h("esri/widgets/DirectLineMeasurement3D/t9n/DirectLineMeasurement3D")],n.prototype,"messages",void 0),i([s(),h("esri/t9n/common")],n.prototype,"messagesCommon",void 0),i([s()],n.prototype,"uiStrings",void 0),i([s({type:D})],n.prototype,"viewModel",void 0),i([s()],n.prototype,"unitOptions",null),i([s()],n.prototype,"unit",null),n=i([M("esri.widgets.DirectLineMeasurement3D")],n);const j=n;export{j as default};
