import{qS as _,a4 as g,k as $,a3 as U,qV as c,qW as M,Z as i,$ as s,a0 as b,W as x,mX as V,Y as m,aY as z,bA as v,a6 as h}from"./index-Bp3GeDhQ.js";import{e as k}from"./defaultUnit-Bhu2r0Gs.js";import{_ as C}from"./AnalysisViewModel-C3m7zR5b.js";import{u as A}from"./MeasurementWidgetContent-CCDYDC-p.js";import"./UnitSelect-B86sTHB1.js";let r=class extends C{constructor(t){super(t),this.analysis=null,this._userUnitOptions=null,this._userUnit=null,this.supportedViewType="3d",this.unsupportedErrorMessage="DirectLineMeasurement3DViewModel is only supported in 3D views.",t?.isDefaultViewModel||_(g.getLogger(this),"Direct Line Measurement 3D","arcgis-direct-line-measurement-3d",{version:"4.33"})}initialize(){this.addHandles($(()=>({analysis:this.analysis,unit:this.unit}),({analysis:t,unit:l})=>{t!=null&&(t.unit=l)},U))}get state(){return this.disabled||!this.ready?"disabled":this.tool==null?"ready":this.tool.state}get measurement(){const{tool:t}=this;if(t==null)return null;const l=()=>({text:null,state:"unavailable"}),a=p=>({text:p,state:"available"}),{analysisViewData:o}=t,u=o.result!=null;return{mode:o.result?.mode??"euclidean",directDistance:u&&o.actualVisualizedMeasurement==="euclidean"?a(o.directLabelText):l(),horizontalDistance:u?a(o.horizontalLabelText):l(),verticalDistance:u?a(o.verticalLabelText):l()}}get unitOptions(){const t=this._userUnitOptions?.filter(l=>c.includes(l));return t&&t.length>0?t:c.slice()}set unitOptions(t){this._userUnitOptions=t}get unit(){const t=this._userUnit,l=this.unitOptions;if(t&&l.includes(t))return t;const a=this.defaultUnit;return a&&l.includes(a)?a:l[0]}set unit(t){this._userUnit=t}constructAnalysis(){return new M}};i([s({type:M})],r.prototype,"analysis",void 0),i([s({readOnly:!0})],r.prototype,"state",null),i([s({readOnly:!0})],r.prototype,"measurement",null),i([s()],r.prototype,"unitOptions",null),i([s()],r.prototype,"_userUnitOptions",void 0),i([s()],r.prototype,"unit",null),i([s()],r.prototype,"_userUnit",void 0),i([s(k)],r.prototype,"defaultUnit",void 0),r=i([b("esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel")],r);const D=r,y="esri-direct-line-measurement-3d",w={base:y,newMeasurementButton:`${y}__clear-button`};let n=class extends x{constructor(e,t){super(e,t),this.messages=null,this.messagesCommon=null,this.viewModel=new D({isDefaultViewModel:!0}),V(g.getLogger(this),"Direct Line Measurement 3D","arcgis-direct-line-measurement-3d",{version:"4.33"})}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}get active(){return this.viewModel.active}get analysis(){return this.viewModel.analysis}set analysis(e){this.viewModel.analysis=e}get icon(){return"measure-line"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get unitOptions(){return this.viewModel.unitOptions}set unitOptions(e){this.viewModel.unitOptions=e}get unit(){return this.viewModel.unit}set unit(e){this.viewModel.unit=e}render(){const{messages:e,messagesCommon:t,unit:l,unitOptions:a,viewModel:o}=this,{active:u,measurement:p,state:O,supported:f}=o;return m("div",{"aria-label":this.messages.widgetLabel,class:this.classes(w.base,v.widget,v.panel),key:this,role:"presentation"},this.visible?m(A,{active:u,measurementItems:[{key:"direct",title:e.direct,value:d(p?.directDistance)},{key:"horizontal",title:e.horizontal,value:d(p?.horizontalDistance)},{key:"vertical",title:e.vertical,value:d(p?.verticalDistance)}],messages:{...e,notApplicable:t?.notApplicable},newMeasurementButtonClass:w.newMeasurementButton,state:O,supported:f,unit:l,unitOptions:a,onNewMeasurementClick:()=>{z(this.viewModel.start())},onUnitChange:L=>{this.unit=L}}):null)}};function d(e){return e?.state==="available"?e.text:null}i([s()],n.prototype,"view",null),i([s()],n.prototype,"visible",null),i([s()],n.prototype,"active",null),i([s({nonNullable:!0})],n.prototype,"analysis",null),i([s()],n.prototype,"icon",null),i([s()],n.prototype,"label",null),i([s(),h("esri/widgets/DirectLineMeasurement3D/t9n/DirectLineMeasurement3D")],n.prototype,"messages",void 0),i([s(),h("esri/t9n/common")],n.prototype,"messagesCommon",void 0),i([s()],n.prototype,"uiStrings",void 0),i([s({type:D})],n.prototype,"viewModel",void 0),i([s()],n.prototype,"unitOptions",null),i([s()],n.prototype,"unit",null),n=i([b("esri.widgets.DirectLineMeasurement3D")],n);const W=n;export{W as default};
