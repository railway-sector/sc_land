import{_ as e,g as u,Y as c,e as i,ao as m,y as v,f as y,Z as d,l5 as _,as as w,a4 as g}from"./index-BrQW8HOS.js";import{n as f}from"./AnalysisView-CF6VBElW.js";import{o as V,l as D,a as P,k as b,n as z,u as k,b as T,L as $}from"./ElevationProfileTool-CnIOkSI6.js";import{l as O}from"./throttle-CTJgdIni.js";import{n as S}from"./GraphicsLayer-CtVknZ1a.js";import{i as U}from"./elevationProfileGenerationUtils-B6RIgc1c.js";import"./createUtils-BntPyFG2.js";import"./Circle-CDzQBXRC.js";import"./geodesicUtils-BJZXB7Hp.js";import"./distanceOperator-BeiDdpLt.js";import"./Point2D-DNXcsliy.js";import"./Distance2DCalculator-CXhBP-8I-Dkb8-KBJ.js";import"./ProjectionTransformation-BjD312Kq.js";import"./Envelope2D-CUWyosZh.js";import"./Transformation2D-BUBnKQZf.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./OperatorDefinitions-DP7_WWTp.js";import"./apiConverter---8F7iZ4.js";import"./jsonConverter-BHYd2kGf.js";import"./simplifyOperator-BQVvn5Fy.js";import"./operatorSimplify-C16tE3lk.js";import"./surfaceCoordinateSystems-BrNYf00T.js";import"./mat2d-BbBq4Byx.js";import"./mat2df64-DJ_RMjZ3.js";import"./getDefaultUnitForView-KDHdLbNY.js";import"./elevationProfileGeometryUtils-u3tjjsiT.js";import"./ExclusiveOperationManager-Cw2vgAvY.js";import"./SketchViewModel-NRhuw9HA.js";import"./isSupportedObject-DknMXN_6.js";import"./layerUtils-CdCZXuDJ.js";import"./SketchLabelOptions-BPF5xZLI.js";import"./SketchOptions-CHLlByzL.js";import"./SnappingManager-BWOfKl0d.js";import"./euclideanLengthMeasurementUtils-B8AL_WaV.js";import"./utils-D_VO_1nP.js";import"./geometry2dUtils-kADrF-iP.js";import"./geodeticLengthOperator-DifrZujk.js";import"./geodeticCurveType-CirnHLSB.js";import"./geodesicMeasurementUtils-CQw8IWGR.js";import"./automaticAreaMeasurementUtils-dI3X5owW.js";import"./geodesicAreaMeasurementUtils-CPlOyDe5.js";import"./earcut-D9gy186-.js";import"./automaticLengthMeasurementUtils-Cr-y0OEN.js";let h=class extends f{};h=e([u("esri.views.2d.analysis.AnalysisView2D")],h);let n=class extends c{constructor(t){super(t)}initialize(){this.addHandles(V({analysisViewData:this.analysisViewData,remove:()=>{},show:()=>{}}))}get updating(){return!1}};e([i({constructOnly:!0})],n.prototype,"view",void 0),e([i({constructOnly:!0})],n.prototype,"analysisViewData",void 0),e([i()],n.prototype,"updating",null),n=e([u("esri.views.2d.analysis.ElevationProfile.ElevationProfileInputVisualization2D")],n);let a=class extends c{constructor(t){super(t),this._graphic=new m,this._layer=new S({listMode:"hide",internal:!0}),this._updateGeometryThrottled=O(s=>{if(!s)return void(this._graphic.visible=!1);const o=this._layer,l=this.view.map?.layers;l&&(l.includes(o)||l.add(o),l.reorder(o,0)),this._graphic.visible=!0,this._graphic.geometry=D(s.samples,s.spatialReference)},U().profileLinesUpdateThrottleMillis)}initialize(){this._layer.add(this._graphic),this.addHandles([v(()=>!this.analysisViewData.visible,()=>{this._graphic.visible=!1}),y(()=>this._colorUpdateParameters,t=>this._updateColor(t),d),y(()=>this.analysisViewData.analysis.geometry,()=>{this._graphic.visible=!1},d),y(()=>this._geometryUpdateParameters,t=>this._updateGeometryThrottled(t),d),this._updateGeometryThrottled])}destroy(){this.view.map?.remove(this._layer),this._layer.destroy(),this._graphic.destroy()}get updating(){return this._updateGeometryThrottled.hasPendingUpdates()}get _result(){const{analysisViewData:t}=this;return t.visible?t.results.find(({available:s,computation:o,rawResult:l})=>s&&o.profile.viewOptions.lineVisible&&l?.hasZ===!0):null}get _geometryUpdateParameters(){const t=this._result;return t?.progress!==1?null:{samples:t.samples,spatialReference:this.view.spatialReference}}get _colorUpdateParameters(){const t=this._result?.computation.profile.color;return t?{color:t.toArray(),contrastColor:_(t).toArray()}:null}_updateColor(t){t&&(this._graphic.symbol=new w({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",capStyle:"Butt",color:t.color,effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,4],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],joinStyle:"Round",width:1.5},{type:"CIMSolidStroke",capStyle:"Butt",color:t.contrastColor,joinStyle:"Round",width:1.5}]}}}))}};e([i({constructOnly:!0})],a.prototype,"view",void 0),e([i({constructOnly:!0})],a.prototype,"analysisViewData",void 0),e([i()],a.prototype,"updating",null),e([i()],a.prototype,"_result",null),e([i()],a.prototype,"_geometryUpdateParameters",null),e([i()],a.prototype,"_colorUpdateParameters",null),a=e([u("esri.views.2d.analysis.ElevationProfile.ElevationProfileLineVisualization2D")],a);let p=class extends c{constructor(t){super(t)}initialize(){const{view:t,analysisViewData:s}=this;this._hoveredPointsVisualization=new P({view:t,analysisViewData:s}),this._inputVisualization=new n({view:t,analysisViewData:s}),this._lineVisualization=new a({view:t,analysisViewData:s})}destroy(){this._inputVisualization.destroy(),this._hoveredPointsVisualization.destroy(),this._lineVisualization.destroy()}get updating(){return this._hoveredPointsVisualization.updating||this._inputVisualization.updating||this._lineVisualization.updating}};e([i()],p.prototype,"view",void 0),e([i()],p.prototype,"analysisViewData",void 0),e([i()],p.prototype,"updating",null),p=e([u("esri.views.2d.analysis.ElevationProfile.ElevationProfileVisualization2D")],p);let r=class extends h{constructor(t){super(t),this.type="elevation-profile-view-2d",this.analysis=null,this.hoveredPosition=null}initialize(){const{analysis:t,view:s}=this;this._controller=new b({analysis:t,analysisViewData:this,view:s,computationFactory:{create:o=>{switch(o.profile.type){case"ground":return new T(o);case"input":return new k(o);case"query":return new z(o);case"scene":throw new g("elevation-profile-analysis-view-2d:unsupported","The scene profile line type is not supported in 2D views.")}}}}),this._visualization=new p({view:s,analysisViewData:this}),this._sketchTool=new $({view:s,analysisViewData:this})}destroy(){this._controller?.destroy(),this._visualization?.destroy(),this._sketchTool?.destroy()}get effectiveDisplayUnits(){return this._controller?.effectiveDisplayUnits??{distance:"meters",elevation:"meters"}}get error(){return this._controller?.error}get hoveredPoints(){return this._controller?.hoveredPoints??[]}get interactive(){return super.interactive}set interactive(t){super.interactive=t}get progress(){return this._controller?.progress??0}get results(){return this._controller?.results??[]}get statistics(){return this._controller?.statistics}get updating(){return this._controller?.updating===!0||this._visualization?.updating===!0||this._sketchTool?.updating===!0}get visible(){return super.visible}set visible(t){super.visible=t}get sketchGraphic(){return this._sketchTool?.sketchGraphic}get toolState(){return this._sketchTool?.state??"idle"}place(t){return this._sketchTool.place(t)}pickFeature(t){return this._sketchTool.pickFeature(t)}};e([i({readOnly:!0})],r.prototype,"type",void 0),e([i({constructOnly:!0,nonNullable:!0})],r.prototype,"analysis",void 0),e([i({readOnly:!0})],r.prototype,"effectiveDisplayUnits",null),e([i({readOnly:!0})],r.prototype,"error",null),e([i()],r.prototype,"hoveredPosition",void 0),e([i()],r.prototype,"hoveredPoints",null),e([i({readOnly:!0})],r.prototype,"progress",null),e([i({readOnly:!0})],r.prototype,"results",null),e([i({readOnly:!0})],r.prototype,"statistics",null),e([i({readOnly:!0})],r.prototype,"updating",null),e([i()],r.prototype,"sketchGraphic",null),e([i()],r.prototype,"toolState",null),e([i()],r.prototype,"_controller",void 0),e([i()],r.prototype,"_visualization",void 0),e([i()],r.prototype,"_sketchTool",void 0),r=e([u("esri.views.2d.analysis.ElevationProfileAnalysisView2D")],r);const Dt=r;export{Dt as default};
