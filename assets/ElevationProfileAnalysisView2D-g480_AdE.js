import{Z as e,a0 as u,a2 as c,$ as i,aj as m,q as v,k as y,a3 as d,kW as _,an as w,bz as g}from"./index-Bp3GeDhQ.js";import{n as f}from"./AnalysisView-IUq6tBEc.js";import{o as V,l as D,a as P,k as b,n as z,u as k,b as $,L as T}from"./ElevationProfileTool-DVzsWQSw.js";import{l as O}from"./throttle-DY3N7fox.js";import{n as S}from"./GraphicsLayer-n_skBp8O.js";import{i as U}from"./elevationProfileGenerationUtils-D-lbcUk0.js";import"./createUtils-5tKs90WA.js";import"./Circle-CsXSHXzA.js";import"./distanceOperator-nvWTbr2e.js";import"./Point2D-8Py_srEd.js";import"./Distance2DCalculator-CXhBP-8I-4Klp7zPt.js";import"./ProjectionTransformation-lQCY9pCU.js";import"./Envelope2D-DQ3Tn1o-.js";import"./Transformation2D-Ckyhe4wc.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./OperatorDefinitions-DP7_WWTp.js";import"./apiConverter-jueJBHyz.js";import"./jsonConverter-DUGRtN2X.js";import"./simplifyOperator-StSk-cWv.js";import"./operatorSimplify-Dc-q6rdc.js";import"./surfaceCoordinateSystems-1qYrNKOW.js";import"./elevationProfileGeometryUtils-B5bOjL0t.js";import"./ExclusiveOperationManager-CduBC6ys.js";import"./SketchViewModel-BRoViF94.js";import"./isSupportedObject-BoTASd6h.js";import"./layerUtils-D3xv-kL2.js";import"./SketchLabelOptions-CvfS2rfH.js";import"./SketchOptions-DkZT37r7.js";import"./SnappingManager-BICxJWyY.js";import"./euclideanLengthMeasurementUtils-D9l_P3ES.js";import"./geometry2dUtils-2tpfJ_8-.js";import"./geodeticLengthOperator-i8Sfrrr_.js";import"./geodeticCurveType-CirnHLSB.js";import"./automaticAreaMeasurementUtils-DsNHnpIJ.js";import"./geodesicAreaMeasurementUtils-CpeJNyDK.js";import"./earcut-D9gy186-.js";import"./automaticLengthMeasurementUtils-B7UwQrK7.js";let h=class extends f{};h=e([u("esri.views.2d.analysis.AnalysisView2D")],h);let n=class extends c{constructor(t){super(t)}initialize(){this.addHandles(V({analysisViewData:this.analysisViewData,remove:()=>{},show:()=>{}}))}get updating(){return!1}};e([i({constructOnly:!0})],n.prototype,"view",void 0),e([i({constructOnly:!0})],n.prototype,"analysisViewData",void 0),e([i()],n.prototype,"updating",null),n=e([u("esri.views.2d.analysis.ElevationProfile.ElevationProfileInputVisualization2D")],n);let a=class extends c{constructor(t){super(t),this._graphic=new m,this._layer=new S({listMode:"hide",internal:!0}),this._updateGeometryThrottled=O(r=>{if(!r)return void(this._graphic.visible=!1);const o=this._layer,l=this.view.map?.layers;l&&(l.includes(o)||l.add(o),l.reorder(o,0)),this._graphic.visible=!0,this._graphic.geometry=D(r.samples,r.spatialReference)},U().profileLinesUpdateThrottleMillis)}initialize(){this._layer.add(this._graphic),this.addHandles([v(()=>!this.analysisViewData.visible,()=>{this._graphic.visible=!1}),y(()=>this._colorUpdateParameters,t=>this._updateColor(t),d),y(()=>this.analysisViewData.analysis.geometry,()=>{this._graphic.visible=!1},d),y(()=>this._geometryUpdateParameters,t=>this._updateGeometryThrottled(t),d),this._updateGeometryThrottled])}destroy(){this.view.map?.remove(this._layer),this._layer.destroy(),this._graphic.destroy()}get updating(){return this._updateGeometryThrottled.hasPendingUpdates()}get _result(){const{analysisViewData:t}=this;return t.visible?t.results.find(({available:r,computation:o,rawResult:l})=>r&&o.profile.viewOptions.lineVisible&&l?.hasZ===!0):null}get _geometryUpdateParameters(){const t=this._result;return t?.progress!==1?null:{samples:t.samples,spatialReference:this.view.spatialReference}}get _colorUpdateParameters(){const t=this._result?.computation.profile.color;return t?{color:t.toArray(),contrastColor:_(t).toArray()}:null}_updateColor(t){t&&(this._graphic.symbol=new w({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",capStyle:"Butt",color:t.color,effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,4],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],joinStyle:"Round",width:1.5},{type:"CIMSolidStroke",capStyle:"Butt",color:t.contrastColor,joinStyle:"Round",width:1.5}]}}}))}};e([i({constructOnly:!0})],a.prototype,"view",void 0),e([i({constructOnly:!0})],a.prototype,"analysisViewData",void 0),e([i()],a.prototype,"updating",null),e([i()],a.prototype,"_result",null),e([i()],a.prototype,"_geometryUpdateParameters",null),e([i()],a.prototype,"_colorUpdateParameters",null),a=e([u("esri.views.2d.analysis.ElevationProfile.ElevationProfileLineVisualization2D")],a);let p=class extends c{constructor(t){super(t)}initialize(){const{view:t,analysisViewData:r}=this;this._hoveredPointsVisualization=new P({view:t,analysisViewData:r}),this._inputVisualization=new n({view:t,analysisViewData:r}),this._lineVisualization=new a({view:t,analysisViewData:r})}destroy(){this._inputVisualization.destroy(),this._hoveredPointsVisualization.destroy(),this._lineVisualization.destroy()}get updating(){return this._hoveredPointsVisualization.updating||this._inputVisualization.updating||this._lineVisualization.updating}};e([i()],p.prototype,"view",void 0),e([i()],p.prototype,"analysisViewData",void 0),e([i()],p.prototype,"updating",null),p=e([u("esri.views.2d.analysis.ElevationProfile.ElevationProfileVisualization2D")],p);let s=class extends h{constructor(t){super(t),this.type="elevation-profile-view-2d",this.analysis=null,this.hoveredPosition=null}initialize(){const{analysis:t,view:r}=this;this._controller=new b({analysis:t,analysisViewData:this,view:r,computationFactory:{create:o=>{switch(o.profile.type){case"ground":return new $(o);case"input":return new k(o);case"query":return new z(o);case"scene":throw new g("elevation-profile-analysis-view-2d:unsupported","The scene profile line type is not supported in 2D views.")}}}}),this._visualization=new p({view:r,analysisViewData:this}),this._sketchTool=new T({view:r,analysisViewData:this})}destroy(){this._controller?.destroy(),this._visualization?.destroy(),this._sketchTool?.destroy()}get effectiveDisplayUnits(){return this._controller?.effectiveDisplayUnits??{distance:"meters",elevation:"meters"}}get error(){return this._controller?.error}get hoveredPoints(){return this._controller?.hoveredPoints??[]}get interactive(){return super.interactive}set interactive(t){super.interactive=t}get progress(){return this._controller?.progress??0}get results(){return this._controller?.results??[]}get statistics(){return this._controller?.statistics}get updating(){return this._controller?.updating===!0||this._visualization?.updating===!0||this._sketchTool?.updating===!0}get visible(){return super.visible}set visible(t){super.visible=t}get sketchGraphic(){return this._sketchTool?.sketchGraphic}get toolState(){return this._sketchTool?.state??"idle"}place(t){return this._sketchTool.place(t)}pickFeature(t){return this._sketchTool.pickFeature(t)}};e([i({readOnly:!0})],s.prototype,"type",void 0),e([i({constructOnly:!0,nonNullable:!0})],s.prototype,"analysis",void 0),e([i({readOnly:!0})],s.prototype,"effectiveDisplayUnits",null),e([i({readOnly:!0})],s.prototype,"error",null),e([i()],s.prototype,"hoveredPosition",void 0),e([i()],s.prototype,"hoveredPoints",null),e([i({readOnly:!0})],s.prototype,"progress",null),e([i({readOnly:!0})],s.prototype,"results",null),e([i({readOnly:!0})],s.prototype,"statistics",null),e([i({readOnly:!0})],s.prototype,"updating",null),e([i()],s.prototype,"sketchGraphic",null),e([i()],s.prototype,"toolState",null),e([i()],s.prototype,"_controller",void 0),e([i()],s.prototype,"_visualization",void 0),e([i()],s.prototype,"_sketchTool",void 0),s=e([u("esri.views.2d.analysis.ElevationProfileAnalysisView2D")],s);const vt=s;export{vt as default};
