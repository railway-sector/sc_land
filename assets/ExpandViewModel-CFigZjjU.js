import{_ as a,e as n,g as p,Y as d,bH as r,y as o,eQ as h}from"./index-BrQW8HOS.js";let i=class extends d{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(r(()=>this.view?.ui,"expand",e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const t=!!e;this._set("expanded",t);const s=this.view?.ui;s&&s.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.view?.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&o(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?o(()=>this.view?.stationary,()=>this._viewpointHandle?.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:t,view:s}=this;if(!s||!t)return;const l=h(()=>s.type==="3d"?s.camera:s.viewpoint,()=>this._collapse());this.addHandles(l,e),this._viewpointHandle=l}_collapse(){this.expanded=!1}};a([n({value:!1})],i.prototype,"autoCollapse",null),a([n({value:!1})],i.prototype,"expanded",null),a([n()],i.prototype,"group",void 0),a([n({readOnly:!0})],i.prototype,"state",null),a([n({value:null})],i.prototype,"view",null),i=a([p("esri.widgets.Expand.ExpandViewModel")],i);const w=i;export{w as r};
