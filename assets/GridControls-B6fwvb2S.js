const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BrQW8HOS.js","assets/index-lUE0m221.css","assets/index-BtIsfWrb.js","assets/index-BS5UOywr.js","assets/customElement-BSPyQdWb.js","assets/index-3ZhkCLKv.js","assets/repeat-Bas_Vp9w.js","assets/throttle-DExGLcjO.js"])))=>i.map(i=>d[i]);
import{S as $,n3 as S,$ as k,f as L,bI as x,T as P,U as d,V as t,bJ as I,eA as O,dh as M,cf as D,_ as l,e as a,a0 as T,g as A}from"./index-BrQW8HOS.js";import{r as f,i as B,c as b}from"./SelectionToolbar-CmU2zF-u.js";import{A as E,n as R,t as V}from"./GridControlsViewModel-Bw8R9hpo.js";import{s as N}from"./substitute-D-eLZ17Q.js";import"./SketchOptions-CHLlByzL.js";import"./SketchLabelOptions-BPF5xZLI.js";import"./directionModeIcons-Br5woIHu.js";import"./euclideanLengthMeasurementUtils-B8AL_WaV.js";import"./utils-D_VO_1nP.js";import"./geodesicUtils-BJZXB7Hp.js";import"./geometry2dUtils-kADrF-iP.js";import"./geodeticLengthOperator-DifrZujk.js";import"./geodeticCurveType-CirnHLSB.js";import"./geodesicMeasurementUtils-CQw8IWGR.js";import"./layerListUtils-CrO8uhQ1.js";import"./LayerListViewModel-VEwfK75C.js";import"./utils-BQBvadb7.js";import"./ListItem-BTKwElC0.js";import"./widget-lSGAz9tN.js";import"./layerUtils-CdCZXuDJ.js";import"./automaticLengthMeasurementUtils-Cr-y0OEN.js";import"./MeasuredGrid-BeZA6L7Q.js";import"./defaultUnit-DpiDHKcy.js";import"./getDefaultUnitForView-KDHdLbNY.js";import"./gridUtils-qPxjKPob.js";import"./editingTools-Dq5w1BAY.js";import"./SnappingVisualizer2D-D8AbMCG0.js";import"./SnappingVisualizer-C6MiCxsp.js";import"./PointSnappingHint-Bb4Sdzt2.js";import"./editPlaneUtils-C43yqqI0.js";import"./coordinateFormatter-rSwDtahG.js";import"./GraphicsLayer-CtVknZ1a.js";import"./dehydratedFeatureComparison-3eJNk6Ap.js";import"./createUtils-BntPyFG2.js";import"./Circle-CDzQBXRC.js";import"./distanceOperator-BeiDdpLt.js";import"./Point2D-DNXcsliy.js";import"./Distance2DCalculator-CXhBP-8I-Dkb8-KBJ.js";import"./ProjectionTransformation-BjD312Kq.js";import"./Envelope2D-CUWyosZh.js";import"./Transformation2D-BUBnKQZf.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./OperatorDefinitions-DP7_WWTp.js";import"./apiConverter---8F7iZ4.js";import"./jsonConverter-BHYd2kGf.js";import"./simplifyOperator-BQVvn5Fy.js";import"./operatorSimplify-C16tE3lk.js";import"./surfaceCoordinateSystems-BrNYf00T.js";import"./mat2d-BbBq4Byx.js";import"./mat2df64-DJ_RMjZ3.js";import"./helpMessageUtils-2XpUG8Xk.js";import"./helpMessageUtils3d-D-qW6XVN.js";import"./drawSurfaces-Dk7dFDxx.js";import"./DrawingMode-Cvvf0VVz.js";import"./coordinateHelper-DrvFu3jL.js";import"./dragEventPipeline-DNpVWaws.js";import"./EditGeometryOperations-vGO-F4bG.js";import"./rotate-BhR0-nSl.js";import"./curveOperationUtils-DH-ids6k.js";import"./angularMeasurementUtils-C6IEZQKT.js";import"./SnappingContext-lR2hMWGP.js";import"./SnappingDragPipelineStep-Bkdf_3gf.js";import"./SnappingOperation-C2jjQrkg.js";import"./SketchTooltipInfo-DYMB7zYA.js";import"./MeshTransform-wQhxY5y6.js";import"./a11yUtils-BrnjXW_g.js";import"./quantityFormatUtils-DM7lTTMC.js";import"./TooltipInfoWithCoordinates-Dwx8cHBC.js";import"./InteractiveToolBase-BmMFG_WL.js";import"./cimSymbolUtils-CmFYUdpV.js";import"./GraphicManipulator-_3tJZvlC.js";import"./drawUtils-SR7_OwBd.js";import"./TextOverlayItem-C6hXe1fV.js";import"./automaticAreaMeasurementUtils-dI3X5owW.js";import"./geodesicAreaMeasurementUtils-CPlOyDe5.js";import"./earcut-D9gy186-.js";import"./formatUtils-BvU7f_fy.js";import"./number-CjVmF4xk.js";const p="esri-grid-controls",c={base:p,borderedSwitch:`${p}__switch--bordered`,container:`${p}__container`,numericInputsContainer:`${p}__numeric-inputs__container`,tilegroup:`${p}__tilegroup`,tile:`${p}__tile`,tileDisabled:`${p}__tile--disabled`,tileContent:`${p}__tile__content`,suffixedInputContainer:`${p}__input-with-suffix__container`,inlineIcon:`${p}__inline-icon`},g={widgetIcon:"grid-unit",gridTheme:{light:"circle",dark:"circle-area",custom:"palette"},placementState:{interactive:"maximum-territory-distance",place:"move",rotate:"rotate"},warning:"exclamation-mark-triangle"},w=M.fromArray([115,115,115]),C=M.fromArray([200,200,200]),U=["interactive","place","rotate"];let o=class extends ${constructor(e,n){super(e,n),this.customColor=null,this.messages=null,this.messagesUnits=null,this.viewModel=new E,this.visibleElements=new f,S(k.getLogger(this),"Grid Controls","arcgis-grid-controls",{version:"4.33"})}initialize(){this.addHandles([L(()=>this.viewModel.gridColor,e=>{!e||w.equals(e)||C.equals(e)||(this.customColor=e)},x)])}loadDependencies(){return Promise.all([P({action:()=>d(()=>import("./index-BrQW8HOS.js").then(e=>e.MM),__vite__mapDeps([0,1])),"action-bar":()=>d(()=>import("./index-BrQW8HOS.js").then(e=>e.MS),__vite__mapDeps([0,1])),label:()=>d(()=>import("./index-BrQW8HOS.js").then(e=>e.M_),__vite__mapDeps([0,1])),icon:()=>d(()=>import("./index-BrQW8HOS.js").then(e=>e.MK),__vite__mapDeps([0,1])),popover:()=>d(()=>import("./index-BrQW8HOS.js").then(e=>e.MN),__vite__mapDeps([0,1])),tooltip:()=>d(()=>import("./index-BtIsfWrb.js"),__vite__mapDeps([2,0,1])),"color-picker":()=>d(()=>import("./index-BS5UOywr.js"),__vite__mapDeps([3,0,1,4,5,6,7])),"input-number":()=>d(()=>import("./index-3ZhkCLKv.js"),__vite__mapDeps([5,0,1]))}),B()])}get icon(){return g.widgetIcon}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages.widgetLabel}set label(e){this._overrideIfSome("label",e)}get snappingManager(){return this.viewModel.snappingManager}set snappingManager(e){this.viewModel.snappingManager=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get theme(){const e=this.viewModel.gridColor;return e?w.equals(e)?"dark":C.equals(e)?"light":"custom":null}set theme(e){const{viewModel:n,customColor:i,view:r}=this;switch(e){case"light":n.gridColor=C;break;case"dark":n.gridColor=w;break;case"custom":n.gridColor=i??r?.effectiveTheme.accentColor??w}}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return t("div",{"aria-label":this.label,class:this.classes(c.base,I.widget,I.panel)},t("div",{class:c.container},this._renderContent()))}_renderContent(){const{visibleElements:e}=this;return[e.gridEnabledToggle?this._renderEnabledToggle():null,e.placementButtons?this._renderGridPlacementButtons():null,e.numericInputs?this._renderNumericInputs():null,e.lineIntervalInput?this._renderIntervalInput():null,e.gridSnapEnabledToggle&&this.viewModel.snappingOptions?this._renderSnappingToggle():null,e.dynamicScaleToggle?this._renderDynamicScaleToggle():null,e.rotateWithMapToggle?this._renderRotateToggle():null,e.colorSelection?this._renderColorSelection():null]}_renderGridPlacementButtons(){const{interactivePlacementState:e,placementDisabled:n,gridControlsEnabled:i}=this.viewModel,r=n||!i;return t("calcite-label",{key:"grid-placement-buttons",scale:"s"},this.messages.placementOptions,t("calcite-action-bar",{expandDisabled:!0,layout:"horizontal"},U.map(s=>this._renderPlacementModeButton(s,r,e))))}_renderPlacementModeButton(e,n,i){const r=this.messages.placementState[e],s=`__placement-action-${e}`;return t("div",null,t("calcite-action",{active:i===e,alignment:"center",disabled:n,icon:g.placementState[e],id:s,onclick:()=>this.viewModel.togglePlacementState(e),text:r}),t("calcite-tooltip",{overlayPositioning:"fixed",placement:"top",referenceElement:s},r))}_renderNumericInputs(){const{rotation:e,spacing:n,effectiveSpacingAfterDynamicScaling:i,numericSpacingInputShouldBeVisible:r,unit:s="meters"}=this.viewModel,u=this.messagesUnits.units[s].abbr,h=this.viewModel.gridControlsEnabled,m=i!=null&&i!==this.viewModel.spacing,v=`__spacing_input_scaled-${this.id}`;return t("div",{class:this.classes(c.numericInputsContainer)},[r?t("calcite-label",{key:"spacing-label",scale:"s"},t("span",null,this.messages.inputLabel.spacing,m?t("calcite-icon",{class:this.classes(c.inlineIcon),icon:g.warning,id:v,scale:"s",tabIndex:0}):void 0),t("div",{class:c.suffixedInputContainer},t("calcite-input-number",{disabled:!h,numberButtonType:"none",suffixText:u,value:`${n?.toFixed(2)}`,onCalciteInputNumberChange:({currentTarget:_})=>{const y=parseFloat(_.value);this.viewModel.spacing=y,y!==this.viewModel.spacing&&(_.value=`${this.viewModel.spacing}`)}}),m?t("calcite-tooltip",{overlayPositioning:"fixed",placement:"leading",referenceElement:v},N(this.messages.warnings.dynamicSpacing,{actualSpacingIncludingUnit:O(this.messagesUnits,i,s,2,"plural")})):void 0)):void 0,t("calcite-label",{key:"angle-label",scale:"s"},this.messages.inputLabel.angle,t("calcite-input-number",{disabled:!h,integer:!0,numberButtonType:"none",suffixText:this.messagesUnits.units.degrees.abbr,value:`${V(e)}`,onCalciteInputNumberChange:({currentTarget:_})=>this.viewModel.rotation=R(_.value)}))])}_renderIntervalInput(){const{majorLineInterval:e,gridControlsEnabled:n}=this.viewModel;return t("div",{class:this.classes(c.numericInputsContainer)},t("calcite-label",{scale:"s"},this.messages.inputLabel.interval,t("calcite-input-number",{disabled:!n,integer:!0,max:15,min:1,numberButtonType:"vertical",value:`${e}`,onCalciteInputNumberChange:({currentTarget:i})=>{const r=Number.parseInt(i.value,10);this.viewModel.majorLineInterval=r,r!==this.viewModel.majorLineInterval&&(i.value=`${this.viewModel.majorLineInterval}`)}})))}_renderSnappingToggle(){const{snappingOptions:e,gridControlsEnabled:n}=this.viewModel;return t(b,{checked:!!(e?.gridEnabled??!1),disabled:!(n&&e),key:"grid-snap-enabled-toggle",label:this.messages.switchLabel.snap,onChange:i=>this.viewModel.snappingOptions?.set("gridEnabled",i)})}_renderDynamicScaleToggle(){const{viewModel:e,messages:n}=this,i=this.visibleElements.outOfScaleWarning&&e.gridOutOfScale;return t(b,{checked:e.dynamicScaling,disabled:!e.gridControlsEnabled,hint:i?n.warnings.outOfScale:void 0,hintIcon:g.warning,hintKind:"warning",key:`grid-dynamic-scale-toggle-${this.id}`,label:n.switchLabel.scaling,onChange:r=>e.dynamicScaling=r})}_renderRotateToggle(){const{gridControlsEnabled:e,rotateWithMap:n}=this.viewModel;return t(b,{checked:n,disabled:!e,key:"grid-rotate-map-toggle",label:this.messages.switchLabel.rotateWithMap,onChange:i=>this.viewModel.rotateWithMap=i})}_renderEnabledToggle(){return t("div",{class:c.borderedSwitch},t(b,{checked:this.viewModel.displayEnabled,disabled:!!this.viewModel.interactivePlacementState,key:"grid-enabled-toggle",label:this.messages.switchLabel.display,onChange:e=>this.viewModel.trySetDisplayEnabled(e)}))}_renderColorSelection(){const{customColor:e}=this,n=`${this.id}--custom-grid-color-button`;return t("calcite-label",{scale:"s"},this.messages.inputLabel.theme,t("div",{class:c.tilegroup},[this._renderThemeTile({value:"dark"}),this._renderThemeTile({value:"light"}),this._renderThemeTile({value:"custom",id:n}),t("calcite-popover",{autoClose:!0,label:this.messages.gridLineColorPopoverLabel,overlayPositioning:"fixed",referenceElement:n},t("calcite-color-picker",{alphaChannel:!0,savedDisabled:!0,value:e?.toHex({digits:8})??"#000000ff",onCalciteColorPickerChange:i=>{const r=M.fromHex(i.currentTarget.value);r&&(this.customColor=r,this.theme="custom")}}))]))}_renderThemeTile(e){const{theme:n}=this,{value:i}=e,r=this.messages.gridTheme[i],s=`${this.id}--theme_tile_${i}`,u=`${s}__label`,h=g.gridTheme[i],m=this.viewModel.gridControlsEnabled;return t("div",{class:D({[c.tile]:!0,[c.tileDisabled]:!m}),id:e.id,role:"button"},t("input",{"aria-labelledby":u,checked:n===i,disabled:!m,id:s,name:`${this.id}--theme`,onchange:v=>{this.theme=i,v.target?.focus()},tabIndex:0,type:"radio"}),t("div",{class:c.tileContent},t("calcite-icon",{icon:h,scale:"l"}),t("calcite-label",{for:s,id:u},r)))}};l([a({type:M})],o.prototype,"customColor",void 0),l([a()],o.prototype,"icon",null),l([a()],o.prototype,"label",null),l([a(),T("esri/widgets/support/GridControls/t9n/GridControls")],o.prototype,"messages",void 0),l([a(),T("esri/core/t9n/Units")],o.prototype,"messagesUnits",void 0),l([a()],o.prototype,"snappingManager",null),l([a()],o.prototype,"snappingOptions",null),l([a()],o.prototype,"theme",null),l([a()],o.prototype,"view",null),l([a({type:E})],o.prototype,"viewModel",void 0),l([a({type:f,nonNullable:!0})],o.prototype,"visibleElements",void 0),o=l([A("esri.widgets.support.GridControls")],o);const dt=o;export{dt as default};
