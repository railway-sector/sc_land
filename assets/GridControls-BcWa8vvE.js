const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Brd6-W-v.js","assets/index-ni9qn0ie.css","assets/index-BBEWOiCj.js","assets/index-CBpmL9xd.js","assets/customElement-BCHU9VC3.js","assets/index-DJ1JjIBe.js","assets/throttle-nFBi94-W.js"])))=>i.map(i=>d[i]);
import{a1 as $,n0 as S,a9 as k,j as x,bH as L,a2 as O,a3 as p,a4 as t,bJ as I,W as P,n1 as D,eK as C,c6 as A,a5 as a,x as l,ab as T,y as R}from"./index-Brd6-W-v.js";import{r as f,i as B,c as b}from"./SelectionToolbar-B3-D-H93.js";import{A as E,n as V,t as N}from"./GridControlsViewModel-n4aduib5.js";import"./SketchOptions-DVOz4iqy.js";import"./SketchLabelOptions-C_8uwBga.js";import"./directionModeIcons-Br5woIHu.js";import"./euclideanLengthMeasurementUtils-DM9lZgm8.js";import"./geometry2dUtils-BOHjqgu-.js";import"./geodeticLengthOperator-DnkggiH8.js";import"./geodeticCurveType-CirnHLSB.js";import"./layerUtils-61hESGqR.js";import"./automaticLengthMeasurementUtils-DtR3CDX6.js";import"./MeasuredGrid-CckR0MlW.js";import"./defaultUnit-31fx93G1.js";import"./gridUtils-FiuJje-3.js";import"./editingTools-DR8uwCBy.js";import"./SnappingVisualizer2D-DYjuS6Ks.js";import"./SnappingVisualizer-DmZrCf5x.js";import"./PointSnappingHint-ZiE-SXoE.js";import"./editPlaneUtils-DkhqOQuh.js";import"./coordinateFormatter-DsqnobUl.js";import"./GraphicsLayer-CjG4lAYI.js";import"./dehydratedFeatureComparison-B1GVQ6VR.js";import"./createUtils-lU4j_yUb.js";import"./Circle-BQ_vcP4p.js";import"./distanceOperator-B10WR_pd.js";import"./Point2D-8Py_srEd.js";import"./Distance2DCalculator-CXhBP-8I-BWP43z-Q.js";import"./ProjectionTransformation-CfbkWcJt.js";import"./Envelope2D-DQ3Tn1o-.js";import"./Transformation2D-Ckyhe4wc.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./OperatorDefinitions-DP7_WWTp.js";import"./apiConverter-CH50OwTE.js";import"./jsonConverter-C7-7hi8T.js";import"./simplifyOperator-CuJaEDXS.js";import"./operatorSimplify-CJeXdbKY.js";import"./surfaceCoordinateSystems-BwSuGL3d.js";import"./helpMessageUtils-2XpUG8Xk.js";import"./helpMessageUtils3d-Cg8dSNF4.js";import"./drawSurfaces-BBjesQnP.js";import"./DrawingMode-Cvvf0VVz.js";import"./coordinateHelper-DvQOiAfn.js";import"./dragEventPipeline-Blei9IPS.js";import"./EditGeometryOperations-DxdlE7nu.js";import"./rotate-OuprA1zY.js";import"./curveOperationUtils-CoLaLuTr.js";import"./angularMeasurementUtils-DLFM1rGO.js";import"./SnappingContext-lR2hMWGP.js";import"./SnappingDragPipelineStep-BGE9ph2K.js";import"./SnappingOperation-By_c1Abi.js";import"./SketchTooltipInfo-BGAsnuID.js";import"./MeshTransform-Dbi_AwF7.js";import"./TooltipInfoWithCoordinates-Da1fyNON.js";import"./InteractiveToolBase-BUcul5AV.js";import"./GraphicManipulator-DpQU20Gf.js";import"./drawUtils-NQXIF0Cp.js";import"./TextOverlayItem-3-hNVp43.js";import"./automaticAreaMeasurementUtils-OmtWBaHK.js";import"./geodesicAreaMeasurementUtils-DJGxN27X.js";import"./earcut-D9gy186-.js";import"./formatUtils-BF__500s.js";import"./number-CnUbDFCW.js";const d="esri-grid-controls",c={base:d,borderedSwitch:`${d}__switch--bordered`,container:`${d}__container`,numericInputsContainer:`${d}__numeric-inputs__container`,tilegroup:`${d}__tilegroup`,tile:`${d}__tile`,tileDisabled:`${d}__tile--disabled`,tileContent:`${d}__tile__content`,suffixedInputContainer:`${d}__input-with-suffix__container`,inlineIcon:`${d}__inline-icon`},g={widgetIcon:"grid-unit",gridTheme:{light:"circle",dark:"circle-area",custom:"palette"},placementState:{interactive:"maximum-territory-distance",place:"move",rotate:"rotate"},warning:"exclamation-mark-triangle"},w=C.fromArray([115,115,115]),y=C.fromArray([200,200,200]),U=["interactive","place","rotate"];let o=class extends ${constructor(e,n){super(e,n),this.customColor=null,this.messages=null,this.messagesUnits=null,this.viewModel=new E,this.visibleElements=new f,S(k.getLogger(this),"Grid Controls","arcgis-grid-controls",{version:"4.33"})}initialize(){this.addHandles([x(()=>this.viewModel.gridColor,e=>{!e||w.equals(e)||y.equals(e)||(this.customColor=e)},L)])}loadDependencies(){return Promise.all([O({action:()=>p(()=>import("./index-Brd6-W-v.js").then(e=>e.OR),__vite__mapDeps([0,1])),"action-bar":()=>p(()=>import("./index-Brd6-W-v.js").then(e=>e.P8),__vite__mapDeps([0,1])),label:()=>p(()=>import("./index-Brd6-W-v.js").then(e=>e.P9),__vite__mapDeps([0,1])),icon:()=>p(()=>import("./index-Brd6-W-v.js").then(e=>e.Ou),__vite__mapDeps([0,1])),popover:()=>p(()=>import("./index-Brd6-W-v.js").then(e=>e.OS),__vite__mapDeps([0,1])),tooltip:()=>p(()=>import("./index-BBEWOiCj.js"),__vite__mapDeps([2,0,1])),"color-picker":()=>p(()=>import("./index-CBpmL9xd.js"),__vite__mapDeps([3,0,1,4,5,6])),"input-number":()=>p(()=>import("./index-DJ1JjIBe.js"),__vite__mapDeps([5,0,1]))}),B()])}get icon(){return g.widgetIcon}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages.widgetLabel}set label(e){this._overrideIfSome("label",e)}get snappingManager(){return this.viewModel.snappingManager}set snappingManager(e){this.viewModel.snappingManager=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get theme(){const e=this.viewModel.gridColor;return e?w.equals(e)?"dark":y.equals(e)?"light":"custom":null}set theme(e){const{viewModel:n,customColor:i,view:r}=this;switch(e){case"light":n.gridColor=y;break;case"dark":n.gridColor=w;break;case"custom":n.gridColor=i??r?.effectiveTheme.accentColor??w}}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return t("div",{"aria-label":this.label,class:this.classes(c.base,I.widget,I.panel)},t("div",{class:c.container},this._renderContent()))}_renderContent(){const{visibleElements:e}=this;return[e.gridEnabledToggle?this._renderEnabledToggle():null,e.placementButtons?this._renderGridPlacementButtons():null,e.numericInputs?this._renderNumericInputs():null,e.lineIntervalInput?this._renderIntervalInput():null,e.gridSnapEnabledToggle&&this.viewModel.snappingOptions?this._renderSnappingToggle():null,e.dynamicScaleToggle?this._renderDynamicScaleToggle():null,e.rotateWithMapToggle?this._renderRotateToggle():null,e.colorSelection?this._renderColorSelection():null]}_renderGridPlacementButtons(){const{interactivePlacementState:e,placementDisabled:n,gridControlsEnabled:i}=this.viewModel,r=n||!i;return t("calcite-label",{key:"grid-placement-buttons",scale:"s"},this.messages.placementOptions,t("calcite-action-bar",{expandDisabled:!0,layout:"horizontal"},U.map(s=>this._renderPlacementModeButton(s,r,e))))}_renderPlacementModeButton(e,n,i){const r=this.messages.placementState[e],s=`__placement-action-${e}`;return t("div",null,t("calcite-action",{active:i===e,alignment:"center",disabled:n,icon:g.placementState[e],id:s,onclick:()=>this.viewModel.togglePlacementState(e),text:r}),t("calcite-tooltip",{overlayPositioning:"fixed",placement:"top",referenceElement:s},r))}_renderNumericInputs(){const{rotation:e,spacing:n,effectiveSpacingAfterDynamicScaling:i,numericSpacingInputShouldBeVisible:r,unit:s="meters"}=this.viewModel,u=this.messagesUnits.units[s].abbr,h=this.viewModel.gridControlsEnabled,m=i!=null&&i!==this.viewModel.spacing,v=`__spacing_input_scaled-${this.id}`;return t("div",{class:this.classes(c.numericInputsContainer)},[r?t("calcite-label",{key:"spacing-label",scale:"s"},t("span",null,this.messages.inputLabel.spacing,m?t("calcite-icon",{class:this.classes(c.inlineIcon),icon:g.warning,id:v,scale:"s",tabIndex:0}):void 0),t("div",{class:c.suffixedInputContainer},t("calcite-input-number",{disabled:!h,numberButtonType:"none",suffixText:u,value:`${n?.toFixed(2)}`,onCalciteInputNumberChange:({currentTarget:_})=>{const M=parseFloat(_.value);this.viewModel.spacing=M,M!==this.viewModel.spacing&&(_.value=`${this.viewModel.spacing}`)}}),m?t("calcite-tooltip",{overlayPositioning:"fixed",placement:"leading",referenceElement:v},P(this.messages.warnings.dynamicSpacing,{actualSpacingIncludingUnit:D(this.messagesUnits,i,s,2,"plural")})):void 0)):void 0,t("calcite-label",{key:"angle-label",scale:"s"},this.messages.inputLabel.angle,t("calcite-input-number",{disabled:!h,integer:!0,numberButtonType:"none",suffixText:this.messagesUnits.units.degrees.abbr,value:`${N(e)}`,onCalciteInputNumberChange:({currentTarget:_})=>this.viewModel.rotation=V(_.value)}))])}_renderIntervalInput(){const{majorLineInterval:e,gridControlsEnabled:n}=this.viewModel;return t("div",{class:this.classes(c.numericInputsContainer)},t("calcite-label",{scale:"s"},this.messages.inputLabel.interval,t("calcite-input-number",{disabled:!n,integer:!0,max:15,min:1,numberButtonType:"vertical",value:`${e}`,onCalciteInputNumberChange:({currentTarget:i})=>{const r=Number.parseInt(i.value,10);this.viewModel.majorLineInterval=r,r!==this.viewModel.majorLineInterval&&(i.value=`${this.viewModel.majorLineInterval}`)}})))}_renderSnappingToggle(){const{snappingOptions:e,gridControlsEnabled:n}=this.viewModel;return t(b,{checked:!!(e?.gridEnabled??!1),disabled:!(n&&e),key:"grid-snap-enabled-toggle",label:this.messages.switchLabel.snap,onChange:i=>this.viewModel.snappingOptions?.set("gridEnabled",i)})}_renderDynamicScaleToggle(){const{viewModel:e,messages:n}=this,i=this.visibleElements.outOfScaleWarning&&e.gridOutOfScale;return t(b,{checked:e.dynamicScaling,disabled:!e.gridControlsEnabled,hint:i?n.warnings.outOfScale:void 0,hintIcon:g.warning,hintKind:"warning",key:`grid-dynamic-scale-toggle-${this.id}`,label:n.switchLabel.scaling,onChange:r=>e.dynamicScaling=r})}_renderRotateToggle(){const{gridControlsEnabled:e,rotateWithMap:n}=this.viewModel;return t(b,{checked:n,disabled:!e,key:"grid-rotate-map-toggle",label:this.messages.switchLabel.rotateWithMap,onChange:i=>this.viewModel.rotateWithMap=i})}_renderEnabledToggle(){return t("div",{class:c.borderedSwitch},t(b,{checked:this.viewModel.displayEnabled,disabled:!!this.viewModel.interactivePlacementState,key:"grid-enabled-toggle",label:this.messages.switchLabel.display,onChange:e=>this.viewModel.trySetDisplayEnabled(e)}))}_renderColorSelection(){const{customColor:e}=this,n=`${this.id}--custom-grid-color-button`;return t("calcite-label",{scale:"s"},this.messages.inputLabel.theme,t("div",{class:c.tilegroup},[this._renderThemeTile({value:"dark"}),this._renderThemeTile({value:"light"}),this._renderThemeTile({value:"custom",id:n}),t("calcite-popover",{autoClose:!0,label:this.messages.gridLineColorPopoverLabel,overlayPositioning:"fixed",referenceElement:n},t("calcite-color-picker",{alphaChannel:!0,savedDisabled:!0,value:e?.toHex({digits:8})??"#000000ff",onCalciteColorPickerChange:i=>{const r=C.fromHex(i.currentTarget.value);r&&(this.customColor=r,this.theme="custom")}}))]))}_renderThemeTile(e){const{theme:n}=this,{value:i}=e,r=this.messages.gridTheme[i],s=`${this.id}--theme_tile_${i}`,u=`${s}__label`,h=g.gridTheme[i],m=this.viewModel.gridControlsEnabled;return t("div",{class:A({[c.tile]:!0,[c.tileDisabled]:!m}),id:e.id,role:"button"},t("input",{"aria-labelledby":u,checked:n===i,disabled:!m,id:s,name:`${this.id}--theme`,onchange:v=>{this.theme=i,v.target?.focus()},tabIndex:0,type:"radio"}),t("div",{class:c.tileContent},t("calcite-icon",{icon:h,scale:"l"}),t("calcite-label",{for:s,id:u},r)))}};a([l({type:C})],o.prototype,"customColor",void 0),a([l()],o.prototype,"icon",null),a([l()],o.prototype,"label",null),a([l(),T("esri/widgets/support/GridControls/t9n/GridControls")],o.prototype,"messages",void 0),a([l(),T("esri/core/t9n/Units")],o.prototype,"messagesUnits",void 0),a([l()],o.prototype,"snappingManager",null),a([l()],o.prototype,"snappingOptions",null),a([l()],o.prototype,"theme",null),a([l()],o.prototype,"view",null),a([l({type:E})],o.prototype,"viewModel",void 0),a([l({type:f,nonNullable:!0})],o.prototype,"visibleElements",void 0),o=a([R("esri.widgets.support.GridControls")],o);const Qe=o;export{Qe as default};
