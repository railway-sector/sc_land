const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CgzAF5Ey.js","assets/index-ni9qn0ie.css","assets/index-B8hawk0r.js","assets/index-B8AGR6X4.js","assets/customElement-BqSP3SUJ.js","assets/index-CYDBEtwR.js","assets/repeat-C5igg-im.js","assets/throttle-BZv6rCsp.js"])))=>i.map(i=>d[i]);
import{T as $,nO as S,a0 as k,f as L,bJ as x,U as O,V as d,W as t,bK as T,I as P,eA as D,df as C,cg as A,_ as s,e as a,a1 as I,g as V}from"./index-CgzAF5Ey.js";import{r as f,i as B,c as b}from"./SelectionToolbar-CyI4HoXk.js";import{A as E,n as R,t as N}from"./GridControlsViewModel-hKfODt31.js";import"./SketchOptions-DsWZlvNP.js";import"./SketchLabelOptions-CtWdh0ak.js";import"./directionModeIcons-Br5woIHu.js";import"./euclideanLengthMeasurementUtils-CGkbgpIY.js";import"./utils-DN_jc3_L.js";import"./geodesicUtils-Cfv0uT1u.js";import"./geometry2dUtils-DamFhDZI.js";import"./geodeticLengthOperator-CCmu1UCP.js";import"./geodeticCurveType-CirnHLSB.js";import"./geodesicMeasurementUtils-CD0H_C-6.js";import"./layerListUtils-CrO8uhQ1.js";import"./LayerListViewModel-DOIGYhGa.js";import"./utils-BQBvadb7.js";import"./ListItem-DyzSo_ob.js";import"./widget-5CKB7XP2.js";import"./layerUtils-C4kbKZbG.js";import"./automaticLengthMeasurementUtils-B1DzL2GL.js";import"./MeasuredGrid-B5ySCGnr.js";import"./defaultUnit-CrOs0S_r.js";import"./getDefaultUnitForView-DdQQf52Q.js";import"./gridUtils-wkjo3J8K.js";import"./editingTools-SmJwGuwj.js";import"./SnappingVisualizer2D-D_sty-M3.js";import"./SnappingVisualizer-CfgCZJq2.js";import"./PointSnappingHint-ByJMd16p.js";import"./editPlaneUtils-qQv50LHM.js";import"./coordinateFormatter-4c6X-xJV.js";import"./GraphicsLayer-CNIUk38A.js";import"./dehydratedFeatureComparison-GEO06dBy.js";import"./createUtils-IRSfXt-_.js";import"./Circle-BiDO0Dld.js";import"./distanceOperator-kpocAfUa.js";import"./Point2D-8Py_srEd.js";import"./Distance2DCalculator-CXhBP-8I-RGTjIsY8.js";import"./ProjectionTransformation-D72vYhR2.js";import"./Envelope2D-DQ3Tn1o-.js";import"./Transformation2D-Ckyhe4wc.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./OperatorDefinitions-DP7_WWTp.js";import"./apiConverter-CvNJfrRe.js";import"./jsonConverter-EjytI4Do.js";import"./simplifyOperator-CkrCdZRR.js";import"./operatorSimplify-CpftPpUB.js";import"./surfaceCoordinateSystems-Czhjgkml.js";import"./mat2d-DWPHXQcf.js";import"./mat2df64-DJ_RMjZ3.js";import"./helpMessageUtils-2XpUG8Xk.js";import"./helpMessageUtils3d-Btb32ZF_.js";import"./drawSurfaces-CQjcevUo.js";import"./DrawingMode-Cvvf0VVz.js";import"./coordinateHelper-BBk0eSaI.js";import"./dragEventPipeline-CrllCNgu.js";import"./EditGeometryOperations-CUoPE0hp.js";import"./rotate-LRLOFQu1.js";import"./curveOperationUtils-Bf-6qlka.js";import"./angularMeasurementUtils-DWPIAu_Z.js";import"./SnappingContext-lR2hMWGP.js";import"./SnappingDragPipelineStep-CzwhpchR.js";import"./SnappingOperation-BCgVE0WW.js";import"./SketchTooltipInfo-ipmEcjXX.js";import"./MeshTransform-Dit-XLCt.js";import"./a11yUtils-B0k1CDxO.js";import"./quantityFormatUtils-hOh9vK9C.js";import"./TooltipInfoWithCoordinates-Ctjrbg45.js";import"./InteractiveToolBase-CODufc4B.js";import"./cimSymbolUtils-D8zbHeXT.js";import"./GraphicManipulator-DC391nnv.js";import"./drawUtils-DfCzrCmO.js";import"./TextOverlayItem-D3xCLKKZ.js";import"./automaticAreaMeasurementUtils-BatsSLDN.js";import"./geodesicAreaMeasurementUtils-CadONabs.js";import"./earcut-D9gy186-.js";import"./formatUtils-BMZi2HDr.js";import"./number-BNHbRH9q.js";const p="esri-grid-controls",c={base:p,borderedSwitch:`${p}__switch--bordered`,container:`${p}__container`,numericInputsContainer:`${p}__numeric-inputs__container`,tilegroup:`${p}__tilegroup`,tile:`${p}__tile`,tileDisabled:`${p}__tile--disabled`,tileContent:`${p}__tile__content`,suffixedInputContainer:`${p}__input-with-suffix__container`,inlineIcon:`${p}__inline-icon`},g={widgetIcon:"grid-unit",gridTheme:{light:"circle",dark:"circle-area",custom:"palette"},placementState:{interactive:"maximum-territory-distance",place:"move",rotate:"rotate"},warning:"exclamation-mark-triangle"},w=C.fromArray([115,115,115]),M=C.fromArray([200,200,200]),U=["interactive","place","rotate"];let o=class extends ${constructor(e,n){super(e,n),this.customColor=null,this.messages=null,this.messagesUnits=null,this.viewModel=new E,this.visibleElements=new f,S(k.getLogger(this),"Grid Controls","arcgis-grid-controls",{version:"4.33"})}initialize(){this.addHandles([L(()=>this.viewModel.gridColor,e=>{!e||w.equals(e)||M.equals(e)||(this.customColor=e)},x)])}loadDependencies(){return Promise.all([O({action:()=>d(()=>import("./index-CgzAF5Ey.js").then(e=>e.MV),__vite__mapDeps([0,1])),"action-bar":()=>d(()=>import("./index-CgzAF5Ey.js").then(e=>e.Ng),__vite__mapDeps([0,1])),label:()=>d(()=>import("./index-CgzAF5Ey.js").then(e=>e.N6),__vite__mapDeps([0,1])),icon:()=>d(()=>import("./index-CgzAF5Ey.js").then(e=>e.MT),__vite__mapDeps([0,1])),popover:()=>d(()=>import("./index-CgzAF5Ey.js").then(e=>e.MW),__vite__mapDeps([0,1])),tooltip:()=>d(()=>import("./index-B8hawk0r.js"),__vite__mapDeps([2,0,1])),"color-picker":()=>d(()=>import("./index-B8AGR6X4.js"),__vite__mapDeps([3,0,1,4,5,6,7])),"input-number":()=>d(()=>import("./index-CYDBEtwR.js"),__vite__mapDeps([5,0,1]))}),B()])}get icon(){return g.widgetIcon}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages.widgetLabel}set label(e){this._overrideIfSome("label",e)}get snappingManager(){return this.viewModel.snappingManager}set snappingManager(e){this.viewModel.snappingManager=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get theme(){const e=this.viewModel.gridColor;return e?w.equals(e)?"dark":M.equals(e)?"light":"custom":null}set theme(e){const{viewModel:n,customColor:i,view:r}=this;switch(e){case"light":n.gridColor=M;break;case"dark":n.gridColor=w;break;case"custom":n.gridColor=i??r?.effectiveTheme.accentColor??w}}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return t("div",{"aria-label":this.label,class:this.classes(c.base,T.widget,T.panel)},t("div",{class:c.container},this._renderContent()))}_renderContent(){const{visibleElements:e}=this;return[e.gridEnabledToggle?this._renderEnabledToggle():null,e.placementButtons?this._renderGridPlacementButtons():null,e.numericInputs?this._renderNumericInputs():null,e.lineIntervalInput?this._renderIntervalInput():null,e.gridSnapEnabledToggle&&this.viewModel.snappingOptions?this._renderSnappingToggle():null,e.dynamicScaleToggle?this._renderDynamicScaleToggle():null,e.rotateWithMapToggle?this._renderRotateToggle():null,e.colorSelection?this._renderColorSelection():null]}_renderGridPlacementButtons(){const{interactivePlacementState:e,placementDisabled:n,gridControlsEnabled:i}=this.viewModel,r=n||!i;return t("calcite-label",{key:"grid-placement-buttons",scale:"s"},this.messages.placementOptions,t("calcite-action-bar",{expandDisabled:!0,layout:"horizontal"},U.map(l=>this._renderPlacementModeButton(l,r,e))))}_renderPlacementModeButton(e,n,i){const r=this.messages.placementState[e],l=`__placement-action-${e}`;return t("div",null,t("calcite-action",{active:i===e,alignment:"center",disabled:n,icon:g.placementState[e],id:l,onclick:()=>this.viewModel.togglePlacementState(e),text:r}),t("calcite-tooltip",{overlayPositioning:"fixed",placement:"top",referenceElement:l},r))}_renderNumericInputs(){const{rotation:e,spacing:n,effectiveSpacingAfterDynamicScaling:i,numericSpacingInputShouldBeVisible:r,unit:l="meters"}=this.viewModel,u=this.messagesUnits.units[l].abbr,h=this.viewModel.gridControlsEnabled,m=i!=null&&i!==this.viewModel.spacing,v=`__spacing_input_scaled-${this.id}`;return t("div",{class:this.classes(c.numericInputsContainer)},[r?t("calcite-label",{key:"spacing-label",scale:"s"},t("span",null,this.messages.inputLabel.spacing,m?t("calcite-icon",{class:this.classes(c.inlineIcon),icon:g.warning,id:v,scale:"s",tabIndex:0}):void 0),t("div",{class:c.suffixedInputContainer},t("calcite-input-number",{disabled:!h,numberButtonType:"none",suffixText:u,value:`${n?.toFixed(2)}`,onCalciteInputNumberChange:({currentTarget:_})=>{const y=parseFloat(_.value);this.viewModel.spacing=y,y!==this.viewModel.spacing&&(_.value=`${this.viewModel.spacing}`)}}),m?t("calcite-tooltip",{overlayPositioning:"fixed",placement:"leading",referenceElement:v},P(this.messages.warnings.dynamicSpacing,{actualSpacingIncludingUnit:D(this.messagesUnits,i,l,2,"plural")})):void 0)):void 0,t("calcite-label",{key:"angle-label",scale:"s"},this.messages.inputLabel.angle,t("calcite-input-number",{disabled:!h,integer:!0,numberButtonType:"none",suffixText:this.messagesUnits.units.degrees.abbr,value:`${N(e)}`,onCalciteInputNumberChange:({currentTarget:_})=>this.viewModel.rotation=R(_.value)}))])}_renderIntervalInput(){const{majorLineInterval:e,gridControlsEnabled:n}=this.viewModel;return t("div",{class:this.classes(c.numericInputsContainer)},t("calcite-label",{scale:"s"},this.messages.inputLabel.interval,t("calcite-input-number",{disabled:!n,integer:!0,max:15,min:1,numberButtonType:"vertical",value:`${e}`,onCalciteInputNumberChange:({currentTarget:i})=>{const r=Number.parseInt(i.value,10);this.viewModel.majorLineInterval=r,r!==this.viewModel.majorLineInterval&&(i.value=`${this.viewModel.majorLineInterval}`)}})))}_renderSnappingToggle(){const{snappingOptions:e,gridControlsEnabled:n}=this.viewModel;return t(b,{checked:!!(e?.gridEnabled??!1),disabled:!(n&&e),key:"grid-snap-enabled-toggle",label:this.messages.switchLabel.snap,onChange:i=>this.viewModel.snappingOptions?.set("gridEnabled",i)})}_renderDynamicScaleToggle(){const{viewModel:e,messages:n}=this,i=this.visibleElements.outOfScaleWarning&&e.gridOutOfScale;return t(b,{checked:e.dynamicScaling,disabled:!e.gridControlsEnabled,hint:i?n.warnings.outOfScale:void 0,hintIcon:g.warning,hintKind:"warning",key:`grid-dynamic-scale-toggle-${this.id}`,label:n.switchLabel.scaling,onChange:r=>e.dynamicScaling=r})}_renderRotateToggle(){const{gridControlsEnabled:e,rotateWithMap:n}=this.viewModel;return t(b,{checked:n,disabled:!e,key:"grid-rotate-map-toggle",label:this.messages.switchLabel.rotateWithMap,onChange:i=>this.viewModel.rotateWithMap=i})}_renderEnabledToggle(){return t("div",{class:c.borderedSwitch},t(b,{checked:this.viewModel.displayEnabled,disabled:!!this.viewModel.interactivePlacementState,key:"grid-enabled-toggle",label:this.messages.switchLabel.display,onChange:e=>this.viewModel.trySetDisplayEnabled(e)}))}_renderColorSelection(){const{customColor:e}=this,n=`${this.id}--custom-grid-color-button`;return t("calcite-label",{scale:"s"},this.messages.inputLabel.theme,t("div",{class:c.tilegroup},[this._renderThemeTile({value:"dark"}),this._renderThemeTile({value:"light"}),this._renderThemeTile({value:"custom",id:n}),t("calcite-popover",{autoClose:!0,label:this.messages.gridLineColorPopoverLabel,overlayPositioning:"fixed",referenceElement:n},t("calcite-color-picker",{alphaChannel:!0,savedDisabled:!0,value:e?.toHex({digits:8})??"#000000ff",onCalciteColorPickerChange:i=>{const r=C.fromHex(i.currentTarget.value);r&&(this.customColor=r,this.theme="custom")}}))]))}_renderThemeTile(e){const{theme:n}=this,{value:i}=e,r=this.messages.gridTheme[i],l=`${this.id}--theme_tile_${i}`,u=`${l}__label`,h=g.gridTheme[i],m=this.viewModel.gridControlsEnabled;return t("div",{class:A({[c.tile]:!0,[c.tileDisabled]:!m}),id:e.id,role:"button"},t("input",{"aria-labelledby":u,checked:n===i,disabled:!m,id:l,name:`${this.id}--theme`,onchange:v=>{this.theme=i,v.target?.focus()},tabIndex:0,type:"radio"}),t("div",{class:c.tileContent},t("calcite-icon",{icon:h,scale:"l"}),t("calcite-label",{for:l,id:u},r)))}};s([a({type:C})],o.prototype,"customColor",void 0),s([a()],o.prototype,"icon",null),s([a()],o.prototype,"label",null),s([a(),I("esri/widgets/support/GridControls/t9n/GridControls")],o.prototype,"messages",void 0),s([a(),I("esri/core/t9n/Units")],o.prototype,"messagesUnits",void 0),s([a()],o.prototype,"snappingManager",null),s([a()],o.prototype,"snappingOptions",null),s([a()],o.prototype,"theme",null),s([a()],o.prototype,"view",null),s([a({type:E})],o.prototype,"viewModel",void 0),s([a({type:f,nonNullable:!0})],o.prototype,"visibleElements",void 0),o=s([V("esri.widgets.support.GridControls")],o);const pt=o;export{pt as default};
