const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Bp3GeDhQ.js","assets/index-ni9qn0ie.css","assets/index-xt-vyX-B.js","assets/index-sv8kqWXa.js","assets/customElement-DHYSes4u.js","assets/index-DolGN-Zc.js","assets/throttle-W3wYPyFb.js"])))=>i.map(i=>d[i]);
import{W as $,mX as S,a4 as k,k as O,by as P,X as L,_ as p,Y as t,bA as I,O as x,mY as D,eB as C,bZ as A,Z as s,$ as a,a6 as T,a0 as B}from"./index-Bp3GeDhQ.js";import{r as f,i as R,c as b}from"./SelectionToolbar-BB-c1Flk.js";import{A as E,n as V,t as N}from"./GridControlsViewModel-DwaDfTxy.js";import"./SketchOptions-DkZT37r7.js";import"./SketchLabelOptions-CvfS2rfH.js";import"./directionModeIcons-Br5woIHu.js";import"./euclideanLengthMeasurementUtils-D9l_P3ES.js";import"./geometry2dUtils-2tpfJ_8-.js";import"./geodeticLengthOperator-i8Sfrrr_.js";import"./geodeticCurveType-CirnHLSB.js";import"./layerUtils-D3xv-kL2.js";import"./automaticLengthMeasurementUtils-B7UwQrK7.js";import"./MeasuredGrid-OschfMyV.js";import"./defaultUnit-Bhu2r0Gs.js";import"./gridUtils-B9Wq5yiA.js";import"./editingTools-C-OIDkUZ.js";import"./SnappingVisualizer2D-BEGrj2v1.js";import"./SnappingVisualizer-BJbr5nBn.js";import"./PointSnappingHint-Dom9ZIp_.js";import"./editPlaneUtils-BJvCYGft.js";import"./coordinateFormatter-BHQM_hLm.js";import"./GraphicsLayer-n_skBp8O.js";import"./dehydratedFeatureComparison-DVEHX1g3.js";import"./createUtils-5tKs90WA.js";import"./Circle-CsXSHXzA.js";import"./distanceOperator-nvWTbr2e.js";import"./Point2D-8Py_srEd.js";import"./Distance2DCalculator-CXhBP-8I-4Klp7zPt.js";import"./ProjectionTransformation-lQCY9pCU.js";import"./Envelope2D-DQ3Tn1o-.js";import"./Transformation2D-Ckyhe4wc.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./OperatorDefinitions-DP7_WWTp.js";import"./apiConverter-jueJBHyz.js";import"./jsonConverter-DUGRtN2X.js";import"./simplifyOperator-StSk-cWv.js";import"./operatorSimplify-Dc-q6rdc.js";import"./surfaceCoordinateSystems-1qYrNKOW.js";import"./helpMessageUtils-2XpUG8Xk.js";import"./helpMessageUtils3d-DeHUiAZq.js";import"./drawSurfaces-DiCESene.js";import"./DrawingMode-Cvvf0VVz.js";import"./coordinateHelper-DdBv3hO4.js";import"./dragEventPipeline-BmlVYEH8.js";import"./EditGeometryOperations-B7ZyEu9w.js";import"./rotate-COZ-KTEt.js";import"./curveOperationUtils-Bwfdd-iC.js";import"./angularMeasurementUtils-QjmAmmw4.js";import"./SnappingContext-lR2hMWGP.js";import"./SnappingDragPipelineStep-t7JdYowu.js";import"./SnappingOperation-BgtHwmXf.js";import"./SketchTooltipInfo-DMYC7B-q.js";import"./MeshTransform-DL5XJk6-.js";import"./TooltipInfoWithCoordinates-DBppSdtp.js";import"./InteractiveToolBase-ChSp-nwp.js";import"./GraphicManipulator-CJDp3qFY.js";import"./drawUtils-DdX_qXHr.js";import"./TextOverlayItem-D5SG2tni.js";import"./automaticAreaMeasurementUtils-DsNHnpIJ.js";import"./geodesicAreaMeasurementUtils-CpeJNyDK.js";import"./earcut-D9gy186-.js";import"./formatUtils-ycABQ5-I.js";import"./number-DFdmL_Vd.js";const d="esri-grid-controls",c={base:d,borderedSwitch:`${d}__switch--bordered`,container:`${d}__container`,numericInputsContainer:`${d}__numeric-inputs__container`,tilegroup:`${d}__tilegroup`,tile:`${d}__tile`,tileDisabled:`${d}__tile--disabled`,tileContent:`${d}__tile__content`,suffixedInputContainer:`${d}__input-with-suffix__container`,inlineIcon:`${d}__inline-icon`},g={widgetIcon:"grid-unit",gridTheme:{light:"circle",dark:"circle-area",custom:"palette"},placementState:{interactive:"maximum-territory-distance",place:"move",rotate:"rotate"},warning:"exclamation-mark-triangle"},w=C.fromArray([115,115,115]),y=C.fromArray([200,200,200]),U=["interactive","place","rotate"];let o=class extends ${constructor(e,n){super(e,n),this.customColor=null,this.messages=null,this.messagesUnits=null,this.viewModel=new E,this.visibleElements=new f,S(k.getLogger(this),"Grid Controls","arcgis-grid-controls",{version:"4.33"})}initialize(){this.addHandles([O(()=>this.viewModel.gridColor,e=>{!e||w.equals(e)||y.equals(e)||(this.customColor=e)},P)])}loadDependencies(){return Promise.all([L({action:()=>p(()=>import("./index-Bp3GeDhQ.js").then(e=>e.OP),__vite__mapDeps([0,1])),"action-bar":()=>p(()=>import("./index-Bp3GeDhQ.js").then(e=>e.P6),__vite__mapDeps([0,1])),label:()=>p(()=>import("./index-Bp3GeDhQ.js").then(e=>e.P7),__vite__mapDeps([0,1])),icon:()=>p(()=>import("./index-Bp3GeDhQ.js").then(e=>e.Os),__vite__mapDeps([0,1])),popover:()=>p(()=>import("./index-Bp3GeDhQ.js").then(e=>e.OQ),__vite__mapDeps([0,1])),tooltip:()=>p(()=>import("./index-xt-vyX-B.js"),__vite__mapDeps([2,0,1])),"color-picker":()=>p(()=>import("./index-sv8kqWXa.js"),__vite__mapDeps([3,0,1,4,5,6])),"input-number":()=>p(()=>import("./index-DolGN-Zc.js"),__vite__mapDeps([5,0,1]))}),R()])}get icon(){return g.widgetIcon}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages.widgetLabel}set label(e){this._overrideIfSome("label",e)}get snappingManager(){return this.viewModel.snappingManager}set snappingManager(e){this.viewModel.snappingManager=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get theme(){const e=this.viewModel.gridColor;return e?w.equals(e)?"dark":y.equals(e)?"light":"custom":null}set theme(e){const{viewModel:n,customColor:i,view:r}=this;switch(e){case"light":n.gridColor=y;break;case"dark":n.gridColor=w;break;case"custom":n.gridColor=i??r?.effectiveTheme.accentColor??w}}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return t("div",{"aria-label":this.label,class:this.classes(c.base,I.widget,I.panel)},t("div",{class:c.container},this._renderContent()))}_renderContent(){const{visibleElements:e}=this;return[e.gridEnabledToggle?this._renderEnabledToggle():null,e.placementButtons?this._renderGridPlacementButtons():null,e.numericInputs?this._renderNumericInputs():null,e.lineIntervalInput?this._renderIntervalInput():null,e.gridSnapEnabledToggle&&this.viewModel.snappingOptions?this._renderSnappingToggle():null,e.dynamicScaleToggle?this._renderDynamicScaleToggle():null,e.rotateWithMapToggle?this._renderRotateToggle():null,e.colorSelection?this._renderColorSelection():null]}_renderGridPlacementButtons(){const{interactivePlacementState:e,placementDisabled:n,gridControlsEnabled:i}=this.viewModel,r=n||!i;return t("calcite-label",{key:"grid-placement-buttons",scale:"s"},this.messages.placementOptions,t("calcite-action-bar",{expandDisabled:!0,layout:"horizontal"},U.map(l=>this._renderPlacementModeButton(l,r,e))))}_renderPlacementModeButton(e,n,i){const r=this.messages.placementState[e],l=`__placement-action-${e}`;return t("div",null,t("calcite-action",{active:i===e,alignment:"center",disabled:n,icon:g.placementState[e],id:l,onclick:()=>this.viewModel.togglePlacementState(e),text:r}),t("calcite-tooltip",{overlayPositioning:"fixed",placement:"top",referenceElement:l},r))}_renderNumericInputs(){const{rotation:e,spacing:n,effectiveSpacingAfterDynamicScaling:i,numericSpacingInputShouldBeVisible:r,unit:l="meters"}=this.viewModel,u=this.messagesUnits.units[l].abbr,h=this.viewModel.gridControlsEnabled,m=i!=null&&i!==this.viewModel.spacing,v=`__spacing_input_scaled-${this.id}`;return t("div",{class:this.classes(c.numericInputsContainer)},[r?t("calcite-label",{key:"spacing-label",scale:"s"},t("span",null,this.messages.inputLabel.spacing,m?t("calcite-icon",{class:this.classes(c.inlineIcon),icon:g.warning,id:v,scale:"s",tabIndex:0}):void 0),t("div",{class:c.suffixedInputContainer},t("calcite-input-number",{disabled:!h,numberButtonType:"none",suffixText:u,value:`${n?.toFixed(2)}`,onCalciteInputNumberChange:({currentTarget:_})=>{const M=parseFloat(_.value);this.viewModel.spacing=M,M!==this.viewModel.spacing&&(_.value=`${this.viewModel.spacing}`)}}),m?t("calcite-tooltip",{overlayPositioning:"fixed",placement:"leading",referenceElement:v},x(this.messages.warnings.dynamicSpacing,{actualSpacingIncludingUnit:D(this.messagesUnits,i,l,2,"plural")})):void 0)):void 0,t("calcite-label",{key:"angle-label",scale:"s"},this.messages.inputLabel.angle,t("calcite-input-number",{disabled:!h,integer:!0,numberButtonType:"none",suffixText:this.messagesUnits.units.degrees.abbr,value:`${N(e)}`,onCalciteInputNumberChange:({currentTarget:_})=>this.viewModel.rotation=V(_.value)}))])}_renderIntervalInput(){const{majorLineInterval:e,gridControlsEnabled:n}=this.viewModel;return t("div",{class:this.classes(c.numericInputsContainer)},t("calcite-label",{scale:"s"},this.messages.inputLabel.interval,t("calcite-input-number",{disabled:!n,integer:!0,max:15,min:1,numberButtonType:"vertical",value:`${e}`,onCalciteInputNumberChange:({currentTarget:i})=>{const r=Number.parseInt(i.value,10);this.viewModel.majorLineInterval=r,r!==this.viewModel.majorLineInterval&&(i.value=`${this.viewModel.majorLineInterval}`)}})))}_renderSnappingToggle(){const{snappingOptions:e,gridControlsEnabled:n}=this.viewModel;return t(b,{checked:!!(e?.gridEnabled??!1),disabled:!(n&&e),key:"grid-snap-enabled-toggle",label:this.messages.switchLabel.snap,onChange:i=>this.viewModel.snappingOptions?.set("gridEnabled",i)})}_renderDynamicScaleToggle(){const{viewModel:e,messages:n}=this,i=this.visibleElements.outOfScaleWarning&&e.gridOutOfScale;return t(b,{checked:e.dynamicScaling,disabled:!e.gridControlsEnabled,hint:i?n.warnings.outOfScale:void 0,hintIcon:g.warning,hintKind:"warning",key:`grid-dynamic-scale-toggle-${this.id}`,label:n.switchLabel.scaling,onChange:r=>e.dynamicScaling=r})}_renderRotateToggle(){const{gridControlsEnabled:e,rotateWithMap:n}=this.viewModel;return t(b,{checked:n,disabled:!e,key:"grid-rotate-map-toggle",label:this.messages.switchLabel.rotateWithMap,onChange:i=>this.viewModel.rotateWithMap=i})}_renderEnabledToggle(){return t("div",{class:c.borderedSwitch},t(b,{checked:this.viewModel.displayEnabled,disabled:!!this.viewModel.interactivePlacementState,key:"grid-enabled-toggle",label:this.messages.switchLabel.display,onChange:e=>this.viewModel.trySetDisplayEnabled(e)}))}_renderColorSelection(){const{customColor:e}=this,n=`${this.id}--custom-grid-color-button`;return t("calcite-label",{scale:"s"},this.messages.inputLabel.theme,t("div",{class:c.tilegroup},[this._renderThemeTile({value:"dark"}),this._renderThemeTile({value:"light"}),this._renderThemeTile({value:"custom",id:n}),t("calcite-popover",{autoClose:!0,label:this.messages.gridLineColorPopoverLabel,overlayPositioning:"fixed",referenceElement:n},t("calcite-color-picker",{alphaChannel:!0,savedDisabled:!0,value:e?.toHex({digits:8})??"#000000ff",onCalciteColorPickerChange:i=>{const r=C.fromHex(i.currentTarget.value);r&&(this.customColor=r,this.theme="custom")}}))]))}_renderThemeTile(e){const{theme:n}=this,{value:i}=e,r=this.messages.gridTheme[i],l=`${this.id}--theme_tile_${i}`,u=`${l}__label`,h=g.gridTheme[i],m=this.viewModel.gridControlsEnabled;return t("div",{class:A({[c.tile]:!0,[c.tileDisabled]:!m}),id:e.id,role:"button"},t("input",{"aria-labelledby":u,checked:n===i,disabled:!m,id:l,name:`${this.id}--theme`,onchange:v=>{this.theme=i,v.target?.focus()},tabIndex:0,type:"radio"}),t("div",{class:c.tileContent},t("calcite-icon",{icon:h,scale:"l"}),t("calcite-label",{for:l,id:u},r)))}};s([a({type:C})],o.prototype,"customColor",void 0),s([a()],o.prototype,"icon",null),s([a()],o.prototype,"label",null),s([a(),T("esri/widgets/support/GridControls/t9n/GridControls")],o.prototype,"messages",void 0),s([a(),T("esri/core/t9n/Units")],o.prototype,"messagesUnits",void 0),s([a()],o.prototype,"snappingManager",null),s([a()],o.prototype,"snappingOptions",null),s([a()],o.prototype,"theme",null),s([a()],o.prototype,"view",null),s([a({type:E})],o.prototype,"viewModel",void 0),s([a({type:f,nonNullable:!0})],o.prototype,"visibleElements",void 0),o=s([B("esri.widgets.support.GridControls")],o);const Ze=o;export{Ze as default};
