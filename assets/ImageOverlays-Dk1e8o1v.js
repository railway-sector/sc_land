const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CgzAF5Ey.js","assets/index-ni9qn0ie.css","assets/index-DmnFha72.js"])))=>i.map(i=>d[i]);
import{_ as r,g as _,f as h,$ as y,e as a,bG as A,T as E,O as v,bI as C,U as D,V as u,da as $,W as l,bK as H,oO as F}from"./index-CgzAF5Ey.js";import{x as P,j as V,m as c}from"./customElement-CmlaReIc.js";import{D as k}from"./LayerList-Cd1pKfOs.js";import{v as R}from"./LayerListViewModel-DOIGYhGa.js";import"./OrientedImageryLayer-WtDfNKlU.js";import"./a11yUtils-B0k1CDxO.js";import"./projectOperator-GV0McMFO.js";import"./operatorProject-BaCyxOS9.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./ElevationLayer-BKaFw3VV.js";import"./ArcGISCachedService-DSjNkGng.js";import"./TileInfoTilemapCache-B_wenAXe.js";import"./LercDecoder-BoaSwpxn.js";import"./ImageryLayer-BvGD4I6c.js";import"./isImageryGraphicOrigin-Ccuhb4eK.js";import"./multidimensionalUtils-D7s9wCrf.js";import"./RasterJobHandlerMixin-BTYQtDU0.js";import"./RasterSymbolizer-B91KBOTk.js";import"./PixelBlock-D-6P5OMc.js";import"./pixelRangeUtils-BvOub3JO.js";import"./_commonjsHelpers-DCkdB7M8.js";import"./vectorFieldUtils-BfvwBWsN.js";import"./datasetUtils-DdDUWBI2.js";import"./utils-BxeCvIiv.js";import"./cimSymbolUtils-D8zbHeXT.js";import"./gfxUtils-B1R76T6S.js";import"./ClassBreaksDefinition-8EN4J2v2.js";import"./dataUtils-Bl6288_r.js";import"./imageBitmapUtils-CXji9o1v.js";import"./rasterFieldUtils-owWC2Tqk.js";import"./RasterPresetRendererMixin-B7AjuQMT.js";import"./executeForIds-J9ecr7ox.js";import"./query-CnhzGyzp.js";import"./pbfQueryUtils-S_j2eB_b.js";import"./pbf-BEkcbkvb.js";import"./executeQueryJSON-PzPNmZ_E.js";import"./ExpandViewModel-CyOPQWzt.js";import"./widget-5CKB7XP2.js";import"./GraphicsLayer-CNIUk38A.js";import"./Mesh-5O9j34eq.js";import"./MeshComponent-sBtq0OIs.js";import"./meshProperties-DWLWd_LJ.js";import"./MeshTransform-Dit-XLCt.js";import"./MeshVertexAttributes-COLD4CmN.js";import"./triangulationUtils-Bm38jwp7.js";import"./earcut-D9gy186-.js";import"./deduplicate-Cq87yrC4.js";import"./vertexSpaceConversion-DLHSkuCf.js";import"./vec4-DgNhZQgz.js";import"./External-CBuwVgCI.js";import"./vmEvent-CsrnYMSK.js";import"./MediaLayer-D7zWuWat.js";import"./VideoElement-E5DMr6hw.js";import"./MediaElementView-D6UZnd3c.js";import"./normalizeUtilsSync-BwFfP_Vx.js";import"./ControlPoint-O-tXQDvT.js";import"./mediaLayerUtils-BJ-DU5EY.js";import"./ImageElement-CeMdIsZW.js";import"./BoundsStore-CymG19gy.js";import"./Circle-BiDO0Dld.js";import"./geodesicUtils-Cfv0uT1u.js";import"./deepClone-zSvyy7Jt.js";import"./languageUtils-Ci9pGmfc.js";import"./ImmutableArray-BPVd6ESQ.js";import"./shared-DpUtm4ff.js";import"./number-BNHbRH9q.js";import"./floorFilterUtils-DKzVzLpH.js";import"./MapView-CwKV528N.js";import"./View2D-Z_g1Pe0z.js";import"./clippingUtils-QppW5MR2.js";import"./viewpointUtils-BuigW1az.js";import"./mat2d-DWPHXQcf.js";import"./mat2df64-DJ_RMjZ3.js";import"./mat2df32-Dpt2CT5P.js";import"./hitTestUtils-BYtV70CA.js";import"./rbush-eDLDlHie.js";import"./Tile-B-BE-ibd.js";import"./arcadeUtils-MYBE13Eg.js";import"./Timeline-Cz5T4vl1.js";import"./utils-DN_jc3_L.js";import"./Draw-Bs7q8swp.js";import"./SnappingVisualizer2D-D_sty-M3.js";import"./euclideanLengthMeasurementUtils-CGkbgpIY.js";import"./geometry2dUtils-DamFhDZI.js";import"./geodeticLengthOperator-CCmu1UCP.js";import"./geodeticCurveType-CirnHLSB.js";import"./geodesicMeasurementUtils-CD0H_C-6.js";import"./SnappingVisualizer-CfgCZJq2.js";import"./PointSnappingHint-ByJMd16p.js";import"./coordinateHelper-BBk0eSaI.js";import"./EditGeometryOperations-CUoPE0hp.js";import"./rotate-LRLOFQu1.js";import"./curveOperationUtils-Bf-6qlka.js";import"./SnappingContext-lR2hMWGP.js";import"./SnappingOperation-BCgVE0WW.js";import"./automaticLengthMeasurementUtils-B1DzL2GL.js";import"./DrawingMode-Cvvf0VVz.js";import"./surfaceCoordinateSystems-Czhjgkml.js";import"./drawUtils-DfCzrCmO.js";import"./quantityFormatUtils-hOh9vK9C.js";import"./areaOperator-DccGwebv.js";import"./Point2D-8Py_srEd.js";import"./Envelope2D-DQ3Tn1o-.js";import"./ProjectionTransformation-D72vYhR2.js";import"./Transformation2D-Ckyhe4wc.js";import"./OperatorDefinitions-DP7_WWTp.js";import"./jsonConverter-EjytI4Do.js";import"./apiConverter-CvNJfrRe.js";import"./geodeticAreaOperator-ncO4zfYQ.js";import"./geodeticDensifyOperator-CUM-mSy9.js";import"./operatorGeodeticDensify-D2ygatwM.js";import"./lengthOperator-CxFhBUNM.js";import"./simplifyOperator-CkrCdZRR.js";import"./operatorSimplify-CpftPpUB.js";import"./operators-BaeX3D2r.js";import"./affineTransformOperator-CBep9xo8.js";import"./operatorGeodesicBuffer-C3QQCPQh.js";import"./simplifyOGCOperator-CCJuEH9o.js";import"./OperatorSimplifyOGC-BxMfXpcX.js";import"./Transformation-CfjgNJxz.js";import"./bufferOperator-C3fOKu2I.js";import"./operatorBuffer-Ctfn1Lk3.js";import"./Bufferer-Dw9Qi4T1-DmMU98zV.js";import"./OperatorGeneralize-BF2-89dP.js";import"./centroidOperator-Cn6om9eu.js";import"./Centroid-DZi-eb9F-bsuFT5fW.js";import"./clipOperator-vUzjvvL3.js";import"./containsOperator-DH_4OVBp.js";import"./operatorConvexHull-Dtstnt_d.js";import"./OperatorCrosses-Bo35YEg8.js";import"./cutOperator-Di-dmwJV.js";import"./densifyOperator-BorquEXx.js";import"./operatorDensify-CPsyOzUu.js";import"./differenceOperator-B48dZrcZ.js";import"./distanceOperator-kpocAfUa.js";import"./Distance2DCalculator-CXhBP-8I-RGTjIsY8.js";import"./equalsOperator-BEQPwjuO.js";import"./generalizeOperator-CWNeXtMt.js";import"./operatorGeneralize-BOPizdLP.js";import"./intersectionOperator-Cv1V-QEZ.js";import"./operatorIntersection-ChMpQjPa.js";import"./intersectsOperator-RUQIyyK7.js";import"./OperatorIntersects-Q2s_ZB0E.js";import"./labelPointOperator-CF3FJ9RO.js";import"./OperatorProximity-BBNJFXrK.js";import"./OperatorOverlaps-CqeWwi8u.js";import"./proximityOperator-CJBDpiUf.js";import"./relateOperator-DrBanIAi.js";import"./symmetricDifferenceOperator-heSitsZ5.js";import"./OperatorTouches-CfSdRjLR.js";import"./unionOperator-Dj7O8xPO.js";import"./operatorUnion-ClGNRpq_.js";import"./OperatorWithin-CrxvVT6B.js";import"./offset-CBc0lznI.js";import"./unitConversion-FJJcJ7aj.js";import"./operatorOffset-D6prETIX.js";import"./ImageryTileLayer-DgPV_a3H.js";import"./isImageryTileGraphicOrigin-ZR-gBf9D.js";import"./xmlUtilities-DhOJzv6R.js";import"./QueueProcessor-DIiVPdhP.js";import"./RawBlockCache-CXmw_9Mx.js";import"./rasterProjectionHelper-FtdA54qR.js";import"./clipUtils-CpEsp-yF.js";import"./rasterFunctionHelper-CIXquxIf.js";import"./PolynomialTransform-BTUf5vGs.js";import"./SketchViewModel-DhxBVxKu.js";import"./isSupportedObject-DSxuxd5I.js";import"./layerUtils-C4kbKZbG.js";import"./SketchLabelOptions-CtWdh0ak.js";import"./SketchOptions-DsWZlvNP.js";import"./SnappingManager-C_Xw3YlC.js";import"./automaticAreaMeasurementUtils-BatsSLDN.js";import"./geodesicAreaMeasurementUtils-CadONabs.js";import"./useWidget-DdroRqZj.js";import"./useView-CMtXgKA0.js";import"./listUtils-V67Tcz5c.js";import"./actionUtils-BhEhehjO.js";import"./layerListUtils-CrO8uhQ1.js";import"./ListItem-DyzSo_ob.js";import"./utils-BQBvadb7.js";let L=class extends R{_compileList(){const t=this.view?.map?.allLayers;if(!t)return;const e=t.filter(P);this._watchLayersListMode(e);const i=this._getViewableLayers(e);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}};L=r([_("esri.widgets.OrientedImageryViewer.components.OverlayLayersListViewModel")],L);let d=class extends k{constructor(){super(...arguments),this._rootListEl=null,this.viewModel=new L,this.selectionMode="multiple",this.visibilityAppearance=void 0}initialize(){super.initialize(),this.addHandles([h(()=>this._rootListEl,()=>{this._rootListEl&&(this._rootListEl.selectionAppearance="icon")},y)])}};r([a()],d.prototype,"_rootListEl",void 0),r([a()],d.prototype,"viewModel",void 0),r([a()],d.prototype,"selectionMode",void 0),r([a()],d.prototype,"visibilityAppearance",void 0),d=r([_("esri.widgets.OrientedImageryViewer.components.OverlayLayersList")],d);let s=class extends A(E){constructor(t){super(t),this._previousAction=null,this.closed=!1,this.dataCaptureEnabled=!1,this.dataCaptureLayer=null,this.imageGeometryField=null,this.imageReferenceField=null,this.layerList=new d({selectionMode:"multiple"}),this.messages=null,this.overlayedLayers=new v,this.showCameraLocations=!1,this.showMapFeatures=!1,this._createSelectedItemsHandle=()=>{this.removeHandles("selected-items"),this.addHandles(this._trackLayerSelectionChanges(),"selected-items")},this._createDataCaptureLayerHandle=()=>h(()=>({dataCaptureLayer:this.dataCaptureLayer,operationalItems:this.layerList.operationalItems}),({dataCaptureLayer:e,operationalItems:i},o)=>{if(!e&&o?.dataCaptureLayer){const p=i.find(m=>m.layer===o.dataCaptureLayer);p&&p.actionsSections?.items.forEach(m=>{m.items.forEach(n=>{n.id==="create-features"&&(n.value=!1)})})}},y),this._handleSelectedItemsChange=({added:e,removed:i})=>{e.forEach(o=>{this.overlayedLayers.includes(o.layer)||this.onLayerSelected?.(o)}),i.forEach(o=>{this.overlayedLayers.includes(o.layer)&&this.onLayerDeselected?.(o)}),this.overlayedLayers.removeAll(),this.overlayedLayers.addMany(this.layerList.selectedItems.items.map(o=>o.layer))},this._layerListTriggerActionHandle=()=>C(()=>this.layerList,"trigger-action",e=>{const{action:i,item:{layer:o}}=e;switch(this._resetPreviousAction(i),i.id){case"create-features":this._toggleDataCaptureLayer(i,o);break;case"show-all-features":{const p=o?.id;p&&this.onFilterCapturedFeatures?.(p);break}}}),this._resetPreviousAction=e=>{this._previousAction?.type==="toggle"&&this._previousAction!==e&&(this._previousAction.value=!1,this._previousAction=null)},this._toggleDataCaptureLayer=(e,i)=>{this._previousAction=e;const o=e.value;this.dataCaptureLayer=o?i:null,this.onDataCaptureLayerChanged?.(this.dataCaptureLayer)},this._trackLayerSelectionChanges=()=>C(()=>this.layerList.selectedItems,"change",this._handleSelectedItemsChange),this._watchLayerListForListItemCreatedFunction=()=>h(()=>({layerList:this.layerList,listItemCreatedFunction:this._listItemCreatedFunction}),()=>{this.layerList.listItemCreatedFunction=this._listItemCreatedFunction},y),this._watchSelectedItems=()=>h(()=>this.layerList.selectedItems,this._createSelectedItemsHandle,y)}initialize(){this.addHandles([this._watchSelectedItems(),this._layerListTriggerActionHandle(),this._watchLayerListForListItemCreatedFunction(),this._createDataCaptureLayerHandle()])}loadDependencies(){return D({list:()=>u(()=>import("./index-CgzAF5Ey.js").then(t=>t.Na),__vite__mapDeps([0,1])),"list-item":()=>u(()=>import("./index-CgzAF5Ey.js").then(t=>t.Ne),__vite__mapDeps([0,1])),panel:()=>u(()=>import("./index-CgzAF5Ey.js").then(t=>t.MZ),__vite__mapDeps([0,1])),switch:()=>u(()=>import("./index-DmnFha72.js"),__vite__mapDeps([2,0,1]))})}get _listItemCreatedFunction(){const{dataCaptureEnabled:t,imageGeometryField:e,imageReferenceField:i}=this;return t&&e&&i?async o=>{const{item:p}=o,m=p.layer,{dataCaptureLayer:n,overlayedLayers:I,messages:{createFeaturesFromImage:f,showFeatures:S},layerList:M}=this,b=I.includes(m),{selectedItems:g}=M;if(T(b,g,p),await m?.load(),!m||!V(m,e,i)||!$(m))return;const w=n===m,O=G([f,S],p,g,w);w&&(this._previousAction=O)}:null}get view(){return this.layerList?.view}set view(t){this.layerList.view=t}_renderCameraLocationsSwitch(t){return l("calcite-list-item",{bind:this,label:this.messages.overlayCameraLocations,onclick:this._toggleShowCameraLocations},l("calcite-switch",{bind:this,checked:t,class:c.overlaysSwitch,onchange:this._toggleShowCameraLocations,scale:"s",slot:"actions-end"}))}_renderOverlayMapFeatures(t){return l("calcite-list-item",{bind:this,label:this.messages?.overlayMapFeatures,onclick:this._toggleShowMapFeatures},l("calcite-switch",{bind:this,checked:t,class:c.overlaysSwitch,onchange:this._toggleShowMapFeatures,scale:"s",slot:"actions-end"}))}_renderList(t){return t?l("div",{class:c.imageOverlaysLayerList},this.layerList.render()):null}_renderPanel(){const{closed:t,messages:e,showCameraLocations:i,showMapFeatures:o}=this;return l("calcite-panel",{bind:this,closable:!0,closed:t,heading:e.imageOverlays,onCalcitePanelClose:this.onImageOverlaysClosed},l("calcite-list",{label:e.imageOverlays},this._renderCameraLocationsSwitch(i),this._renderOverlayMapFeatures(o)),this._renderList(o))}_toggleShowCameraLocations(t){t.stopPropagation(),this.showCameraLocations=!this.showCameraLocations,this.onShowCameraLocationsChanged?.(this.showCameraLocations)}_toggleShowMapFeatures(t){t.stopPropagation(),this.showMapFeatures=!this.showMapFeatures,this.onShowMapFeaturesChanged?.(this.showMapFeatures)}render(){const t=this.layerList.operationalItems.items.length,e=this.showMapFeatures&&t===0,i=this.showMapFeatures&&t>0,o={[H.widget]:!0,[c.imageOverlaysNoResult]:e,[c.imageOverlaysIncreasedHeight]:i,[c.imageOverlays]:!e&&!i};return l("div",{class:this.classes(o)},this._renderPanel())}};r([a()],s.prototype,"_previousAction",void 0),r([a()],s.prototype,"_listItemCreatedFunction",null),r([a()],s.prototype,"closed",void 0),r([a()],s.prototype,"dataCaptureEnabled",void 0),r([a()],s.prototype,"dataCaptureLayer",void 0),r([a()],s.prototype,"imageGeometryField",void 0),r([a()],s.prototype,"imageReferenceField",void 0),r([a()],s.prototype,"layerList",void 0),r([a()],s.prototype,"messages",void 0),r([a()],s.prototype,"onDataCaptureLayerChanged",void 0),r([a()],s.prototype,"onFilterCapturedFeatures",void 0),r([a()],s.prototype,"onImageOverlaysClosed",void 0),r([a()],s.prototype,"onLayerDeselected",void 0),r([a()],s.prototype,"onLayerSelected",void 0),r([a()],s.prototype,"onShowCameraLocationsChanged",void 0),r([a()],s.prototype,"onShowMapFeaturesChanged",void 0),r([a()],s.prototype,"overlayedLayers",void 0),r([a()],s.prototype,"showCameraLocations",void 0),r([a()],s.prototype,"showMapFeatures",void 0),r([a()],s.prototype,"view",null),s=r([_("esri.widgets.OrientedImageryViewer.components.ImageOverlays")],s);const ar=s;function T(t,e,i){t&&e.items.push(i)}function x(t,e){const i=new v;i.add(t[0]),i.add(t[1]),e.actionsSections=new v([i])}function G(t,e,i,o=!1){const p=new F({icon:"pencil",id:"create-features",title:t[0],value:o}),m=new F({icon:"list-show-all",id:"show-all-features",title:t[1],value:o});return e.addHandles(h(()=>i.includes(e),n=>{p.visible=n,m.visible=n},y)),x([p,m],e),p}export{ar as default};
