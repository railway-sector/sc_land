import{_ as i,e as s,g as r,Z as n,f as u,$ as a,y as h,a0 as d}from"./index-CgzAF5Ey.js";let o=class extends n{constructor(e){super(e),this.tool=null,this._loggedUnsupportedErrorOnce=!1,e?.visible!=null&&(this.visible=e.visible)}initialize(){this.addHandles(u(()=>({ready:this.view!=null&&this.view.ready,supported:this.supported}),({ready:e,supported:t})=>{!e||t||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)},a))}destroy(){this.removeTool(),this.view=null}get active(){return this.tool!=null&&this.tool.active}get disabled(){return this.view==null||!this.view.ready||!this.supported}get supported(){return this.view==null||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this.removeHandles(t),e!=null&&this.addHandles(e.tools.on("after-remove",l=>{l.item===this.tool&&this._set("tool",null)}),t)}set visible(e){this._set("visible",e),this.tool!=null&&(this.tool.visible=e)}createTool(e={interactive:!1}){if(this.removeTool(),this.view==null||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),h(()=>t.created,()=>{t.active&&this.view!=null&&(this.view.activeTool=null)},{initial:!0,once:!0})):t.destroy()}removeTool(){const e=this.tool;if(e==null)return;const t=this.view?.tools;t!=null?t.remove(e):e.destroy(),this._set("tool",null)}logError(...e){d.getLogger(this).error(...e)}};i([s({constructOnly:!0})],o.prototype,"tool",void 0),i([s()],o.prototype,"active",null),i([s()],o.prototype,"disabled",null),i([s()],o.prototype,"supported",null),i([s({value:null})],o.prototype,"view",null),i([s({type:Boolean,value:!0})],o.prototype,"visible",null),o=i([r("esri.widgets.support.InteractiveToolViewModel")],o);export{o as p};
