import{lW as n,j4 as s,_ as o,e as r,g as p}from"./index-BrQW8HOS.js";import{A as d,c as l,l as u}from"./drawSurfaces-Dk7dFDxx.js";import{r as h}from"./InteractiveToolBase-BmMFG_WL.js";import"./dehydratedFeatureComparison-3eJNk6Ap.js";import"./DrawingMode-Cvvf0VVz.js";import"./coordinateHelper-DrvFu3jL.js";import"./dragEventPipeline-DNpVWaws.js";import"./EditGeometryOperations-vGO-F4bG.js";import"./geometry2dUtils-kADrF-iP.js";import"./rotate-BhR0-nSl.js";import"./curveOperationUtils-DH-ids6k.js";import"./euclideanLengthMeasurementUtils-B8AL_WaV.js";import"./utils-D_VO_1nP.js";import"./geodesicUtils-BJZXB7Hp.js";import"./geodeticLengthOperator-DifrZujk.js";import"./geodeticCurveType-CirnHLSB.js";import"./geodesicMeasurementUtils-CQw8IWGR.js";import"./angularMeasurementUtils-C6IEZQKT.js";import"./SketchLabelOptions-BPF5xZLI.js";import"./SnappingContext-lR2hMWGP.js";import"./SnappingDragPipelineStep-Bkdf_3gf.js";import"./SnappingOperation-C2jjQrkg.js";let e=class extends h{constructor(t){super(t),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const t=this.view,a=n(this.hasZ,this.elevationInfo);this.drawOperation=new d({view:t,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:t.type==="3d"?new u(t,a):null,elevationDrawSurface:t.type==="3d"?new l(a,this.defaultZ,t):null,hasM:!1,elevationInfo:a,automaticLengthMeasurementUtils:this.automaticLengthMeasurementUtils}),this.addHandles([this.drawOperation.on("vertex-add",i=>this.onVertexAdd(i)),this.drawOperation.on("vertex-remove",i=>this.onVertexRemove(i)),this.drawOperation.on("vertex-update",i=>this.onVertexUpdate(i)),this.drawOperation.on("cursor-update",i=>this.onCursorUpdate(i)),this.drawOperation.on("complete",i=>this.onComplete(i))]),this.finishToolCreation()}destroy(){this.drawOperation=s(this.drawOperation),this._set("view",null)}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.geometryIncludingUncommittedVertices}onInputEvent(t){this.drawOperation.onInputEvent(t)}canRedo(){return this.drawOperation.canRedo}canUndo(){return this.drawOperation.canUndo}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(t){this.emit("complete",t)}onCursorUpdate(t){this.emit("cursor-update",t)}onVertexAdd(t){this.emit("vertex-add",t)}onVertexRemove(t){this.emit("vertex-remove",t)}onVertexUpdate(t){this.emit("vertex-update",t)}};o([r({constructOnly:!0,nonNullable:!0})],e.prototype,"defaultZ",void 0),o([r()],e.prototype,"drawOperation",void 0),o([r({constructOnly:!0})],e.prototype,"elevationInfo",void 0),o([r({value:!0})],e.prototype,"enabled",null),o([r({constructOnly:!0})],e.prototype,"geometryType",void 0),o([r({constructOnly:!0})],e.prototype,"automaticLengthMeasurementUtils",void 0),o([r({constructOnly:!0})],e.prototype,"hasZ",void 0),o([r({constructOnly:!0})],e.prototype,"mode",void 0),o([r()],e.prototype,"snapToScene",void 0),o([r({readOnly:!0})],e.prototype,"type",void 0),o([r({readOnly:!0})],e.prototype,"updating",null),o([r({constructOnly:!0,nonNullable:!0})],e.prototype,"view",void 0),e=o([p("esri.views.draw.LegacyDrawTool")],e);export{e as LegacyDrawTool};
