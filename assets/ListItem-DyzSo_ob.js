const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Legend-jFLBGK2E.js","assets/index-CgzAF5Ey.js","assets/index-ni9qn0ie.css","assets/LegendViewModel-BaMgXxRU.js","assets/featureReductionUtils-Caulfaw_.js","assets/EffectView-B3K5O1-N.js","assets/ExportImageParameters-CHuh_iLO.js","assets/floorFilterUtils-DKzVzLpH.js","assets/sublayerUtils-BEQnBRaB.js","assets/pixelRangeUtils-BvOub3JO.js","assets/rendererConversion-CDc69Ii2.js","assets/cimSymbolUtils-D8zbHeXT.js","assets/symbolUtils-0l5vVMbV.js","assets/gfxUtils-B1R76T6S.js","assets/svgUtils-smkwubCy.js","assets/mat2df32-Dpt2CT5P.js","assets/mat2d-DWPHXQcf.js","assets/utils-BxeCvIiv.js","assets/utils-6ht-EJRw.js","assets/utils-CAdwX-R_.js","assets/previewSymbol3D-xRDRpg6O.js","assets/previewUtils-m-R88IBt.js","assets/webStyleSymbolUtils-onUVZ_RA.js","assets/devEnvironmentUtils-8WtPGj6h.js","assets/webStyleAcceptedFormats-CG7ZQ6BV.js","assets/previewCIMSymbol-Ct8s9f2u.js","assets/CIMSymbolHelper-Bd9SO2qF.js","assets/BidiEngine-BvER9tXK.js","assets/labelPoint-DZLJ2eV0.js","assets/rasterizingUtils-DPK9f2Iy.js","assets/Rect-CUzevAry.js","assets/BoundingBox-RIlEJuyl.js","assets/CIMSymbolRasterizer-DB9Xymz-.js","assets/CIMResourceManager-KvxbKRQg.js","assets/OverrideHelper-DgkHuzVT.js","assets/callExpressionWithFeature-Lt9Or9I8.js","assets/utils-B0DWbpnl.js","assets/Heading-CsXYN9Dx.js"])))=>i.map(i=>d[i]);
import{bG as f,T as L,f as o,bJ as d,jl as _,W as h,V as O,_ as i,e as l,g as C,O as g,oO as P,hO as M,oP as A,Z as E,o2 as c,aR as k,bP as T}from"./index-CgzAF5Ey.js";import{x as V,b as D,a as F,u as v,p as H,d as x}from"./layerListUtils-CrO8uhQ1.js";import{e as m}from"./widget-5CKB7XP2.js";let r=class extends f(L){constructor(e,t){super(e,t),this._legend=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([o(()=>this._canCreateLegend,()=>this._createLegend(),d),o(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),d)])}destroy(){this._legend=_(this._legend)}get _canCreateLegend(){const{content:e,listItem:t}=this;if(!t)return!1;const s="legend";return e===s||e!=null&&!!Array.isArray(e)&&e.includes(s)}get _legendOptions(){const{listItem:e,_legendLayerInfo:t}=this,s=e?.view;return t&&s?{view:s,layerInfos:[t]}:{}}get _legendLayerInfo(){const e=this.listItem?.layer;if(!e||e.type==="subtype-sublayer")return null;const t=V(e)?e:null,s=e?.parent,a=s!=null&&"type"in s&&s.type==="map-image"?t?.source:null,u="";return a&&s?{layer:s,title:u,sublayerIds:[a.mapLayerId]}:{layer:e,title:u}}get disabled(){const{listItem:e,_legend:t,content:s}=this;return!e||!(Array.isArray(s)&&s.length>1)&&!!t&&(!t.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return h("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:t,disabled:s,open:a}=this;return e&&!s&&a?e==="legend"&&t?h("div",{key:"legend-widget"},t.render()):typeof e=="string"?h("div",{innerHTML:e,key:e}):m(e)?h("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?h("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:t}=this;return t?Array.isArray(e)?e.map(s=>this._renderContent(s)):this._renderContent(e):null}async _createLegend(){if(_(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await O(()=>import("./Legend-jFLBGK2E.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37])),t=new e(this._legendOptions);this._legend=t}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:m(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(t=>this._getWidget(t)).find(t=>t):this._getWidget(e)}};i([l()],r.prototype,"_legend",void 0),i([l()],r.prototype,"_canCreateLegend",null),i([l()],r.prototype,"_legendOptions",null),i([l()],r.prototype,"_legendLayerInfo",null),i([l()],r.prototype,"content",void 0),i([l()],r.prototype,"disabled",null),i([l()],r.prototype,"flowEnabled",void 0),i([l()],r.prototype,"icon",null),i([l()],r.prototype,"image",void 0),i([l()],r.prototype,"listItem",void 0),i([l()],r.prototype,"open",void 0),i([l()],r.prototype,"title",null),i([l()],r.prototype,"visible",void 0),r=i([C("esri.widgets.LayerList.ListItemPanel")],r);const w=r;var p;const W=g.ofType({key:"type",defaultKeyValue:"button",base:A,typeMap:{button:M,toggle:P}}),I=g.ofType(W),b="layer",y="child-list-mode",z="hide";let n=p=class extends f(E){constructor(e){super(e),this.actionsSections=new I,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(g.ofType(p)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.parent=null,this.view=null}initialize(){if(this.addHandles([o(()=>[this.layer,this.layer?.listMode,this.listModeDisabled],()=>this._watchLayerProperties(this.layer),d),o(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),d),o(()=>this.view,e=>this._updateChildrenView(e),d),o(()=>this.panel,e=>this._setListItemOnPanel(e),d)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;const s=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(a=>a.layer===s)??null}set panel(e){const t=this._get("panel");e!==t&&e&&t?.destroy(),this._set("panel",e)}castPanel(e){return this.panel?.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new w(e):null}get sortable(){return this.layer?.type!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=c(this,"layer.layer");return(!e||e&&c(this,"layer.layer.loaded"))&&c(this,"layer.title")||c(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){const{layer:e,checkPublishStatusEnabled:t}=this;return!!(t&&e&&"publishingInfo"in e&&e.publishingInfo?.status==="publishing")}get updating(){const{layerView:e,connectionStatus:t,layer:s,publishing:a}=this;return!a&&!t&&(e?e.updating:s?.loadStatus==="loading"||!1)}get visible(){return!!this.layer?.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!D(this.layer,this.view?.scale)}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return F(this.layer)}clone(){return new p({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){this.children?.forEach(t=>t.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(s=>s.view=e)}_createChildren(e){const{listModeDisabled:t,children:s}=this,a=e.filter(u=>!s.some(S=>S.layer===u));s.addMany(this._createChildItems(a,t))}_destroyChildren(e){const{children:t}=this,s=t.filter(a=>!!a.layer&&!e.includes(a.layer));t.destroyMany(s)}_sortChildren(e){this.children.sort((t,s)=>e.indexOf(s.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(y),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(y),this.listModeDisabled||this.addHandles(e.toArray().map(t=>o(()=>t.listMode,()=>this._compileChildren(e))),y)}_compileChildren(e){const t=this.listModeDisabled?e:e?.filter(s=>v(s)!==z);e?.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),b)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.reverse().map(s=>t||H(s)?new p({layer:s,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(k)}_watchLayerProperties(e){if(this.removeHandles(b),this.removeHandles(y),!e)return;if((!this.listModeDisabled&&v(e))==="hide-children")return void this.children.destroyAll();const t=x(e);t&&this.addHandles(o(()=>e[t],s=>{e.hasOwnProperty(t)&&this._initializeChildLayers(s)},d),b)}};i([l({type:I})],n.prototype,"actionsSections",void 0),i([l()],n.prototype,"actionsOpen",void 0),i([l()],n.prototype,"checkPublishStatusEnabled",void 0),i([l({type:g.ofType(n)})],n.prototype,"children",void 0),i([l()],n.prototype,"childrenSortable",void 0),i([l({readOnly:!0})],n.prototype,"connectionStatus",null),i([l({readOnly:!0})],n.prototype,"error",null),i([l()],n.prototype,"hidden",void 0),i([l({readOnly:!0})],n.prototype,"incompatible",null),i([l()],n.prototype,"layer",void 0),i([l({readOnly:!0})],n.prototype,"layerView",null),i([l()],n.prototype,"listItemCreatedFunction",void 0),i([l({nonNullable:!0})],n.prototype,"listModeDisabled",void 0),i([l()],n.prototype,"open",void 0),i([l({type:w})],n.prototype,"panel",null),i([T("panel")],n.prototype,"castPanel",null),i([l()],n.prototype,"parent",void 0),i([l({value:!0})],n.prototype,"sortable",null),i([l()],n.prototype,"title",null),i([l({readOnly:!0})],n.prototype,"publishing",null),i([l({readOnly:!0})],n.prototype,"updating",null),i([l()],n.prototype,"view",void 0),i([l()],n.prototype,"visible",null),i([l({readOnly:!0})],n.prototype,"visibleAtCurrentScale",null),i([l({readOnly:!0})],n.prototype,"visibleAtCurrentTimeExtent",null),i([l({readOnly:!0})],n.prototype,"visibilityMode",null),n=p=i([C("esri.widgets.LayerList.ListItem")],n);const j=n;export{j as I};
