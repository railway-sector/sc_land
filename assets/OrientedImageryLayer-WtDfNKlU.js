import{sw as B,tF as Q,tG as X,sx as Z,_ as e,e as r,g as S,Z as ee,fo as H,bF as T,bE as A,ch as J,d4 as q,fn as te,d0 as re,dM as ie,a5 as oe,wY as ne,cn as ae,aQ as se,AP as pe,iX as le,i$ as ue}from"./index-CgzAF5Ey.js";const ce=Symbol("isOrientedImageryGraphicOrigin");var k;let ye=class extends B{get[(k=ce,Q)](){return this.layer}get[X](){return this.layer}get[Z](){return this.layer}constructor(i){super(),this[k]=!0,this.type="oriented-imagery",this.layer=i}get id(){return this.layer.id}},w=class extends ee{set horizontalWKID(i){i?H({wkid:+i})?this._set("horizontalWKID",+i):this._set("horizontalWKID",i):this._set("horizontalWKID",null)}set verticalWKID(i){i?this._set("verticalWKID",isFinite(i)&&H({wkid:+i})?+i:null):this._set("verticalWKID",null)}get isAdvanced(){const{affineTransformations:i,focalLength:o,principalOffsetPoint:a,radialDistortionCoefficients:p,tangentialDistortionCoefficients:l}=this;return i?.length>1&&!Number.isNaN(o)&&a?.length>1&&p?.length>1&&l?.length>1}};e([r({json:{write:!0}})],w.prototype,"affineTransformations",void 0),e([r({json:{write:!0}})],w.prototype,"focalLength",void 0),e([r({json:{write:!0}})],w.prototype,"principalOffsetPoint",void 0),e([r({json:{write:!0}})],w.prototype,"radialDistortionCoefficients",void 0),e([r({json:{write:!0}})],w.prototype,"tangentialDistortionCoefficients",void 0),e([r({json:{write:!0}})],w.prototype,"horizontalWKID",null),e([r({json:{write:!0}})],w.prototype,"verticalWKID",null),e([r({json:{write:!0}})],w.prototype,"x",void 0),e([r({json:{write:!0}})],w.prototype,"y",void 0),e([r({json:{write:!0}})],w.prototype,"z",void 0),e([r({json:{write:!0}})],w.prototype,"type",void 0),w=e([S("esri.layers.orientedImagery.core.CameraOrientation")],w);const M=w;let h=class extends T(A(M)){constructor(){super(...arguments),this.type=1}toString(){const{type:i,horizontalWKID:o,verticalWKID:a,x:p,y:l,z:d,heading:y,pitch:f,roll:b,affineTransformations:P,focalLength:I,principalOffsetPoint:j,radialDistortionCoefficients:N,tangentialDistortionCoefficients:m}=this,s=[i,o,a,p,l,d,y,f,b];return this.isAdvanced&&(P?.forEach(u=>s.push(u)),s.push(I),j?.forEach(u=>s.push(u)),N?.forEach(u=>s.push(u)),m?.forEach(u=>s.push(u))),s.map(u=>Number.isNaN(u)?"":u).join("|")}};e([r({json:{write:!0}})],h.prototype,"type",void 0),e([r({type:[Number],json:{write:!0}})],h.prototype,"affineTransformations",void 0),e([r({type:Number,json:{write:!0}})],h.prototype,"focalLength",void 0),e([r({type:[Number],json:{write:!0}})],h.prototype,"principalOffsetPoint",void 0),e([r({type:[Number],json:{write:!0}})],h.prototype,"radialDistortionCoefficients",void 0),e([r({type:[Number],json:{write:!0}})],h.prototype,"tangentialDistortionCoefficients",void 0),e([r({type:Number,json:{write:!0}})],h.prototype,"heading",void 0),e([r({type:Number,json:{write:!0}})],h.prototype,"pitch",void 0),e([r({type:Number,json:{write:!0}})],h.prototype,"roll",void 0),e([r({type:Number,json:{write:!0}})],h.prototype,"x",void 0),e([r({type:Number,json:{write:!0}})],h.prototype,"y",void 0),e([r({type:Number,json:{write:!0}})],h.prototype,"z",void 0),h=e([S("esri.layers.orientedImagery.core.CameraOrientationHPR")],h);const de=h;let D=class extends T(A(M)){constructor(){super(...arguments),this.type=4}toString(){const{type:i,latitude:o,longitude:a,ellipsoidRadius:p,squaredEccentricity:l,properties:d}=this,y=`${d}`.split("|");return y.splice(1,1),`${i}|${o}|${a}|${p}|${l}|${y.join("|")}`}};e([r({json:{write:!0}})],D.prototype,"type",void 0),e([r({json:{write:!0},type:Number})],D.prototype,"latitude",void 0),e([r({json:{write:!0},type:Number})],D.prototype,"longitude",void 0),e([r({json:{write:!0},type:Number})],D.prototype,"ellipsoidRadius",void 0),e([r({json:{write:!0},type:Number})],D.prototype,"squaredEccentricity",void 0),e([r({json:{write:!0}})],D.prototype,"properties",void 0),D=e([S("esri.layers.orientedImagery.core.CameraOrientationLTP")],D);const fe=D;let g=class extends T(A(M)){constructor(){super(...arguments),this.type=2}toString(){const{type:t,horizontalWKID:i,verticalWKID:o,x:a,y:p,z:l,omega:d,phi:y,kappa:f,affineTransformations:b,focalLength:P,principalOffsetPoint:I,radialDistortionCoefficients:j,tangentialDistortionCoefficients:N}=this,m=[t,i,o,a,p,l,d,y,f];return this.isAdvanced&&(b?.forEach(s=>m.push(s)),m.push(P),I?.forEach(s=>m.push(s)),j?.forEach(s=>m.push(s)),N?.forEach(s=>m.push(s))),m.map(s=>isNaN(s)?"":s).join("|")}};e([r({json:{write:!0}})],g.prototype,"type",void 0),e([r({type:[Number],json:{write:!0}})],g.prototype,"affineTransformations",void 0),e([r({type:Number,json:{write:!0}})],g.prototype,"focalLength",void 0),e([r({type:[Number],json:{write:!0}})],g.prototype,"principalOffsetPoint",void 0),e([r({type:[Number],json:{write:!0}})],g.prototype,"radialDistortionCoefficients",void 0),e([r({type:[Number],json:{write:!0}})],g.prototype,"tangentialDistortionCoefficients",void 0),e([r({type:Number,json:{write:!0}})],g.prototype,"omega",void 0),e([r({type:Number,json:{write:!0}})],g.prototype,"phi",void 0),e([r({type:Number,json:{write:!0}})],g.prototype,"kappa",void 0),e([r({type:Number,json:{write:!0}})],g.prototype,"x",void 0),e([r({type:Number,json:{write:!0}})],g.prototype,"y",void 0),e([r({type:Number,json:{write:!0}})],g.prototype,"z",void 0),g=e([S("esri.layers.orientedImagery.core.CameraOrientationOPK")],g);const me=g;let v=class extends T(A(M)){constructor(){super(...arguments),this.type=3}get isAdvanced(){const{affineTransformations:i,focalLength:o,principalOffsetPoint:a,radialDistortionCoefficients:p,tangentialDistortionCoefficients:l}=this;return i?.length>1||!Number.isNaN(o)||a?.length>1||p?.length>1||l?.length>1}toString(){const{type:i,horizontalWKID:o,verticalWKID:a,x:p,y:l,z:d,yaw:y,pitch:f,roll:b,affineTransformations:P,focalLength:I,principalOffsetPoint:j,radialDistortionCoefficients:N,tangentialDistortionCoefficients:m}=this,s=[i,o,a,p,l,d,y,f,b];return this.isAdvanced&&(P?.forEach(u=>s.push(u)),s.push(I),j?.forEach(u=>s.push(u)),j?.forEach(u=>s.push(u)),N?.forEach(u=>s.push(u)),m?.forEach(u=>s.push(u))),s.map(u=>Number.isNaN(u)?"":u).join("|")}};e([r({json:{write:!0}})],v.prototype,"type",void 0),e([r({type:[Number],json:{write:!0}})],v.prototype,"affineTransformations",void 0),e([r({type:Number,json:{write:!0}})],v.prototype,"focalLength",void 0),e([r({type:[Number],json:{write:!0}})],v.prototype,"principalOffsetPoint",void 0),e([r({type:[Number],json:{write:!0}})],v.prototype,"radialDistortionCoefficients",void 0),e([r({type:[Number],json:{write:!0}})],v.prototype,"tangentialDistortionCoefficients",void 0),e([r({type:Number,json:{write:!0}})],v.prototype,"yaw",void 0),e([r({type:Number,json:{write:!0}})],v.prototype,"pitch",void 0),e([r({type:Number,json:{write:!0}})],v.prototype,"roll",void 0),e([r({type:Number,json:{write:!0}})],v.prototype,"x",void 0),e([r({type:Number,json:{write:!0}})],v.prototype,"y",void 0),e([r({type:Number,json:{write:!0}})],v.prototype,"z",void 0),v=e([S("esri.layers.orientedImagery.core.CameraOrientationYPR")],v);const he=v,O=new Map;O.set("2",{desc:"Using Omega Phi Kappa",constructor:me}),O.set("1",{desc:"Using Heading, Pitch and Roll",constructor:de}),O.set("3",{desc:"Using Yaw, Pitch and Roll",constructor:he}),O.set("4",{desc:"Using Local Tangent Plane",constructor:fe});let x=class extends T(J){constructor(){super(...arguments),this.url=null}};e([r({type:Number,json:{write:!0}})],x.prototype,"lod",void 0),e([r({type:String,json:{write:!0}})],x.prototype,"rasterFunction",void 0),e([r({type:String,json:{write:!0}})],x.prototype,"url",void 0),x=e([S("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],x);let _=class extends T(J){constructor(){super(...arguments),this.constantElevation=null}};e([r({type:Number,json:{write:!0}})],_.prototype,"constantElevation",void 0),_=e([S("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],_);const ge=t=>t!=null&&typeof t.constantElevation=="number",Re=t=>t!=null&&t.url?.length>0;function ve(t,i,o){return i&&(t=`${i}${t}`),o&&(t+=`${o}`),t}function we(t,i,o){let{url:a}=t;return a?(a=ve(a,i,o),new x({...t,url:a})):null}function je(t,i,o){return t&&(ge(t)?new _(t):we(t,i,o))}const L=new q({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),R=new q({Feet:"feet",Meter:"meter"}),U=new q({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique",Terrestrial360Video:"terrestrial-360-video",TerrestrialFrameVideo:"terrestrial-frame-video",Aerial360Video:"aerial-360-video",AerialFrameVideo:"aerial-frame-video","":null}),$=new Map;function be(t){const[i,o,a,p,l,d,y,f,b,P,I,j,N,m,s,u,z,C,F,E,W,K]=t.slice(1);return{horizontalWKID:i,verticalWKID:o,x:a,y:p,z:l,omega:d,phi:y,kappa:f,...G([b,P,I,j,N,m],[u,z],[C,F,E],[W,K],s)}}$.set("1",Pe),$.set("3",Ie),$.set("2",be),$.set("4",Ne);const V=t=>{const i=t.map(o=>parseFloat(o)).filter(o=>!isNaN(o));if(i.length===t.length)return i};function G(t,i,o,a,p){const l=V(t),d=V(i),y=V(o),f=V(a);return{affineTransformations:l?.length===6?l:void 0,focalLength:l?.length===6?parseFloat(p):void 0,principalOffsetPoint:d?.length!==2?[0,0]:d,radialDistortionCoefficients:y?.length!==3?[0,0,0]:y,tangentialDistortionCoefficients:f?.length!==2?[0,0]:f}}function Pe(t){const[i,o,a,p,l,d,y,f,b,P,I,j,N,m,s,u,z,C,F,E,W,K]=t.slice(1);return{horizontalWKID:i,verticalWKID:o,x:a,y:p,z:l,heading:d,pitch:y,roll:f,...G([b,P,I,j,N,m],[u,z],[C,F,E],[W,K],s)}}function Ie(t){const[i,o,a,p,l,d,y,f,b,P,I,j,N,m,s,u,z,C,F,E,W,K]=t.slice(1);return{horizontalWKID:i,verticalWKID:o,x:a,y:p,z:l,yaw:d,pitch:y,roll:f,...G([b,P,I,j,N,m],[u,z],[C,F,E],[W,K],s)}}function Ne(t){const[i,o,a,p,l,...d]=t.slice(1),y=$.get(l),f=O.get(l)?.constructor;return!y||!f?null:{latitude:i,longitude:o,ellipsoidRadius:a,squaredEccentricity:p,properties:new f(y([l,"",...d]))}}function Ve(t){if(!t)return null;const i=`${t}`.split("|");if(i.length===0)return null;const o=O.get(i[0]);if(!o)return null;const a=$.get(i[0]);return a?new o.constructor(a(i)):null}function De(t){return Array.isArray(t)&&t?.length>5&&!t.some(isNaN)}function Se(t){for(t=t.slice(0,8);t.length<8;)t.push(0);return t}function _e(t){return t.spatialReference.isGeographic?re(t):t.clone()}function Ae(t){return t.isGeographic?1:te(t)}function Me(t){const i=t.match(/^(.*)\/rest\/services\/(.*)$/);return i?i[1]:null}const xe=new Set(["demPathPrefix","demPathSuffix","depthImagePathPrefix","depthImagePathSuffix","elevationSource","horizontalMeasurementUnit","imageGeometryField","imageReferenceField","referenceIDField","sequenceOrderField","verticalMeasurementUnit","videoPathPrefix","videoPathSuffix","timeAnimation","visibilityTimeExtent"]),Oe=new Set(["elevationSource"]),Y=(t,i)=>!xe.has(i)&&t,$e=(t,i,o)=>{const a=`orientedImageryProperties.${t}`,p={allowNull:Oe.has(t),ignoreOrigin:!0};return{name:a,write:i?{...p,target:a,writer:i}:p,read:o?{ignoreOrigin:!0,source:a,reader:o}:{ignoreOrigin:!0}}};function Te(t){return t.json&&(t.json.origins=t.json.origins??{},t.json.origins["web-scene"]={write:!1,read:!1}),t}function c(t,i,o,a){const{name:p,write:l,read:d}=$e(t,i,o),y={name:p,write:l,read:d,origins:{service:{name:`orientedImageryInfo.${p}`,write:i,read:o},"web-scene":{name:p,write:Y(l,t),read:Y(d,t)},"web-map":{name:p,write:l,read:d}}};return a&&y.origins&&(y.type=a,y.origins["web-map"].type=a,y.origins["web-scene"].type=a),y}let n=class extends ie{constructor(t){super(t),this.attributeTableTemplate=null,this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType="point",this.graphicOrigin=new ye(this),this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imageGeometryField="ImageGeometry",this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageReferenceField="OIObjectID",this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType="OrientedImageryLayer",this.orientationAccuracy=null,this.orientedImageryType=null,this.referenceIDField="OBJECTID",this.sequenceOrderField="SequenceOrder",this.supportedSourceTypes=new Set(["Oriented Imagery Layer"]),this.type="oriented-imagery",this.timeIntervalUnit="days",this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.virtualCacheDirectory=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){const{elevationSource:t,demPathPrefix:i,demPathSuffix:o}=this;return je(t,i,o)}set fieldConfigurations(t){}get fieldConfigurations(){}writePopupTemplate(t,i,o,a){t&&(i[o]=t.toJSON(a))}set portalItem(t){super.portalItem=t}async save(t){return this._debouncedSaveOperations(0,t)}async saveAs(t,i){return this._debouncedSaveOperations(1,i,t)}findFirstValidLayerId(t){return t.layers?.find(i=>this.supportedSourceTypes.has(i.type))?.id}_verifySource(){if(super._verifySource(),this.geometryType!=="point")throw new oe("oriented-imagery-layer:invalid-geometry-type","OrientedImageryLayer only supports point geometry type")}};e([r({type:ne,json:{write:!1,read:!1}})],n.prototype,"attributeTableTemplate",void 0),e([r({type:Number,json:c("cameraHeading")})],n.prototype,"cameraHeading",void 0),e([r({type:Number,json:c("cameraHeight")})],n.prototype,"cameraHeight",void 0),e([r({type:Number,json:c("cameraPitch")})],n.prototype,"cameraPitch",void 0),e([r({type:Number,json:c("cameraRoll")})],n.prototype,"cameraRoll",void 0),e([r({type:Number,json:c("coveragePercent")})],n.prototype,"coveragePercent",void 0),e([r({type:String,json:c("demPathPrefix")})],n.prototype,"demPathPrefix",void 0),e([r({type:String,json:c("demPathSuffix")})],n.prototype,"demPathSuffix",void 0),e([r({type:String,json:c("depthImagePathPrefix")})],n.prototype,"depthImagePathPrefix",void 0),e([r({type:String,json:c("depthImagePathSuffix")})],n.prototype,"depthImagePathSuffix",void 0),e([r({type:Object,json:c("elevationSource")})],n.prototype,"elevationSource",void 0),e([r({readOnly:!0})],n.prototype,"effectiveElevationSource",null),e([r({type:Number,json:c("farDistance")})],n.prototype,"farDistance",void 0),e([r({json:{write:!1}})],n.prototype,"fieldConfigurations",null),e([r()],n.prototype,"geometryType",void 0),e([r({readOnly:!0,clonable:!1})],n.prototype,"graphicOrigin",void 0),e([r({type:Number,json:c("horizontalFieldOfView")})],n.prototype,"horizontalFieldOfView",void 0),e([r({type:String,json:c("horizontalMeasurementUnit")})],n.prototype,"horizontalMeasurementUnit",void 0),e([r({type:String,json:{...c("imageGeometryField"),default:"ImageGeometry"}})],n.prototype,"imageGeometryField",void 0),e([r({type:String,json:c("imagePathPrefix")})],n.prototype,"imagePathPrefix",void 0),e([r({type:String,json:c("imagePathSuffix")})],n.prototype,"imagePathSuffix",void 0),e([r({type:String,json:{...c("imageReferenceField"),default:"OIObjectID"}})],n.prototype,"imageReferenceField",void 0),e([r({type:Number,json:c("imageRotation")})],n.prototype,"imageRotation",void 0),e([r({type:Number,json:c("maximumDistance")})],n.prototype,"maximumDistance",void 0),e([r({type:Number,json:c("nearDistance")})],n.prototype,"nearDistance",void 0),e([r({type:["OrientedImageryLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],n.prototype,"operationalLayerType",void 0),e([r({json:{...c("orientationAccuracy",(t,i,o)=>{ue(o,t.join(";"),i)},t=>{const i=t?.split(";")?.map(Number);return De(i)?Se(i):[0,0,0,0,0,0,0,0]},String)}})],n.prototype,"orientationAccuracy",void 0),e([r({json:{...c("orientedImageryType",U.write,U.read,U.jsonValues.slice(1))}})],n.prototype,"orientedImageryType",void 0),e([ae("popupTemplate")],n.prototype,"writePopupTemplate",null),e([r({type:String,json:{...c("referenceIDField"),default:"OBJECTID"}})],n.prototype,"referenceIDField",void 0),e([r({type:String,json:{...c("sequenceOrderField"),default:"SequenceOrder"}})],n.prototype,"sequenceOrderField",void 0),e([r({json:{read:!1},value:"oriented-imagery",readOnly:!0})],n.prototype,"type",void 0),e([r({type:L.apiValues,json:{...c("timeIntervalUnit",L.write,L.read,L.jsonValues)}})],n.prototype,"timeIntervalUnit",void 0),e([r(Te(se(pe)))],n.prototype,"useViewTime",void 0),e([r({type:Number,json:c("verticalFieldOfView")})],n.prototype,"verticalFieldOfView",void 0),e([r({type:R.apiValues,json:{...c("verticalMeasurementUnit",R.write,R.read,R.jsonValues)}})],n.prototype,"verticalMeasurementUnit",void 0),e([r({type:String,json:c("videoPathPrefix")})],n.prototype,"videoPathPrefix",void 0),e([r({type:String,json:c("videoPathSuffix")})],n.prototype,"videoPathSuffix",void 0),e([r({type:String,json:{read:!1,write:!1,origins:{service:{name:"orientedImageryInfo.orientedImageryProperties.virtualCacheDirectory",read:!0}}}})],n.prototype,"virtualCacheDirectory",void 0),e([r({type:le,json:{origins:{"web-scene":{write:!1,read:!1}}}})],n.prototype,"visibilityTimeExtent",void 0),n=e([S("esri.layers.OrientedImageryLayer")],n);const ze=n,Ue=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));export{Ve as D,Me as K,Ue as O,_e as W,je as a,U as b,Re as c,M as d,ze as e,_ as i,Ae as j,ve as l,O as n,ge as p};
