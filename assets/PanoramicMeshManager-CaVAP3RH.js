import{bz as s,n4 as o,cU as r}from"./index-CVzGOCNQ.js";class e{constructor(){this._connection=null,this.convertPixelBlockToImageData=async t=>{if(!this._connection)throw new s("panoramic-mesh-manager:convertPixelBlockToImageData","Panoramic mesh manager is not loaded");const a=t.clone(),{pixelBlock:n,transferList:i}=a.getTransferableObject();return await this._connection.invoke("convertPixelBlockToImageData",n,{transferList:i})},this.getFacesWithVertexAttributes=async t=>{if(!this._connection)throw new s("panoramic-mesh-manager:getFacesWithVertexAttributes","Panoramic mesh manager is not loaded");return await this._connection.invoke("getFacesWithVertexAttributes",t)}}destroy(){this._connection?.close()}async _startWorker(t){this._connection=await o("PanoramicMeshWorker",t)}static getInstance(){return e._instance||(e._instance=new e),e._instance}async load(t){return r(t),await this._startWorker(t),this}async recomputePositions(t,a,n,i){if(!this._connection)throw new s("panoramic-mesh-manager:recomputePositions","Panoramic mesh manager is not loaded");return await this._connection.invoke("recomputePositions",{oldDistance:t,newDistance:a,position:n},{...i,transferList:[n.buffer.slice()]})}}export{e as default};
