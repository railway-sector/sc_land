const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/intersectsOperator-RUQIyyK7.js","assets/ProjectionTransformation-D72vYhR2.js","assets/Envelope2D-DQ3Tn1o-.js","assets/Point2D-8Py_srEd.js","assets/Transformation2D-Ckyhe4wc.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/index-CgzAF5Ey.js","assets/index-ni9qn0ie.css","assets/OperatorDefinitions-DP7_WWTp.js","assets/jsonConverter-EjytI4Do.js","assets/OperatorIntersects-Q2s_ZB0E.js","assets/apiConverter-CvNJfrRe.js","assets/DrawScreenTool-BHnzIbOv.js","assets/mat2df64-DJ_RMjZ3.js","assets/drawSurfaces-CQjcevUo.js","assets/dehydratedFeatureComparison-GEO06dBy.js","assets/DrawingMode-Cvvf0VVz.js","assets/coordinateHelper-BBk0eSaI.js","assets/dragEventPipeline-CrllCNgu.js","assets/EditGeometryOperations-CUoPE0hp.js","assets/geometry2dUtils-DamFhDZI.js","assets/rotate-LRLOFQu1.js","assets/curveOperationUtils-Bf-6qlka.js","assets/euclideanLengthMeasurementUtils-CGkbgpIY.js","assets/utils-DN_jc3_L.js","assets/geodesicUtils-Cfv0uT1u.js","assets/geodeticLengthOperator-CCmu1UCP.js","assets/geodeticCurveType-CirnHLSB.js","assets/geodesicMeasurementUtils-CD0H_C-6.js","assets/angularMeasurementUtils-DWPIAu_Z.js","assets/SketchLabelOptions-CtWdh0ak.js","assets/SnappingContext-lR2hMWGP.js","assets/SnappingDragPipelineStep-CzwhpchR.js","assets/SnappingOperation-BCgVE0WW.js","assets/createUtils-IRSfXt-_.js","assets/Circle-BiDO0Dld.js","assets/distanceOperator-kpocAfUa.js","assets/Distance2DCalculator-CXhBP-8I-RGTjIsY8.js","assets/simplifyOperator-CkrCdZRR.js","assets/operatorSimplify-CpftPpUB.js","assets/surfaceCoordinateSystems-Czhjgkml.js","assets/mat2d-DWPHXQcf.js","assets/InteractiveToolBase-CODufc4B.js","assets/index-DmnFha72.js","assets/index-B8hawk0r.js","assets/index-C6Bg1Dv_.js","assets/index-C9uWnEMP.js","assets/index-CSsEIhIa.js","assets/GridControls-BwYs5-gy.js","assets/GridControlsViewModel-hKfODt31.js","assets/MeasuredGrid-B5ySCGnr.js","assets/defaultUnit-CrOs0S_r.js","assets/getDefaultUnitForView-DdQQf52Q.js","assets/gridUtils-wkjo3J8K.js","assets/editingTools-SmJwGuwj.js","assets/SnappingVisualizer2D-D_sty-M3.js","assets/SnappingVisualizer-CfgCZJq2.js","assets/PointSnappingHint-ByJMd16p.js","assets/editPlaneUtils-qQv50LHM.js","assets/coordinateFormatter-4c6X-xJV.js","assets/GraphicsLayer-CNIUk38A.js","assets/helpMessageUtils-2XpUG8Xk.js","assets/helpMessageUtils3d-Btb32ZF_.js","assets/SketchTooltipInfo-ipmEcjXX.js","assets/MeshTransform-Dit-XLCt.js","assets/a11yUtils-B0k1CDxO.js","assets/quantityFormatUtils-hOh9vK9C.js","assets/directionModeIcons-Br5woIHu.js","assets/TooltipInfoWithCoordinates-Ctjrbg45.js","assets/SketchOptions-DsWZlvNP.js","assets/cimSymbolUtils-D8zbHeXT.js","assets/GraphicManipulator-DC391nnv.js","assets/drawUtils-DfCzrCmO.js","assets/TextOverlayItem-D3xCLKKZ.js","assets/automaticAreaMeasurementUtils-BatsSLDN.js","assets/geodesicAreaMeasurementUtils-CadONabs.js","assets/earcut-D9gy186-.js","assets/automaticLengthMeasurementUtils-B1DzL2GL.js","assets/formatUtils-BMZi2HDr.js","assets/number-BNHbRH9q.js","assets/layerListUtils-CrO8uhQ1.js","assets/LayerListViewModel-DOIGYhGa.js","assets/utils-BQBvadb7.js","assets/ListItem-DyzSo_ob.js","assets/widget-5CKB7XP2.js","assets/layerUtils-C4kbKZbG.js"])))=>i.map(i=>d[i]);
import{DU as Ce,b2 as he,ow as le,rl as ke,pe as $e,db as Fe,rn as ge,DV as ye,DW as Ie,dc as Ne,DX as U,DY as be,V as h,li as De,xd as Be,_ as o,e as i,g as _,d6 as ve,O as se,b3 as Pe,ex as _e,hJ as Ve,am as Ae,fp as Re,af as Ge,a_ as xe,rU as H,aq as He,a0 as D,DZ as We,aY as ze,f as G,a$ as oe,rC as q,b9 as fe,Z as $,U as Y,W as d,a1 as J,T as ne,bK as re,aR as R,bJ as de,a5 as Ke,oN as Ue,jl as ce,mJ as je,bI as ee,bY as qe}from"./index-CgzAF5Ey.js";import{l as me}from"./SketchOptions-DsWZlvNP.js";import{e as Je}from"./directionModeIcons-Br5woIHu.js";import{u as we,e as Ye}from"./euclideanLengthMeasurementUtils-CGkbgpIY.js";import{d as Qe,p as Te}from"./layerListUtils-CrO8uhQ1.js";import{v as Ze}from"./LayerListViewModel-DOIGYhGa.js";import{I as Xe}from"./ListItem-DyzSo_ob.js";import{l as ue}from"./layerUtils-C4kbKZbG.js";import{c as et}from"./automaticLengthMeasurementUtils-B1DzL2GL.js";async function tt(e){const{returnFeatureTitleFields:t,returnGeometry:l,selector:n,signal:s,sources:r,view:a}=e;if(!r?.length)return[];const{layers:p,layerViews:c,graphicsLayers:y}=ot(r),w=[];return await he(le(Promise.all([st({candidates:w,layers:p,returnFeatureTitleFields:t,returnGeometry:l,selector:n,signal:s,view:a}),it({candidates:w,layerViews:c,returnGeometry:l,selector:n,signal:s,view:a}),pt({candidates:w,graphicsLayers:y,selector:n})]),s)),w}function ot(e){const t=[],l=[],n=[];return e.forEach(s=>{ke(s)||$e(s)||Fe(s)?t.push(s):(ge(s)||ye(s))&&s.layers?.length?t.push(...s.layers.toArray()):Ie(s)&&s.sublayers?.length?n.push(...s.sublayers.toArray()):Ne(s)?n.push(s):U(s)&&l.push(s)}),{layers:t,layerViews:l,graphicsLayers:n}}async function it(e){const{candidates:t,layerViews:l,returnGeometry:n,selector:s,signal:r,view:a}=e;s.type!=="point"?await le(Promise.allSettled(l.map(async p=>{const c=rt(p,s,a,n),y=await p.queryFeatures(c,{signal:r});be(t,y.features)})),r):await lt({candidates:t,layerViews:l,selector:s,view:a})}async function lt({candidates:e,layerViews:t,selector:l,view:n}){const s=n.toScreen(l);if(!s)return;const r=t.map(p=>p.layer),{results:a}=await n.hitTest(s,{include:r});a.forEach(p=>{"graphic"in p&&p.graphic&&e.push(p.graphic)})}async function st(e){const{candidates:t,layers:l,returnFeatureTitleFields:n,returnGeometry:s,selector:r,signal:a,view:p}=e;await le(Promise.allSettled(l.map(async c=>{if("isTable"in c&&c.isTable)return;const y=at(c,r,p,n,s),w=await c.queryFeatures(y,{signal:a});be(t,w.features)})),a)}function Oe(e,t,l){return e.type==="point"?De(e,"renderer"in t?Be({renderer:t.renderer}):0,l):e}function nt(e,t,l){const{fields:n,fieldsIndex:s}=e,r=new Set([e.objectIdField]);"globalIdField"in e&&e.globalIdField!=null&&s.has(e.globalIdField)&&r.add(s.get(e.globalIdField).name);const a="displayField"in e?e.displayField:null,p=Ce({displayField:a,fields:n});if(p!=null&&s.has(p)&&r.add(p),"subtypeField"in e&&e.subtypeField!=null){const c=s.get(e.subtypeField)?.name;if(c!=null&&r.add(c),"utilityNetworks"in t.map&&t.map.utilityNetworks?.length){const y=s.get("assetgroup");y?.name&&r.add(y.name);const w=s.get("assettype");w?.name&&r.add(w.name)}}return(l||t.requiredFieldsOptions.featureTitleFields)&&"featureTitleFields"in e&&e.featureTitleFields&&e.featureTitleFields.forEach(c=>r.add(c)),Array.from(r.values())}function rt(e,t,l,n=!0){const s=e.createQuery();return s.outFields=["*"],s.geometry=Oe(t,e.layer,l),s.returnGeometry=n,s.outSpatialReference=l.spatialReference,s}function at(e,t,l,n=!1,s=!0){const r=e.createQuery();return r.outFields=nt(e,l,n),r.geometry=Oe(t,e,l),r.returnGeometry=s,r.outSpatialReference=l.spatialReference,r}async function pt(e){const{candidates:t,graphicsLayers:l,selector:n}=e,s=l.flatMap(a=>a.graphics.toArray())??[];if(!s?.length||!n)return;const r=await h(()=>import("./intersectsOperator-RUQIyyK7.js").then(a=>a.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]));r.accelerateGeometry(n),s.forEach(a=>{a.geometry&&a.geometry.type!=="mesh"&&r.execute(n,a.geometry)&&t.push(a)})}const dt=100;let g=class extends ve{constructor(t){super(t),this._completed=!1,this._isConstraintKeyDown=!1,this._processTask=null,this.createTool="rectangle",this.mode=null,this.persistSelection=!0,this.returnFeatureTitleFields=!1,this.returnGeometry=!0,this.selection=new se,this.selectionManager=null,this.selectOnComplete=!0,this.sources=null,this.toolName="",this.type="add",this._process=Pe(async(l,n)=>{const{callback:s,selector:r,completed:a}=l,p=_e(async c=>{const{effectiveSelectionManager:y,returnFeatureTitleFields:w,returnGeometry:P,selection:Z,sources:X,view:pe}=this;if(!(!X?.length&&!y.sources.length)&&pe){if(r&&X!=null){const x=await tt({returnFeatureTitleFields:w,returnGeometry:P,selector:r,signal:c,sources:X,view:pe});if(Z.removeAll(),Z.addMany(x),a&&this.persistSelection)switch(this.effectiveType){case"remove":y.updateSelection({current:[],added:[],removed:x});break;case"replace":y.clear(),y.updateSelection({current:x,added:[],removed:[]});break;default:y.updateSelection({current:x,added:[],removed:[]})}}s&&s()}else Z.removeAll()});return Ve(n,()=>p.abort()),this._processTask=p,p.promise},dt),this._onOperationFinish=this._onOperationFinish.bind(this)}initialize(){this._setup()}get _defaultMode(){return this.createTool==="polygon"?"click":"hybrid"}get _selectionArea(){const t=this._tool.coordinates;if(t.length===0)return;const l=ze(),n=this.view.spatialReference,s=a=>{l.x=a[0],l.y=a[1];const p=this.view.toMap(l);return[p?.x??0,p?.y??0]};if(t.length===1||t.every(([a,p])=>a===t[0][0]&&p===t[0][1])){const[a,p]=s(t[0]);return new Ae({x:a,y:p,spatialReference:n})}const r=t.map(s);if(r.length!==0)return Re(r)||r.reverse(),new Ge({spatialReference:n,rings:[r]})}get completed(){return this._completed}get effectiveSelectionManager(){return this.selectionManager??this.view.selectionManager}get effectiveType(){const t=this.type??"add";if(this._isConstraintKeyDown)switch(t){case"add":return"remove";case"remove":case"replace":return"add";default:return t}return t}get processingFinalSelection(){return!(!this._processTask||!this._tool?.drawOperation?.isCompleted)}cancel(){this.selection.removeAll(),this._onOperationFinish(!0)}destroy(){this._toolImportController=xe(this._toolImportController)}async _setup(){const{createTool:t,view:l}=this;if(await l.whenReady(),this.destroyed||this._toolImportController)return;const n=new AbortController;this._toolImportController=n;const[s,r]=await Promise.all([h(()=>import("./DrawScreenTool-BHnzIbOv.js"),__vite__mapDeps([12,6,7,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,3,37,1,2,4,5,8,11,9,38,39,40,41,42])),et()]);if(n.signal.aborted)return;const a=Symbol();try{this._tool=new s.DrawScreenTool({view:l,mode:this.mode??this._defaultMode,geometryType:t,cursor:t==="point"?"default":"crosshair",automaticLengthMeasurementUtils:r})}finally{this._toolImportController=null}this._tool?(this.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>{this._syncConstraintKeyDown(),he(this._process({selector:this._selectionArea}))}),a),this._syncConstraintKeyDown(),this.addHandles([l.on("key-down",p=>{if(!p.repeat)switch(this._syncConstraintKeyDown(),p.key){case H.constraint:this._tool.uniformSizeToggled=!0,p.stopPropagation();break;case H.center:this._tool.centeredToggled=!0,p.stopPropagation()}}),l.on("key-up",p=>{switch(this._syncConstraintKeyDown(),p.key){case H.constraint:this._tool.uniformSizeToggled=!1,p.stopPropagation();break;case H.center:this._tool.centeredToggled=!1,p.stopPropagation()}}),this.selection.on("change",({added:p,removed:c})=>this.emit("selection-change",{operationType:this.effectiveType,added:p,removed:c})),this._tool.on("complete",async p=>{this._syncConstraintKeyDown(),this.removeHandles(a),p.aborted?this.cancel():(this._tool.cursor="progress",await this._process({selector:this._selectionArea,callback:this._onOperationFinish,completed:!0}))})],a),this.addHandles(He(()=>l.tools.remove(this._tool))),l.addAndActivateTool(this._tool)):D.getLogger(this).warn("Unable to import Draw module. SelectionOperation failed to load.")}_syncConstraintKeyDown(){const{inputManager:t}=this.view;this._isConstraintKeyDown=We.invertType.some(l=>t.isModifierKeyDown(l))}_onOperationFinish(t=!1){this.removeAllHandles(),this._processTask?.abort(),this.emit("complete",{aborted:t,operationType:this.effectiveType,selection:this.selection.toArray(),toolName:this.toolName}),this._completed=!0}};o([i()],g.prototype,"_completed",void 0),o([i()],g.prototype,"_defaultMode",null),o([i()],g.prototype,"_isConstraintKeyDown",void 0),o([i()],g.prototype,"_processTask",void 0),o([i()],g.prototype,"_selectionArea",null),o([i()],g.prototype,"completed",null),o([i({constructOnly:!0})],g.prototype,"createTool",void 0),o([i()],g.prototype,"effectiveSelectionManager",null),o([i()],g.prototype,"effectiveType",null),o([i({constructOnly:!0})],g.prototype,"mode",void 0),o([i()],g.prototype,"persistSelection",void 0),o([i()],g.prototype,"processingFinalSelection",null),o([i()],g.prototype,"returnFeatureTitleFields",void 0),o([i()],g.prototype,"returnGeometry",void 0),o([i({readOnly:!0})],g.prototype,"selection",void 0),o([i({constructOnly:!0})],g.prototype,"selectionManager",void 0),o([i({constructOnly:!0})],g.prototype,"selectOnComplete",void 0),o([i()],g.prototype,"sources",void 0),o([i({constructOnly:!0})],g.prototype,"toolName",void 0),o([i()],g.prototype,"type",void 0),o([i({constructOnly:!0})],g.prototype,"view",void 0),g=o([_("esri.widgets.support.Selector2D.SelectionOperation")],g);const ct=g;let b=class extends ve{constructor(t){super(t),this._operationHandlesGroup=null,this.activeOperation=null,this.continuousSelectionEnabled=!1,this.defaultLassoToolOptions={createTool:"polygon",mode:"hybrid",toolName:"lasso"},this.defaultOperationType="add",this.defaultPointToolOptions={createTool:"point",toolName:"point"},this.defaultRectangleToolOptions={createTool:"rectangle",toolName:"rectangle"},this.layerViewPreferenceEnabled=!0,this.persistSelection=!0,this.selectionManager=null,this.returnFeatureTitleFields=!1,this.returnGeometry=!0,this.selectOnComplete=!0,this.sources=null,this.toolConfigs=[]}initialize(){this.addHandles([G(()=>this.effectiveSources,t=>{this.activeOperation&&(this.activeOperation.sources=t)}),G(()=>this.defaultOperationType,t=>{this.activeOperation&&(this.activeOperation.type=t)})])}destroy(){this.activeOperation?.cancel(),this.activeOperation?.destroy(),this._operationHandlesGroup=oe(this._operationHandlesGroup)}get effectiveSelectionManager(){return this.selectionManager??this.view?.selectionManager}get effectiveSources(){const{layerViewPreferenceEnabled:t,sources:l,view:n}=this,s=l??this.effectiveSelectionManager?.sources;if(!s?.length)return[];const r=[];return s.forEach(a=>{if(U(a))r.push(a);else if(ge(a)||ye(a))(a.layers||[]).forEach(p=>{const c=n?ue(n,p):void 0,y=t&&U(c)?c:p;r.push(y)});else if(t){const p=n?ue(n,a):void 0,c=U(p)?p:a;r.push(c)}else r.push(a)}),r}get layers(){return q(D.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(t){q(D.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=t}get state(){return this.activeOperation?"active":this.view?.ready&&this.effectiveSources.length?"ready":"disabled"}activate(t){const{state:l}=this,n=t?.view||this.view,s=t?.sources||this.effectiveSources;if(l==="disabled"||!n)return void D.getLogger(this).warn("Unable to start selection operation.");l==="active"&&this.cancel();const r=new CustomEvent("before-activate",{cancelable:!0,detail:{toolName:t?.toolName??null}});if(this.emit("before-activate",r),r.defaultPrevented)return;const a={type:this.defaultOperationType,persistSelection:this.persistSelection,returnFeatureTitleFields:this.returnFeatureTitleFields,returnGeometry:this.returnGeometry,selectOnComplete:this.selectOnComplete,selectionManager:this.effectiveSelectionManager,...t,sources:s,view:n},p=new ct({...a});return this._operationHandlesGroup=fe([p.on("selection-change",c=>this.emit("selection-change",c)),p.once("complete",c=>this._onOperationComplete(c,a))]),this._set("activeOperation",p),p}activateTool(t){this.cancel();const l=this._getToolOptions(t);if(l)return this.activate(l);D.getLogger(this).warn("Unable to activate tool: unable to determine options.")}cancel(){this.activeOperation?.cancel(),this._set("activeOperation",null)}toggleTool(t){const{activeOperation:l}=this;if(l){const n=l.toolName;if(this.cancel(),n===t)return}return this.activateTool(t)}_onOperationComplete(t,l){const n=this.activeOperation?.type??t.operationType;this._operationHandlesGroup=oe(this._operationHandlesGroup),this.activeOperation?.destroy(),this._set("activeOperation",null),this.emit("complete",t),this.continuousSelectionEnabled&&!t.aborted&&this.activate({...l,type:n})}_getToolOptions(t){return this.toolConfigs.find(n=>n.toolName===t)||(t==="lasso"?this.defaultLassoToolOptions:t==="point"?this.defaultPointToolOptions:t==="rectangle"?this.defaultRectangleToolOptions:void 0)}};o([i({readOnly:!0})],b.prototype,"activeOperation",void 0),o([i()],b.prototype,"continuousSelectionEnabled",void 0),o([i()],b.prototype,"defaultLassoToolOptions",void 0),o([i()],b.prototype,"defaultOperationType",void 0),o([i()],b.prototype,"defaultPointToolOptions",void 0),o([i()],b.prototype,"defaultRectangleToolOptions",void 0),o([i()],b.prototype,"effectiveSelectionManager",null),o([i()],b.prototype,"effectiveSources",null),o([i()],b.prototype,"layers",null),o([i()],b.prototype,"layerViewPreferenceEnabled",void 0),o([i()],b.prototype,"persistSelection",void 0),o([i()],b.prototype,"selectionManager",void 0),o([i()],b.prototype,"returnFeatureTitleFields",void 0),o([i()],b.prototype,"returnGeometry",void 0),o([i()],b.prototype,"selectOnComplete",void 0),o([i()],b.prototype,"sources",void 0),o([i({readOnly:!0})],b.prototype,"state",null),o([i()],b.prototype,"toolConfigs",void 0),o([i()],b.prototype,"view",void 0),b=o([_("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],b);const ut=b;let T=class extends ${constructor(t){super(t),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};o([i({type:Boolean,nonNullable:!0})],T.prototype,"colorSelection",void 0),o([i({type:Boolean,nonNullable:!0})],T.prototype,"dynamicScaleToggle",void 0),o([i({type:Boolean,nonNullable:!0})],T.prototype,"gridEnabledToggle",void 0),o([i({type:Boolean,nonNullable:!0})],T.prototype,"numericInputs",void 0),o([i({type:Boolean,nonNullable:!0})],T.prototype,"gridSnapEnabledToggle",void 0),o([i({type:Boolean,nonNullable:!0})],T.prototype,"lineIntervalInput",void 0),o([i({type:Boolean,nonNullable:!0})],T.prototype,"outOfScaleWarning",void 0),o([i({type:Boolean,nonNullable:!0})],T.prototype,"placementButtons",void 0),o([i({type:Boolean,nonNullable:!0})],T.prototype,"rotateWithMapToggle",void 0),T=o([_("esri.widgets.support.GridControls.VisibleElements")],T);const Le=T;let O=class extends ${constructor(t){super(t),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new Le({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};o([i({type:Boolean,nonNullable:!0})],O.prototype,"enabledToggle",void 0),o([i({type:Boolean,nonNullable:!0})],O.prototype,"featureEnabledToggle",void 0),o([i({type:Boolean,nonNullable:!0})],O.prototype,"gridEnabledToggle",void 0),o([i({type:Boolean,nonNullable:!0})],O.prototype,"header",void 0),o([i({type:Boolean,nonNullable:!0})],O.prototype,"layerList",void 0),o([i({type:Boolean,nonNullable:!0})],O.prototype,"gridControls",void 0),o([i({type:Le,nonNullable:!0})],O.prototype,"gridControlsElements",void 0),o([i({type:Boolean,nonNullable:!0})],O.prototype,"layerListToggleLayersButton",void 0),o([i({type:Boolean,nonNullable:!0})],O.prototype,"selfEnabledToggle",void 0),O=o([_("esri.widgets.support.SnappingControls.VisibleElements")],O);const Q=O,Se=()=>Y({icon:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.MT),__vite__mapDeps([6,7])),label:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.N6),__vite__mapDeps([6,7])),switch:()=>h(()=>import("./index-DmnFha72.js"),__vite__mapDeps([43,6,7])),tooltip:()=>h(()=>import("./index-B8hawk0r.js"),__vite__mapDeps([44,6,7]))}),V="esri-labeled-switch",A={label:`${V}__label`,labelContent:`${V}__label-content`,iconInfo:`${V}__icon_info`,iconWarning:`${V}__icon_warning`,tooltip:`${V}__tooltip`};function B({checked:e,disabled:t,hint:l,key:n,label:s,onChange:r,hintIcon:a,hintKind:p}){return d("calcite-label",{class:A.label,disabled:t,key:n,layout:"inline-space-between",scale:"s"},l?d("div",{class:A.labelContent,key:"label-content"},d("div",null,s),d("calcite-icon",{class:p!=="warning"?A.iconInfo:A.iconWarning,icon:a??"information",id:n,onclick:c=>c.stopPropagation(),onpointerdown:c=>{c.preventDefault(),c.stopPropagation();const y=c.target.nextElementSibling;y.open=!y.open},scale:"s",tabIndex:0}),d("calcite-tooltip",{class:A.tooltip,overlayPositioning:"fixed",referenceElement:n},l)):s,d("calcite-switch",{checked:e,disabled:t,scale:"s",onCalciteSwitchChange:c=>r(c.currentTarget.checked)}))}let F=class extends ${constructor(t){super(t),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};o([i({type:Boolean,nonNullable:!0})],F.prototype,"directionModePicker",void 0),o([i({type:Boolean,nonNullable:!0})],F.prototype,"header",void 0),o([i({type:Boolean,nonNullable:!0})],F.prototype,"labelsToggle",void 0),o([i({type:Boolean,nonNullable:!0})],F.prototype,"tooltipsToggle",void 0),F=o([_("esri.widgets.support.SketchTooltipControls.VisibleElements")],F);const Ee=F,W="esri-sketch-tooltip-controls",z={base:W,block:`${W}__block`,blockContent:`${W}__block-content`,radioButtonLabelWrapper:`${W}__radio-button-label-wrapper`};let k=class extends ne{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new Ee,this.sketchOptions=new me,this.viewType=void 0,this._onTooltipsEnabledChange=l=>{this.sketchOptions.tooltips.enabled=l},this._onLabelsEnabledChange=l=>{this.sketchOptions.labels.enabled=l},this._onDirectionModeChange=l=>{this.sketchOptions.values.directionMode=l.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([Y({block:()=>h(()=>import("./index-C6Bg1Dv_.js"),__vite__mapDeps([45,6,7])),label:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.N6),__vite__mapDeps([6,7])),icon:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.MT),__vite__mapDeps([6,7])),"radio-button":()=>h(()=>import("./index-C9uWnEMP.js"),__vite__mapDeps([46,6,7])),"radio-button-group":()=>h(()=>import("./index-CSsEIhIa.js"),__vite__mapDeps([47,6,7]))}),Se()])}render(){const{label:e,visibleElements:t}=this,l=this._renderContent();return d("div",{"aria-label":e,class:this.classes(z.base,re.widget)},l?d("calcite-block",{class:z.block,expanded:!0,heading:t.header?this.label:"",key:"content-block",label:this.label},d("div",{class:z.blockContent,key:"content"},l)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,l=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&t!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(R);return l.length===0?null:l}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return d(B,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return d(B,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:l}=t.values;return d("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,d("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:l,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",l,e.directionModeRelative),this._renderDirectionModeOption("absolute",l,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,l){return d("calcite-label",{key:e,layout:"inline",scale:"s"},d("calcite-radio-button",{checked:e===t,scale:"s",value:e}),d("div",{class:z.radioButtonLabelWrapper,key:"label-wrapper"},d("calcite-icon",{icon:Je[e],scale:"s"}),l))}};o([i()],k.prototype,"label",null),o([i({type:Ee,nonNullable:!0})],k.prototype,"visibleElements",void 0),o([i(),J("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],k.prototype,"messages",void 0),o([i({nonNullable:!0,type:me})],k.prototype,"sketchOptions",void 0),o([i({type:String})],k.prototype,"viewType",void 0),k=o([_("esri.widgets.support.SketchTooltipControls")],k);const $t=k,ae=e=>ht(e)||gt(e),ht=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},gt=e=>{const t=Qe(e);if(t!=null&&e.hasOwnProperty(t)&&e[t]!=null){for(const l of e[t])if(ae(l))return!0}return!1},j=(e,t)=>t!=null&&e!=null&&(t.test(e.title)?"self":!!e.children.some(l=>j(l,t)!==!1)&&"children");var ie;let M=ie=class extends Xe{constructor(e){super(e),this.children=new se,this.parent=null}get enabled(){const{children:e}=this;if(e.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let t=!1,l=!1;for(const n of e){if(n.enabled==="indeterminate")return n.enabled;if(n.enabled==="enabled"?t=!0:n.enabled==="disabled"&&(l=!0),l&&t)return"indeterminate"}return l?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(e=>[e.layer?.id,...e.childLayerIds])}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find(l=>l.layer===e)}_initializeChildLayers(e){if(!e)return;const t=e.filter(ae);super._initializeChildLayers(t)}_createChildItems(e){return e.map(t=>Te(t)?new ie({layer:t,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(R).reverse()}};o([i()],M.prototype,"enabled",null),o([i()],M.prototype,"children",void 0),o([i()],M.prototype,"childLayerIds",null),o([i()],M.prototype,"featureSource",null),o([i({constructOnly:!0})],M.prototype,"getFeatureSnappingSources",void 0),o([i()],M.prototype,"parent",void 0),M=ie=o([_("esri.widgets.support.SnappingControls.SnappingListItem")],M);let I=class extends Ze{constructor(){super(...arguments),this.featureSnappingSources=new se}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>!e.children?.length)}_compileList(){const e=this.view?.map?.layers;if(!e)return;const t=e.filter(ae);this._watchLayersListMode(t);const l=this._getViewableLayers(t);l?.length?(this._createNewItems(l),this._removeItems(l),this._sortItems(l)):this._removeAllItems()}_createListItem(e){return new M({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};o([i()],I.prototype,"featureSnappingSources",void 0),o([i()],I.prototype,"operationalItems",void 0),o([i()],I.prototype,"operationalItemsFlat",null),o([i()],I.prototype,"selectableItems",null),I=o([_("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],I);let E=class extends ${constructor(e){super(e),this.layerListViewModel=new I,this.snappingOptions=new we,this.view=null}initialize(){this.addHandles([G(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:t})=>{e.view=t},de),G(()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources}),({viewModel:e,sources:t})=>{e.featureSnappingSources=t},de)])}get allLayersEnabled(){return(this.layerListViewModel?.selectableItems??[]).every(e=>e.enabled==="enabled")}get allLayersDisabled(){return(this.layerListViewModel?.selectableItems??[]).every(e=>!e.enabled)}get layersEnabledCount(){return this.layerListViewModel?.selectableItems?.filter(e=>e.enabled==="enabled").length??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e?.forEach(l=>t?this.enableSnappingForLayer(l):this.disableSnappingForLayer(l))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:t})=>{const l=t?.id;e?this.enableSnappingForLayer(l):this.disableSnappingForLayer(l)})}enableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)Te(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(t=>t.layer.id===e)}_makeSnappingSourceForLayer(e){const t=this.layerListViewModel.operationalItemsFlat.find(n=>n.layer?.id===e)?.layer;if(!t)throw new Ke("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(t.type==="group")return;const l=new Ye({layer:t});return this.snappingOptions.featureSources.add(l),l}};o([i()],E.prototype,"allLayersEnabled",null),o([i()],E.prototype,"allLayersDisabled",null),o([i({constructOnly:!0})],E.prototype,"layerListViewModel",void 0),o([i()],E.prototype,"layersEnabledCount",null),o([i({type:we,nonNullable:!0})],E.prototype,"snappingOptions",void 0),o([i()],E.prototype,"state",null),o([i()],E.prototype,"view",void 0),E=o([_("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],E);const yt=E,S="esri-snapping-controls",L={base:S,container:`${S}__container`,toggleBlock:`${S}__toggle-block`,layerListBlock:`${S}__layer-list-block`,layerList:`${S}__layer-list`,layerListFilter:`${S}__layer-list__filter`,layerListButton:`${S}__layer-list__button`,layerListItem:`${S}__layer-list__item`,layerListGroup:`${S}__layer-list__group`,nestedContainer:`${S}__nested-container`};let v=class extends ne{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new Q,this._enableSnappingSwitchChange=r=>{this.snappingOptions.enabled=r},this._featureEnabledSwitchChange=r=>{this.snappingOptions.featureEnabled=r},this._gridEnabledSwitchChange=r=>{this.snappingOptions.gridEnabled=r,r&&this._startLoadGrid()},this._selfEnabledSwitchChange=r=>{this.snappingOptions.selfEnabled=r},this._onToggleLayersButtonClick=r=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),Ue(r.target)};const{snappingOptions:l,view:n,viewModel:s}=e;this.viewModel=s??(this._defaultViewModel=new yt({snappingOptions:l,view:n}))}normalizeCtorArgs(e){const{snappingOptions:t,view:l,viewModel:n,...s}=e;return s}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=ce(this._defaultViewModel))}loadDependencies(){return Promise.all([Y({block:()=>h(()=>import("./index-C6Bg1Dv_.js"),__vite__mapDeps([45,6,7])),button:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.N4),__vite__mapDeps([6,7])),input:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.N9),__vite__mapDeps([6,7])),list:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.Na),__vite__mapDeps([6,7])),"list-item":()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.Ne),__vite__mapDeps([6,7])),checkbox:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.N7),__vite__mapDeps([6,7])),loader:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.MU),__vite__mapDeps([6,7]))}),Se()])}initialize(){this.addHandles(G(()=>this.view?.type==="2d"&&!!this.view.grid,e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=ce(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return d("div",{"aria-label":e,class:this.classes(L.base,re.widget)},d("div",{class:L.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList(),this.view?.type==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:t}=this,l=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&t?.type==="2d"?this._renderGridEnabledToggle():null].filter(R),n=[e.enabledToggle?this._renderEnabledToggle():null,l.length>0?d("div",{class:L.nestedContainer},l):null].filter(R);return n.length===0?null:d("calcite-block",{class:L.toggleBlock,expanded:!0,heading:e.header?this.label:"",key:"toggle-block",label:this.label},n)}_renderEnabledToggle(){return d(B,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return d(B,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return d(B,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return d(B,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:t}=this,l=t.layerListViewModel.operationalItems.length>9?d("calcite-input",{class:L.layerListFilter,clearable:!0,placeholder:e?.searchLayers,onCalciteInputInput:({currentTarget:{value:a}})=>{this._layerListFilter=a===""?null:new RegExp(a,"i")}}):null,n=this._secondaryElementsDisabled,s=this.layerListOpen&&!n,r=t.layerListViewModel.operationalItems?.find(a=>!!a.children.length);return d("calcite-block",{class:L.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,expanded:s,heading:e.snappingLayers,key:"list-block",onCalciteBlockToggle:a=>this.layerListOpen=a.currentTarget.expanded},l,this._renderToggleLayersButton(),d("calcite-list",{class:L.layerList,displayMode:r?"nested":"flat",label:e?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderGridOptions(){const{view:e,visibleElements:t,snappingManager:l,snappingOptions:n,_openAndReady:s}=this,{gridEnabled:r,enabled:a}=n;(s||e?.type==="2d"&&e.grid)&&this._startLoadGrid();const p=this._gridLoadTask?.value,c=p&&e?.type==="2d"&&d(p,{snappingManager:l,snappingOptions:n,view:e,visibleElements:t.gridControlsElements});return d("calcite-block",{class:L.layerListBlock,collapsible:!0,disabled:!r||!a,expanded:s,heading:this.messages.gridOptionsHeading,key:"grid-block",onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},c??d("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}_startLoadGrid(){!this._gridLoadTask&&this.visibleElements.gridControls&&this.view?.type==="2d"&&(this._gridLoadTask=_e(async()=>(await h(async()=>{const{default:e}=await import("./GridControls-BwYs5-gy.js");return{default:e}},__vite__mapDeps([48,6,7,49,50,51,52,53,25,54,55,23,24,20,26,27,28,56,57,58,59,60,15,34,35,36,3,37,1,2,4,5,8,11,9,38,39,40,41,13,61,62,14,16,17,18,19,21,22,29,30,31,32,33,63,64,65,66,67,68,42,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85]))).default))}_renderLayerListItemCollection(e){const t=this._layerListFilter;return e.map(l=>{switch(t?j(l,t):null){case"children":{const n=l.children.filter(s=>j(s,t)!==!1);return this._renderLayerListItemGroup(l,n)}case"self":case null:return this._renderLayerListItemOrGroup(l);case!1:return j(l.parent,t)==="self"?this._renderLayerListItemOrGroup(l):null}}).toArray().filter(R)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:t}=this,l=e?t.disableAllLayers:t.enableAllLayers;return d("calcite-button",{appearance:"transparent",class:L.layerListButton,label:l,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},l)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:t}}=this,l=e.title||t,n=()=>{this.viewModel.toggleSnappingForLayers([e.layer?.id],e.enabled!=="enabled")};return d("calcite-list-item",{class:L.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:l,onCalciteListItemSelect:s=>{s.stopPropagation(),n()}},d("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:n}))}_renderLayerListItemGroup(e,t){const{messages:l}=this,{children:n,title:s}=e,r=s||l.untitledLayer,a=s&&s!==""?s:je(),p=!!t?.length,c=t??n,y=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")},w=c?.find(P=>!!P.children.length);return d("calcite-list-item",{class:L.layerListGroup,expanded:p,key:a,label:r,onCalciteListItemSelect:P=>{P.stopPropagation(),y()}},d("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:y}),d("calcite-list",{displayMode:w?"nested":"flat",label:l?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(c)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};o([i()],v.prototype,"_defaultViewModel",void 0),o([i()],v.prototype,"_layerListFilter",void 0),o([i()],v.prototype,"_gridLoadTask",void 0),o([i()],v.prototype,"_openAndReady",null),o([i()],v.prototype,"label",null),o([i({type:Boolean,nonNullable:!0})],v.prototype,"layerListOpen",void 0),o([i({type:Boolean,nonNullable:!0})],v.prototype,"gridOptionsOpen",void 0),o([i(),J("esri/widgets/support/SnappingControls/t9n/SnappingControls")],v.prototype,"messages",void 0),o([i(),J("esri/t9n/common")],v.prototype,"messagesCommon",void 0),o([i()],v.prototype,"snappingOptions",null),o([i()],v.prototype,"snappingManager",void 0),o([i()],v.prototype,"view",null),o([i()],v.prototype,"viewModel",null),o([i({type:Q,nonNullable:!0})],v.prototype,"visibleElements",void 0),o([i()],v.prototype,"_enabledToggleDisabled",null),o([i()],v.prototype,"_secondaryElementsDisabled",null),v=o([_("esri.widgets.support.SnappingControls")],v);const Ft=v;let m=class extends ${constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1,this.text=!1}};o([i({type:Boolean,nonNullable:!0})],m.prototype,"point",void 0),o([i({type:Boolean,nonNullable:!0})],m.prototype,"polyline",void 0),o([i({type:Boolean,nonNullable:!0})],m.prototype,"polygon",void 0),o([i({type:Boolean,nonNullable:!0})],m.prototype,"rectangle",void 0),o([i({type:Boolean,nonNullable:!0})],m.prototype,"circle",void 0),o([i({type:Boolean,nonNullable:!0})],m.prototype,"multipoint",void 0),o([i({type:Boolean,nonNullable:!0})],m.prototype,"mesh",void 0),o([i({type:Boolean,nonNullable:!0})],m.prototype,"freehandPolyline",void 0),o([i({type:Boolean,nonNullable:!0})],m.prototype,"freehandPolygon",void 0),o([i({type:Boolean,nonNullable:!0})],m.prototype,"text",void 0),m=o([_("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],m);let N=class extends ${constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};o([i({nonNullable:!0})],N.prototype,"rectangle-selection",void 0),o([i({nonNullable:!0})],N.prototype,"lasso-selection",void 0),o([i({nonNullable:!0})],N.prototype,"custom-selection",void 0),N=o([_("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],N);let f=class extends ${constructor(t){super(t),this.createTools=new m,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new N,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new Q,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};o([i({type:m,nonNullable:!0})],f.prototype,"createTools",void 0),o([i({type:Boolean,nonNullable:!0})],f.prototype,"directionModePicker",void 0),o([i({type:Boolean,nonNullable:!0})],f.prototype,"duplicateButton",void 0),o([i({type:Boolean,nonNullable:!0})],f.prototype,"deleteButton",void 0),o([i({type:Boolean,nonNullable:!0})],f.prototype,"selectionCountLabel",void 0),o([i({type:Boolean,nonNullable:!0})],f.prototype,"labelsToggle",void 0),o([i({type:N,nonNullable:!0})],f.prototype,"selectionTools",void 0),o([i({type:Boolean,nonNullable:!0})],f.prototype,"settingsMenu",void 0),o([i({type:Boolean,nonNullable:!0})],f.prototype,"snappingControls",void 0),o([i({type:Q,nonNullable:!0})],f.prototype,"snappingControlsElements",void 0),o([i({type:Boolean,nonNullable:!0})],f.prototype,"tooltipsToggle",void 0),o([i({type:Boolean,nonNullable:!0})],f.prototype,"undoRedoMenu",void 0),f=o([_("esri.widgets.Sketch.VisibleElements")],f);let C=class extends ${constructor(e){super(e),this.chip=!0,this.lassoTool=!0,this.operationTypeControls=!0,this.pan=!0,this.pointTool=!0,this.rectangleTool=!0}};o([i({type:Boolean,nonNullable:!0})],C.prototype,"chip",void 0),o([i({type:Boolean,nonNullable:!0})],C.prototype,"lassoTool",void 0),o([i({type:Boolean,nonNullable:!0})],C.prototype,"operationTypeControls",void 0),o([i({type:Boolean,nonNullable:!0})],C.prototype,"pan",void 0),o([i({type:Boolean,nonNullable:!0})],C.prototype,"pointTool",void 0),o([i({type:Boolean,nonNullable:!0})],C.prototype,"rectangleTool",void 0),C=o([_("esri.widgets.support.SelectionToolbar.VisibleElements")],C);const Me=C,te="esri-selection-toolbar",K={base:te,container:`${te}__container`,toolButton:`${te}__tool-button`};let u=class extends ne{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.availableOperationTypes=["replace","add","remove"],this.disabled=!1,this.layout="horizontal",this.messages=null,this.scale="s",this.viewModel=new ut,this.visibleElements=new Me}initialize(){this._viewModelHandlesGroup=fe([ee(()=>this.viewModel,"before-activate",e=>this.emit("before-activate",e)),ee(()=>this.viewModel,"complete",e=>this.emit("complete",e)),ee(()=>this.viewModel,"selection-change",e=>this.emit("selection-change",e))])}destroy(){this._viewModelHandlesGroup=oe(this._viewModelHandlesGroup)}loadDependencies(){return Y({action:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.MV),__vite__mapDeps([6,7])),"action-bar":()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.Ng),__vite__mapDeps([6,7])),"action-group":()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.Nf),__vite__mapDeps([6,7])),chip:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.M_),__vite__mapDeps([6,7])),dropdown:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.Nb),__vite__mapDeps([6,7])),"dropdown-item":()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.Nc),__vite__mapDeps([6,7])),"dropdown-group":()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.Nd),__vite__mapDeps([6,7])),icon:()=>h(()=>import("./index-CgzAF5Ey.js").then(e=>e.MT),__vite__mapDeps([6,7]))})}get _effectiveDisabled(){return this.disabled||this.state==="disabled"}get _effectiveOperationType(){return this.activeOperation?.effectiveType||this.defaultOperationType}get activeOperation(){return this.viewModel.activeOperation}get continuousSelectionEnabled(){return this.viewModel.continuousSelectionEnabled}set continuousSelectionEnabled(e){this.viewModel.continuousSelectionEnabled=e}get defaultLassoToolOptions(){return this.viewModel.defaultLassoToolOptions}set defaultLassoToolOptions(e){this.viewModel.defaultLassoToolOptions=e}get defaultOperationType(){return this.viewModel.defaultOperationType}set defaultOperationType(e){this.viewModel.defaultOperationType=e}get defaultPointToolOptions(){return this.viewModel.defaultPointToolOptions}set defaultPointToolOptions(e){this.viewModel.defaultPointToolOptions=e}get defaultRectangleToolOptions(){return this.viewModel.defaultRectangleToolOptions}set defaultRectangleToolOptions(e){this.viewModel.defaultRectangleToolOptions=e}get effectiveSelectionManager(){return this.viewModel.effectiveSelectionManager}get effectiveSources(){return this.viewModel.effectiveSources}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layers(){return q(D.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){q(D.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get layerViewPreferenceEnabled(){return this.viewModel.layerViewPreferenceEnabled}set layerViewPreferenceEnabled(e){this.viewModel.layerViewPreferenceEnabled=e}get persistSelection(){return this.viewModel.persistSelection}set persistSelection(e){this.viewModel.persistSelection=e}get returnFeatureTitleFields(){return this.viewModel.returnFeatureTitleFields}set returnFeatureTitleFields(e){this.viewModel.returnFeatureTitleFields=e}get returnGeometry(){return this.viewModel.returnGeometry}set returnGeometry(e){this.viewModel.returnGeometry=e}get selectOnComplete(){return this.viewModel.selectOnComplete}set selectOnComplete(e){this.viewModel.selectOnComplete=e}get selectionManager(){return this.viewModel.selectionManager}set selectionManager(e){this.viewModel.selectionManager=e}get state(){return this.viewModel.state}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get toolConfigs(){return this.viewModel.toolConfigs}set toolConfigs(e){this.viewModel.toolConfigs=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visibleToolCount(){const{visibleElements:e}=this;return this.toolConfigs.length+(e.lassoTool?1:0)+(e.rectangleTool?1:0)}activate(e){if(this.cancel(),!this._effectiveDisabled)return this.viewModel.activate(e)}activateTool(e){if(!this._effectiveDisabled)return this.viewModel.activateTool(e)}cancel(){this.viewModel.cancel()}toggleTool(e){if(!this._effectiveDisabled)return this.viewModel.toggleTool(e)}render(){return d("div",{"aria-label":this.label,class:this.classes(K.base,re.widget)},d("div",{class:K.container},d("calcite-action-bar",{expandDisabled:!0,layout:"horizontal",overflowActionsDisabled:!0,scale:this.scale},this._renderOperationTypeControls(),this._renderToolsGroup(),this._renderChip())))}_renderToolsGroup(){return d("calcite-action-group",{key:"tools-group"},this._renderDefaultTools(),this._renderCustomTools())}_renderDefaultTools(){return[this._renderPanAction(),this._renderPointTool(),this._renderRectangleTool(),this._renderLassoTool()]}_renderPanAction(){if(!this.visibleElements.pan)return;const e=this.messages.pan,t=`${this.id}-tool-pan`;return this._renderAction({active:!this.activeOperation,disabled:this._effectiveDisabled,icon:"pan",id:t,key:t,onclick:()=>this.cancel(),text:e,title:e})}_renderChip(){if(!this.visibleElements.chip)return;const{effectiveSelectionManager:e}=this,t=e?.count??0,l=qe(t);return d("calcite-chip",{appearance:"outline",closable:t>0,closed:t===0,disabled:this._effectiveDisabled||t===0,label:l,scale:this.scale,slot:"actions-end",title:this.messages.clearSelection,onCalciteChipClose:()=>e?.clear()},l)}_renderCustomTools(){return this.toolConfigs.map(({toolName:e,icon:t})=>this._renderToolWithTooltip(e,t))}_renderPointTool(){if(this.visibleElements.pointTool)return this._renderToolWithTooltip("point","selection-set",this.messages.selectByPoint)}_renderLassoTool(){if(this.visibleElements.lassoTool)return this._renderToolWithTooltip("lasso","lasso-select",this.messages.selectByLasso)}_renderRectangleTool(){if(this.visibleElements.rectangleTool)return this._renderToolWithTooltip("rectangle","cursor-marquee",this.messages.selectByRectangle)}_renderOperationTypeControls(){const{availableOperationTypes:e}=this;if(!this.visibleElements.operationTypeControls||!e.length)return;const{_effectiveOperationType:t,scale:l}=this,n=this._getIconForSelectionOperationType(t),s=this._getLabelForSelectionOperationType(t);return d("calcite-action-group",{key:"toggle-group"},d("calcite-dropdown",{overlayPositioning:"fixed",placement:"bottom-start",scale:l},d("calcite-action",{class:K.toolButton,disabled:this._effectiveDisabled,icon:n,scale:l,slot:"trigger",text:s,title:s},d("calcite-icon",{icon:"chevron-down",scale:"s"})),d("calcite-dropdown-group",null,e.map(r=>this._renderOperationTypeDropdownItem(r)))))}_renderOperationTypeDropdownItem(e){return d("calcite-dropdown-item",{iconStart:this._getIconForSelectionOperationType(e),selected:this.defaultOperationType===e,onCalciteDropdownItemSelect:()=>this.defaultOperationType=e},this._getLabelForSelectionOperationType(e))}_renderToolWithTooltip(e,t,l=e){const n=`${this.id}-tool-${e}`;return this._renderAction({active:this.activeOperation?.toolName===e,disabled:this._effectiveDisabled,icon:t||"selection",id:n,key:n,onclick:()=>this.toggleTool(e),text:l,title:l})}_renderAction(e){return d("calcite-action",{...e,bind:this,class:K.toolButton,scale:this.scale})}_getIconForSelectionOperationType(e){switch(e){case"replace":return"overwrite-features";case"add":return"cursor-plus";case"remove":return"cursor-minus"}}_getLabelForSelectionOperationType(e){const{messages:t}=this;switch(e){case"replace":return t.replaceSelection;case"add":return t.addToSelection;case"remove":return t.removeFromSelection}}};o([i()],u.prototype,"_effectiveDisabled",null),o([i()],u.prototype,"_effectiveOperationType",null),o([i()],u.prototype,"activeOperation",null),o([i()],u.prototype,"availableOperationTypes",void 0),o([i()],u.prototype,"continuousSelectionEnabled",null),o([i()],u.prototype,"defaultLassoToolOptions",null),o([i()],u.prototype,"defaultOperationType",null),o([i()],u.prototype,"defaultPointToolOptions",null),o([i()],u.prototype,"defaultRectangleToolOptions",null),o([i()],u.prototype,"disabled",void 0),o([i()],u.prototype,"effectiveSelectionManager",null),o([i()],u.prototype,"effectiveSources",null),o([i()],u.prototype,"label",null),o([i()],u.prototype,"layers",null),o([i()],u.prototype,"layerViewPreferenceEnabled",null),o([i()],u.prototype,"layout",void 0),o([i(),J("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],u.prototype,"messages",void 0),o([i()],u.prototype,"persistSelection",null),o([i()],u.prototype,"returnFeatureTitleFields",null),o([i()],u.prototype,"returnGeometry",null),o([i()],u.prototype,"selectOnComplete",null),o([i()],u.prototype,"scale",void 0),o([i()],u.prototype,"selectionManager",null),o([i()],u.prototype,"state",null),o([i()],u.prototype,"sources",null),o([i()],u.prototype,"toolConfigs",null),o([i()],u.prototype,"view",null),o([i()],u.prototype,"viewModel",void 0),o([i({type:Me,nonNullable:!0})],u.prototype,"visibleElements",void 0),o([i()],u.prototype,"visibleToolCount",null),u=o([_("esri.widgets.support.SelectionToolbar")],u);const Nt=u;export{f as a,nt as b,B as c,ut as d,m as e,Ft as f,Se as i,$t as k,Ee as l,Q as n,Me as p,Le as r,N as s,Nt as y};
