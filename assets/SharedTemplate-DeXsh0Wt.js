import{nI as b,lj as O,ch as I,a5 as $,_ as t,e,cm as N,cn as j,g as y,d4 as D,cC as k,dY as L,j8 as F,am as J,ab as C,p0 as B}from"./index-CgzAF5Ey.js";import{c as P,i as R,t as V}from"./FeatureTemplates-EkSMU26S.js";import{o as E,T as M,d as G,i as q,c as U}from"./customElement-S0atgMOG.js";import"./FeatureService-CeU7iukh.js";import"./applyEditsUtils-Dnse8Gdk.js";import"./MeshTransform-Dit-XLCt.js";import"./editingSupport-DJtUgSza.js";import"./utils-705cvpPF.js";import"./Heading-CsXYN9Dx.js";import"./symbolUtils-0l5vVMbV.js";import"./gfxUtils-B1R76T6S.js";import"./cimSymbolUtils-D8zbHeXT.js";import"./svgUtils-smkwubCy.js";import"./mat2df32-Dpt2CT5P.js";import"./mat2d-DWPHXQcf.js";import"./utils-BxeCvIiv.js";import"./vmEvent-CsrnYMSK.js";import"./SketchOptions-DsWZlvNP.js";import"./SketchLabelOptions-CtWdh0ak.js";import"./Attachments-CgROmOPd.js";import"./AttachmentsViewModel-KltH_b2L.js";import"./AttachmentInfo-BAzb-iCE.js";import"./featureUtils-DbghMAA3.js";import"./utils-CAdwX-R_.js";import"./attachmentUtils-Bq5ttAB9.js";import"./legacyIcon-BpbXCnGp.js";import"./featureFormUtils-CPId1rV_.js";import"./dateUtils-DYfP5vP8.js";import"./arcade-wHcHLKOK.js";import"./arcadeEnvironment-BHBb-4Qi.js";import"./ImmutableArray-BPVd6ESQ.js";import"./FeatureForm-Bc4ps-jQ.js";import"./FieldInput-Dm9AG0b5.js";import"./FeatureRelationshipViewModel-DRBzYwyt.js";import"./Spinner-D4ot-VaE.js";import"./AnchorElementViewModel-D9yoyilu.js";import"./GraphicsLayer-CNIUk38A.js";import"./SnappingManager-C_Xw3YlC.js";import"./euclideanLengthMeasurementUtils-CGkbgpIY.js";import"./utils-DN_jc3_L.js";import"./geodesicUtils-Cfv0uT1u.js";import"./geometry2dUtils-DamFhDZI.js";import"./geodeticLengthOperator-CCmu1UCP.js";import"./geodeticCurveType-CirnHLSB.js";import"./geodesicMeasurementUtils-CD0H_C-6.js";import"./helpMessageUtils-2XpUG8Xk.js";import"./HighlightHelper-Dpd7BeQp.js";import"./layerUtils-C4kbKZbG.js";import"./GraphicState-p_iGTMrc.js";import"./DrawingMode-Cvvf0VVz.js";import"./SketchViewModel-DhxBVxKu.js";import"./isSupportedObject-DSxuxd5I.js";import"./automaticAreaMeasurementUtils-BatsSLDN.js";import"./geodesicAreaMeasurementUtils-CadONabs.js";import"./earcut-D9gy186-.js";import"./automaticLengthMeasurementUtils-B1DzL2GL.js";import"./utils-J9tZODVe.js";import"./splitCurveAtPoint-eQ1swr03.js";import"./coordinateHelper-BBk0eSaI.js";import"./SelectionToolbar-CyI4HoXk.js";import"./directionModeIcons-Br5woIHu.js";import"./layerListUtils-CrO8uhQ1.js";import"./LayerListViewModel-DOIGYhGa.js";import"./utils-BQBvadb7.js";import"./ListItem-DyzSo_ob.js";import"./widget-5CKB7XP2.js";import"./uploadAssetErrors-DNICV9hT.js";import"./useWidget-DdroRqZj.js";import"./useView-CMtXgKA0.js";let a=class extends b(O(I)){constructor(){super(...arguments),this.excludedTools=[],this.featureService=null,this.makeSharedTemplateFromJSON=null,this.view=null}readExcludedTools(o){const i=o.map(n=>P.fromJSON(n));return Array.from(new Set(i))}writeExcludedTools(o,i){o?.length&&(i.excludedTools=o.map(n=>P.toJSON(n.toLowerCase())))}load(o){return this.addResolvingPromise(this._load(o)),Promise.resolve(this)}async _load(o){const i=this.allParts,{featureService:n,makeSharedTemplateFromJSON:s,view:l}=this;if(n==null||s==null||l==null)throw new E;for(const r of i)r.assertIsSupportedPart();const w=M(l,{makeSharedTemplateFromJSON:s}),_=i.filter(r=>r.template==null),h=await w.getTemplates({templateIds:_.map(r=>r.templateId),featureService:n,signal:o?.signal}),A=new Map(h.map(r=>[r.templateId,r]));for(const r of _){const T=A.get(r.templateId);if(T==null)throw new $("internal:missing-template",`Failed to retrieve template for template ID ${r.templateId}`);r.template=T}await Promise.all(i.map(r=>r.template?.load(o)))}};t([e({readOnly:!0})],a.prototype,"type",void 0),t([e({constructOnly:!0})],a.prototype,"excludedTools",void 0),t([N("excludedTools")],a.prototype,"readExcludedTools",null),t([j("excludedTools")],a.prototype,"writeExcludedTools",null),t([e()],a.prototype,"featureService",void 0),t([e()],a.prototype,"makeSharedTemplateFromJSON",void 0),t([e()],a.prototype,"view",void 0),a=t([y("esri.editing.sharedTemplates.templateDefinitions.TemplateDefinitionBase")],a);let m=class extends I{constructor(i){super(i),this.template=null}};t([e()],m.prototype,"template",void 0),t([e({json:{write:!0}})],m.prototype,"templateGlobalId",void 0),t([e({json:{write:!0}})],m.prototype,"templateId",void 0),t([e({readOnly:!0,json:{read:!1,write:!1}})],m.prototype,"type",void 0),m=t([y("esri.editing.sharedTemplates.templateDefinitions.parts.TemplatePartBase")],m);let f=class extends m{constructor(o){super(o),this.relationshipCatalogId="",this.relationshipMetadata=null,this.template=null,this.type="relationship"}assertIsSupportedPart(){}};t([e({json:{name:"relationshipClassID",write:!0}})],f.prototype,"relationshipCatalogId",void 0),t([e()],f.prototype,"relationshipMetadata",void 0),t([e()],f.prototype,"template",void 0),t([e()],f.prototype,"type",void 0),f=t([y("esri.editing.sharedTemplates.templateDefinitions.parts.FeatureTemplateRelationshipPart")],f);const z=f;let g=class extends a{constructor(i){super(i),this.type="feature",this.defaultValues=null,this.relationships=[]}get allParts(){return this.relationships}initializeRelationshipMetadata(i){for(const n of this.relationships){const{relationshipCatalogId:s}=n,l=n.template?.layer,w=i.relationships?.find(h=>h.catalogId===s),_=l?.relationships?.find(h=>h.catalogId===s);if(!w||!l||!_)throw new G(s);n.relationshipMetadata={destinationField:_.keyField,destinationLayerId:l.layerId,sourceField:w.keyField,sourceLayerId:i.layerId}}}};t([e({readOnly:!0})],g.prototype,"type",void 0),t([e()],g.prototype,"allParts",null),t([e({json:{write:!0}})],g.prototype,"defaultValues",void 0),t([e({constructOnly:!0,type:[z],json:{write:!0}})],g.prototype,"relationships",void 0),g=t([y("esri.editing.sharedTemplates.templateDefinitions.FeatureTemplateDefinition")],g);const x=new D({esri_editing_transformation_bufferLineToPolygon:"buffer-line-to-polygon",esri_editing_transformation_bufferPointToPolygon:"buffer-point-to-polygon",esri_editing_transformation_bufferPolygonToPolygon:"buffer-polygon-to-polygon",esri_editing_transformation_connectionPoint:"connection-point",esri_editing_transformation_equallySpaced:"equally-spaced",esri_editing_transformation_offsetLine:"offset-line",esri_editing_transformation_offsetPrimaryLine:"offset-primary-line",esri_editing_transformation_pointAtAllVerticesOfLine:"point-at-all-vertices-of-line",esri_editing_transformation_pointAtBeginningOfLine:"point-at-beginning-of-line",esri_editing_transformation_pointAtBeginningOfRadial:"point-at-beginning-of-radial",esri_editing_transformation_pointAtEndOfLine:"point-at-end-of-line",esri_editing_transformation_pointAtInteriorVertices:"point-at-interior-vertices",esri_editing_transformation_pointAtIntersectionVerticesOfLine:"point-at-intersection-vertices-of-line",esri_editing_transformation_pointAtNotBeginningOfLine:"point-at-not-beginning-of-line",esri_editing_transformation_pointAtNotEndOfLine:"point-at-not-end-of-line",esri_editing_transformation_pointAtPolygonCentroid:"point-at-polygon-centroid",esri_editing_transformation_pointAtPolygonNotStart:"point-at-polygon-not-start",esri_editing_transformation_pointAtPolygonStart:"point-at-polygon-start",esri_editing_transformation_pointIdentity:"point-identity",esri_editing_transformation_pointPrimaryIdentity:"point-primary-identity",esri_editing_transformation_polygonBoundary:"polygon-boundary",esri_editing_transformation_polygonBoundaryTwoPoint:"polygon-boundary-two-point",esri_editing_transformation_polygonIdentity:"polygon-identity",esri_editing_transformation_polygonPrimaryIdentity:"polygon-primary-identity",esri_editing_transformation_polygonVertices:"polygon-vertices",esri_editing_transformation_radialLines:"radial-lines",esri_editing_transformation_twoPointLines:"two-point-lines"}),Y={"buffer-line-to-polygon":"polyline","buffer-point-to-polygon":"point","buffer-polygon-to-polygon":"polygon","connection-point":"polyline","equally-spaced":"polyline","offset-line":"polyline","offset-primary-line":"polyline","point-at-all-vertices-of-line":"polyline","point-at-beginning-of-line":"polyline","point-at-beginning-of-radial":"polyline","point-at-end-of-line":"polyline","point-at-interior-vertices":"polyline","point-at-intersection-vertices-of-line":"polyline","point-at-not-beginning-of-line":"polyline","point-at-not-end-of-line":"polyline","point-at-polygon-centroid":"polygon","point-at-polygon-not-start":"polygon","point-at-polygon-start":"polygon","point-identity":"point","point-primary-identity":"point","polygon-boundary":"polygon","polygon-boundary-two-point":"polygon","polygon-identity":"polygon","polygon-primary-identity":"polygon","polygon-vertices":"polygon","radial-lines":"polyline","two-point-lines":"polyline"};let c=class extends m{constructor(i){super(i),this.builderConfig={},this.type="group"}assertIsSupportedPart(){const{builderType:i}=this;if(!x.apiValues.includes(i))throw new q(i)}};t([k(x,{ignoreUnknown:!1,name:"type"})],c.prototype,"builderType",void 0),t([e({json:{name:"options"}})],c.prototype,"builderConfig",void 0),t([e()],c.prototype,"type",void 0),c=t([y("esri.editing.sharedTemplates.templateDefinitions.parts.GroupTemplatePart")],c);const S=c;let p=class extends a{constructor(o){super(o),this.type="group",this.createUtilityNetworkAssociations=!1,this.parts=[],this.utilityNetwork=null,this.utilityNetworkAssociationsTable=null}get allParts(){return[this.basePart,...this.parts]}get inputGeometryType(){return Y[this.basePart.builderType]}};t([e({readOnly:!0})],p.prototype,"type",void 0),t([e()],p.prototype,"allParts",null),t([e({constructOnly:!0,type:S,json:{write:!0}})],p.prototype,"basePart",void 0),t([e({constructOnly:!0})],p.prototype,"createUtilityNetworkAssociations",void 0),t([e()],p.prototype,"inputGeometryType",null),t([e({constructOnly:!0,type:[S],json:{write:!0}})],p.prototype,"parts",void 0),t([e()],p.prototype,"utilityNetwork",void 0),t([e()],p.prototype,"utilityNetworkAssociationsTable",void 0),p=t([y("esri.editing.sharedTemplates.templateDefinitions.GroupTemplateDefinition")],p);let v=class extends m{constructor(o){super(o),this.geometry=null,this.type="preset"}assertIsSupportedPart(){}};t([e({types:F,json:{read:L,write:!0}})],v.prototype,"geometry",void 0),t([e()],v.prototype,"type",void 0),v=t([y("esri.editing.sharedTemplates.templateDefinitions.parts.PresetTemplatePart")],v);const H=v;let u=class extends a{constructor(o){super(o),this.type="preset",this.parts=[]}get allParts(){return this.parts}};t([e({readOnly:!0})],u.prototype,"type",void 0),t([e()],u.prototype,"allParts",null),t([e({constructOnly:!0,type:J,json:{write:!0}})],u.prototype,"origin",void 0),t([e({constructOnly:!0,type:[H],json:{name:"features"}})],u.prototype,"parts",void 0),t([e({type:C})],u.prototype,"spatialReference",void 0),u=t([y("esri.editing.sharedTemplates.templateDefinitions.PresetTemplateDefinition")],u);const K=o=>d.fromJSON(o);let d=class extends b(O(R)){constructor(o){super(o),this.definition=null,this.layer=null,this.type="feature",this.view=null}readDefinition(o,i){switch(i.type){case"feature":return g.fromJSON(o);case"group":return p.fromJSON(o);case"preset":return u.fromJSON(o);default:throw B(i.type),new $("shared-template:no-definition","No value for 'definition' provided to 'SharedTemplate' constructor")}}load(o){return this.addResolvingPromise(this._load(o)),Promise.resolve(this)}async _load(o){const{definition:i,featureService:n,layer:s,view:l}=this;if(!(i&&n&&s&&l))throw new U;i.featureService=n,i.makeSharedTemplateFromJSON=K,i.view=l,await this.definition?.load(o),V(i)&&i.initializeRelationshipMetadata(s)}};t([e({json:{write:!0}})],d.prototype,"definition",void 0),t([N("definition")],d.prototype,"readDefinition",null),t([e()],d.prototype,"layer",void 0),t([e()],d.prototype,"type",void 0),t([e()],d.prototype,"view",void 0),d=t([y("esri.editing.sharedTemplates.SharedTemplate")],d);const fe=d;export{fe as default};
