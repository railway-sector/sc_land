import{cn as f,a5 as t,x as a,y as p,bC as x,Y as L,fj as b,bE as m,og as w,fo as S,fQ as g,c8 as E}from"./index-aRi8Xk-b.js";import{c as v}from"./SlicePlane-30lGclDy.js";let r=class extends f{constructor(e){super(e),this.layerId=""}static fromLayer(e){return new this({layerId:e.type==="building-component"?e.layer.id:e.id,sublayerId:e.type==="building-component"?e.id:void 0})}};t([a({type:String,json:{write:{isRequired:!0}}})],r.prototype,"layerId",void 0),t([a({type:Number,json:{write:!0}})],r.prototype,"sublayerId",void 0),r=t([p("esri.analysis.support.SliceAnalysisExcludedLayer")],r);let s=class extends x{constructor(e){super(e),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get("excludedLayers")||new L}set excludedLayers(e){this._set("excludedLayers",b(e,this._get("excludedLayers")))}writeExcludedLayers(e,n,d,i){e.length!==0&&(n[d]=e.toArray().map(u=>r.fromLayer(u).toJSON(i)))}readExcludedLayers(e,n,d){const i=d?.initiator;i&&d?.hooks?.onAfterLoad(async()=>{for(const u of e){const{layerId:c,sublayerId:y}=r.fromJSON(u,d),o=i.allLayers.find(({id:l})=>l===c);if(o)if(y!=null&&"allSublayers"in o){await o.load();const l=o.allSublayers.find(({id:h})=>h===y);l&&"type"in l&&l.type==="building-component"&&this.excludedLayers.add(l)}else this.excludedLayers.add(o)}})}get valid(){return this.shape?.position!=null}equals(e){return this===e||super.equals(e)&&m(this.shape,e.shape)&&this.tiltEnabled===e.tiltEnabled&&w(this.excludedLayers.toArray(),e.excludedLayers.toArray())&&this.excludeGroundSurface===e.excludeGroundSurface}clear(){this.shape=null}};t([a({type:["slice"],json:{read:!1,write:{isRequired:!0}}})],s.prototype,"type",void 0),t([a({type:Boolean,nonNullable:!0,json:{write:!0,default:!1}})],s.prototype,"tiltEnabled",void 0),t([a({types:{key:"type",base:null,typeMap:{plane:v},defaultKeyValue:"plane"},json:{write:{isRequired:!0}}})],s.prototype,"shape",void 0),t([a({cast:S,clonable:e=>e.slice(),json:{type:[r],write:!0}})],s.prototype,"excludedLayers",null),t([g("excludedLayers")],s.prototype,"writeExcludedLayers",null),t([E("excludedLayers")],s.prototype,"readExcludedLayers",null),t([a({type:Boolean,nonNullable:!0,json:{write:!0}})],s.prototype,"excludeGroundSurface",void 0),t([a({readOnly:!0})],s.prototype,"valid",null),s=t([p("esri.analysis.SliceAnalysis")],s);const A=s;export{A as default};
