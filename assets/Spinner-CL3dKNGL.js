import{Z as s,$ as o,a0 as c,W as w,k as u,Y as m,iB as b}from"./index-Bp3GeDhQ.js";import{c as M}from"./AnchorElementViewModel-Du3Oh9aO.js";let l=class extends M{constructor(i){super(i),this.visible=!1}};s([o()],l.prototype,"visible",void 0),l=s([c("esri.widgets.Spinner.SpinnerViewModel")],l);const r="esri-spinner",h={base:r,spinnerStart:`${r}--start`,spinnerFinish:`${r}--finish`};let n=class extends w{constructor(i,e){super(i,e),this._animationDelay=500,this._animationPromise=null,this.viewModel=new l}initialize(){this.addHandles(u(()=>this.visible,i=>this._visibleChange(i)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(i){this.viewModel.location=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}get visible(){return this.viewModel.visible}set visible(i){this.viewModel.visible=i}show(i){const{location:e,promise:t}=i??{};e&&(this.viewModel.location=e),this.visible=!0;const a=()=>this.hide();t?.catch(()=>{}).then(a)}hide(){this.visible=!1}render(){const{visible:i}=this,{screenLocation:e}=this.viewModel,t=!!e,a=i&&t,v=!i&&t,d={[h.spinnerStart]:a,[h.spinnerFinish]:v},p=this._getPositionStyles();return m("div",{class:this.classes(h.base,d),styles:p})}_visibleChange(i){if(i)return void(this.viewModel.screenLocationEnabled=!0);const e=b(this._animationDelay);this._animationPromise=e,e.catch(()=>{}).then(()=>{this._animationPromise===e&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:i,view:e}=this.viewModel;if(e==null||i==null)return{};const{padding:t}=e;return{left:i.x-t.left+"px",top:i.y-t.top+"px"}}};s([o()],n.prototype,"location",null),s([o()],n.prototype,"view",null),s([o({type:l})],n.prototype,"viewModel",void 0),s([o()],n.prototype,"visible",null),n=s([c("esri.widgets.Spinner")],n);export{n as c,l as t};
