const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Brd6-W-v.js","assets/index-ni9qn0ie.css","assets/index-CC5iuiEP.js"])))=>i.map(i=>d[i]);
import{a7 as x,j as g,bH as C,lP as M,lL as L,zw as T,zx as S,zy as z,c2 as H,j2 as U,a5 as i,x as s,y as b,a1 as O,a2 as I,a3 as c,a4 as o,ab as y,bO as B,Y as j,aP as G,bJ as q,ou as N,bG as $,zz as K,nh as E,cT as Y,qP as J,W as Q}from"./index-Brd6-W-v.js";import{w as D}from"./UtilityNetworkAssociationAddAssociationViewModel-DJwlcI7N.js";import{e as X}from"./FieldInput-C1VIBWC8.js";import{s as Z}from"./Heading-BCcHIRjP.js";import{y as ee,p as te}from"./SelectionToolbar-B3-D-H93.js";import"./featureUtils-C9FquY4Q.js";import"./Association-Bgdd1WXW.js";import"./getFeatureTitle-Mrr3SXNI.js";import"./featureFormUtils-JL6ExD4t.js";import"./dateUtils-Dxl5F42Y.js";import"./SketchOptions-DVOz4iqy.js";import"./SketchLabelOptions-C_8uwBga.js";import"./directionModeIcons-Br5woIHu.js";import"./euclideanLengthMeasurementUtils-DM9lZgm8.js";import"./geometry2dUtils-BOHjqgu-.js";import"./geodeticLengthOperator-DnkggiH8.js";import"./geodeticCurveType-CirnHLSB.js";import"./layerUtils-61hESGqR.js";import"./automaticLengthMeasurementUtils-DtR3CDX6.js";const W={date:[],dateOnly:[],id:["is","isNot","startsWith","endsWith","contains","doesNotContain"],number:["is","isNot","startsWith","endsWith","contains","doesNotContain","isBlank","isNotBlank"],timeOnly:[],timestampOffset:[],string:["is","isNot","startsWith","endsWith","contains","doesNotContain","isBlank","isNotBlank","isEmpty","isNotEmpty"]};let p=class extends x{constructor(e){super(e),this.fieldName=null,this.layer=null,this.operator="is",this.operators=W,this.value=null}initialize(){this.addHandles(g(()=>this.layer,async e=>{e&&!e.loaded&&await e.load()},C))}get domain(){const{fieldName:e,layer:t}=this;if(e&&t)return t.getFieldDomain(e)}get field(){const{fieldName:e,layer:t}=this;if(e&&t)return t.fieldsIndex.get(e)}get fields(){return(this.layer?.fields??[]).filter(e=>!!(M(e)||L(e)||T(e)||S(e)))}get fieldLabel(){const{field:e}=this;return e&&(e.alias||e.name)||""}get isObjectIDField(){const{field:e}=this;return!!e&&T(e)}get isGlobalIDField(){const{field:e}=this;return!!e&&S(e)}get isIntegerField(){return z(this.field)}get isNumericField(){return L(this.field)}get isStringField(){return M(this.field)}get isTimeOnlyField(){return H(this.field)}get normalizedFieldName(){return U(this.field?.name)}get state(){const{layer:e}=this;return e?e.loaded?"ready":"loading":"disabled"}get valueAsString(){const{value:e}=this;return e==null||e===""?"":`${e}`}get normalizedValue(){const{value:e,isNumericField:t,isObjectIDField:r}=this;return e==null||e===""?"":t||r?`${e}`:`'${e}'`}get whereClause(){const{normalizedFieldName:e,operator:t,normalizedValue:r}=this;return e&&t?t==="isBlank"?`${e} IS NULL`:t==="isNotBlank"?`${e} IS NOT NULL`:t==="isEmpty"?`${e} = ''`:t==="isNotEmpty"?`${e} <> ''`:r===""?null:t==="is"?`${e} = ${r}`:t==="isNot"?`${e} <> ${r}`:t==="startsWith"?`${e} LIKE ${r}%`:t==="endsWith"?`${e} LIKE %${r}`:t==="contains"?`${e} LIKE %${r}%`:t==="doesNotContain"?`${e} NOT LIKE %${r}%`:null:null}};i([s()],p.prototype,"domain",null),i([s()],p.prototype,"field",null),i([s()],p.prototype,"fields",null),i([s()],p.prototype,"fieldLabel",null),i([s()],p.prototype,"fieldName",void 0),i([s()],p.prototype,"isObjectIDField",null),i([s()],p.prototype,"isIntegerField",null),i([s()],p.prototype,"isNumericField",null),i([s()],p.prototype,"isStringField",null),i([s()],p.prototype,"isTimeOnlyField",null),i([s()],p.prototype,"layer",void 0),i([s()],p.prototype,"normalizedFieldName",null),i([s()],p.prototype,"operator",void 0),i([s()],p.prototype,"operators",void 0),i([s()],p.prototype,"state",null),i([s()],p.prototype,"value",void 0),i([s()],p.prototype,"valueAsString",null),i([s()],p.prototype,"normalizedValue",null),i([s()],p.prototype,"whereClause",null),p=i([b("esri.widgets.support.FilterCondition.FilterConditionViewModel")],p);const V={},A="esri-filter-condition",k={base:A,valueInputContainer:`${A}__value-input-container`};let n=class extends O{constructor(t,r){super(t,r),this.messages=null,this.messagesCommon=null,this.viewModel=new p,this.visibleElements={...V}}loadDependencies(){return I({input:()=>c(()=>import("./index-Brd6-W-v.js").then(t=>t.O_),__vite__mapDeps([0,1])),option:()=>c(()=>import("./index-Brd6-W-v.js").then(t=>t.Pb),__vite__mapDeps([0,1])),select:()=>c(()=>import("./index-Brd6-W-v.js").then(t=>t.Pa),__vite__mapDeps([0,1]))})}get _defaultFieldName(){const{fields:t,fieldName:r}=this;return r||(t?.length?t[0].name:void 0)}get _valueInputType(){const{viewModel:t}=this;return t.isNumericField||t.isObjectIDField?"number":"text"}get _visibleOperators(){const{field:t,operators:r,viewModel:l}=this;return t?l.isStringField||l.isGlobalIDField?r.string:l.isNumericField?r.number:l.isObjectIDField?r.id:[]:[]}get _isValueInputHidden(){const{operator:t}=this;return!!t&&["isBlank","isNotBlank","isEmpty","isNotEmpty"].includes(t)}get domain(){return this.viewModel.domain}get field(){return this.viewModel.field}get fields(){return this.viewModel.fields}get fieldLabel(){return this.viewModel.fieldLabel}get fieldName(){return this.viewModel.fieldName}set fieldName(t){this.viewModel.fieldName=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get normalizedFieldName(){return this.viewModel.normalizedFieldName}get operator(){return this.viewModel.operator}set operator(t){this.viewModel.operator=t}get operators(){return this.viewModel.operators}set operators(t){this.viewModel.operators=t}get state(){return this.viewModel.state}get value(){return this.viewModel.value}set value(t){this.viewModel.value=t}get valueAsString(){return this.viewModel.valueAsString}castVisibleElements(t){return{...V,...t}}get whereClause(){return this.viewModel.whereClause}render(){return o("div",{class:k.base},this._renderFieldSelection(),this._renderOperatorSelection(),this._renderValueInput())}_renderFieldSelection(){const{layer:t,normalizedFieldName:r}=this;return o("div",null,o("calcite-select",{afterCreate:()=>{this.fieldName||(this.fieldName=this._defaultFieldName)},bind:this,label:this.messages.chooseField,width:"full",onCalciteSelectChange:({currentTarget:l})=>{this.value=null,this.fieldName=l.value}},this.fields.map(l=>{const a=X(l,t);return this._renderOption(l.name,a,r)})))}_renderOperatorSelection(){const{_visibleOperators:t,messages:r,operator:l}=this;if(t.length)return o("div",null,o("calcite-select",{afterUpdate:a=>{const u=a.value;this._visibleOperators.includes(u)||(this.operator=this._visibleOperators[0])},bind:this,label:r.operator,required:!0,width:"full",onCalciteSelectChange:a=>{this.operator=a.currentTarget.value}},t.map(a=>this._renderOption(a,r.operators[a],l))))}_renderOption(t,r,l){return o("calcite-option",{key:t,label:r??t,selected:t===l,value:t})}_renderValueInput(){const{valueAsString:t,domain:r,messages:l,operator:a}=this;if(!this._isValueInputHidden){if(r?.type==="coded-value"&&r.codedValues.length&&(a==="is"||a==="isNot")){const u=r.codedValues[0].code;return o("div",{key:"value-select"},o("calcite-select",{afterCreate:()=>this._afterSelectCreateOrUpdate(u),afterUpdate:()=>this._afterSelectCreateOrUpdate(u),bind:this,label:l.value,required:!0,width:"full",onCalciteSelectChange:({currentTarget:f})=>{this._onValueChange(f.value)}},r.codedValues.map(({code:f,name:R})=>this._renderOption(`${f}`,R,t))))}return o("div",{class:k.valueInputContainer,key:"value-input"},o("calcite-input",{label:l.value,type:this._valueInputType,value:t,onCalciteInputInput:({currentTarget:u})=>{this._onValueChange(u.value)}}))}}_afterSelectCreateOrUpdate(t){this.value==null&&(this.value=t)}_onValueChange(t){const{viewModel:r}=this;t&&t!==""?r.isStringField||r.isGlobalIDField?this.value=t.toString():(r.isNumericField||r.isObjectIDField)&&(this.value=parseFloat(t)):this.value=null}};i([s()],n.prototype,"_defaultFieldName",null),i([s()],n.prototype,"_valueInputType",null),i([s()],n.prototype,"_visibleOperators",null),i([s()],n.prototype,"_isValueInputHidden",null),i([s()],n.prototype,"domain",null),i([s()],n.prototype,"field",null),i([s()],n.prototype,"fields",null),i([s()],n.prototype,"fieldLabel",null),i([s()],n.prototype,"fieldName",null),i([s()],n.prototype,"layer",null),i([s(),y("esri/widgets/support/FilterCondition/t9n/FilterCondition")],n.prototype,"messages",void 0),i([s(),y("esri/t9n/common")],n.prototype,"messagesCommon",void 0),i([s()],n.prototype,"normalizedFieldName",null),i([s()],n.prototype,"operator",null),i([s()],n.prototype,"operators",null),i([s()],n.prototype,"state",null),i([s()],n.prototype,"value",null),i([s()],n.prototype,"valueAsString",null),i([s()],n.prototype,"viewModel",void 0),i([s()],n.prototype,"visibleElements",void 0),i([B("visibleElements")],n.prototype,"castVisibleElements",null),i([s()],n.prototype,"whereClause",null),n=i([b("esri.widgets.support.FilterCondition")],n);let _=class extends x{constructor(t){super(t),this.conditionOperator="AND",this.conditionWidgets=new j,this.layer=null,this.operators=W}initialize(){this.addHandles([g(()=>this.layer,async t=>{t&&!t.loaded&&await t.load()},C)])}get count(){return this.conditionWidgets.length}get state(){const{layer:t}=this;return t?t.loaded?"ready":"loading":"disabled"}get whereClause(){const{conditionOperator:t,whereClauses:r}=this;let l="";return r.forEach((a,u)=>{l+=u>0?` ${t} (${a})`:`(${a})`}),l}get whereClauses(){return this.conditionWidgets.toArray().map(t=>t.whereClause).filter(G)}addCondition(t,r){const{layer:l,operators:a}=this;l&&this.conditionWidgets.add(new n({...t,layer:l,operators:a}),r)}duplicateCondition(t){const r=this.conditionWidgets.at(t);if(!r)return;const{fieldName:l,operator:a,value:u}=r;this.addCondition({fieldName:l,operator:a,value:u})}reset(){this.conditionWidgets.removeAll()}removeCondition(t){t==null?this.conditionWidgets.pop():this.conditionWidgets.splice(t,1)}};i([s()],_.prototype,"conditionOperator",void 0),i([s()],_.prototype,"conditionWidgets",void 0),i([s()],_.prototype,"count",null),i([s()],_.prototype,"layer",void 0),i([s()],_.prototype,"operators",void 0),i([s()],_.prototype,"state",null),i([s()],_.prototype,"whereClause",null),i([s()],_.prototype,"whereClauses",null),_=i([b("esri.widgets.support.FilterBuilder.FilterBuilderViewModel")],_);const P={fab:!0,menu:!0},w="esri-filter-builder",F={base:w,conditionContainer:`${w}__condition-container`,operatorSelect:`${w}__operator-select`};let h=class extends O{constructor(e,t){super(e,t),this.messages=null,this.messagesCommon=null,this.viewModel=new _,this.visibleElements={...P}}loadDependencies(){return I({action:()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.OR),__vite__mapDeps([0,1])),"action-menu":()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.OT),__vite__mapDeps([0,1])),block:()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.OY),__vite__mapDeps([0,1])),fab:()=>c(()=>import("./index-CC5iuiEP.js"),__vite__mapDeps([2,0,1])),option:()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.Pb),__vite__mapDeps([0,1])),select:()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.Pa),__vite__mapDeps([0,1]))})}get conditionOperator(){return this.viewModel.conditionOperator}set conditionOperator(e){this.viewModel.conditionOperator=e}get count(){return this.viewModel.count}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get operators(){return this.viewModel.operators}set operators(e){this.viewModel.operators=e}get state(){return this.viewModel.state}castVisibleElements(e){return{...P,...e}}get whereClause(){return this.viewModel.whereClause}get whereClauses(){return this.viewModel.whereClauses}render(){return o("div",{class:F.base},this._renderOperatorSelect(),this._renderConditions(),this._renderFAB())}reset(){this.viewModel.reset()}_renderOperatorSelect(){if(this.count<2)return;const{conditionOperator:e,messages:t}=this,r=e==="AND";return o("div",{class:F.operatorSelect},o("calcite-select",{label:t.condition,width:"full",onCalciteSelectChange:({currentTarget:l})=>{this.conditionOperator=l.value}},o("calcite-option",{label:t.allAreTrue,selected:r,value:"AND"}),o("calcite-option",{label:t.anyAreTrue,selected:!r,value:"OR"})))}_renderConditions(){return this.viewModel.conditionWidgets.toArray().map((e,t)=>this._renderConditionContainer(e,t))}_renderConditionContainer(e,t){return o("calcite-block",{class:F.conditionContainer,expanded:!0,heading:this.messages.condition},e.render(),this._renderConditionrMenu(t))}_renderFAB(){if(!this.visibleElements.fab)return;const e=this.state==="loading";return o("calcite-fab",{appearance:"outline-fill",disabled:e,icon:"plus",kind:"neutral",loading:e,onclick:()=>this.viewModel.addCondition(),text:this.messages.addNew,textEnabled:!0})}_renderConditionrMenu(e){if(!this.visibleElements.menu)return;const{messages:t}=this;return o("calcite-action-menu",{label:t.moreOptions,overlayPositioning:"fixed",placement:"bottom-end",slot:"control"},o("calcite-action",{onclick:()=>this.viewModel.removeCondition(e),text:t.delete,textEnabled:!0}),o("calcite-action",{onclick:()=>this.viewModel.duplicateCondition(e),text:t.duplicate,textEnabled:!0}))}};i([s()],h.prototype,"conditionOperator",null),i([s()],h.prototype,"count",null),i([s()],h.prototype,"layer",null),i([s(),y("esri/widgets/support/FilterBuilder/t9n/FilterBuilder")],h.prototype,"messages",void 0),i([s(),y("esri/t9n/common")],h.prototype,"messagesCommon",void 0),i([s()],h.prototype,"operators",null),i([s()],h.prototype,"state",null),i([s()],h.prototype,"viewModel",void 0),i([s()],h.prototype,"visibleElements",void 0),i([B("visibleElements")],h.prototype,"castVisibleElements",null),i([s()],h.prototype,"whereClause",null),i([s()],h.prototype,"whereClauses",null),h=i([b("esri.widgets.support.FilterBuilder")],h);const v="esri-feature-form-utility-network-association-layers",m={base:v,header:`${v}__header`,headingContent:`${v}__heading-content`,featureObserver:`${v}__feature-observer`,filterContainer:`${v}__filter-container`,filterOptionsContainer:`${v}__filter-options-container`,filterOptionsHeader:`${v}__filter-options-header`,listContainer:`${v}__list-container`,spatialSelectContainer:`${v}__spatial-select-container`,spatialSelectToolbar:`${v}__spatial-select-toolbar`,stickySpinnerContainer:`${v}__sticky-loading-container`,loadingContainer:`${v}__loading-container`};let d=class extends O{constructor(e,t){super(e,t),this.headingLevel=5,this.messagesCommon=null,this.messagesEditor=null,this.messagesFeature=null,this.messagesFeatureForm=null,this.messagesFilterBuilder=null,this.viewModel=new D,this.view=null,this._filterBuilder=new h,this._featureFilterText="",this._layerFilterText="",this._observer=new IntersectionObserver(([r])=>{r?.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this._observerNode=null,this._selectionToolbar=new ee({returnFeatureTitleFields:!0,layerViewPreferenceEnabled:!1,persistSelection:!1,visibleElements:new te({chip:!1,operationTypeControls:!1,pan:!1})}),this._onSelectionComplete=async r=>{const{highlightHelper:l}=this.viewModel;await this.viewModel.onSelectionComplete(r),l?.removeAll(),this._featureSpatialGraphics.length>0&&l?.add(this._featureSpatialGraphics)}}initialize(){this._setupSelectionToolbar(),this.addHandles([g(()=>this.viewModel,()=>this.reset()),g(()=>[this.viewModel.state,this._observerNode],()=>this._onObserverChange()),g(()=>this.selectedLayer,e=>{this._filterBuilder.layer=e,e||(this.filterOptionsVisible=!1,this._featureFilterText="")})])}loadDependencies(){return I({action:()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.OR),__vite__mapDeps([0,1])),button:()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.OI),__vite__mapDeps([0,1])),icon:()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.Ou),__vite__mapDeps([0,1])),input:()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.O_),__vite__mapDeps([0,1])),list:()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.O$),__vite__mapDeps([0,1])),"list-item":()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.P1),__vite__mapDeps([0,1])),loader:()=>c(()=>import("./index-Brd6-W-v.js").then(e=>e.OH),__vite__mapDeps([0,1]))})}destroy(){this._filterBuilder.destroy(),this._selectionToolbar.destroy()}get filterOptionsVisible(){return this.viewModel.filterOptionsVisible}set filterOptionsVisible(e){this.viewModel.filterOptionsVisible=e}get isSelecting(){return this._selectionToolbar.state==="active"}get selectedLayer(){return this.viewModel.selectedLayer}set selectedLayer(e){this.viewModel.selectedLayer=e}get selectedFeature(){return this.viewModel.selectedFeature}set selectedFeature(e){this.viewModel.selectedFeature=e}get filterWhereClause(){return this.viewModel.filterWhereClause}set filterWhereClause(e){this.viewModel.filterWhereClause=e,e||this._filterBuilder.reset()}get _featureSpatialGraphics(){return this.viewModel.featureSpatialItems.toArray().map(e=>e.feature)}get _filteredFeatureItems(){const{_featureFilterText:e}=this,{featureItems:t,featureSpatialItems:r}=this.viewModel;return(r.length?r:t).map(l=>({label:l.label,graphic:l.feature,layer:l.feature.sourceLayer})).filter(l=>l.label?.toLowerCase().includes(e)??!1)}get _filteredFeatureItemsPage(){const{featurePage:e,featuresPerPage:t}=this.viewModel,r=e*t;return this._filteredFeatureItems.toArray().slice(0,r)}render(){return o("div",{class:this.classes(m.base,q.widget)},this._renderContent())}applyFilterOptions(){const{selectedLayer:e}=this;this.filterOptionsVisible=!1,e&&(this.filterWhereClause=this._filterBuilder.whereClause)}cancelSelection(){this._selectionToolbar.cancel()}reset(){this.filterWhereClause=null,this._featureFilterText="",this._layerFilterText="",this.filterOptionsVisible=!1,this._filterBuilder.reset()}startSelection(e){this._selectionToolbar.activateTool(e)}_setupSelectionToolbar(){this.addHandles([g(()=>this.view,e=>{this.viewModel.reset(),this._selectionToolbar.view=e?.type==="2d"?e:null},C),g(()=>[this.viewModel,this.viewModel.layerItems.length,this.viewModel.map?.allLayers.map(e=>e.visible),this.viewModel.map?.allLayers?.filter(e=>N(e)).toArray().flatMap(e=>e.sublayers.toArray()).map(e=>e.visible)],()=>this._updateToolbarSources()),$(()=>this._selectionToolbar,"before-activate",e=>this.emit("before-selection",e)),$(()=>this._selectionToolbar,"complete",this._onSelectionComplete)])}_updateToolbarSources(){const e=this.viewModel.layerItems.toArray().filter(t=>{const{parent:r}=t;return!(r&&(K(r)||N(r))&&!r.visible)&&t.visible});this._selectionToolbar.sources=e}_onObserverChange(){this._observerNode&&this._observer.unobserve(this._observerNode);const{state:e}=this.viewModel;this._observerNode&&e==="ready"&&this._observer.observe(this._observerNode)}_increaseFeaturePage(){const{featureCount:e,featurePage:t,featureSpatialItems:r,state:l}=this.viewModel;e||r.length||t===1?l==="ready"&&this.viewModel.featurePage++:this.viewModel.featurePage=1}_renderContent(){const{state:e,filterOptionsVisible:t}=this.viewModel;return e==="loading"?this._renderLoading():t?this._renderFilterOptions():[this._renderSelectionToolbar(),this._renderListContent()]}_renderListContent(){return this._selectionToolbar.activeOperation?.processingFinalSelection?this._renderLoading():this.selectedLayer||this.viewModel.featureSpatialItems.length?this._renderFeatures():this._renderLayers()}_renderSelectionToolbar(){const{messagesCommon:e,_selectionToolbar:t}=this,{featureSpatialItems:r,selectedLayer:l}=this.viewModel;if(l||!t.sources?.length)return null;const a=o("div",{class:m.spatialSelectToolbar},t.render()),u=o("calcite-button",{appearance:"transparent",disabled:!r.length,label:e.clear,onclick:()=>this.viewModel.reset()},e.clear);return o("div",{class:m.spatialSelectContainer,key:"spatial-select-toolbar"},a,u)}_renderStickyLoading(){return this.viewModel.state==="querying"?o("div",{class:m.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoading(){return o("div",{class:m.loadingContainer,key:"loading-container"},this._renderLoadingIcon())}_renderLoadingIcon(){return o("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}_renderFilterOptions(){return o("div",{class:m.filterOptionsContainer},o("div",{class:m.filterOptionsHeader},o("span",null,this.messagesFilterBuilder.widgetLabel),o("calcite-button",{appearance:"transparent",onclick:()=>this._filterBuilder.reset()},this.messagesCommon.clear)),this._filterBuilder.render())}_renderLayers(){const e=this.messagesFeatureForm.associations,t=e.availableLayers,r=e.filterLayers;return o("div",null,this._renderHeader({heading:t,placeholder:r,renderFilterOptions:!1,renderTotal:!1}),o("div",{class:m.listContainer},o("calcite-list",{label:e.associatedFeatures},this._renderLayerItems(),this._renderStickyLoading())))}_renderLayerItems(){const{_layerFilterText:e,viewModel:t,messagesCommon:r}=this,{layerItems:l,tableItems:a}=t;return l.concat(a).map(u=>({label:u.title??r.untitled,layer:u})).filter(u=>u.label?.toLowerCase().includes(e)??!1).toArray().map(u=>this._renderLayerItem(u))}_renderLayerItem(e){const{label:t,layer:r}=e;return o("calcite-list-item",{key:`layer-item-${r.id}`,label:E(t),onCalciteListItemSelect:()=>{this.selectedLayer=r,this._filterBuilder.reset()}},o("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderFeatures(){const{selectedLayer:e,viewModel:t}=this,r=t.featureSpatialItems.length>0,l=this.messagesFeatureForm.associations,a=r?void 0:e?.title||this.messagesCommon.untitled,u=l.filterFeatures;return o("div",null,this._renderHeader({heading:a,placeholder:u,renderFilterOptions:!r,renderTotal:!0}),o("div",{class:m.listContainer},o("calcite-list",{label:l.associatedFeatures},this._renderFeatureItems(),this._renderStickyLoading(),this._renderFeatureObserver())))}_renderFeatureItems(){return this._filteredFeatureItemsPage.map(e=>this._renderFeatureItem(e))}_renderFeatureItem(e){const{viewModel:t}=this,{highlightHelper:r}=t,{label:l,graphic:a}=e,u=t.featureSpatialItems.length>0?()=>r?.update(a,Y):void 0,f=t.featureSpatialItems.length>0?()=>r?.update(a,J):void 0;return o("calcite-list-item",{key:`feature-item-${a.uid}`,label:E(l),onmouseenter:u,onmouseleave:f,onCalciteListItemSelect:()=>{this.selectedFeature={feature:a,label:l}}},o("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_onObserverCreate(e){this._observerNode=e}_renderFeatureObserver(){return o("div",{afterCreate:this._onObserverCreate,bind:this,class:m.featureObserver,key:"feature-observer"})}_renderHeader(e){return o("div",{class:m.header,key:"filter"},this._renderHeading(e.heading),this._renderFilter(e.placeholder,e.renderFilterOptions),e.renderTotal?this._renderTotal():null)}_renderHeading(e){return e?o(Z,{key:"title",level:this.headingLevel},o("div",{class:m.headingContent},o("calcite-icon",{icon:"layer"}),e)):null}_renderFilter(e,t){const r=!this.selectedLayer&&!this.viewModel.featureSpatialItems.length,l=r?this._layerFilterText:this._featureFilterText;return o("div",{class:m.filterContainer,key:"filter"},o("calcite-input",{icon:"search",placeholder:e,type:"search",value:l,onCalciteInputInput:a=>{r?this._layerFilterText=a.currentTarget.value.trim().toLowerCase():this._featureFilterText=a.currentTarget.value.trim().toLowerCase()}},t?this._renderFilterOptionsAction():null))}_renderFilterOptionsAction(){const e=this.messagesFeatureForm.associations.filterOptions;return o("calcite-action",{appearance:"transparent",icon:"sliders",indicator:!!this._filterBuilder.whereClause,onclick:()=>{this.viewModel.filterOptionsVisible=!this.viewModel.filterOptionsVisible},scale:"s",slot:"action",text:e,title:e})}_renderTotal(){const{messagesFeature:e,viewModel:t}=this,{featureCount:r,featureSpatialItems:l}=t,a=Q(e.numberRecords,{number:l.length?l.length:r});return o("div",{key:"total"},a)}};i([s()],d.prototype,"filterOptionsVisible",null),i([s()],d.prototype,"headingLevel",void 0),i([s()],d.prototype,"isSelecting",null),i([s(),y("esri/t9n/common")],d.prototype,"messagesCommon",void 0),i([s(),y("esri/widgets/Editor/t9n/Editor")],d.prototype,"messagesEditor",void 0),i([s(),y("esri/widgets/Feature/t9n/Feature")],d.prototype,"messagesFeature",void 0),i([s(),y("esri/widgets/FeatureForm/t9n/FeatureForm")],d.prototype,"messagesFeatureForm",void 0),i([s(),y("esri/widgets/support/FilterBuilder/t9n/FilterBuilder")],d.prototype,"messagesFilterBuilder",void 0),i([s()],d.prototype,"selectedLayer",null),i([s({type:D})],d.prototype,"viewModel",void 0),i([s()],d.prototype,"selectedFeature",null),i([s()],d.prototype,"filterWhereClause",null),i([s()],d.prototype,"view",void 0),i([s()],d.prototype,"_filterBuilder",void 0),i([s()],d.prototype,"_featureFilterText",void 0),i([s()],d.prototype,"_layerFilterText",void 0),i([s()],d.prototype,"_observer",void 0),i([s()],d.prototype,"_featureSpatialGraphics",null),i([s()],d.prototype,"_filteredFeatureItems",null),i([s()],d.prototype,"_filteredFeatureItemsPage",null),i([s()],d.prototype,"_observerNode",void 0),d=i([b("esri.widgets.FeatureForm.FeatureFormUtilityNetworkAssociations.UtilityNetworkAssociationItemList")],d);const Ce=d;export{Ce as default};
