const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CwsCBFm3.js","assets/index-BrQW8HOS.js","assets/index-lUE0m221.css","assets/index-BOdF8fLv.js","assets/index-D6Hs6QxG.js","assets/utils4-DBgJPJ1M.js","assets/text-CU-NFKp_.js","assets/index-3ZhkCLKv.js","assets/index-6CXt9X2P.js"])))=>i.map(i=>d[i]);
import{S as v,T as C,U as u,V as i,bJ as F,_ as a,e as r,a0 as g,g as f}from"./index-BrQW8HOS.js";import{t as y}from"./getAssociationTitle-CbehvZwK.js";function _(e,t){return!!(e.sourceLayer&&"globalIdField"in e.sourceLayer&&e.sourceLayer.globalIdField&&t.fromNetworkElement)&&e.attributes[e.sourceLayer.globalIdField]===t.fromNetworkElement.globalId}const h="esri-feature-form-utility-network-association-settings",b={base:h,infoContainer:`${h}__info-container`};let n=class extends v{constructor(e,t){super(e,t),this.percentAlong=50,this.headingLevel=5,this.messagesFeature=null,this.messagesCommon=null,this.messagesFeatureForm=null,this.readOnly=!1,this.sourceFeature=null,this.targetFeature=null,this.utilityNetwork=null}loadDependencies(){return C({block:()=>u(()=>import("./index-CwsCBFm3.js"),__vite__mapDeps([0,1,2])),combobox:()=>u(()=>import("./index-BOdF8fLv.js"),__vite__mapDeps([3,1,2,4,5,6])),"combobox-item":()=>u(()=>import("./index-D6Hs6QxG.js"),__vite__mapDeps([4,1,2,5,6])),"input-number":()=>u(()=>import("./index-3ZhkCLKv.js"),__vite__mapDeps([7,1,2])),label:()=>u(()=>import("./index-BrQW8HOS.js").then(e=>e.M_),__vite__mapDeps([1,2])),switch:()=>u(()=>import("./index-6CXt9X2P.js"),__vite__mapDeps([8,1,2]))})}get association(){return this._get("association")}set association(e){this.percentAlong=e.percentAlong?100*e.percentAlong:50,this._set("association",e)}get associationType(){return this.association.associationType}set associationType(e){this.association.associationType=e,e!=="junction-edge-to-connectivity"&&e!=="junction-edge-from-connectivity"||(this.association.percentAlong=void 0)}render(){return i("div",{class:this.classes(b.base,F.widget)},this._renderFromAssociationEndpoint(),this._renderToAssociationEndpoint(),this._renderAdditionalContent())}_renderFromAssociationEndpoint(){const{associationType:e,association:t,sourceFeature:o,targetFeature:s,messagesFeatureForm:c}=this,d=_(o.feature,t)?o:s,l=d.label,m=y(t,"from",c.associations);switch(e){case"connectivity":case"junction-junction-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-from-connectivity":case"junction-edge-to-connectivity":return this._renderAssociationEndpoint(l,m,this._renderConnectivityContent(d.feature,t.fromNetworkElement))}return this._renderAssociationEndpoint(l,m)}_renderToAssociationEndpoint(){const{associationType:e,association:t,sourceFeature:o,targetFeature:s,messagesFeatureForm:c}=this,d=_(o.feature,t)?s:o,l=d.label,m=y(t,"to",c.associations);let p;switch(e){case"connectivity":case"junction-junction-connectivity":p=this._renderConnectivityContent(d.feature,t.toNetworkElement);break;case"containment":p=this._isNonspatial(d.feature)?null:this._renderContainmentContent()}return this._renderAssociationEndpoint(l,m,p)}_renderAssociationEndpoint(e,t,o){return i("calcite-block",{description:t,expanded:!0,heading:e},o)}_renderContainmentContent(){const{messagesFeatureForm:e,association:t}=this,o=t.isContentVisible??!1;return i("calcite-label",{layout:"inline"},e.associations.visible,i("calcite-switch",{checked:o,onCalciteSwitchChange:({currentTarget:s})=>{t.isContentVisible=s.checked}}))}_renderConnectivityContent(e,t){const{messagesFeatureForm:o,utilityNetwork:s}=this,c=s.getTerminalConfiguration(e),d=c?.terminals.map(l=>this._renderComboboxListItemNumber(l.id,t.terminalId,l.name))||[];return i("calcite-label",null,o.associations.terminal,i("calcite-combobox",{allowCustomValues:!1,label:o.associations.terminalComboboxLabel,overlayPositioning:"fixed",selectionMode:"single-persist",onCalciteComboboxChange:({currentTarget:l})=>{t.terminalId=parseInt(l.value,10)}},...d))}_renderAdditionalContent(){const{associationType:e}=this;switch(e){case"connectivity":case"junction-junction-connectivity":case"attachment":case"containment":return}const t=e==="junction-edge-midspan-connectivity"?e:"junction-edge-from-connectivity",{messagesFeatureForm:o}=this,s=[this._renderComboboxListItemString("junction-edge-midspan-connectivity",t,o.associations.midspanEdge),this._renderComboboxListItemString("junction-edge-from-connectivity",t,o.associations.endpointEdge)];return i("div",{class:b.infoContainer},i("calcite-label",{key:"additional-content"},o.associations.connectTo,i("calcite-combobox",{allowCustomValues:!1,label:o.associations.edgeConnectionComboboxLabel,overlayPositioning:"fixed",selectionMode:"single-persist",onCalciteComboboxChange:({currentTarget:c})=>{this.associationType=c.value}},...s)),t==="junction-edge-midspan-connectivity"?this._renderMidspanEdgeContent():this._renderEndpointEdgeContent())}_renderMidspanEdgeContent(){const{messagesFeatureForm:e,percentAlong:t,association:o}=this;return o.percentAlong=t/100,i("calcite-label",{key:"midspan-edge"},e.associations.midspanLocation,i("calcite-input-number",{max:100,min:0,numberButtonType:"vertical",suffixText:"%",value:`${t}`,onCalciteInputNumberInput:({currentTarget:s})=>{this.percentAlong=parseFloat(s.value)}}))}_renderEndpointEdgeContent(){const{associationType:e,messagesFeatureForm:t}=this,o=e==="junction-edge-to-connectivity";return i("calcite-label",{key:"endpoint-edge"},t.associations.edgeSide,i("calcite-label",{layout:"inline"},t.associations.fromSide,i("calcite-switch",{checked:o,onCalciteSwitchChange:({currentTarget:s})=>{const c=s.checked?"junction-edge-to-connectivity":"junction-edge-from-connectivity";this.associationType=c}}),t.associations.toSide))}_renderComboboxListItemNumber(e,t,o){return i("calcite-combobox-item",{heading:o,key:`#${e}`,selected:t===e,value:`${e}`})}_renderComboboxListItemString(e,t,o){return i("calcite-combobox-item",{heading:o,key:`#${e}`,selected:t===e,value:`${e}`})}_isNonspatial(e){const{sourceLayer:t}=e;return t!=null&&"geometryType"in t&&t.geometryType==null}};a([r()],n.prototype,"association",null),a([r()],n.prototype,"percentAlong",void 0),a([r()],n.prototype,"associationType",null),a([r()],n.prototype,"headingLevel",void 0),a([r(),g("esri/widgets/Feature/t9n/Feature")],n.prototype,"messagesFeature",void 0),a([r(),g("esri/t9n/common")],n.prototype,"messagesCommon",void 0),a([r(),g("esri/widgets/FeatureForm/t9n/FeatureForm")],n.prototype,"messagesFeatureForm",void 0),a([r()],n.prototype,"readOnly",void 0),a([r()],n.prototype,"sourceFeature",void 0),a([r()],n.prototype,"targetFeature",void 0),a([r()],n.prototype,"utilityNetwork",void 0),n=a([f("esri.widgets.FeatureForm.FeatureFormUtilityNetworkAssociations.UtilityNetworkAssociationSettings")],n);const A=n;export{A as default};
