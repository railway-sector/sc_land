const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/webglDeps-B9o0_o0s.js","assets/index-BrQW8HOS.js","assets/index-lUE0m221.css","assets/ShaderCompiler-G2XYGDs6.js","assets/programUtils-CwiKxPbA.js","assets/ProgramTemplate-Bs6-tONO.js","assets/mapViewDeps-2LS2qwiv.js","assets/FeatureCommandQueue-CHlQJ5HC.js","assets/CIMSymbolHelper-BlfMWOZ7.js","assets/BidiEngine-BvER9tXK.js","assets/labelPoint-CgDrQQb-.js","assets/rasterizingUtils-Bv-DctWv.js","assets/mat2d-BbBq4Byx.js","assets/mat2df32-Dpt2CT5P.js","assets/Rect-CUzevAry.js","assets/BoundingBox-BuUpzzb5.js","assets/Technique-Ci8QnsGB.js","assets/UpdateTracking2D-Gzh35eIq.js","assets/utils-CBgvkwBp.js","assets/constants-BBnGEY1d.js","assets/clippingUtils-BM7WDzJt.js","assets/viewpointUtils-CqwA4uEG.js","assets/mat2df64-DJ_RMjZ3.js","assets/a11yUtils-BrnjXW_g.js","assets/heatmapTextureUtils-Cv1fg6rl.js","assets/WGLContainer-DgjgvKgu.js","assets/Utils-BF-wCUzY.js","assets/WGLBrushVTLSymbol-CFvVF_EM.js","assets/Container-YjeysbeO.js","assets/EffectView-c1UGgQSH.js","assets/earcut-D9gy186-.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/QueueProcessor-CL6qRd0z.js","assets/SDFHelper-CqlEtc05.js","assets/TexturedLineMeshWriter-BWh-438Z.js","assets/TurboLine-D-njSPA9.js","assets/OverrideHelper-Dz66q1dD.js","assets/callExpressionWithFeature-DHWn7DZ3.js","assets/VTLMaterialManager-Diyp9F_8.js","assets/GridShader-DV3a9Dp3.js","assets/CircularArray-CujHzHWW.js","assets/SymbolFader-BGgCIfM5.js","assets/VertexStream-DLzAWWPP.js","assets/CIMResourceManager-CKLYpEab.js","assets/pbf-bO1aG1II.js","assets/AttributeStore-Bv1ugamN.js","assets/FeatureStoreQueryAdapter-CXh0LPML.js","assets/queryUtils-DtYhZp0I.js","assets/timeSupport-B35Pi50H.js","assets/utils-B_75WYOH.js","assets/grouping-C2yK9O40.js","assets/utils-DDjZAYSk.js","assets/MeshWriterRegistry-ChzM_sSV.js","assets/Timeline-Cz5T4vl1.js","assets/projectOperator-p23D9sjF.js","assets/operatorProject-DxiD_TZp.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/GraphicsView2D-DBV8Wl3n.js","assets/FeatureMetadata-gpV2fKss.js","assets/rbush-DRx18tQf.js","assets/normalizeUtilsSync-DbZEvtY3.js","assets/densifyCurvedGeometry-B2pHq9-y.js","assets/GraphicContainer-D0ufj8hZ.js","assets/AGraphicContainer-hQjoSDU1.js","assets/TechniqueInstance-DzGeiMc7.js","assets/TileContainer-BWbERXiu.js","assets/gridUtils-qPxjKPob.js","assets/geodesicUtils-BJZXB7Hp.js"])))=>i.map(i=>d[i]);
import{ku as L,nT as O,B as R,j4 as C,lT as E,ck as P,ne as $,hh as k,f as u,Z as m,U as w,nU as U,_ as a,e as s,g as x}from"./index-BrQW8HOS.js";import{d as z,a as G,x as N}from"./clippingUtils-BM7WDzJt.js";import{u as q,s as A,l as y}from"./hitTestUtils-DuJ-LfGM.js";import{H as j}from"./viewpointUtils-CqwA4uEG.js";import{e as f}from"./Timeline-Cz5T4vl1.js";import"./a11yUtils-BrnjXW_g.js";import"./mat2d-BbBq4Byx.js";import"./mat2df32-Dpt2CT5P.js";import"./mat2df64-DJ_RMjZ3.js";import"./rbush-DRx18tQf.js";import"./Tile-BIybhnuW.js";import"./arcadeUtils-MYBE13Eg.js";let _,V,v,M;async function H(){const[,{GraphicsView2D:e,GraphicContainer:i,LabelManager:r,MapViewNavigation:n}]=await Promise.all([w(()=>import("./webglDeps-B9o0_o0s.js"),__vite__mapDeps([0,1,2,3,4,5])),w(()=>import("./mapViewDeps-2LS2qwiv.js"),__vite__mapDeps([6,1,2,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,3,5,28,29,30,31,32,33,34,35,36,37,38,4,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67]))]);_=e,V=i,v=r,M=n}let t=class extends z(U){constructor(e){super(e),this.stage=null,this.rootLayerViews=new L({getCollections:()=>[this.layerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.timeline=new f,this.goToManager=new G({view:this}),this.labelManager=null,this.animationsEnabled=!0,this.map=null,this.surface=null,this.padding={top:0,right:0,bottom:0,left:0},O()}initialize(){this.addResolvingPromise(R(()=>this.ready))}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=C(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy()}get graphicsTileStore(){return new q(this.featuresTilingScheme)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return E(i.spatialReference,r)}async hitTest(e,i){return A(this,e,i)}goTo(e,i){return this.goToManager.goTo(e,i)}toMap(e){return this.stateManager.toMap(e)}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}loadAsyncDependencies(){return H()}hasLayerViewModule(e){return y.hasLayerViewModule(e)}importLayerView(e){return y.importLayerView(e)}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:r,padding:n,size:h}=this;if(!e)return null;const l=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),p=l?.viewpoint,d=p?.targetGeometry?.extent??i,T=d?.center,S=p?.rotation??0,b=p?.scale||d&&j(d,[h[0]-n.left-n.right,h[1]-n.top-n.bottom]),g=o.center??T,D=o.rotation??S,c=o.scale??b;return g&&c?new P({targetGeometry:g,scale:c,rotation:D}):null}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container)}_startup(){this.timeline.begin("VideoOperationalDataView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const i=new v({view:this});this._set("labelManager",i);const r=new N({view:this});this._set("animationManager",r);const n=new M({view:this,animationManager:r});this._set("mapViewNavigation",n);const h=new $(k.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",h);const l=new _({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new V(h)});this._set("graphicsView",l),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),this.stage.on("webgl-error",o=>this.fatalError=o.error),u(()=>this.stationary,o=>this.stage.stationary=o,m),u(()=>this.state.id,()=>this.stage.state=this.state,m)],"video-graphics-view"),this._updateStageChildren(),this.timeline.end("VideoOperationalDataView Startup"),this.frameTask.start(),this.stage.viewIsReady=!0,this._set("ready",!0)}_teardown(){this.removeHandles("video-graphics-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.stage.destroy(),this.stage=null;const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}};a([s()],t.prototype,"stage",void 0),a([s({readOnly:!0})],t.prototype,"featuresTilingScheme",void 0),a([s({readOnly:!0})],t.prototype,"graphicsTileStore",null),a([s()],t.prototype,"graphicsView",void 0),a([s({type:f,readOnly:!0})],t.prototype,"timeline",void 0),a([s()],t.prototype,"goToManager",void 0),a([s()],t.prototype,"labelManager",void 0),a([s()],t.prototype,"animationsEnabled",void 0),a([s()],t.prototype,"map",void 0),a([s({readOnly:!0})],t.prototype,"typeSpecificPreconditionsReady",null),a([s({readOnly:!0})],t.prototype,"surface",void 0),t=a([x("esri.views.video.VideoOperationalDataView")],t);const ie=t;export{ie as default};
