const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/webglDeps-3dAM7EsC.js","assets/index-CgzAF5Ey.js","assets/index-ni9qn0ie.css","assets/ShaderCompiler-G2XYGDs6.js","assets/programUtils-CwiKxPbA.js","assets/ProgramTemplate-BmV-yqYj.js","assets/mapViewDeps-CdwYlmb3.js","assets/FeatureCommandQueue-CzDbVjZb.js","assets/CIMSymbolHelper-Bd9SO2qF.js","assets/BidiEngine-BvER9tXK.js","assets/labelPoint-DZLJ2eV0.js","assets/rasterizingUtils-DPK9f2Iy.js","assets/mat2d-DWPHXQcf.js","assets/mat2df32-Dpt2CT5P.js","assets/Rect-CUzevAry.js","assets/BoundingBox-RIlEJuyl.js","assets/Technique-SjU0uoyi.js","assets/UpdateTracking2D-CJS8bvED.js","assets/utils-BuGXhKc-.js","assets/constants-BBnGEY1d.js","assets/clippingUtils-QppW5MR2.js","assets/viewpointUtils-BuigW1az.js","assets/mat2df64-DJ_RMjZ3.js","assets/a11yUtils-B0k1CDxO.js","assets/heatmapTextureUtils-SC7jGutZ.js","assets/WGLContainer-DBpUTeW4.js","assets/Utils-C08L_Hvp.js","assets/WGLBrushVTLSymbol-DJ6mJnAH.js","assets/Container-BfA3-rQm.js","assets/EffectView-B3K5O1-N.js","assets/earcut-D9gy186-.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/QueueProcessor-DIiVPdhP.js","assets/SDFHelper-B6cT4HdN.js","assets/TexturedLineMeshWriter-CV5VItbC.js","assets/TurboLine-DWqXwoHL.js","assets/OverrideHelper-DgkHuzVT.js","assets/callExpressionWithFeature-Lt9Or9I8.js","assets/VTLMaterialManager-Diyp9F_8.js","assets/GridShader-Bj8BEnYB.js","assets/CircularArray-CujHzHWW.js","assets/SymbolFader-CkVu5yKh.js","assets/VertexStream-B2cT2KLF.js","assets/CIMResourceManager-KvxbKRQg.js","assets/pbf-BEkcbkvb.js","assets/AttributeStore-DQbZkf3j.js","assets/FeatureStoreQueryAdapter-CDvuXLtZ.js","assets/queryUtils-DNHDSTFw.js","assets/timeSupport-DN8IRYHu.js","assets/utils-DQIbIkse.js","assets/grouping-BgHNvmg_.js","assets/utils-DDjZAYSk.js","assets/MeshWriterRegistry-5zVwP7AI.js","assets/Timeline-Cz5T4vl1.js","assets/projectOperator-GV0McMFO.js","assets/operatorProject-BaCyxOS9.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/GraphicsView2D-BK-yFuK6.js","assets/FeatureMetadata-CUQII5Ap.js","assets/rbush-eDLDlHie.js","assets/normalizeUtilsSync-BwFfP_Vx.js","assets/densifyCurvedGeometry-xrty2FpW.js","assets/GraphicContainer-B0B9NZN1.js","assets/AGraphicContainer-C8Gez-zD.js","assets/TechniqueInstance-ChXQRjjJ.js","assets/TileContainer-DiiiZxLq.js","assets/gridUtils-wkjo3J8K.js","assets/geodesicUtils-Cfv0uT1u.js"])))=>i.map(i=>d[i]);
import{lN as L,of as O,B as R,jl as C,mN as $,ck as E,nZ as P,hh as k,f as u,$ as m,V as w,og as N,_ as a,e as s,g as x}from"./index-CgzAF5Ey.js";import{d as z,a as G,x as U}from"./clippingUtils-QppW5MR2.js";import{u as q,s as A,l as y}from"./hitTestUtils-BYtV70CA.js";import{H as j}from"./viewpointUtils-BuigW1az.js";import{e as f}from"./Timeline-Cz5T4vl1.js";import"./a11yUtils-B0k1CDxO.js";import"./mat2d-DWPHXQcf.js";import"./mat2df32-Dpt2CT5P.js";import"./mat2df64-DJ_RMjZ3.js";import"./rbush-eDLDlHie.js";import"./Tile-B-BE-ibd.js";import"./arcadeUtils-MYBE13Eg.js";let V,_,v,M;async function H(){const[,{GraphicsView2D:e,GraphicContainer:i,LabelManager:r,MapViewNavigation:n}]=await Promise.all([w(()=>import("./webglDeps-3dAM7EsC.js"),__vite__mapDeps([0,1,2,3,4,5])),w(()=>import("./mapViewDeps-CdwYlmb3.js"),__vite__mapDeps([6,1,2,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,3,5,28,29,30,31,32,33,34,35,36,37,38,4,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67]))]);V=e,_=i,v=r,M=n}let t=class extends z(N){constructor(e){super(e),this.stage=null,this.rootLayerViews=new L({getCollections:()=>[this.layerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.timeline=new f,this.goToManager=new G({view:this}),this.labelManager=null,this.animationsEnabled=!0,this.map=null,this.surface=null,this.padding={top:0,right:0,bottom:0,left:0},O()}initialize(){this.addResolvingPromise(R(()=>this.ready))}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=C(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy()}get graphicsTileStore(){return new q(this.featuresTilingScheme)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return $(i.spatialReference,r)}async hitTest(e,i){return A(this,e,i)}goTo(e,i){return this.goToManager.goTo(e,i)}toMap(e){return this.stateManager.toMap(e)}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}loadAsyncDependencies(){return H()}hasLayerViewModule(e){return y.hasLayerViewModule(e)}importLayerView(e){return y.importLayerView(e)}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:r,padding:n,size:h}=this;if(!e)return null;const l=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),p=l?.viewpoint,d=p?.targetGeometry?.extent??i,T=d?.center,S=p?.rotation??0,b=p?.scale||d&&j(d,[h[0]-n.left-n.right,h[1]-n.top-n.bottom]),g=o.center??T,D=o.rotation??S,c=o.scale??b;return g&&c?new E({targetGeometry:g,scale:c,rotation:D}):null}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container)}_startup(){this.timeline.begin("VideoOperationalDataView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const i=new v({view:this});this._set("labelManager",i);const r=new U({view:this});this._set("animationManager",r);const n=new M({view:this,animationManager:r});this._set("mapViewNavigation",n);const h=new P(k.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",h);const l=new V({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new _(h)});this._set("graphicsView",l),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),this.stage.on("webgl-error",o=>this.fatalError=o.error),u(()=>this.stationary,o=>this.stage.stationary=o,m),u(()=>this.state.id,()=>this.stage.state=this.state,m)],"video-graphics-view"),this._updateStageChildren(),this.timeline.end("VideoOperationalDataView Startup"),this.frameTask.start(),this.stage.viewIsReady=!0,this._set("ready",!0)}_teardown(){this.removeHandles("video-graphics-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.stage.destroy(),this.stage=null;const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}};a([s()],t.prototype,"stage",void 0),a([s({readOnly:!0})],t.prototype,"featuresTilingScheme",void 0),a([s({readOnly:!0})],t.prototype,"graphicsTileStore",null),a([s()],t.prototype,"graphicsView",void 0),a([s({type:f,readOnly:!0})],t.prototype,"timeline",void 0),a([s()],t.prototype,"goToManager",void 0),a([s()],t.prototype,"labelManager",void 0),a([s()],t.prototype,"animationsEnabled",void 0),a([s()],t.prototype,"map",void 0),a([s({readOnly:!0})],t.prototype,"typeSpecificPreconditionsReady",null),a([s({readOnly:!0})],t.prototype,"surface",void 0),t=a([x("esri.views.video.VideoOperationalDataView")],t);const ie=t;export{ie as default};
