const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/webglDeps-B6rqtXal.js","assets/index-CVzGOCNQ.js","assets/index-ni9qn0ie.css","assets/ShaderCompiler-G2XYGDs6.js","assets/programUtils-CwiKxPbA.js","assets/ProgramTemplate-DjxogW6B.js","assets/mapViewDeps-CIvG9zIe.js","assets/FeatureCommandQueue-D_39B1S1.js","assets/GraphShaderModule-DnXk7k9B.js","assets/UpdateTracking2D-ttowYhh7.js","assets/utils-BgfImACU.js","assets/constants-BBnGEY1d.js","assets/heatmapTextureUtils-700goX2V.js","assets/WGLContainer-p-pUtbDA.js","assets/Utils-BCvBcTOq.js","assets/WGLBrushVTLSymbol-C8W2JnQ4.js","assets/Container-DKNmUbb9.js","assets/earcut-D9gy186-.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/QueueProcessor-B720RfTi.js","assets/SDFHelper-CdRv5XRo.js","assets/TexturedLineMeshWriter-CIaJWYNH.js","assets/TurboLine-dc4uRadF.js","assets/VTLMaterialManager-Diyp9F_8.js","assets/GridShader-hep6eS8_.js","assets/CircularArray-CujHzHWW.js","assets/SymbolFader-GAH_jevZ.js","assets/VertexStream-D3ighFQe.js","assets/pbf-DD3xtqYr.js","assets/AttributeStore-Dtjri3PM.js","assets/FeatureStoreQueryAdapter-CYoAruE4.js","assets/queryUtils-8j48OmpW.js","assets/timeSupport-CnBgtY_G.js","assets/utils-Cyyn8YSf.js","assets/grouping-CRCUy15y.js","assets/utils-DDjZAYSk.js","assets/MeshWriterRegistry-D6C9ApjX.js","assets/projectOperator-Cgbni7ff.js","assets/operatorProject-CPQcWrku.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/GraphicsView2D-D9LFTNxg.js","assets/FeatureMetadata-BB9g3gPL.js","assets/normalizeUtilsSync-CH8vbm0V.js","assets/densifyCurvedGeometry-C4NstkPi.js","assets/GraphicContainer-B0LgD5vP.js","assets/AGraphicContainer-CvU6wpFn.js","assets/TechniqueInstance-Dr1arS_7.js","assets/TileContainer-hYMnAEV9.js","assets/gridUtils-Cxf4yL-E.js"])))=>i.map(i=>d[i]);
import{nd as R,ne as D,ja as O,nf as f,ng as C,nh as $,y as E,hL as P,ni as k,mf as x,nj as z,nk as u,nl as G,nm as N,nn as U,iR as j,fM as q,k as w,a3 as y,_ as m,Z as a,$ as s,a0 as A}from"./index-CVzGOCNQ.js";let _,V,v,M;async function H(){const[,{GraphicsView2D:e,GraphicContainer:i,LabelManager:r,MapViewNavigation:n}]=await Promise.all([m(()=>import("./webglDeps-B6rqtXal.js"),__vite__mapDeps([0,1,2,3,4,5])),m(()=>import("./mapViewDeps-CIvG9zIe.js"),__vite__mapDeps([6,1,2,7,8,9,10,11,12,13,14,15,3,5,16,17,18,19,20,21,22,23,4,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48]))]);_=e,V=i,v=r,M=n}let t=class extends R(D){constructor(e){super(e),this.stage=null,this.rootLayerViews=new O({getCollections:()=>[this.layerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.timeline=new f,this.goToManager=new C({view:this}),this.labelManager=null,this.animationsEnabled=!0,this.map=null,this.surface=null,this.padding={top:0,right:0,bottom:0,left:0},$()}initialize(){this.addResolvingPromise(E(()=>this.ready))}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=P(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy()}get graphicsTileStore(){return new k(this.featuresTilingScheme)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return x(i.spatialReference,r)}async hitTest(e,i){return z(this,e,i)}goTo(e,i){return this.goToManager.goTo(e,i)}toMap(e){return this.stateManager.toMap(e)}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}loadAsyncDependencies(){return H()}hasLayerViewModule(e){return u.hasLayerViewModule(e)}importLayerView(e){return u.importLayerView(e)}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:r,padding:n,size:h}=this;if(!e)return null;const l=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),p=l?.viewpoint,d=p?.targetGeometry?.extent??i,T=d?.center,S=p?.rotation??0,b=p?.scale||d&&G(d,[h[0]-n.left-n.right,h[1]-n.top-n.bottom]),g=o.center??T,L=o.rotation??S,c=o.scale??b;return g&&c?new N({targetGeometry:g,scale:c,rotation:L}):null}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container)}_startup(){this.timeline.begin("VideoOperationalDataView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const i=new v({view:this});this._set("labelManager",i);const r=new U({view:this});this._set("animationManager",r);const n=new M({view:this,animationManager:r});this._set("mapViewNavigation",n);const h=new j(q.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",h);const l=new _({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new V(h)});this._set("graphicsView",l),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),this.stage.on("webgl-error",o=>this.fatalError=o.error),w(()=>this.stationary,o=>this.stage.stationary=o,y),w(()=>this.state.id,()=>this.stage.state=this.state,y)],"video-graphics-view"),this._updateStageChildren(),this.timeline.end("VideoOperationalDataView Startup"),this.frameTask.start(),this.stage.viewIsReady=!0,this._set("ready",!0)}_teardown(){this.removeHandles("video-graphics-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.stage.destroy(),this.stage=null;const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}};a([s()],t.prototype,"stage",void 0),a([s({readOnly:!0})],t.prototype,"featuresTilingScheme",void 0),a([s({readOnly:!0})],t.prototype,"graphicsTileStore",null),a([s()],t.prototype,"graphicsView",void 0),a([s({type:f,readOnly:!0})],t.prototype,"timeline",void 0),a([s()],t.prototype,"goToManager",void 0),a([s()],t.prototype,"labelManager",void 0),a([s()],t.prototype,"animationsEnabled",void 0),a([s()],t.prototype,"map",void 0),a([s({readOnly:!0})],t.prototype,"typeSpecificPreconditionsReady",null),a([s({readOnly:!0})],t.prototype,"surface",void 0),t=a([A("esri.views.video.VideoOperationalDataView")],t);const F=t;export{F as default};
