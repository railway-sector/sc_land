const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/webglDeps-BlOsUJVQ.js","assets/index-Brd6-W-v.js","assets/index-ni9qn0ie.css","assets/ShaderCompiler-G2XYGDs6.js","assets/programUtils-CwiKxPbA.js","assets/ProgramTemplate-BM3TOjLA.js","assets/mapViewDeps-BO0xGei0.js","assets/FeatureCommandQueue-MNtYnkgU.js","assets/GraphShaderModule-BTy7eLIj.js","assets/UpdateTracking2D-eha-r_70.js","assets/utils-C5tgiKHk.js","assets/constants-BBnGEY1d.js","assets/heatmapTextureUtils-DKE3Ks8P.js","assets/WGLContainer-CR63FtLL.js","assets/Utils-V593UJxY.js","assets/WGLBrushVTLSymbol-DK7ijd3I.js","assets/Container-C_Jb8i2w.js","assets/earcut-D9gy186-.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/QueueProcessor-iN0JAthU.js","assets/SDFHelper-BYGrTcSs.js","assets/TexturedLineMeshWriter-CFFBVaqd.js","assets/TurboLine-D-feYbuk.js","assets/VTLMaterialManager-Diyp9F_8.js","assets/GridShader-nYw_PKSf.js","assets/CircularArray-CujHzHWW.js","assets/SymbolFader-DC-05TZ9.js","assets/VertexStream-Bz_JubxH.js","assets/pbf-DHSkgwDZ.js","assets/AttributeStore-DHGH4-xw.js","assets/FeatureStoreQueryAdapter-DBFUp3sg.js","assets/queryUtils-B3nLimNT.js","assets/timeSupport-Uqqdef6s.js","assets/utils-tiK1uuZD.js","assets/grouping-P-ey4DtP.js","assets/utils-DDjZAYSk.js","assets/MeshWriterRegistry-DnZNfHE9.js","assets/projectOperator-DQU7kq6r.js","assets/operatorProject-C8LDDLeY.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/GraphicsView2D-D7ilSul_.js","assets/FeatureMetadata-COiEjLdE.js","assets/normalizeUtilsSync-BZw0Uotp.js","assets/densifyCurvedGeometry-CPtCtS3s.js","assets/GraphicContainer-pmLhhgSC.js","assets/AGraphicContainer-VSC0bfG9.js","assets/TechniqueInstance-D-Pgfgec.js","assets/TileContainer-CP8SNnVZ.js","assets/gridUtils-FiuJje-3.js"])))=>i.map(i=>d[i]);
import{ni as D,nj as L,jf as O,nk as f,nl as C,nm as E,N as P,hQ as $,nn as k,mk as x,no as z,np as u,nq as N,nr as j,ns as q,iW as G,fR as U,j as w,a8 as y,a3 as m,a5 as a,x as s,y as A}from"./index-Brd6-W-v.js";let V,_,v,M;async function H(){const[,{GraphicsView2D:e,GraphicContainer:i,LabelManager:r,MapViewNavigation:n}]=await Promise.all([m(()=>import("./webglDeps-BlOsUJVQ.js"),__vite__mapDeps([0,1,2,3,4,5])),m(()=>import("./mapViewDeps-BO0xGei0.js"),__vite__mapDeps([6,1,2,7,8,9,10,11,12,13,14,15,3,5,16,17,18,19,20,21,22,23,4,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48]))]);V=e,_=i,v=r,M=n}let t=class extends D(L){constructor(e){super(e),this.stage=null,this.rootLayerViews=new O({getCollections:()=>[this.layerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.timeline=new f,this.goToManager=new C({view:this}),this.labelManager=null,this.animationsEnabled=!0,this.map=null,this.surface=null,this.padding={top:0,right:0,bottom:0,left:0},E()}initialize(){this.addResolvingPromise(P(()=>this.ready))}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=$(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy()}get graphicsTileStore(){return new k(this.featuresTilingScheme)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return x(i.spatialReference,r)}async hitTest(e,i){return z(this,e,i)}goTo(e,i){return this.goToManager.goTo(e,i)}toMap(e){return this.stateManager.toMap(e)}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}loadAsyncDependencies(){return H()}hasLayerViewModule(e){return u.hasLayerViewModule(e)}importLayerView(e){return u.importLayerView(e)}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:r,padding:n,size:h}=this;if(!e)return null;const l=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),p=l?.viewpoint,d=p?.targetGeometry?.extent??i,T=d?.center,S=p?.rotation??0,b=p?.scale||d&&N(d,[h[0]-n.left-n.right,h[1]-n.top-n.bottom]),g=o.center??T,R=o.rotation??S,c=o.scale??b;return g&&c?new j({targetGeometry:g,scale:c,rotation:R}):null}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container)}_startup(){this.timeline.begin("VideoOperationalDataView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const i=new v({view:this});this._set("labelManager",i);const r=new q({view:this});this._set("animationManager",r);const n=new M({view:this,animationManager:r});this._set("mapViewNavigation",n);const h=new G(U.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",h);const l=new V({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new _(h)});this._set("graphicsView",l),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),this.stage.on("webgl-error",o=>this.fatalError=o.error),w(()=>this.stationary,o=>this.stage.stationary=o,y),w(()=>this.state.id,()=>this.stage.state=this.state,y)],"video-graphics-view"),this._updateStageChildren(),this.timeline.end("VideoOperationalDataView Startup"),this.frameTask.start(),this.stage.viewIsReady=!0,this._set("ready",!0)}_teardown(){this.removeHandles("video-graphics-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.stage.destroy(),this.stage=null;const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}};a([s()],t.prototype,"stage",void 0),a([s({readOnly:!0})],t.prototype,"featuresTilingScheme",void 0),a([s({readOnly:!0})],t.prototype,"graphicsTileStore",null),a([s()],t.prototype,"graphicsView",void 0),a([s({type:f,readOnly:!0})],t.prototype,"timeline",void 0),a([s()],t.prototype,"goToManager",void 0),a([s()],t.prototype,"labelManager",void 0),a([s()],t.prototype,"animationsEnabled",void 0),a([s()],t.prototype,"map",void 0),a([s({readOnly:!0})],t.prototype,"typeSpecificPreconditionsReady",null),a([s({readOnly:!0})],t.prototype,"surface",void 0),t=a([A("esri.views.video.VideoOperationalDataView")],t);const F=t;export{F as default};
