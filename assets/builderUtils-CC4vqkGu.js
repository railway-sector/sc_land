import{a4 as u,ht as f,gc as c,ae as p}from"./index-BrQW8HOS.js";import{j as h,h as m,w as d}from"./FeatureTemplates-Y1q8_xKC.js";import{p as g}from"./createTemplateExecutor-C42KBRsu.js";import{createPresetServiceEdit as y}from"./createPresetServiceEdit-CGW_N--V.js";function $({edits:e,mode:t,relationships:n,shape:s,templatePart:r},a=""){if(r===null)return;const{template:o}=r;if(!h(o))throw new u("shared-template:template-not-loaded","A template part's template must be loaded before use");if(m(o)){if(!f(s))throw new u("shared-template:invalid-geometry","Preset templates must have a point geometry");y({geometry:s,template:o,edits:e,relationships:n,rotation:0,mode:t,tag:a})}else d(o)&&g({geometry:s,template:o,edits:e,relationships:n,tag:a})}function k(e,t){if(!e||!c(e))return null;if(!t.hasZ&&!t.hasM)return e;let n=null,s=null;const r=t.hasZ&&t.hasM?3:2;switch(t.type){case"point":n=t.hasZ?t.z:null,s=t.hasM?t.m:null;break;case"polygon":case"polyline":{const o=t.type==="polygon"?t.rings:t.paths;for(const i of o)for(const l of i)t.hasZ&&(n===null||l[2]>n)&&(n=l[2]),t.hasM&&(s===null||l[r]>s)&&(s=l[r])}break;case"multipoint":for(const o of t.points)t.hasZ&&(n===null||o[2]>n)&&(n=o[2]),t.hasM&&(s===null||o[r]>s)&&(s=o[r]);break;default:return e}const a=v(e.rings,t.hasZ,t.hasM,n,s);return new p({rings:a,spatialReference:e.spatialReference,hasZ:t.hasZ,hasM:t.hasM})}function x(e){let t=!1;return e.byNumber!==void 0&&(t=e.byNumber===!0),t}function D(e){let t=0;return e.count!==void 0&&(t=e.count),t}function N(e,t){let n=0;return t?e.proportional!==void 0&&(n=e.proportional):e.distanceValue!==void 0&&(n=e.distanceValue),t&&(n/=100),n}function R(e){return e.isProportional===!0}function V(e){return e.createUnique!==!1}function j(e){let t=0;return e.offsetDistance!==void 0&&(t=e.offsetDistance),e.side!==void 0&&e.side===1&&(t*=-1),t}function q(e){return e.vertexBeforeOffset===!0}function v(e,t,n,s,r){const a=[];for(const o of e)a.push(b(o,t,n,s,r));return a}function b(e,t,n,s,r){const a=[];for(const o of e){const i=[o[0],o[1]];t&&(i[2]=s),n&&(i[t?3:2]=r),a.push(i)}return a}export{D as c,V as d,x as f,j as g,R as h,N as m,k as p,$ as u,q as y};
