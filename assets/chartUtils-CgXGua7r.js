import{R as P,D as Z}from"./ResponsiveTheme-CdjWPp0j.js";import{d1 as K,qU as J,bN as Q,b9 as W,eX as O,ap as _,e7 as C,bY as ee,qV as te,n1 as V,qK as ie,W as oe}from"./index-aRi8Xk-b.js";import{l as T,A as ne,r as se,e as ae}from"./customElement-VHkSmNKr.js";import{h as le,N as re}from"./chartUtilsAm5-DcufaGPe.js";import{X as de,V as z,A as ce,a as pe,b as ue,L as me}from"./LineSeries-DooA7hXH.js";import{l as M,c as f,a as fe,C as xe}from"./Theme-BXLE1ecl.js";import{T as G}from"./Tooltip-BrhiY1K0.js";import"./defaultUnit-Bxakxzy0.js";import"./throttle-84JFhoJl.js";import"./traversalUtils-DmE6QkgJ.js";import"./GraphicsLayer-aZe0Dbdm.js";import"./SketchViewModel-CgPwD4NK.js";import"./isSupportedObject-BODRvkc7.js";import"./layerUtils-kYGDyovj.js";import"./SketchLabelOptions-CdsKprwo.js";import"./SketchOptions-CwjAcyI0.js";import"./SnappingManager-DCRQCwjI.js";import"./euclideanLengthMeasurementUtils-4a6kHLjp.js";import"./geometry2dUtils-CgYtdIFN.js";import"./geodeticLengthOperator-BPMj1oiZ.js";import"./geodeticCurveType-CirnHLSB.js";import"./automaticAreaMeasurementUtils-BDF5aXgy.js";import"./geodesicAreaMeasurementUtils-thvXrmuo.js";import"./earcut-D9gy186-.js";import"./automaticLengthMeasurementUtils-CCfVEmrk.js";import"./UnitSelect-DpN5wK5I.js";import"./DefaultTheme-BzklQHGZ.js";import"./ColorSet-WqLrGjmj.js";import"./Tick-BulKSLS3.js";import"./Button-CMnCu2Ec.js";import"./area-CCUzKFK2.js";function ge(e,i,o=10){const t=k(i-e,!1);if(t===0)return[e,i];const n=k(t/(o-1),!0);return[Math.floor(e/n)*n,Math.ceil(i/n)*n]}function k(e,i){const o=Math.floor(Math.log10(e)),t=e/10**o;let n;return n=i?t<1.5?1:t<3?2:t<5?2.5:t<7?5:10:t<=1?1:t<=2?2:t<=3?2.5:t<=5?5:10,n*10**o}const b="#f8f8f8",E="#a9a9a9",A="#323232",he="line",Ae="fill",v=15,h=12,w=.001,ve=.1,be=.02,I={fontFamily:"Avenir Next",paddingBottom:h/2,paddingLeft:0,paddingRight:0,paddingTop:0,axisGridStroke:"#f4f4f4",axisLabelsFontSize:9,axisLabelsFontWeight:"400",axisLabelsColor:E,axisTooltipFontSize:12,axisTooltipBackgroundColor:A,axisTooltipLabelColor:b,axisTooltipPaddingTop:Math.round(h/4),axisTooltipPaddingBottom:Math.round(h/4),axisTooltipPaddingHorizontal:Math.round(v/4),xAxisMinGridDistance:50,xAxisLabelsSpacing:Math.round(h/2),xAxisMinLabelPosition:.05,xAxisMaxLabelPosition:.9,yAxisMinGridDistance:30,yAxisLabelSpacing:Math.round(v/4),yAxisMinLabelPosition:0,yAxisMaxLabelPosition:.8,seriesTooltipFontSize:12,seriesTooltipBackgroundColor:b,seriesTooltipLabelColor:A,seriesFillLighten:.9,seriesTooltipSpacing:h/2,seriesTooltipPaddingVertical:Math.round(v/4),seriesTooltipPaddingHorizontal:Math.round(v/4)},ye={...I,axisGridStroke:A,axisLabelsColor:E,axisTooltipBackgroundColor:A,axisTooltipLabelColor:b,seriesTooltipBackgroundColor:A,seriesTooltipLabelColor:b,seriesFillLighten:-.75},S={minX:void 0,maxX:void 0,minY:void 0,maxY:void 0};async function gt(e){const i=await le(e.container);K(e.abortOptions);const o=J(e.container),t=o?ye:I;i.setThemes(o?[P.new(i),Z.new(i)]:[P.new(i)]);const n=Q(e.container),s=i.container.children.push(de.new(i,{panX:!0,panY:!0,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,paddingLeft:n?t.paddingRight:t.paddingLeft,paddingRight:n?t.paddingLeft:t.paddingRight,maxTooltipDistance:-1}));s.zoomOutButton.set("forceHidden",!0);const a=s.xAxes.push(z.new(i,{renderer:ce.new(i,{})})),l=s.yAxes.push(z.new(i,{renderer:pe.new(i,{})})),d=C(null),r=C("loading"),c={chart:s,xAxis:a,yAxis:l,seriesInfos:new Map,messages:null,theme:t,pointerIsOver:!1,rtl:n,get state(){return r.value},get data(){return d.value},set data(m){d.value=m}};Le(c),Me(c),Te(c);const p=W([we(c,e.onRangeChange),Be(c,e.onCursorPositionChange),X(i.events.once("frameended",()=>{r.value="ready"})),X(i)]);return{destroy:()=>{p.remove(),r.value="destroyed"},update:m=>{m.data===c.data&&m.messages===c.messages||Y(c)||Se(c,m)},zoomOut:()=>U(c),test:void 0}}function Y(e){return e.state==="destroyed"}function Te({chart:e,xAxis:i,yAxis:o}){const t=ue.new(e.root,{behavior:"none",xAxis:i,yAxis:o,snapToSeriesBy:"y"});t.lineY.set("visible",!1),e.set("cursor",t)}function Le(e){const{chart:i,xAxis:o,theme:t}=e;o.setAll({extraMax:0,extraMin:0,maxDeviation:0,numberFormatter:N(e,"distance"),strictMinMax:!0,strictMinMaxSelection:!0}),o.axisHeader.set("forceHidden",!0);const n=o.get("renderer");n.setAll({inside:!1,minGridDistance:t.xAxisMinGridDistance}),n.labels.template.setAll({centerX:M,centerY:M,fill:f(t.axisLabelsColor),fontFamily:t.fontFamily,fontSize:t.axisLabelsFontSize,fontWeight:t.axisLabelsFontWeight,maxPosition:t.xAxisMaxLabelPosition,minPosition:t.xAxisMinLabelPosition,paddingLeft:0,paddingRight:0,paddingTop:t.xAxisLabelsSpacing});const s=o.set("tooltip",G.new(i.root,{paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0}));s.get("background")?.setAll({fill:f(t.axisTooltipBackgroundColor),stroke:void 0}),s.label.setAll({fill:f(t.axisTooltipLabelColor),fontFamily:t.fontFamily,fontSize:t.axisTooltipFontSize,paddingBottom:t.axisTooltipPaddingBottom,paddingLeft:t.axisTooltipPaddingHorizontal,paddingRight:t.axisTooltipPaddingHorizontal,paddingTop:t.axisTooltipPaddingTop,direction:e.rtl?"rtl":"ltr"}),n.grid.template.setAll({strokeOpacity:1,stroke:f(t.axisGridStroke)})}function Me(e){const{yAxis:i,theme:o,rtl:t}=e;i.setAll({baseValue:T().noDataValue,extraMax:0,extraMin:0,maxDeviation:0,numberFormatter:N(e,"elevation"),strictMinMax:!0,strictMinMaxSelection:!0,tooltip:void 0}),i.axisHeader.set("visible",!1);const n=i.get("renderer");n.setAll({minGridDistance:o.yAxisMinGridDistance,opposite:t,inside:!0}),n.labels.template.setAll({centerX:M,centerY:fe,fill:f(o.axisLabelsColor),fontFamily:o.fontFamily,fontSize:o.axisLabelsFontSize,fontWeight:o.axisLabelsFontWeight,maxPosition:o.yAxisMaxLabelPosition,minPosition:o.yAxisMinLabelPosition,paddingBottom:0,paddingLeft:t?0:o.yAxisLabelSpacing,paddingRight:t?o.yAxisLabelSpacing:0,paddingTop:0,textAlign:"start"}),n.grid.template.setAll({strokeOpacity:1,stroke:f(o.axisGridStroke)})}function Se(e,i){if(Y(e))return;const o=e.data??void 0,t=i.data??void 0;e.chart.get("cursor")?.set("forceHidden",!t?.refined);const n=o!==t,s=o?.effectiveUnits!==t?.effectiveUnits,a=o?.uniformScaling!==t?.uniformScaling;e.data=t,e.messages=i.messages,(n||s)&&(Fe(e),Pe(e)),a&&U(e),F(e)}function U(e){Y(e)||(e.xAxis.zoom(0,1),e.yAxis.zoom(0,1))}function Fe(e){const{chart:i,data:o,xAxis:t,yAxis:n}=e,{minX:s,maxX:a,minY:l,maxY:d}=Xe({data:o,pixelWidth:t.width(),pixelHeight:n.height()}),r=!!o?.uniformScaling,c=!!o?.refined;i.setAll({panX:!0,panY:r,pinchZoomX:c,pinchZoomY:c&&r,wheelX:"panX",wheelY:c?r?"zoomXY":"zoomX":"none"}),t.setAll({max:a,min:s,panX:!0,panY:!1,zoomX:!0,zoomY:r}),n.setAll({max:d,min:l,panX:!1,panY:r,zoomX:r,zoomY:r})}function Xe({data:e,pixelWidth:i,pixelHeight:o}){if(e==null)return S;const t=e.statistics,n=0,s=t?.maxDistance;let a=t?.minElevation,l=t?.maxElevation;if(s==null||a==null||l==null)return S;const d=Math.max(s-n,w);let r=Math.max(l-a,w);const c=e.effectiveUnits;if(e.dynamicElevationRange){const p=O(d,c.distance,c.elevation);r=Math.max(r,p/T().maxChartRatio)}return a-=be*r,l=a+r+ve*r,[a,l]=ge(a,l,10),r=l-a,e.uniformScaling?Ye({data:e,bounds:{minX:n,maxX:s,minY:a,maxY:l},pixelWidth:i,pixelHeight:o,centered:!0}):{minX:n,maxX:n+d,minY:a,maxY:a+r}}function Ye({data:e,bounds:i,pixelWidth:o,pixelHeight:t,centered:n}){if(e==null)return i;let{minX:s,maxX:a,minY:l,maxY:d}=i;if(s==null||a==null||l==null||d==null)return S;const r=a-s,c=d-l,p=e.effectiveUnits,u=O(c,p.elevation,p.distance)/t/(r/o);return u>=1?[s,a]=B([s,a],u):[l,d]=B([l,d],1/u),{minX:s,maxX:a,minY:l,maxY:d}}function B([e,i],o,t){const n=(i-e)*o;{const s=(e+i)/2-n/2;return[s,s+n]}}function Pe(e){const{chart:i,data:o,seriesInfos:t,xAxis:n,yAxis:s}=e;if(o==null||o.lines.length===0)return void i.series.clear();const a=new Map,l=new Set(i.series.values),d=o.lines.length;for(let r=0;r<d;r++){const c=o.lines[r];let p=t.get(c.id);p?(p.fill&&l.delete(p.fill),l.delete(p.line)):(p=ze(e,c),p.fill&&i.series.push(p.fill),i.series.push(p.line)),a.set(p.id,p);const u=d-r-1;p.fill?.set("layer",u),p.line.set("layer",d+u),Ce(e,p,c)}e.seriesInfos=a;for(const r of l)i.series.removeValue(r);n.set("layer",d+1),s.set("layer",d+2)}function Ce({theme:e},i,o){const t=f(o.color.toCss()),n=o.samples??[],s=n.length>0,{line:a,fill:l}=i;a.set("visible",s),a.set("stroke",t),l?.set("visible",s),l?.set("fill",xe.lighten(t,e.seriesFillLighten)),a.data.setAll(n),l?.data.setAll(n)}function ze(e,i){const{id:o}=i,t=H(e,`${he}-${o}`),n=ke(e);t.setAll({dy:i.chartStrokeOffsetY,tooltip:n}),t.strokes.template.setAll({strokeWidth:i.chartStrokeWidth});let s=null;return i.chartFillEnabled&&(s=H(e,`${Ae}-${o}`),s.fills.template.setAll({fillOpacity:1,visible:!0})),{id:o,line:t,fill:s}}function H(e,i){return me.new(e.chart.root,{connect:!1,excludeFromTotal:!0,fill:void 0,id:i,stroke:void 0,valueXField:"distance",valueYField:"elevation",xAxis:e.xAxis,yAxis:e.yAxis})}function ke({theme:e,chart:i,rtl:o}){const t=G.new(i.root,{autoTextColor:!1,forceHidden:!0,getFillFromSprite:!1,getLabelFillFromSprite:!1,pointerOrientation:"vertical",visible:!1}),n=e.seriesTooltipPaddingHorizontal,s=e.seriesTooltipPaddingVertical;return t.label.setAll({fill:f(e.seriesTooltipLabelColor),fontFamily:e.fontFamily,fontSize:e.seriesTooltipFontSize,paddingBottom:s,paddingLeft:n,paddingRight:n,paddingTop:s,textAlign:o?"end":"start",direction:"ltr"}),t.get("background")?.setAll({stroke:void 0,fill:f(e.seriesTooltipBackgroundColor)}),t.adapters.add("dy",a=>{const l=e.seriesTooltipSpacing,d=t.get("pointTo")?.y??0;return(a??0)+(t.y()>d?l:-l)}),t}function we(e,i){const{xAxis:o,yAxis:t}=e,n=()=>{i(y(o),y(t))},s=a=>[a.on("start",n),a.on("end",n)];return j([...s(o),...s(t)])}function y(e){const i=Math.abs((e.get("end")??0)-(e.get("start")??0)),o=i!==0?1/i:1;return Math.abs(1-o)<ie()?1:o}function Be(e,i){const{chart:o,xAxis:t,yAxis:n}=e,s=o.get("cursor"),a=o.plotContainer.events,l=r=>{e.pointerIsOver=r,F(e)},d=()=>{l(!1),i(null,null)};return j([s?.events.on("cursormoved",()=>{if(!e.pointerIsOver)return;F(e);let r=s?.getPrivate("positionX")??0,c=s?.getPrivate("positionY")??0;const p=e.data;if(p?.statistics!=null){const{maxDistance:u,minElevation:m,maxElevation:L}=p.statistics;let x,g;u!=null&&(y(t)===1?(x=0,g=u):(x=$(t),g=D(t)),r=R(r,x,g,0,u)),m!=null&&L!=null&&(y(n)===1?(x=m,g=L):(x=$(n),g=D(n)),c=R(c,x,g,m,L))}i(r,c)}),a.on("pointerover",()=>l(!0)),a.on("pointerout",d),a.on("blur",d)])}function R(e,i,o,t,n){return(i+e*(o-i)-t)/(n-t)}function F(e){const i=He(e);if(!i)return void e.seriesInfos.forEach(o=>{o.line.get("tooltip")?.set("forceHidden",!0)});e.seriesInfos.forEach(o=>{const t=o.line.get("tooltip");t.set("forceHidden",!1),t.label.set("text",i)}),e.xAxis.getTooltip().setAll({tooltipText:De(e)})}function He(e){const{data:i}=e,o=i?.lines.map(t=>({line:t,y:q(e,t)?.elevation})).sort(Re);return o&&o.length!==0&&o[0].y!=null?o.map(({y:t,line:n})=>$e(e,n,t)).join(`
`):null}function Re({y:e},{y:i}){return e==null?1:i==null?-1:i-e}function $e(e,i,o){const{data:t,messages:n}=e;if(t==null||n==null)return"";const s=`[${i.color.toHex()}]â—[/]`,a="  ",l=T().formatPrecision,d=oe(n.chartTooltip,{name:ae(i,n),elevation:o!=null?V(n,o,t.effectiveUnits.elevation,l):se});return e.rtl?d+a+s:s+a+d}function De(e){const{data:i,messages:o}=e;if(i==null||o==null)return"";const t=i.lines[0],n=t?q(e,t):null,s=T().formatPrecision;return n!=null?V(o,n.distance,i.effectiveUnits.distance,s):"-"}function N(e,i){const o=re.new(e.chart.root,{});return o.format=(t,n,s)=>{const{data:a,messages:l}=e;return l==null||a==null||typeof t=="string"?"":`${ee(t,{maximumFractionDigits:s})} ${te(l,a.effectiveUnits[i],"abbr")}`},o}function q({chart:e,xAxis:i},o){const t=o.samples??[];if(t.length===0)return null;const n=e.get("cursor"),s=n?.getPrivate("positionX")??0,a=i.toAxisPosition(s),l=i.positionToValue(a);return ne(t,l,d=>d.distance)}function $(e){return e.positionToValue(e.get("start")??0)}function D(e){return e.positionToValue(e.get("end")??1)}function j(e){return W(e.map(X))}function X(e){return _(()=>{e?.dispose()})}export{gt as createChart,Xe as getAdjustedBounds};
