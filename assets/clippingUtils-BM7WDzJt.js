import{ch as Xt,aq as dt,b3 as ut,i3 as Q,aN as W,gN as Z,gT as te,ck as P,al as y,pp as ee,s2 as ie,gt as wt,s3 as _t,s6 as se,pn as ae,gP as ne,_ as r,e as h,g as M,gM as oe,am as re,f as A,ff as mt,Y as $,Fq as he,y as it,hN as le,r1 as gt,Fr as ce,aG as pe,a4 as S,zA as vt,aV as Zt,$ as z,wu as Ft,Fs as Nt,O as Gt,ae as de,od as ue,k2 as yt,b7 as me,c3 as st,aX as V,b9 as ge,Ft as ve,Fu as at,B as fe,ds as xt,op as we,Fv as T,Fw as _e,Fx as Y,Fy as It,i4 as ye,bI as Et,Fz as xe,FA as Me,FB as Te,FC as Ht,wO as Se,FD as $e,a_ as nt,FE as Mt,FF as be,j4 as Re,FG as ze,FH as ke,FI as Ce,FJ as De,FK as Pe,FL as Oe,FM as Ve,ot as Tt,Z as Ae,FN as St,rQ as Ze,rR as Fe,FO as Ne,gU as Lt,j1 as j,FP as $t,FQ as jt,ie as bt,FR as Ge,jd as Ie,b8 as Ee,i6 as He,uR as Le,FS as je,i8 as Ke,i7 as Ue,A as qe,fn as We,FT as K,yE as Rt,d6 as Be,nn as Je}from"./index-BrQW8HOS.js";import{Z as D,m as Ye,u as Qe,o as Xe,_ as ti,l as ei,f as ii,y as si,g as ai,x as zt,t as ni,w as oi,j as kt,H as ri,p as hi,h as li,Y as ci,k as pi,G as di,a as ui}from"./viewpointUtils-CqwA4uEG.js";import{o as mi}from"./a11yUtils-BrnjXW_g.js";import{f as gi,s as Kt,i as Ut,u as vi,a as fi,c as wi}from"./mat2d-BbBq4Byx.js";import{n as _i}from"./mat2df32-Dpt2CT5P.js";import{e as B}from"./mat2df64-DJ_RMjZ3.js";function yi(i){return i instanceof Float32Array&&i.length>=2}function xi(i){return Array.isArray(i)&&i.length>=2}function X(i){return yi(i)||xi(i)}var ot;const b=[0,0];let R=ot=class extends Xt{constructor(i){super(i),this._viewpoint2D={center:dt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new ut,this.id=0,this.inverseTransform=B(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=B(),this.transformNoRotation=B(),this.displayMat3=Q(),this.displayViewMat3=Q(),this.viewMat3=Q(),this.viewMat2d=_i(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(i){this._set("pixelRatio",i),this._update()}set size(i){this._set("size",i),this._update()}set viewpoint(i){if(i){const t=this._viewpoint2D,e=i.targetGeometry;t.center[0]=e.x,t.center[1]=e.y,t.rotation=i.rotation,t.scale=i.scale,t.spatialReference=e.spatialReference}this._update()}get visibleArea(){const[i,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],i,t),this.toMap([0,0],i,0)]}copy(i){const t=this.size,e=this.viewpoint;return e&&t?(this.viewpoint=D(e,i.viewpoint),this._set("size",W(t,i.size))):(this.viewpoint=i.viewpoint.clone(),this._set("size",[i.size[0],i.size[1]])),this._set("pixelRatio",i.pixelRatio),this}clone(){return new ot({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(i,t,e){return X(t)?Z(i,t,this.inverseTransform):(b[0]=t,b[1]=e,Z(i,b,this.inverseTransform))}toScreen(i,t,e){return X(t)?Z(i,t,this.transform):(b[0]=t,b[1]=e,Z(i,b,this.transform))}toScreenNoRotation(i,t,e){return X(t)?Z(i,t,this.transformNoRotation):(b[0]=t,b[1]=e,Z(i,b,this.transformNoRotation))}wrapMapCoordinate(i,t){W(i,t);const[e]=t,[s]=this.center,{extent:a,spatialReference:n}=this;let{xmin:o,xmax:c}=a;if(n.isWrappable){const l=Ye(n)/2;o=Math.max(o,s-l),c=Math.min(c,s+l)}return(e<o||e>c)&&(i[0]=te(e,s,n)),i}getScreenTransform(i,t){const{center:e}=this._viewpoint2D,s=this._get("pixelRatio")||1,a=this._get("size");return Qe(i,e,a,t,0,s),i}_update(){const{center:i,spatialReference:t,scale:e,rotation:s}=this._viewpoint2D,a=this._get("pixelRatio")||1,n=this._get("size"),o=new P({targetGeometry:new y(i[0],i[1],t),scale:e,rotation:s});if(this._set("viewpoint",o),!n||!t||!e)return;this.resolution=Xe(o),this.rotation=s,this.scale=e,this.spatialReference=t,W(this.center,i);const c=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;ee(this.displayMat3,c,0,0,0,l,0,-1,1,1);const p=ie(this.viewMat3),d=wt(n[0]/2,n[1]/2),m=wt(-n[0]/2,-n[1]/2),u=ne(s);_t(p,p,d),se(p,p,u),_t(p,p,m),ae(this.displayViewMat3,this.displayMat3,p);const v=gi(this.viewMat2d,d);return Kt(v,v,u),Ut(v,v,m),ti(this.extent,o,n),ei(this.transform,o,n,a),vi(this.inverseTransform,this.transform),ii(this.transformNoRotation,o,n,a),this.worldScreenWidth=si(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};r([h({readOnly:!0})],R.prototype,"id",void 0),r([h({value:1,json:{write:!0}})],R.prototype,"pixelRatio",null),r([h({json:{write:!0}})],R.prototype,"size",null),r([h()],R.prototype,"spatialReference",void 0),r([h({type:P,json:{write:!0}})],R.prototype,"viewpoint",null),r([h({readOnly:!0})],R.prototype,"visibleArea",null),R=ot=r([M("esri.views.2d.ViewState")],R);const Ct=R;var rt,ht;let k=rt=class extends ${constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new rt({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};r([h()],k.prototype,"left",void 0),r([h()],k.prototype,"top",void 0),r([h()],k.prototype,"right",void 0),r([h()],k.prototype,"bottom",void 0),k=rt=r([M("esri.views.2d.PaddedViewState.Padding")],k);let F=ht=class extends Ct{constructor(...i){super(...i),this.paddedViewState=new Ct,this._updateContent=(()=>{const t=dt();return()=>{const e=this._get("size"),s=this._get("padding");if(!e||!s)return;const a=this.paddedViewState;oe(t,s.left+s.right,s.top+s.bottom),re(t,e,t),W(a.size,t);const n=a.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(A(()=>[this.size,this.padding],()=>this._updateContent(),mt)),this.padding=new k,this.size=[0,0]}set padding(i){this._set("padding",i||new k)}set viewpoint(i){if(i){this.paddedViewState.viewpoint=i;let t=i;const e=this._get("padding");e&&(t=ai(i.clone(),i,this._get("size"),e));const{targetGeometry:s,rotation:a,scale:n}=t,{x:o,y:c,spatialReference:l}=s,p=this._viewpoint2D;p.center[0]=o,p.center[1]=c,p.rotation=a,p.scale=n,p.spatialReference=l,this._update()}}clone(){return new ht({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};r([h()],F.prototype,"paddedViewState",void 0),r([h({type:k})],F.prototype,"padding",null),r([h()],F.prototype,"viewpoint",null),F=ht=r([M("esri.views.2d.PaddedViewState")],F);const ft=F;let Mi=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=he(),this._schedulerHandle=it(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||le(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=e=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:s,graphicsView:a,labelManager:n,state:{id:o}}=this.view;s?.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),a!=null&&(a.lastUpdateId!==o&&(a.viewChange(),a.lastUpdateId=o),a.updateRequested&&a.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(e)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new ft,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=A(()=>t.stationary,e=>{this.stationary=e,this.requestFrame()}),this._frameTaskHandle=gt(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();const e=this.view.state,s=t.lastUpdateId;s!=null&&(this.stationary||t.moving)||(t.moving=!0),s!==e.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=e.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews?.forEach(this._updateLayerView,this)}};function Ti(i,t){const{spatialReference:e}=t,s=[t.x,t.y];let a,n,o,c;const l=[0,0],p=Si(i);for(let u=0;u<p.length;u++){const v=p[u];for(let w=0;w<v.length-1;w++){ce(l,s,v,w);const g=pe(s,l);(a==null||g<a)&&(a=g,n=[...l],o=u,c=w)}}if(a==null||!n||o==null||c==null)throw new S("nearest-coordinate:failed","Failed to find the nearest coordinate");const[d,m]=n;return{coordinate:new y({x:d,y:m,spatialReference:e}),distance:a}}function Si(i){switch(i.type){case"extent":return[[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]];case"polygon":return i.rings;case"polyline":return i.paths}}var lt;let O=lt=class extends vt($){constructor(i){super(i),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Zt(this.geometry,this.spatialReference)}catch(i){return z.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:i}),null}return this.geometry}constrain(i,t){if(this.normalizedGeometry==null)return i;const e=i.targetGeometry;if(this.normalizedGeometry.type==="extent"?Ft(this.normalizedGeometry,e):Nt(this.normalizedGeometry,e))return i;const{coordinate:s}=Ti(this.normalizedGeometry,e);return s&&(i.targetGeometry=s),i}clone(){return new lt({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};r([h({constructOnly:!0})],O.prototype,"geometry",void 0),r([h({readOnly:!0})],O.prototype,"normalizedGeometry",null),r([h({constructOnly:!0})],O.prototype,"spatialReference",void 0),O=lt=r([M("esri.views.2d.constraints.GeometryConstraint")],O);var ct;let E=ct=class extends vt($){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(i,t){return this.enabled&&t&&(this.rotationEnabled||(i.rotation=t.rotation)),i}clone(){return new ct({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};r([h()],E.prototype,"enabled",void 0),r([h()],E.prototype,"rotationEnabled",void 0),E=ct=r([M("esri.views.2d.constraints.RotationConstraint")],E);const qt=E;var pt;let x=pt=class extends vt($){constructor(i){super(i),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let i,{lods:t,minScale:e,maxScale:s,minZoom:a,maxZoom:n}=this,o=-1,c=-1,l=!1,p=!1;if(e!==0&&s!==0&&e<s&&([e,s]=[s,e]),!t?.length)return this._set("effectiveMinScale",e),void this._set("effectiveMaxScale",s);t=t.map(d=>d.clone()),t.sort((d,m)=>m.scale-d.scale),t.forEach((d,m)=>d.level=m);for(const d of t)!l&&e>0&&e>=d.scale&&(o=d.level,l=!0),!p&&s>0&&s>=d.scale&&(c=i?i.level:-1,p=!0),i=d;a===-1&&(a=e===0?0:o),n===-1&&(n=s===0?t.length-1:c),a=Math.max(a,0),a=Math.min(a,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),a>n&&([a,n]=[n,a]),e=t[a].scale,s=t[n].scale,t.splice(0,a),t.splice(n-a+1),t.forEach((d,m)=>{this._lodByScale[d.scale]=d,this._scales[m]=d.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",a),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",e),this._set("effectiveMaxScale",s)}constrain(i,t){if(t&&i.scale===t.scale)return i;const e=this.effectiveMinScale,s=this.effectiveMaxScale,a=i.targetGeometry,n=t&&t.targetGeometry,o=s!==0&&i.scale<s,c=e!==0&&i.scale>e;if(o||c){const l=c?e:s;if(t&&n){const p=(l-t.scale)/(i.scale-t.scale);a.x=n.x+(a.x-n.x)*p,a.y=n.y+(a.y-n.y)*p}i.scale=l}return this.snapToZoom&&this.effectiveLODs&&(i.scale=this._getClosestScale(i.scale)),i}fit(i){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(i,null);const t=this.scaleToZoom(i.scale),e=Math.abs(t-Math.floor(t));return i.scale=this.zoomToScale(e>.99?Math.round(t):Math.floor(t)),i}zoomToScale(i){if(!this.effectiveLODs)return 0;i-=this.effectiveMinZoom,i=Math.max(0,i);const t=this._scales;if(i<=0)return t[0];if(i>=t.length)return t[t.length-1];const e=Math.floor(i),s=Math.ceil(i);return t[e]+(i-e)*(t[s]-t[e])}scaleToZoom(i){if(!this.effectiveLODs)return-1;const t=this._scales;let e,s;if(i>=t[0])return this.effectiveMinZoom;if(i<=t[t.length-1])return this.effectiveMaxZoom;for(let a=0;a<t.length-1;a++){if(e=t[a],s=t[a+1],s===i)return a+this.effectiveMinZoom+1;if(e>i&&s<i)return a+this.effectiveMinZoom+1-(i-s)/(e-s)}return-1}snapToClosestScale(i){if(!this.effectiveLODs)return i;const t=this.scaleToZoom(i);return this.zoomToScale(Math.round(t))}snapToNextScale(i,t=.5){if(!this.effectiveLODs)return i*t;const e=Math.round(this.scaleToZoom(i));return this.zoomToScale(e+1)}snapToPreviousScale(i,t=2){if(!this.effectiveLODs)return i*t;const e=Math.round(this.scaleToZoom(i));return this.zoomToScale(e-1)}clone(){return new pt({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(i){return this._lodByScale[i]||(i=this._scales.reduce((t,e)=>Math.abs(e-i)<=Math.abs(t-i)?e:t,this._scales[0])),this._lodByScale[i].scale}};r([h({readOnly:!0})],x.prototype,"effectiveLODs",void 0),r([h({readOnly:!0})],x.prototype,"effectiveMinZoom",void 0),r([h({readOnly:!0})],x.prototype,"effectiveMaxZoom",void 0),r([h({readOnly:!0})],x.prototype,"effectiveMinScale",void 0),r([h({readOnly:!0})],x.prototype,"effectiveMaxScale",void 0),r([h()],x.prototype,"lods",void 0),r([h()],x.prototype,"minZoom",void 0),r([h()],x.prototype,"maxZoom",void 0),r([h()],x.prototype,"minScale",void 0),r([h()],x.prototype,"maxScale",void 0),r([h()],x.prototype,"snapToZoom",void 0),x=pt=r([M("esri.views.2d.constraints.ZoomConstraint")],x);const Wt=x,$i={base:null,key:"type",typeMap:{extent:ut,polygon:de}};let f=class extends ${constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Gt}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const t=this._get("_geometry");return t&&this.geometry===t.geometry&&this.view?.constraintsInfo.spatialReference===t.spatialReference?t:new O({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new qt({rotationEnabled:this.rotationEnabled})}get _zoom(){const t=this._get("_zoom"),e=this.lods||this.view?.constraintsInfo.lods,s=this.minZoom,a=this.maxZoom,n=this.minScale,o=this.maxScale,c=this.snapToZoom;return t&&t.lods===e&&t.minZoom===s&&t.maxZoom===a&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===c?t:new Wt({lods:e,minZoom:s,maxZoom:a,minScale:n,maxScale:o,snapToZoom:c})}canZoomInTo(t){const e=this.effectiveMaxScale;return e===0||t>=e}canZoomOutTo(t){const e=this.effectiveMinScale;return e===0||t<=e}constrain(t,e){return this._zoom.constrain(t,e),this._rotation.constrain(t,e),this._geometry.constrain(t,e),this.customConstraints.forEach(s=>s.constrain(t,e)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(e=>e.applyPanConstraint?.(t)),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};r([h({readOnly:!0})],f.prototype,"effectiveLODs",null),r([h({readOnly:!0})],f.prototype,"effectiveMinScale",null),r([h({readOnly:!0})],f.prototype,"effectiveMaxScale",null),r([h({readOnly:!0})],f.prototype,"effectiveMinZoom",null),r([h({readOnly:!0})],f.prototype,"effectiveMaxZoom",null),r([h({types:$i,value:null})],f.prototype,"geometry",null),r([h({type:[ue]})],f.prototype,"lods",void 0),r([h()],f.prototype,"minScale",void 0),r([h()],f.prototype,"maxScale",void 0),r([h()],f.prototype,"minZoom",void 0),r([h()],f.prototype,"maxZoom",void 0),r([h()],f.prototype,"rotationEnabled",void 0),r([h()],f.prototype,"snapToZoom",void 0),r([h({type:Gt})],f.prototype,"customConstraints",void 0),r([h()],f.prototype,"view",void 0),r([h({readOnly:!0})],f.prototype,"version",null),r([h({type:O,readOnly:!0})],f.prototype,"_geometry",null),r([h({type:qt})],f.prototype,"_rotation",null),r([h({readOnly:!0,type:Wt})],f.prototype,"_zoom",null),f=r([M("esri.views.2d.MapViewConstraints")],f);const Dt=f;let _=class extends ${constructor(i){super(i),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([A(()=>this.constraints?.version,t=>{this.constraints&&t&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},mt)])}get center(){if(!this.ready)return this._get("center");const{center:i,spatialReference:t}=this.state.paddedViewState;return this.state.commitProperty("id"),new y({x:i[0],y:i[1],spatialReference:t})}set center(i){if(i==null)return;if(!this.ready)return void this._set("center",i);let t;try{t=this._project(i,this.state.spatialReference)}catch(s){return void z.getLogger(this).error(new S("mapview:invalid-center","could not project the value in the view's spatial reference",{input:i,error:s}))}const e=this.viewpoint;zt(e,e,t),this.viewpoint=e}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(i){if(i==null)return;if(!i.width||!i.height)return void z.getLogger(this).error(new S("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",i),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let t;try{t=this._project(i,this.state.spatialReference)}catch(s){return void z.getLogger(this).error(new S("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const e=this.viewpoint;ni(e,e,t,this.state.size,{constraints:this.constraints}),this.viewpoint=e}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(i){this.ready?(this.state.padding=i,this._set("padding",this.state.padding)):this._set("padding",i)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(i){if(isNaN(i))return;if(!this.ready)return void this._set("rotation",i);const t=this.viewpoint;oi(t,t,i),this.viewpoint=t}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(i){if(!i||isNaN(i))return;if(!this.ready){this._set("scale",i),this._set("zoom",void 0);const e=this._get("extent");return void(e&&(this._set("extent",void 0),this._set("center",e.center)))}const t=this.viewpoint;kt(t,t,i),this.viewpoint=t}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(i){if(i==null)return;if(!this.ready)return this._set("viewpoint",i),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let t,e;try{t=this._project(i,this.state.spatialReference),!i.scale||isNaN(i.scale)?e=new S("mapview:invalid-viewpoint",`invalid scale value of ${i.scale}`):i.targetGeometry==null&&(e=new S("mapview:invalid-viewpoint","geometry not defined"))}catch(a){e=new S("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:a})}if(e)return void z.getLogger(this).error(e);this._scaleBeforeChangingSpatialReference=null;const s=new P({targetGeometry:new y,scale:0,rotation:0});D(s,t),this.constraints?.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(i){if(!(i>=0))return;if(!this.ready){this._set("zoom",i),this._set("scale",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const t=this.constraints?.zoomToScale(i)??0;if(!t)return void this._set("zoom",-1);const e=this.viewpoint;kt(e,e,t),this.viewpoint=e,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(i){if(!i[0]&&!i[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:t,constraints:e}=this,s=this._get("center"),a=this._get("extent"),n=this._get("scale"),o=this._get("rotation"),c=this._get("viewpoint"),l=this._get("zoom"),p=l!=null&&e!=null&&e.zoomToScale(l)||void 0;let d,m,u;const v=c?.rotation,w=c?.targetGeometry;w?.type==="extent"?d=w:w?.type==="point"&&(m=w,u=c?.scale);const g=a??d;return{center:s??m??g?.center,rotation:o??v,scale:(n??p??u??(g&&ri(g,[i[0]-t.left-t.right,i[1]-t.top-t.bottom])))||void 0}}startup(i,t,e,s){const a=i.targetGeometry;try{this._project(i,e)}catch(n){z.getLogger(this).warn(new yt("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:a.toJSON(),spatialReference:e,error:n})),i.targetGeometry=s||new y({x:0,y:0,spatialReference:e})}this.constraints?.fit(i),this._set("state",new ft({padding:this.padding,size:t,viewpoint:i})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[i,t],spatialReference:e,rotation:s,scale:a}=this.state.paddedViewState,n=new y({x:i,y:t,spatialReference:e});this._set("viewpoint",null),this._set("extent",null),this._set("center",n),this._set("zoom",-1),this._set("rotation",s),this._set("scale",a),this._set("state",null)}changeSpatialReference(i){const t=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=t.scale;else{const c=t.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=c}const e=t.clone(),[s,a]=t.center;let n=null;try{n=this._project(new y({x:s,y:a,spatialReference:t.spatialReference}),i)}catch(c){me()||z.getLogger(this).warn(new yt("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:n?.toJSON(),spatialReference:i,error:c}))}n||(n=new y({x:0,y:0,spatialReference:i}));const o=zt(new P({targetGeometry:new y,scale:0,rotation:0}),t.viewpoint,n);e.viewpoint=o;try{const l=[t.size[0]/2,t.size[1]/2],p=[l[0]+20,l[1]],d=t.toMap([0,0],p),{x:m,y:u}=this._project(new y({x:d[0],y:d[1],spatialReference:t.spatialReference}),i);d[0]=m,d[1]=u,e.toScreen(d,d);const v=hi(l,d,p),w=Math.hypot(d[0]-l[0],d[1]-l[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(o.rotation=0,o.targetGeometry=new y({x:0,y:0,spatialReference:i})):(o.scale*=w,o.scale>st("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(v)?v:0)}catch{}this._get("constraints")?.constrain(o,void 0),this._get("state").viewpoint=o}resize(i,t){if(!this.ready)return;const e=this.state;let s=this.state.paddedViewState.viewpoint;const a=this.state.paddedViewState.size.slice();e.size=[i,t],li(s,s,a,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints?.constrain(s,void 0)??s,this.state.viewpoint=s}toMap(i){if(!this.ready)return null;const t=[0,0],[e,s]=this.state.toMap(t,[i.x,i.y]),a=this.state.spatialReference;return new y({x:e,y:s,spatialReference:a})}toScreen(i,t){if(!this.ready)return null;const e=this._project(i,this.state.spatialReference),s=[e.x,e.y];return t?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),V(s[0],s[1])}_project(i,t){const e=i?.targetGeometry||i;if(!t)return i;if(!e)return null;if(t.imageCoordinateSystem||e.spatialReference?.imageCoordinateSystem||ge(t,e.spatialReference))return i;const s=Zt(e,t);if(!s)throw new S("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:e,spatialReference:t});return bi(i)?(i.targetGeometry=s,i):s}};function bi(i){return i?.declaredClass==="esri.Viewpoint"}r([h({type:y})],_.prototype,"center",null),r([h()],_.prototype,"constraints",void 0),r([h({type:ut})],_.prototype,"extent",null),r([h({value:{top:0,right:0,bottom:0,left:0},cast:i=>({top:0,right:0,bottom:0,left:0,...i})})],_.prototype,"padding",null),r([h()],_.prototype,"ready",void 0),r([h()],_.prototype,"resizeAlign",void 0),r([h({readOnly:!0})],_.prototype,"resolution",null),r([h({type:Number})],_.prototype,"rotation",null),r([h({type:Number})],_.prototype,"scale",null),r([h({readOnly:!0})],_.prototype,"state",void 0),r([h({type:P})],_.prototype,"viewpoint",null),r([h({readOnly:!0})],_.prototype,"visibleArea",null),r([h()],_.prototype,"zoom",null),_=r([M("esri.views.2d.ViewStateManager")],_);const Pt=160;let H=class extends ${constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Pt&&this.clear()},Pt))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};r([h()],H.prototype,"_timer",void 0),r([h()],H.prototype,"stationary",null),H=r([M("esri.views.2d.support.StationaryManager")],H);const us=i=>{const t=i;let e=class extends t{constructor(...s){super(...s),this.fullOpacity=1,this.stateManager=new _({constraints:new Dt({view:this})}),this.stationaryManager=new H,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new Mi(this),this.viewEvents=new ve(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([A(()=>this.viewpoint,()=>this.stationaryManager.flip(),mt)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(s){this.stateManager.extent=s}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(s){const a=this._get("animation");if(s===a)return;if(a&&a.stop(),s!==this.animationManager.animation&&this.animationManager.stop(),!s||s.isFulfilled())return void this._set("animation",null);this._set("animation",s);const n=()=>{this.destroyed||s===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};s.when(n,n)}get constraints(){return this.stateManager?.constraints}set constraints(s){s.view=this;const a=this.stateManager.constraints;this.stateManager.constraints=s,a?.destroy()}get padding(){return this.stateManager?.padding}set padding(s){this.stateManager&&(this.stateManager.padding=s)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(s){this.stateManager.resizeAlign=s}get rotation(){return this.stateManager.rotation??0}set rotation(s){const{rotationEnabled:a}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=s,this.constraints.rotationEnabled=a}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(s){this.stateManager.viewpoint=s,this.frameTask.requestFrame()}};return r([h({readOnly:!0})],e.prototype,"animationManager",void 0),r([h({readOnly:!0})],e.prototype,"fullOpacity",void 0),r([h()],e.prototype,"stateManager",void 0),r([h()],e.prototype,"constraintsInfo",null),r([h()],e.prototype,"extent",null),r([h({readOnly:!0})],e.prototype,"state",null),r([h({readOnly:!0})],e.prototype,"mapViewNavigation",void 0),r([h()],e.prototype,"renderingOptions",void 0),r([h({readOnly:!0})],e.prototype,"interacting",null),r([h()],e.prototype,"stationary",null),r([h()],e.prototype,"animation",null),r([h({type:Dt})],e.prototype,"constraints",null),r([h()],e.prototype,"padding",null),r([h()],e.prototype,"resizeAlign",null),r([h()],e.prototype,"rotation",null),r([h({readOnly:!0})],e.prototype,"viewEvents",void 0),r([h({type:P})],e.prototype,"viewpoint",null),e=r([M("esri.views.Viewport2DBaseMixin")],e),e};let J=class extends ${constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,e){if(!t)return void z.getLogger(this).error("#goTo()","target cannot be null or undefined");const s=new at;this.view.animation=s,await fe(()=>this.view.ready,e);const a={...e,animate:e?.animate??(!mi()&&this.view.animationsEnabled),animationMode:e?.animationMode??"auto"},{extent:n,spatialReference:o,size:c,viewpoint:l,constraints:p,padding:d,allLayerViews:m}=this.view,u=ci(t,{extent:n,spatialReference:o,size:c,viewpoint:l,constraints:p,padding:d,allLayerViews:m,pickClosestTarget:e?.pickClosestTarget??!0});return s?.update(u),this._gotoTask={},a.animate?this._gotoAnimated(u,a):this._gotoImmediate(u,a)}_gotoImmediate(t,e){const s=this._gotoTask,a=this.view.animation,n=t.then(o=>{if(xt(e),s!==this._gotoTask)throw new S("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=a.target=o,a.finish()});return this._cancellableGoTo(s,a,n,e)}_gotoAnimated(t,e){const s=this._gotoTask,a=this.view.animation;if(!a)return Promise.resolve();const n=t.then(o=>{if(xt(e),s!==this._gotoTask)throw new S("view:goto-interrupted","Goto was interrupted");return a.update(o),this.view.animationManager.animate(a,this.view.viewpoint,e),a.when().then(()=>{},()=>{})});return this._cancellableGoTo(s,a,n,e)}_cancellableGoTo(t,e,s,a){const n=()=>t===this._gotoTask;return we(s,a).finally(()=>{n()&&(e.done||e.stop())})}};r([h({constructOnly:!0})],J.prototype,"view",void 0),J=r([M("esri.views.2d.GoToManager")],J);let Ot=class extends T{constructor(t,e){super(!0),this._view=t,this.registerIncoming("double-click",e,s=>this._handleDoubleClick(s,e))}_handleDoubleClick(t,e){_e(t.data,"primary")&&(t.stopPropagation(),e?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},Ri=class extends T{constructor(t,e,s){super(!0),this.view=t,this.pointerType=e,this.registerIncoming("double-tap-drag",s,a=>this._handleDoubleTapDrag(a))}_handleDoubleTapDrag(t){const{data:e}=t,{pointerType:s}=e;if(s!==this.pointerType)return;t.stopPropagation();const{action:a,delta:n}=e,{view:o}=this,{mapViewNavigation:c}=o;switch(a){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,c.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,p=this._startScale*l,d=p/this._currentScale;c.setViewpointImmediate(d),this._currentScale=p;break}case"end":{const{constraints:l}=o,{effectiveLODs:p,snapToZoom:d}=l;if(!d||!p)return void c.end();const m=l.snapScale(this._currentScale),u=(n.y>0?Math.max(m,l.snapToPreviousScale(this._startScale)):Math.min(m,l.snapToNextScale(this._startScale)))/this._currentScale;c.zoom(u).then(()=>{c.end()});break}}}},zi=class extends T{constructor(t,e,s){super(!0),this.view=t,this.pointerActions=e,this.registerIncoming("drag",s,a=>this._handleDrag(a)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new Y({start:(e,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(e,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(e,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(e,s)=>e===1&&It(s.data,this.pointerActions)})}_handleDrag(t){const e=this.view.mapViewNavigation;e.pinch.zoomMomentum||e.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},ki=class extends T{constructor(t,e,s){super(!0),this._view=t,this.pointerActions=e;const a=this._view.mapViewNavigation;this._dragEventSeparator=new Y({start:(n,o)=>{a.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{a.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{a.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&It(o.data,this.pointerActions)}),this.registerIncoming("drag",s,n=>this._dragEventSeparator.handle(n))}},Ci=class extends T{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new ye,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",e=>this._handleGamePadEvent(e)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([A(()=>this._view.navigation.gamepad?.enabled,e=>{e?(this._handle.resume(),this._frameTask||(this._frameTask=gt({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Et)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const e=this._view.navigation.gamepad.device;e&&t.data.device!==e||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,xe(this._transformation)):(this._currentDevice=t.data.device,Me(t.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(t){const e=this._transformation;if(Te(e))return void this._frameTask?.pause();const s=this._view.viewpoint.clone(),a=this._view.navigation.gamepad.velocityFactor,n=Pi*a*t;pi(s,s,[e.translation[0]*n,-e.translation[1]*n]);const o=1+e.translation[2]*Oi*t,c=this._view.constraints.rotationEnabled?-e.heading*Di*t:0,l=this._view.size,p=[l[0]/2,l[1]];di(s,s,o,c,p,l);const d=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=d}};const Di=.06,Pi=.7,Oi=6e-4;let Vi=class extends T{constructor(t,e,s){super(!0),this.view=t,this.keys=e,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=a=>{const n=this._keyMap[a.data.key];if(a.modifiers.has("Meta")||a.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;a.stopPropagation(),a.preventDefault();const o=a.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const c=this._timeout===void 0,l=this._pressedKeys.size>0;c||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[e.left]:"left",[e.right]:"right",[e.up]:"up",[e.down]:"down"},this.registerIncoming("key-down",s,this._handleKey),this.registerIncoming("key-up",s,this._handleKey),this.registerIncoming("blur",s,this._stopMovement),this._visibilityHandle=Ht(a=>a?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(t){const e=this._currentDirection!=null;if(t!=null){if(e||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else e&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},Ai=class extends T{constructor(t,e,s){super(!0),this.view=t,this.keys=e,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(e),this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",s,a=>this._handleKeyUp(a)),this.registerIncoming("blur",s,()=>this._handleStop()),this._visibilityHandle=Ht(a=>a?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,e){for(const s of t)this._keyToDirection.set(s,e)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,e){const s=t.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const a=this._keyToDirection.get(t.data.key);if(this._pressed=a!=null,this._pressed){if(t.preventDefault(),e)switch(this.view.mapViewNavigation.begin(),a){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}},Zi=class extends T{constructor(t,e,s){super(!0),this.view=t,this.keys=e,this._keysToZoomAction={},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),e.zoomIn.forEach(a=>this._keysToZoomAction[a]=0),e.zoomOut.forEach(a=>this._keysToZoomAction[a]=1)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const e=t.modifiers;if(e.size>0&&!e.has("Shift"))return;const{key:s}=t.data;if(!(s in this._keysToZoomAction))return;const a=this._keysToZoomAction[s],{mapViewNavigation:n}=this.view;let o=null;switch(a){case 0:o=n.zoomIn();break;case 1:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}};const Fi=.6;let Ni=class extends T{constructor(t,e){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",e,s=>this._handleMouseWheel(s))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const e=this._view.mapViewNavigation,{x:s,y:a,deltaY:n}=t.data,o=1/Fi**(1/60*n),c=e.zoom(o,[s,a]);this._canZoom=!1,c.catch(()=>{}).then(()=>{this._canZoom=!0,e.end()})}},Gi=class extends T{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const e=this.view.mapViewNavigation;this._dragEventSeparator=new Y({start:(s,a)=>{e.pinch.begin(this.view,a.data),a.stopPropagation()},update:(s,a)=>{e.pinch.update(this.view,a.data),a.stopPropagation()},end:(s,a)=>{e.pinch.end(this.view),a.stopPropagation()},condition:s=>s>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}},Ii=class extends T{constructor(t={},e=Se){super(!1),this._clock=e,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=V(0,0),this._pointerState=new Map,this._parameters=$e(t),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Y({start:(s,a)=>this._dragStart(s,a),update:(s,a)=>this._dragUpdate(a),end:(s,a)=>this._dragEnd(a)}),this.registerIncoming("drag",s=>this._dragEventSeparator.handle(s)),this.registerIncoming("pointer-down",s=>this._handlePointerDown(s)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=nt(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const e=this._pointerState.get(t);e&&(e.doubleTapTimeout=nt(e.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,e){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:a}=e,{center:n}=s;this._dragStartCenter=n;const o=tt("begin",V(0,0),s);this._doubleTapDrag.emit(o,void 0,a),e.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:s}=t,{center:a}=e,n=tt("update",V(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),e);this._doubleTapDrag.emit(n,void 0,s),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:s}=t,{center:a}=e,n=tt("end",V(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),e);this._doubleTapDrag.emit(n,void 0,s),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:e}=t,s=Mt(e),a=this._pointerState.get(s),{pointerType:n}=e.native;if(a){const o=n==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(s),be(a.event.data,e)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:e}=t,{pointerType:s}=e.native,a=Mt(e),n=s==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(a),n);this._pointerState.set(a,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function tt(i,t,e){const{button:s,buttons:a,pointer:n,pointers:o,pointerType:c,timestamp:l}=e;return{action:i,delta:t,button:s,buttons:a,pointer:n,pointers:o,pointerType:c,timestamp:l}}const U={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},Vt=Symbol("handles");let N=class extends ${initialize(){const i=()=>this.view?.ready;this.addHandles([it(()=>!i(),()=>this._disconnect()),it(i,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(i){return this._inputManager?.isModifierKeyDown(i)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(Vt),this._inputManager=Re(this._inputManager)}_connect(){const i=this.view.surface,t=new ze(i,this.view.input),e=[new ke,new Ce,new De,new Pe(this.view.navigation),new Ii],s=new Oe({eventSource:t,recognizers:e}),a=new zi(this.view,["primary"]),n=new ki(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new Ve],Tt.INTERNAL),s.installHandlers("navigation",[new Gi(this.view),new Ci(this.view),new Ni(this.view),new Ot(this.view),new Ot(this.view,[U.counter]),a,new Vi(this.view,U.pan),new Zi(this.view,U.zoom),new Ai(this.view,U.rotate),n,new Ri(this.view,"touch")],Tt.INTERNAL),this.view.viewEvents.connect(s),this._source=t,this._inputManager=s,this.addHandles([A(()=>this.view?.navigation?.browserTouchPanEnabled,o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},Et),A(()=>{const{actionMap:o}=this.view.navigation;return{panActions:St("pan",o),rotateActions:St("rotate",o)}},({panActions:o,rotateActions:c})=>{a.pointerActions=o,n.pointerActions=c},Ae)],Vt)}get test(){}};r([h()],N.prototype,"view",void 0),r([h()],N.prototype,"latestPointerInfo",null),r([h()],N.prototype,"multiTouchActive",null),N=r([M("esri.views.2d.input.MapViewInputManager")],N);const Ei=N,bs=i=>{const t=i;let e=class extends t{constructor(...s){super(...s),this.goToManager=new J({view:this}),this.animationsEnabled=!0,this.inputManager=new Ei({view:this}),this.addHandles([this.on("resize",a=>this.stateManager.resize(a.width,a.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(s,a,n,o){return this.viewEvents.on(s,a,n,o)||super.on(s,a)}hasEventListener(s){return super.hasEventListener(s)||this.viewEvents.hasHandler(s)}goTo(s,a){return this.goToManager.goTo(s,a)}toMap(s){if(!this.ready)return null;const a=Ze(s)?Fe(this,s):s;return this.stateManager.toMap(a)}};return r([h()],e.prototype,"goToManager",void 0),r([h({readOnly:!0})],e.prototype,"interacting",null),r([h()],e.prototype,"stationary",null),r([h()],e.prototype,"animationsEnabled",void 0),r([h({readOnly:!0})],e.prototype,"inputManager",void 0),e=r([M("esri.views.Viewport2DMixin")],e),e};let At=class{constructor(t){this._view=t,this.viewpoint=new P({targetGeometry:new y,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,e]=this._view.size;return Math.sqrt(t*t+e*e)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return ui(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,e){e.pan=Ne(this.center,t.center);let s=Math.abs(t.rotation-this.rotation);s=s>=180?360-s:s,e.rotate=Lt(s),e.sourceZoom=this.scale,e.targetZoom=t.scale}interpolate(t,e,s){const{pan:a,rotate:n,zoom:o,zoomOffset:c}=s,{center:l}=this;l.spatialReference=t.center.spatialReference,l.x=j(t.center.x,e.center.x,a),l.y=j(t.center.y,e.center.y,a),this.viewpoint.scale=j(t.scale,e.scale+c,o);let p=t.rotation;const d=e.rotation;Math.abs(d-p)>=180&&(p+=360*(p<d?1:-1)),this.viewpoint.rotation=j(p,d,n)}copyFrom(t){D(this.viewpoint,t.viewpoint),this._view=t.view}};const Hi=2e3,Li=64;class ji{constructor(t){this._view=t,this._animation=new Ge(()=>new At(this._view)),this._current=new At(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,e,s={}){D(this._current.viewpoint,t),D(this._source.viewpoint,t),D(this._target.viewpoint,e),this._animation.update(this._source,this._target,s)}applyRatio(t,e){this._animation.cameraAt(e,this._current),D(t,this._current.viewpoint)}}let G=class extends ${constructor(i){super(i),this._animation=null,this._destinationViewState=new ft,this.updateFunction=null,this.easing=$t.ease,this.viewpoint=new P({targetGeometry:new y,scale:0,rotation:0}),this._updateTask=gt({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new ji(i.view)}destroy(){this._updateTask=nt(this._updateTask)}get animation(){return this._animation}set animation(i){this._animation=i,this.view.animation=i}animate(i,t,e){this.stop();const s=this.viewpoint;D(s,t);const a=i.target;this._transition.update(this.viewpoint,a,{apex:{maximumDistance:Math.min(Math.min(t.scale,a.scale)*Li,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:e?.duration,maxDuration:e?.animationMode==="auto"?bt(1/0):e?.maxDuration??jt.maxDuration,speedFactor:e?.speedFactor,easing:(typeof e?.easing=="string"?$t[e.easing]:e?.easing)||this.easing}),e?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=a,Ki(this._transition.animation,e,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,a,{duration:bt(0)}));const n=()=>{this.animation===i&&this._updateTask&&(i.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return i.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}animateContinuous(i,t){this.stop(),this.updateFunction=t,this.viewpoint=i;const e=new at({target:i.clone()}),s=()=>{this.animation===e&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(i){const t=this.animation;if(t&&t.state!==at.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,i.deltaTime),this.animation?.update(this.viewpoint);else{const e=performance.now()-this._startTime,s=this._transition.duration,a=s>0?e/s:1,n=a>=1;this._transition.applyRatio(this.viewpoint,a),n&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function Ki(i,t,e,s){if(t?.duration!=null)return!0;const{time:a,isLinear:n}=i,o=t?.speedFactor||1;if(a>(t?.maxDuration??jt.maxDuration/o))return!1;if(n){const l=dt(),p=V(...s.toScreen(l,...e.center)),d=V(...e.toScreen(l,...s.center)),m=d!=null&&d.x>-1*e.size[0]&&d.x<(1.5+.5)*e.size[0]&&d.y>-1*e.size[1]&&d.y<(1.5+.5)*e.size[1],u=p!=null&&p.x>-1*s.size[0]&&p.x<(1.5+.5)*s.size[0]&&p.y>-1*s.size[1]&&p.y<(1.5+.5)*s.size[1];if(a>Hi/o&&!m&&!u)return!1}return!0}r([h()],G.prototype,"easing",void 0),r([h()],G.prototype,"view",void 0),r([h()],G.prototype,"viewpoint",void 0),G=r([M("esri.views.2d.AnimationManager")],G);const zs=G;let ks=class{constructor(t,e={}){this.events=new Ie,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,t!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),t.contains(this._canvas)||t.appendChild(this._canvas)):e.canvas!=null&&(this._canvas=e.canvas);const s={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let a=this._canvas.getContext("webgl2",s);a||(a=this._canvas.getContext("webgl2",{...s,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=a,this._handles=Ee([He(this._canvas,"webglcontextlost",n=>this.events.emit("webgl-context-lost",n))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(t,e){if(this._hasMajorPerformanceCaveat||st("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=st("esri-performance-mode-frames-between-render")&&(e(),this._lastRenderViewState=t.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[s,a,n,o,c,l]=this._computeViewTransform(this._lastRenderViewState,t.state);this._canvas.style.transform=`matrix(${s}, ${a}, ${n}, ${o}, ${c}, ${l})`}}else e()}resize(t){const e=this._canvas,s=e.style,{state:{size:a},pixelRatio:n}=t,o=a[0],c=a[1],l=Math.round(o*n),p=Math.round(c*n);e.width===l&&e.height===p||(e.width=l,e.height=p),s.width=o+"px",s.height=c+"px"}_computeViewTransform(t,e){const[s,a]=t.center,[n,o]=e.center,[c,l]=t.toScreen([0,0],n,o),[p,d]=t.toScreen([0,0],s,a),m=p-c,u=d-l,v=t.scale/e.scale,w=e.rotation-t.rotation,g=B();return fi(g),wi(g,g,[v,v]),Kt(g,g,Lt(w)),Ut(g,g,[m,u]),g}};const Ui=1,Ds=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],Ps=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=256,et=()=>z.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function qi(i,t){t.fillColor[0]=i.color.r/255,t.fillColor[1]=i.color.g/255,t.fillColor[2]=i.color.b/255,t.fillColor[3]=i.color.a,i.haloColor?(t.outlineColor[0]=i.haloColor.r/255,t.outlineColor[1]=i.haloColor.g/255,t.outlineColor[2]=i.haloColor.b/255,t.outlineColor[3]=i.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=i.fillOpacity,t.outlineColor[3]*=i.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-i.haloBlur)*i.haloWidth,t.outerHaloWidth=i.haloBlur*i.haloWidth/2,t.innerHaloWidth=i.haloBlur*i.haloWidth/2,t.outlinePosition=0}const Wi=[0,0,0,0];let Bt=class{constructor(){this.type="single",this._highlightOptions=new Le,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*I),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,e){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,je),e.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<Ke)-1,activeGradient:this}]}_updateGradientTexture(t){const e=Bi(this._highlightOptions);if(e===this._optionsShadeTexKey)return;this._optionsShadeTexKey=e,qi(this._highlightOptions,this._convertedHighlightOptions);const s=this._convertedHighlightOptions,a=s.outlinePosition-s.outlineWidth/2-s.outerHaloWidth,n=s.outlinePosition-s.outlineWidth/2,o=s.outlinePosition+s.outlineWidth/2,c=s.outlinePosition+s.outlineWidth/2+s.innerHaloWidth,l=Math.sqrt(Math.PI/2)*Ui,p=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0,d=Math.abs(c)>l?Math.round(10*(Math.abs(c)-l))/10:0;let m;p&&!d?et().error("The outer rim of the highlight is "+p+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!p&&d?et().error("The inner rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):p&&d&&et().error("The highlight is "+Math.max(p,d)+"px away from the edge of the feature; consider reducing some width values.");const u=[void 0,void 0,void 0,void 0];function v(g,L,C){u[0]=(1-C)*g[0]+C*L[0],u[1]=(1-C)*g[1]+C*L[1],u[2]=(1-C)*g[2]+C*L[2],u[3]=(1-C)*g[3]+C*L[3]}const{_texelData:w}=this;for(let g=0;g<I;++g)m=a+g/(I-1)*(c-a),m<a?(u[0]=0,u[1]=0,u[2]=0,u[3]=0):m<n?v(Wi,s.outlineColor,(m-a)/(n-a)):m<o?[u[0],u[1],u[2],u[3]]=s.outlineColor:m<c?v(s.outlineColor,s.fillColor,(m-o)/(c-o)):[u[0],u[1],u[2],u[3]]=s.fillColor,w[4*g]=255*u[0],w[4*g+1]=255*u[1],w[4*g+2]=255*u[2],w[4*g+3]=255*u[3];if(this._minMaxDistance[0]=a,this._minMaxDistance[1]=c,!this._shadeTex){const g=new Ue(I,1);g.wrapMode=33071,this._shadeTex=new qe(t,g)}this._shadeTex.updateData(0,0,0,I,1,this._texelData)}};function Bi(i){return`${i.color};${i.haloColor};${i.haloOpacity};${i.fillOpacity};${i.haloWidth};${i.haloBlur}`}let Ji=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let e=0;e<t.length;e++)this.gradients[e]||(this.gradients[e]=new Bt),this.gradients[e].setHighlightOptions(t[e]);for(let e=t.length+1;e<this.gradients.length;e++)this.gradients[e].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const e=[];for(let s=0;s<this.gradients.length;s++){const a=this.gradients[s];e.push({activeReasons:t,activeGradient:a}),t<<=1}return e}};const Jt={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},Yi={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},Qi={...Jt,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Xi({pixelRatio:i,state:t,displayLevel:e,requiredLevel:s},a){const n=1/2**(e-a.key.level),o=1/2**(s-a.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:a.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:a.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[a.x,a.y],currentScale:t.scale,currentZoom:e,metersPerSRUnit:We(t.spatialReference),rotation:t.rotation,pixelRatio:i}}function Yt(i){return i.passOptions?.type==="highlight"}function Qt(i){return i.passOptions?.type==="hittest"}function ts(i){if(!Qt(i))return null;const{position:t,distance:e,smallSymbolDistance:s,smallSymbolSizeThreshold:a}=i.passOptions;return{position:t,distance:e,smallSymbolDistance:s,smallSymbolSizeThreshold:a}}function es(i){if(!Yt(i))return null;const{activeReasons:t,highlightAll:e}=i.passOptions;return{activeReasons:t,highlightAll:e?1:0}}function As(i,t,e){const s={};for(const a in e)typeof e[a]!="function"?s[a]=e[a]:s[a]=e[a](i,t);return s}function Zs(i,t){const{attributeView:e,context:s}=i;return{storage:e.getUniforms(s),view:Xi(i,t),hittestRequest:ts(i),highlight:es(i)}}function Fs(i){return{inside:i.selection===2,outside:i.selection===3}}function is(i){return Qt(i)?Yi:Yt(i)&&i.passOptions.stepType==="clear"?Qi:Jt}function Ns(i){const{row:t,col:e}=i.key,s=e*Rt,a=t*Rt;return{tileOffsetFromLocalOrigin:[s%K,a%K],maxIntsToLocalOrigin:[Math.floor(s/K),Math.floor(a/K)]}}const ss=new Be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function Gs(i){return ss.toJSON(i)}function Is(i){const{bandCount:t,attributeTable:e,colormap:s,pixelType:a}=i.raster.rasterInfo;return t===1&&(e!=null||s!=null||a==="u8"||a==="s8")}function Es(i,t){return t==null?(i?.destroy(),null):(i?.type==="single"&&Array.isArray(t)&&(i.destroy(),i=null),i?.type!=="multi"||Array.isArray(t)||(i.destroy(),i=null),i||(i=Array.isArray(t)?new Ji:new Bt),Array.isArray(t)?i.type==="multi"&&i.setHighlightOptions(t):i.type==="single"&&i.setHighlightOptions(t),i)}function Hs(i,t,e,s){const{painter:a,highlightGradient:n}=i,{highlight:o}=a.effects;if(!n)return;const c=i.passOptions,l=n.getReasonsWithGradients();for(let p=0;p<l.length;p++){const d={...i,passOptions:{type:"highlight",activeGradient:l[p].activeGradient,activeReasons:l[p].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(d),e(d),p<l.length-1){let u=0;for(let v=p+1;v<l.length;v++)u|=l[v].activeReasons;e({...i,passOptions:{type:"highlight",activeGradient:l[p].activeGradient,activeReasons:u,stepType:"clear",highlightAll:t}})}const m={...i,passOptions:{type:"highlight",activeGradient:l[p].activeGradient,activeReasons:l[p].activeReasons,stepType:"draw",highlightAll:t}};a.setPipelineState(is(i)),a.updatePipelineState(i.context),o.draw(m),o.unbind()}i.passOptions=c}const q=i=>parseFloat(i)/100;function as(i,t,e){const s=typeof i.left=="string"?q(i.left)*t:i.left,a=typeof i.right=="string"?q(i.right)*t:i.right,n=typeof i.top=="string"?q(i.top)*e:i.top,o=typeof i.bottom=="string"?q(i.bottom)*e:i.bottom,c=n;return{xmin:s,xmax:Math.max(t-a,s),ymin:c,ymax:Math.max(e-o,n)}}function Ls(i,t,e,s){switch(t.type){case"rect":{const{width:a,height:n}=i,{xmin:o,xmax:c,ymin:l,ymax:p}=as(t,a,n),{x:d,y:m}=e;return d>o&&d<c&&m>l&&m<p}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||Je(t.path,[e.x,e.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?Nt(t.geometry,s):Ft(t.geometry,s))}}export{J as a,bs as b,ks as c,us as d,Es as e,Dt as f,Qt as g,Hs as h,Ps as i,Is as j,Fs as k,Ns as l,Ls as m,as as n,Ui as o,Zs as p,is as q,Gs as r,Yt as s,Ds as t,As as u,Xi as v,zs as x,_ as z};
