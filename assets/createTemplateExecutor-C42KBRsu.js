const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bufferLineToPolygon-BYbDXLXA.js","assets/builderUtils-CC4vqkGu.js","assets/index-BrQW8HOS.js","assets/index-lUE0m221.css","assets/FeatureTemplates-Y1q8_xKC.js","assets/FeatureService-DdnMPQJQ.js","assets/applyEditsUtils-Bdi3ieC8.js","assets/MeshTransform-wQhxY5y6.js","assets/editingSupport-5GkCZdaM.js","assets/utils-D5_eym7P.js","assets/Heading-Bx03M7LB.js","assets/symbolUtils-C3MaPSzp.js","assets/gfxUtils-DDSu4Luj.js","assets/cimSymbolUtils-CmFYUdpV.js","assets/svgUtils-BB2umWtg.js","assets/mat2df32-Dpt2CT5P.js","assets/mat2d-BbBq4Byx.js","assets/utils-6_NAbAK3.js","assets/vmEvent-CsrnYMSK.js","assets/substitute-D-eLZ17Q.js","assets/createPresetServiceEdit-CGW_N--V.js","assets/affineTransformOperator-BKNCSN4p.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/Point2D-DNXcsliy.js","assets/apiConverter---8F7iZ4.js","assets/Envelope2D-CUWyosZh.js","assets/ProjectionTransformation-BjD312Kq.js","assets/Transformation2D-BUBnKQZf.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/jsonConverter-BHYd2kGf.js","assets/Transformation-CXt5h21i.js","assets/networkFieldUtils-CaYZrGFV.js","assets/bufferOperator-BiJUv4mF.js","assets/operatorBuffer-CaIv_CSz.js","assets/Bufferer-Dw9Qi4T1-CvYDX-1r.js","assets/OperatorSimplifyOGC-DcNrF_Mf.js","assets/OperatorGeneralize-DppLq4y-.js","assets/bufferPointToPolygon-BYDMM5CT.js","assets/bufferPolygonToPolygon-TyD9lHKD.js","assets/equallySpaced-ex-zTr-N.js","assets/customElement-aPQS1Oaw.js","assets/SketchOptions-CHLlByzL.js","assets/SketchLabelOptions-BPF5xZLI.js","assets/Attachments-_aarC56Q.js","assets/AttachmentsViewModel-BorO2JWS.js","assets/AttachmentInfo-Be-qgHMP.js","assets/featureUtils-D2UmGJHI.js","assets/utils-BJ7fw6dI.js","assets/attachmentUtils-CREavg3W.js","assets/legacyIcon-BpbXCnGp.js","assets/featureFormUtils-NJdl1KAp.js","assets/dateUtils-DCwqoPkL.js","assets/arcade-BYoSEge4.js","assets/arcadeEnvironment-Dyzp2elj.js","assets/ImmutableArray-BPVd6ESQ.js","assets/FeatureForm-ek6TUJN1.js","assets/FieldInput-BRbP2Bp9.js","assets/FeatureRelationshipViewModel-BmyR0OK6.js","assets/Spinner-Csmzl8Du.js","assets/AnchorElementViewModel-Djy63Zpd.js","assets/GraphicsLayer-CtVknZ1a.js","assets/SnappingManager-BWOfKl0d.js","assets/euclideanLengthMeasurementUtils-B8AL_WaV.js","assets/utils-D_VO_1nP.js","assets/geodesicUtils-BJZXB7Hp.js","assets/geometry2dUtils-kADrF-iP.js","assets/geodeticLengthOperator-DifrZujk.js","assets/geodeticCurveType-CirnHLSB.js","assets/geodesicMeasurementUtils-CQw8IWGR.js","assets/helpMessageUtils-2XpUG8Xk.js","assets/HighlightHelper-RFagfZex.js","assets/layerUtils-CdCZXuDJ.js","assets/GraphicState-C2r3pgB3.js","assets/DrawingMode-Cvvf0VVz.js","assets/SketchViewModel-NRhuw9HA.js","assets/isSupportedObject-DknMXN_6.js","assets/automaticAreaMeasurementUtils-dI3X5owW.js","assets/geodesicAreaMeasurementUtils-CPlOyDe5.js","assets/earcut-D9gy186-.js","assets/automaticLengthMeasurementUtils-Cr-y0OEN.js","assets/utils-BvM7qP9G.js","assets/splitCurveAtPoint-DXLcvmHe.js","assets/coordinateHelper-DrvFu3jL.js","assets/SelectionToolbar-CmU2zF-u.js","assets/directionModeIcons-Br5woIHu.js","assets/layerListUtils-CrO8uhQ1.js","assets/LayerListViewModel-VEwfK75C.js","assets/utils-BQBvadb7.js","assets/ListItem-BTKwElC0.js","assets/widget-lSGAz9tN.js","assets/uploadAssetErrors-CCLQcdnt.js","assets/useWidget-CYtf2hFT.js","assets/useView-Cya0Zpns.js","assets/offsetUtils-z_PDokHm.js","assets/shapeUtils-DrlzOUXa.js","assets/operatorOffset-Dh_0wl36.js","assets/offsetLine-CW_6pPiV.js","assets/offsetPrimaryLine-CW_6pPiV.js","assets/pointAtAllVerticesOfLine-imeexWKr.js","assets/pointAtBeginningOfLine-2C_F5tBl.js","assets/pointAtBeginningOfRadial-cL4-o7e2.js","assets/pointAtEndOfLine-26FQm3AS.js","assets/pointAtInteriorVertices-CiNTecpF.js","assets/pointAtIntersectionVerticesOfLine-DHZ3LwZl.js","assets/intersectsOperator-CKuf4yKG.js","assets/OperatorIntersects-DfaHxqTc.js","assets/pointAtNotBeginningOfLine-CzndbkJh.js","assets/pointAtNotEndOfLine-JeL3Qlc4.js","assets/pointAtPolygonCentroid-DSFkNyK_.js","assets/pointAtPolygonNotStart-DKIr1sJs.js","assets/pointAtPolygonStart-7YzZb_FT.js","assets/pointIdentity-D96bzngl.js","assets/pointPrimaryIdentity-D96bzngl.js","assets/polygonBoundary-DIXODLp7.js","assets/polygonBoundaryTwoPoint-DsPQy0NJ.js","assets/polygonIdentity-Bw6dpwVw.js","assets/polygonPrimaryIdentity-Bw6dpwVw.js","assets/polygonVertices-BgttYxpO.js","assets/twoPointLines-DVUlYYim.js"])))=>i.map(i=>d[i]);
import{b3 as x,f8 as V,ad as O,ao as E,e1 as w,a4 as T,b4 as M,ae as S,al as F,p7 as Z,U as l,hN as $,ht as N,$ as C}from"./index-BrQW8HOS.js";import{j as D,w as z,A as j,h as U}from"./FeatureTemplates-Y1q8_xKC.js";import{t as H}from"./networkFieldUtils-CaYZrGFV.js";const se=100;function q(e){return e.type==="point"}function le(e){return e.type==="polygon"}function ue(e){return e.type==="polyline"}function B(e){return!!e&&e.type==="radial"}function b(e){let t=null;for(const i of e)if(i.graphic.geometry){const u=i.graphic.geometry,r=q(u)?new x({spatialReference:u.spatialReference,xmin:u.x,xmax:u.x,ymax:u.y,ymin:u.y}):u.extent;t=t==null?r?.clone():t.union(r.extent)}return t}function A(e){const t=new Map;for(const i of e)V(t,i.id,()=>({addFeatures:[],id:i.id,identifierFields:{globalIdField:i.layer.globalIdField,objectIdField:i.layer.objectIdField}})).addFeatures?.push(i.graphic);return[...t.values()]}function G({edits:e,geometry:t,relationships:i,tag:u="",template:r}){if(B(t)){const a=t.geometry.clone();for(const c of a.paths)G({geometry:new O({spatialReference:a.spatialReference,paths:[c],hasZ:a.hasZ,hasM:a.hasM}),template:r,edits:e,relationships:i,tag:u});return}const{definition:n,layer:p}=r;t=W(t,p);const d=new E({attributes:n.defaultValues?{...n.defaultValues}:{},geometry:t,sourceLayer:p});if(P(d,p),p.globalIdField&&(d.attributes[p.globalIdField]=w()),e.push({id:p.layerId,graphic:d,tag:u,layer:p}),n.relationships.length!==0)for(const a of n.relationships||[]){const c=a.template;if(a.relationshipMetadata==null||!D(c))throw new T("shared-template:missing-relationship-metadata-or-definition","Relationship part must have metadata and a fully loaded template with definition");const{layer:_}=c,s=new E({attributes:{...n.defaultValues},sourceLayer:_});P(s,_),_.globalIdField&&(s.attributes[_.globalIdField]=w()),e.push({graphic:s,id:_.layerId,tag:"",layer:_}),i.push({...a.relationshipMetadata,sourceGraphic:d,destinationGraphic:s})}}function W(e,t){if(!e)return null;if(e.hasZ===t.hasZ&&e.hasM===t.hasM)return e;switch(e.type){case"point":return new F({spatialReference:e.spatialReference,x:e.x,y:e.y,...t.hasZ?e.hasZ?{z:e.z}:{z:g(t)}:{},...t.hasM?e.hasM?{m:e.m}:{m:I(t)??void 0}:{}});case"polygon":return new S({spatialReference:e.spatialReference,rings:R(e.rings,t.hasZ,t.hasM,g(t),I(t),e.hasM?e.hasZ?3:2:-1,e.hasZ?2:-1),hasZ:t.hasZ,hasM:t.hasM});case"polyline":return new O({spatialReference:e.spatialReference,paths:R(e.paths,t.hasZ,t.hasM,g(t),I(t),e.hasM?e.hasZ?3:2:-1,e.hasZ?2:-1),hasZ:t.hasZ,hasM:t.hasM});case"multipoint":return new M({spatialReference:e.spatialReference,hasZ:t.hasZ,hasM:t.hasM,points:k(e.points,t.hasZ,t.hasM,g(t),I(t),e.hasM?e.hasZ?3:2:-1,e.hasZ?2:-1)});default:return e}}function R(e,t,i,u,r,n,p){const d=[];for(const a of e)d.push(k(a,t,i,u,r,n,p));return d}function k(e,t,i,u,r,n,p){const d=[];for(const a of e){const c=[a[0],a[1]];t&&(c[2]=p>-1?a[2]:u),i&&(c[t?3:2]=n>-1?a[n]:r),d.push(c)}return d}function g(e){return e.capabilities.editing?.zDefault??0}function I(e){return e.capabilities.editing.supportsUpdateWithoutM?void 0:0}function P(e,t){Z(t)&&(e.sourceLayer=t.findSublayerForFeature(e))}const J={"buffer-line-to-polygon":()=>l(()=>import("./bufferLineToPolygon-BYbDXLXA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36])),"buffer-point-to-polygon":()=>l(()=>import("./bufferPointToPolygon-BYDMM5CT.js"),__vite__mapDeps([37,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36])),"buffer-polygon-to-polygon":()=>l(()=>import("./bufferPolygonToPolygon-TyD9lHKD.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36])),"connection-point":()=>l(()=>import("./connectionPoint-zsfNqxJ9.js"),[]),"equally-spaced":()=>l(()=>import("./equallySpaced-ex-zTr-N.js"),__vite__mapDeps([39,40,2,3,41,42,43,44,45,46,47,48,49,50,51,19,52,53,54,55,56,10,57,18,4,5,6,7,8,9,11,12,13,14,15,16,17,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,1,20,21,22,23,24,25,26,27,28,29,30,31,93,94,95])),"offset-line":()=>l(()=>import("./offsetLine-CW_6pPiV.js"),__vite__mapDeps([96,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,93,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95])),"offset-primary-line":()=>l(()=>import("./offsetPrimaryLine-CW_6pPiV.js"),__vite__mapDeps([97,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,93,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95])),"point-at-all-vertices-of-line":()=>l(()=>import("./pointAtAllVerticesOfLine-imeexWKr.js"),__vite__mapDeps([98,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,93,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95])),"point-at-beginning-of-line":()=>l(()=>import("./pointAtBeginningOfLine-2C_F5tBl.js"),__vite__mapDeps([99,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,93,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95])),"point-at-beginning-of-radial":()=>l(()=>import("./pointAtBeginningOfRadial-cL4-o7e2.js"),__vite__mapDeps([100,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,93,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95])),"point-at-end-of-line":()=>l(()=>import("./pointAtEndOfLine-26FQm3AS.js"),__vite__mapDeps([101,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,93,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95])),"point-at-interior-vertices":()=>l(()=>import("./pointAtInteriorVertices-CiNTecpF.js"),__vite__mapDeps([102,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,93,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95])),"point-at-intersection-vertices-of-line":()=>l(()=>import("./pointAtIntersectionVerticesOfLine-DHZ3LwZl.js"),__vite__mapDeps([103,40,2,3,41,42,43,44,45,46,47,48,49,50,51,19,52,53,54,55,56,10,57,18,4,5,6,7,8,9,11,12,13,14,15,16,17,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,1,20,21,22,23,24,25,26,27,28,29,30,31,93,94,95,104,105])),"point-at-not-beginning-of-line":()=>l(()=>import("./pointAtNotBeginningOfLine-CzndbkJh.js"),__vite__mapDeps([106,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,93,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95])),"point-at-not-end-of-line":()=>l(()=>import("./pointAtNotEndOfLine-JeL3Qlc4.js"),__vite__mapDeps([107,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,93,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95])),"point-at-polygon-centroid":()=>l(()=>import("./pointAtPolygonCentroid-DSFkNyK_.js"),__vite__mapDeps([108,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])),"point-at-polygon-not-start":()=>l(()=>import("./pointAtPolygonNotStart-DKIr1sJs.js"),__vite__mapDeps([109,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,94,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92])),"point-at-polygon-start":()=>l(()=>import("./pointAtPolygonStart-7YzZb_FT.js"),__vite__mapDeps([110,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,94,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92])),"point-identity":()=>l(()=>import("./pointIdentity-D96bzngl.js"),__vite__mapDeps([111,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])),"point-primary-identity":()=>l(()=>import("./pointPrimaryIdentity-D96bzngl.js"),__vite__mapDeps([112,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])),"polygon-boundary":()=>l(()=>import("./polygonBoundary-DIXODLp7.js"),__vite__mapDeps([113,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,94,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92])),"polygon-boundary-two-point":()=>l(()=>import("./polygonBoundaryTwoPoint-DsPQy0NJ.js"),__vite__mapDeps([114,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,94,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92])),"polygon-identity":()=>l(()=>import("./polygonIdentity-Bw6dpwVw.js"),__vite__mapDeps([115,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])),"polygon-primary-identity":()=>l(()=>import("./polygonPrimaryIdentity-Bw6dpwVw.js"),__vite__mapDeps([116,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])),"polygon-vertices":()=>l(()=>import("./polygonVertices-BgttYxpO.js"),__vite__mapDeps([117,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,94,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92])),"radial-lines":()=>l(()=>import("./radialLines-B3rDEnal.js"),[]),"two-point-lines":()=>l(()=>import("./twoPointLines-DVUlYYim.js"),__vite__mapDeps([118,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,94,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92]))};function K(e){const t=J[e];if(!t)throw new Error(`Builder type ${e} is not supported.`);return t()}const L=()=>C.getLogger("esri.editing.sharedTemplates.executor.createTemplateExecutor"),f="globalid";async function Q(e){if(!D(e))throw new T("template-executor:template-not-loaded","The template must be loaded before it can be executed.");if(z(e))return X(e);if(j(e))return Y(e);if(U(e))return te(e);throw new T("template-executor:unsupported-template-type","The template type is not supported.")}function X(e){return t=>{const i=[],u=[];G({geometry:t,template:e,edits:i,relationships:u});const r=b(i);return{edits:A(i),relationships:u,primary:i[0]??null,featureExtent:r,rotationPoint:r?.center??null}}}async function Y(e){const{definition:t}=e,i=await Promise.all(t.allParts.map(ee));return(u,r)=>{const n=[],p=[],d=new Set,a=()=>{if(t.createUtilityNetworkAssociations&&r==="completion"){const{utilityNetwork:s,utilityNetworkAssociationsTable:y}=t;s&&y?oe({associationGraphics:d,associationsTable:y,edits:n,relationships:p,utilityNetworkHelper:s}):L().warn("Unable to create utility network associations between group template features. The utility network or its associations table is unavailable.")}const _=b(n);return{associationGraphics:d,edits:A(n),relationships:p,primary:n[0]??null,featureExtent:_,rotationPoint:_?.center??null}};if(u==null)return L().warn("No geometry provided to group template executor. Result will be empty."),a();const c=i.map(_=>_({edits:n,mode:r,parentTemplate:e,relationships:p,shape:u})).filter($);return c.length===0?a():Promise.all(c).then(()=>a())}}async function ee(e){const t=await K(e.builderType);return i=>t.execute({...i,templatePart:e})}async function te(e){const{createPresetServiceEdit:t}=await l(()=>import("./createPresetServiceEdit-CGW_N--V.js"),__vite__mapDeps([20,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,21,22,23,24,25,26,27,28,29,30,31]));return(i,u,r=0)=>{if(!N(i))throw new T("template-executor:invalid-input-geometry","The input geometry for a preset template must be a point.");const n=[],p=[],d=t({geometry:i,template:e,edits:n,relationships:p,rotation:r,mode:u});return{edits:A(n),relationships:p,primary:n[0]??null,featureExtent:b(n),rotationPoint:d}}}function oe(e){const{edits:t,utilityNetworkHelper:i}=e,u=new Map;for(const r of t)r.tag!==""&&i.layerIdToSourceIdLookup.has(r.id)&&V(u,r.tag,()=>[]).push(r);for(const r of u.values())if(!(r.length<2))for(let n=0;n<r.length;n++){const p=r[n];for(let d=n+1;d<r.length;d++)re(p,r[d],e)}}function re(e,t,i){const{associationGraphics:u,associationsTable:r,edits:n,utilityNetworkHelper:p,relationships:d}=i,a=p.findAgat(e.graphic,e.layer),c=p.findAgat(t.graphic,t.layer);if(!a||!c)return;const _=p.findRules(a).map(o=>o.fromNetworkSource?.sourceId!==a.networkSourceId||o.fromAssetGroup?.assetGroupCode!==a.assetGroup||o.fromAssetType?.assetTypeCode!==null&&o.fromAssetType?.assetTypeCode!==a.assetType||o.toNetworkSource.sourceId!==c.networkSourceId||o.toAssetGroup?.assetGroupCode!==c.assetGroup||o.toAssetType!==null&&o.toAssetType?.assetTypeCode!==c.assetType?o.toNetworkSource.sourceId!==a.networkSourceId||o.toAssetGroup?.assetGroupCode!==a.assetGroup||o.toAssetType!==null&&o.toAssetType?.assetTypeCode!==a.assetType||o.fromNetworkSource.sourceId!==c.networkSourceId||o.fromAssetGroup?.assetGroupCode!==c.assetGroup||o.fromAssetType?.assetTypeCode!==null&&o.fromAssetType?.assetTypeCode!==c.assetType?null:{rule:o,from:{agat:c,item:t},to:{agat:a,item:e}}:{rule:o,from:{agat:a,item:e},to:{agat:c,item:t}}).filter(o=>o?.rule.ruleType===4||o?.rule.ruleType===5||o?.rule.ruleType===2?null:o).filter(o=>o!==null);if(_.length===0)return;const s=H(r),y=new Set;for(const o of _){const m={};m[s.fromNetworkSourceId]=o.rule.fromNetworkSource.sourceId,m[s.fromGlobalId]=o.from.item.graphic.attributes[o.from.item.layer.globalIdField??f],m[s.fromTerminalId]=null,o.rule.fromTerminal&&(m[s.fromTerminalId]=o.rule.fromTerminal.terminalId),m[s.toNetworkSourceId]=o.rule.toNetworkSource.sourceId,m[s.toGlobalId]=o.to.item.graphic.attributes[o.to.item.layer.globalIdField??f],m[s.toTerminalId]=null,o.rule.toTerminal&&(m[s.toTerminalId]=o.rule.toTerminal.terminalId),m[s.associationType]=o.rule.ruleType,m[s.percentAlong]=null,m[s.isContentVisible]=o.rule.ruleType===2?1:0,m[s.status]=0,m[s.globalId]=w();const v=`${m[s.fromNetworkSourceId]}-${m[s.fromGlobalId]}-${m[s.toNetworkSourceId]}-${m[s.toGlobalId]}-${m[s.associationType]}`;if(y.has(v))continue;y.add(v);const h=new E({attributes:m,sourceLayer:r});u.add(h),n.push({id:r.layerId,graphic:h,tag:"",layer:r}),d.push({sourceGraphic:o.to.item.graphic,sourceLayerId:o.to.item.layer.layerId,destinationGraphic:h,destinationLayerId:r.layerId,sourceField:o.to.item.layer.globalIdField??f,destinationField:s.toGlobalId??f}),d.push({sourceGraphic:o.from.item.graphic,sourceLayerId:o.from.item.layer.layerId,destinationGraphic:h,destinationLayerId:r.layerId,sourceField:o.from.item.layer.globalIdField??f,destinationField:s.fromGlobalId??f})}}const pe=Object.freeze(Object.defineProperty({__proto__:null,createTemplateExecutor:Q},Symbol.toStringTag,{value:"Module"}));export{pe as c,ue as i,B as l,se as n,q as o,G as p,le as r};
