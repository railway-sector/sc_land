import{L as P,p as $,d as k,b as g,i as A,l as F}from"./index-BrQW8HOS.js";import{F as I,L as j,N as M}from"./utils2-DEX5Hcmr.js";import"./stringUtils-BTK5CX_y.js";import"./substitute-D-eLZ17Q.js";const O=A`.arcgis-legend--card__size-ramp--container{display:flex;align-items:center;justify-content:center}.arcgis-legend--card__size-ramp--vertical-container{display:flex;flex-direction:column;align-items:center;justify-content:center}.arcgis-legend--card__size-ramp--label{margin:0 .5em;white-space:nowrap}.arcgis-legend--card__size-ramp--vertical-ramp{display:flex;flex-direction:column;align-items:center}.arcgis-legend--card__size-ramp--ramp{display:flex;flex-direction:row-reverse;align-items:center}.arcgis-legend--card__size-ramp--preview{display:flex}`,d={container:"arcgis-legend--card__size-ramp--container",verticalContainer:"arcgis-legend--card__size-ramp--vertical-container",label:"arcgis-legend--card__size-ramp--label",ramp:"arcgis-legend--card__size-ramp--ramp",verticalRamp:"arcgis-legend--card__size-ramp--vertical-ramp",preview:"arcgis-legend--card__size-ramp--preview"},q="#ddd";function D(e){if(!e)return;if(e.type.includes("3d")){if(!("symbolLayers"in e)||!e.symbolLayers?.length)return;const i=e.symbolLayers.at(-1),s=i&&"resource"in i?i.resource?.primitive:void 0;return s==="circle"||s==="cross"||s==="kite"||s==="sphere"||s==="cube"||s==="diamond"}const a="style"in e?e.style:void 0;return a==="circle"||a==="diamond"||a==="cross"}function G(e){if(e){if(e.type.includes("3d")){if(!("symbolLayers"in e)||!e.symbolLayers?.length)return;const a=e.symbolLayers.at(-1),i=a&&"resource"in a?a.resource?.primitive:void 0;return i==="triangle"||i==="cone"||i==="tetrahedron"}return"style"in e&&e.style==="triangle"}}const _=class _ extends P{constructor(){super(...arguments),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(this.legendElement.theme==="spike")return k`<div style=${$({display:"flex",flex:"1",justifyContent:"center"})}><arcgis-legend-spike-ramp .legendElement=${this.legendElement} .messages=${this.messages}></arcgis-legend-spike-ramp></div>`;const{legendElement:a,hasIndicators:i,opacity:s}=this,c=a.infos,y=c.at(0),m=c.at(-1);if(!y||!m)return null;const{label:v,...x}=y,{label:u,...z}=m;let t=x.preview,r=z.preview;if(!t||!r)return null;t=t.cloneNode(!0),t.style.display="flex",I(t,j(this.messages,v)),r=r.cloneNode(!0),r.style.display="flex",I(r,j(this.messages,u));const l={opacity:`${s??""}`};return k`<div class=${g(i?d.verticalContainer:d.container)}><div class=${g(d.label)}>${i?v:u}</div><div class=${g(i?d.verticalRamp:d.ramp)}><div class=${g(d.preview)} style=${$(l)}>${t}</div>${this._renderSizeRampLines(a)}<div class=${g(d.preview)} style=${$(l)}>${r}</div></div><div class=${g(d.label)}>${i?u:v}</div></div>`}_renderSizeRampLines(a){const i=a.infos,s=i.at(0),c=i.at(-1);if(!s||!c)return null;const y=s.symbol,m=this.hasIndicators,v=s.size&&typeof s.size=="number"?s.size:0,x=c.size&&typeof c.size=="number"?c.size:0,u=s.outlineSize||0,z=c.outlineSize||0,t=M(v+u),r=M(x+z),l=m?t:t+50,p=m?t/2+50:t,f=G(y),h=D(y),o=document.createElement("canvas");o.width=l,o.height=p,o.style.width=`${o.width}px`,o.style.height=`${o.height}px`;const n=o.getContext("2d");if(m){n.beginPath();const b=0,w=0,L=l/2-r/2,N=p;n.moveTo(b,w),n.lineTo(L,N);const T=l,E=0,S=l/2+r/2,R=p;n.moveTo(T,E),n.lineTo(S,R)}else{n.beginPath();const b=0,w=p/2-r/2,L=l;n.moveTo(b,w),n.lineTo(L,0);const T=0,E=p/2+r/2,S=l,R=p;n.moveTo(T,E),n.lineTo(S,R)}return n.strokeStyle=q,n.stroke(),k`<div style=${$(m?{display:"flex",marginTop:`-${f?0:h?t/2:0}px`,marginBottom:`-${f?r:h?r/2:0}px`}:{display:"flex",marginRight:`-${f?0:h?t/2:0}px`,marginLeft:`-${f?0:h?r/2:0}px`})}>${o}</div>`}};_.properties={hasIndicators:5,legendElement:0,opacity:9,messages:0},_.styles=O;let C=_;F("arcgis-legend-card-size-ramp",C);export{C as LegendCardSizeRamp};
