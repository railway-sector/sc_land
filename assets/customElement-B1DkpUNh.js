import{d4 as f,_ as s,e as a,dY as v,aR as M,g as w,cj as S,ch as E,ae as N,L as $,v as W,c as R,u as X,f as T,b as U,k as Z,n as Y,D as ee,d as C,i as te,at as oe,hO as ie,l as re,z as ae,a5 as A,Z as se,ap as z,kr as ne,am as le,d0 as ce,d1 as pe,d2 as de,d3 as j,a3 as ue}from"./index-CgzAF5Ey.js";import{s as he}from"./useT9n-CtkFUew7.js";import{v as me}from"./useViewModel-C2OUFn4j.js";import{r as ge}from"./legacyIcon-CjlqUSRb.js";import{A as J,H as ye}from"./async-utils-DOK6MVx8.js";import{isLoaded as ve,execute as fe}from"./projectOperator-GV0McMFO.js";import{e as we}from"./globalCss-UPH6MMtF.js";import"./useView-CMtXgKA0.js";import"./maybe-BQxFr9e1.js";import"./operatorProject-BaCyxOS9.js";import"./SimpleGeometryCursor-B92kdZ15.js";new f({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new f({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let g=class extends E{constructor(t){super(t),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};s([a({type:String,json:{write:!0}})],g.prototype,"deviationUnit",void 0),s([a({json:{read:{reader:e=>e?e.map(t=>v(t)).filter(M):null},write:{writer:(e,t)=>{t.geometries=e?.map(o=>o.toJSON())??null}}}})],g.prototype,"geometries",void 0),s([a({type:Number,json:{write:!0}})],g.prototype,"maxDeviation",void 0),g=s([w("esri.rest.support.GeneralizeParameters")],g),g.from=S(g);new f({preserveShape:"preserve-shape"});let h=class extends E{constructor(t){super(t),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};s([a({type:String,json:{write:!0}})],h.prototype,"calculationType",void 0),s([a({type:Boolean,json:{write:!0}})],h.prototype,"geodesic",void 0),s([a({json:{write:!0}})],h.prototype,"lengthUnit",void 0),s([a({type:[N],json:{read:{reader:e=>e?e.map(t=>v(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(o=>o.toJSON())}}}})],h.prototype,"polylines",void 0),h=s([w("esri.rest.support.LengthsParameters")],h),h.from=S(h);new f({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new f({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let p=class extends E{constructor(t){super(t),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};s([a({type:Number,json:{write:!0}})],p.prototype,"bevelRatio",void 0),s([a({json:{read:{reader:e=>e?e.map(t=>v(t)).filter(M):null},write:{writer:(e,t)=>{t.geometries=e?.map(o=>o.toJSON())??null}}}})],p.prototype,"geometries",void 0),s([a({type:Number,json:{write:!0}})],p.prototype,"offsetDistance",void 0),s([a({type:String,json:{write:!0}})],p.prototype,"offsetHow",void 0),s([a({type:String,json:{write:!0}})],p.prototype,"offsetUnit",void 0),p=s([w("esri.rest.support.OffsetParameters")],p),p.from=S(p);new f({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let m=class extends E{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};s([a({json:{read:{reader:e=>e?e.map(t=>v(t)).filter(M):null},write:{writer:(e,t)=>{t.geometries1=e?.map(o=>o.toJSON())??null}}}})],m.prototype,"geometries1",void 0),s([a({json:{read:{reader:e=>e?e.map(t=>v(t)).filter(M):null},write:{writer:(e,t)=>{t.geometries2=e?.map(o=>o.toJSON())??null}}}})],m.prototype,"geometries2",void 0),s([a({type:String,json:{write:!0}})],m.prototype,"relation",void 0),s([a({type:String,json:{write:!0}})],m.prototype,"relationParameter",void 0),m=s([w("esri.rest.support.RelationParameters")],m),m.from=S(m);new f({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let y=class extends E{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};s([a({type:String,json:{write:!0}})],y.prototype,"extendHow",void 0),s([a({type:[N],json:{read:{reader:e=>e?e.map(t=>v(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(o=>o.toJSON())}}}})],y.prototype,"polylines",void 0),s([a({type:N,json:{read:{reader:e=>e?v(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],y.prototype,"trimExtendTo",void 0),y=s([w("esri.rest.support.TrimExtendParameters")],y),y.from=S(y);const be=te`.arcgis-button{--calcite-icon-color: var(--calcite-color-text-3);--calcite-button-background-color: var(--calcite-color-foreground-1);color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-tight);display:flex;flex-flow:column;cursor:pointer;background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);:hover{--calcite-icon-color: var(--calcite-color-text-1);--calcite-button-background-color: var(--calcite-color-transparent-hover)}calcite-button{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}}:host{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}`;let L=!1;const Ae={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Se(){const e="geolocation"in navigator;return e||console.warn("geolocation-unsupported","Geolocation unsupported."),e}function Ee(){const e=window.isSecureContext;return e||L||(L=!0,console.warn("insecure-context","Geolocation requires a secure origin.")),e}function xe(){return Se()&&Ee()}function Me(e){return e??=Ae,new Promise((t,o)=>{setTimeout(()=>o(new A("geolocation:timeout","getting the current geolocation position timed out")),e?.timeout??15e3),navigator.geolocation.getCurrentPosition(t,o,e??void 0)})}function Pe(e,t){const{position:o,view:r}=e,i=Oe(o)?.coords;if(!i)throw new A("geometry-service:no-coords","Geolocation has no coordinates");const n=Re(i);return Ce(n,r,t)}function Oe(e){const t=e?.coords||{},o={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed,toJSON(){return{}}};return e&&{coords:o,timestamp:e.timestamp,toJSON(){return{}}}}function Re({longitude:e,latitude:t,altitude:o}){return new le({longitude:e,latitude:t,z:o||void 0,spatialReference:{wkid:4326}})}async function Ce(e,t,o){if(!t)return await Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?await Promise.resolve(e):r.isWebMercator?await Promise.resolve(ce(e)):ve()?await Promise.resolve(fe(e,r)):await Ne(o).then(async i=>{if(!i)throw new A("geometry-service:missing-url","Geometry service URL is missing");const n=new pe({geometries:[e],outSpatialReference:r});return(await de(i,n,o))[0]})}async function Ne(e){if(j.geometryServiceUrl)return await Promise.resolve(j.geometryServiceUrl);const t=ue.getDefault();try{await t.load(e)}catch{}return t.helperServices?.geometry?.url}var Te=Object.defineProperty,De=Object.getOwnPropertyDescriptor,u=(e,t,o,r)=>{for(var i=r>1?void 0:r?De(t,o):t,n=e.length-1,l;n>=0;n--)(l=e[n])&&(i=(r?l(t,o,i):l(i))||i);return r&&i&&Te(t,o,i),i};const Ge=2500;function F(e){const t={type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:e==="background"?16:14,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:e==="background"?0:2,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:e==="background"?[0,0,0,66]:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0};return e==="background"&&(t.offsetX=0,t.offsetY=-1),t}const H={type:"CIMPictureMarker",primitiveName:"headingOverride",enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:36,billboardMode3D:"FaceNearPlane",invertBackfaceTexture:!0,scaleX:1,textureFilter:"Picture",url:"data:image/png;base64,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"},Ue=F("layer"),je=F("background"),Le=new oe({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[Ue,je,H],angleAlignment:"Map"},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"Rotation",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Rotation override",expression:"360 - $feature.heading",returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"TintColor",valueExpressionInfo:{type:"CIMExpressionInfo",title:"TintColor override",expression:"IIF(IsEmpty($feature.heading), [255, 255, 255, 0], [255, 255, 255, 1])",returnType:"Default"}}]}});let c=class extends se{constructor(){super(...arguments),this._geolocationUsable=!0,this.goToLocationEnabled=!0,this.graphic=new z({symbol:Le}),this.rotationEnabled=!0}initialize(){xe()||(this._geolocationUsable=!1),this.addHandles([T(()=>this.view?.type,()=>this._handleViewTypeChange(),{initial:!0})])}destroy(){this._clearGraphic(),this.view=void 0}_clearGraphic(){const{view:e,graphic:t}=this;e&&t&&e.graphics.remove(t)}_addGraphic(){const{view:e,graphic:t}=this;!e?.graphics||!t||e.graphics.includes(t)||e.graphics.push(t)}_handleViewTypeChange(){H.enable=this.view?.type==="2d"}_getScaleWithinConstraints(e,t){if(!t)return e;if(t.type==="2d"){const{effectiveMaxScale:o,effectiveMinScale:r}=t.constraints;return Math.min(r,Math.max(o,e))}return e}_getScale(e){const{scale:t}=this,o=typeof t=="number"?t:Ge;return this._getScaleWithinConstraints(o,e)}_getHeading(e,t){const o=t?.spatialReference,r=o?.isWebMercator||o?.isGeographic,i=e.coords?.heading;return!r||typeof i!="number"||Number.isNaN(i)||i<0||i>360?null:i}_addHeading(e){const{heading:t,target:o,view:r}=e;if(!(!r||t===null)){if(r.type==="3d"){o.heading=t;return}r.type==="2d"&&(o.rotation=360-t)}}async _animatePoint(e,t,o,r){const{view:i}=this;if(!this.goToLocationEnabled||!i)return;const n={target:e,scale:t};this.rotationEnabled&&this._addHeading({heading:o,target:n,view:i});const l={signal:r.signal};ye(l),this.goToOverride&&i&&this.goToOverride(i,{target:n,options:l}),await i.goTo(n,l)}async updatePosition(e,t){try{const o=this.view,r=await Pe({position:e,view:o},{signal:t.signal}),{graphic:i}=this,{timestamp:n,coords:l}=e,{accuracy:O,altitude:x,altitudeAccuracy:Q,latitude:_,longitude:K,speed:V}=l,G=this._getHeading(e,o),q={timestamp:n,accuracy:O,altitude:x,altitudeAccuracy:Q,heading:G,latitude:_,longitude:K,speed:V};i&&(i.geometry=r,i.attributes=q);const B=this._getScale(o);await this._animatePoint(r,B,G,t)}catch(o){if(!J(o))throw new A("geolocation-positioning:invalid-point","Cannot position invalid point",{error:o})}return e}};u([a()],c.prototype,"_geolocationUsable",2);u([a()],c.prototype,"geolocationOptions",2);u([a()],c.prototype,"goToLocationEnabled",2);u([a()],c.prototype,"goToOverride",2);u([a({type:z})],c.prototype,"graphic",2);u([a()],c.prototype,"scale",2);u([a()],c.prototype,"rotationEnabled",2);u([a()],c.prototype,"view",2);c=u([w("map-components.geolocation.GeolocationPositioning")],c);var ke=Object.defineProperty,Ie=Object.getOwnPropertyDescriptor,b=(e,t,o,r)=>{for(var i=r>1?void 0:r?Ie(t,o):t,n=e.length-1,l;n>=0;n--)(l=e[n])&&(i=(r?l(t,o,i):l(i))||i);return r&&i&&ke(t,o,i),i};const ze=new ie({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"});function Je(e){return new ne({title:e.currentLocation,fieldInfos:[{fieldName:"timestamp",label:e.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:e.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:e.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:e.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:e.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:e.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:e.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:e.speed,format:{places:0,digitSeparator:!0}}],actions:[ze.clone()],content:[{type:"fields"}]})}let d=class extends c{constructor(e){super(e),this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this.addHandles([ae(()=>{const{graphic:e,view:t}=this;e&&t?.graphics?.includes(e)&&this._updatePopupTemplate(e)})])}destroy(){this.cancelLocate()}get state(){return this._geolocationUsable?this.view?.ready?this._locateController?"locating":this.error!=null?"error":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),this.state==="disabled")throw new A("locate:disabled-state","Cannot locate when disabled.");if(this.state==="feature-unsupported")throw new A("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const e=new AbortController;this._locateController=e,this.error=void 0;try{const t=await Me(this.geolocationOptions);if(await this.updatePosition(t,e),this._locateController!==e)return null;const{graphic:o}=this;return o&&this._updatePopupTemplate(o),this._addGraphic(),this.currentPosition=t,this._locateController=void 0,t}catch(t){if(J(t))return null;throw e===this._locateController&&(this._locateController=void 0),this.error=t,t}}cancelLocate(){this._clearGraphic(),this._locateController&&this._locateController.abort(),this._locateController=void 0}_updatePopupTemplate(e){if(!this.popupEnabled)return;const t=Je(this.messages),o=e!==this.graphic;this.destroyed||o||(e.popupTemplate=t)}};b([a()],d.prototype,"_locateController",2);b([a()],d.prototype,"currentPosition",2);b([a()],d.prototype,"error",2);b([a()],d.prototype,"messages",2);b([a()],d.prototype,"popupEnabled",2);b([a({readOnly:!0})],d.prototype,"state",1);d=b([w("map-components.locate.LocateViewModel")],d);const k={base:"locate",button:"arcgis-button"},I="gps-off",Fe=me(d),P=class P extends ${constructor(){super(),this.locateButtonElement=W(),this.messages=he(),this.viewModel=Fe(this),this.hideErrorTooltip=()=>{this.isErrorTooltipOpen=!1},this.isErrorTooltipOpen=!1,this.view=this.viewModel.view,this.autoDestroyDisabled=!1,this.geolocationOptions=this.viewModel.geolocationOptions,this.goToLocationDisabled=this.viewModel.goToLocationEnabled,this.goToOverride=this.viewModel.goToOverride,this.graphic=this.viewModel.graphic,this.icon=I,this.popupDisabled=this.viewModel.popupEnabled,this.scale=this.viewModel.scale,this.state=this.viewModel.state,this.arcgisError=R(),this.arcgisPropertyChange=X()("state"),this.arcgisReady=R(),this.arcgisSuccess=R(),this.listenOn(document,"click",this.hideErrorTooltip)}async cancelLocate(){this.viewModel.cancelLocate()}async destroy(){await this.manager.destroy()}async locate(){return await this.viewModel.locate()}loaded(){this.viewModel.messages={...this.messages,...this.messageOverrides},this.manager.onLifecycle(()=>[T(()=>this.viewModel.error,t=>{this.isErrorTooltipOpen=!!t,this.arcgisError.emit({error:t})}),T(()=>this.viewModel.currentPosition,t=>{this.arcgisSuccess.emit({position:t})})])}_localizeError(t){if(t instanceof GeolocationPositionError)return t.code===GeolocationPositionError.PERMISSION_DENIED?this.messages?.permissionError:t.code===GeolocationPositionError.TIMEOUT?this.messages?.timeoutError:this.messages?.positionUnavailable;if(t instanceof Error)return t.message}_locate(){const{viewModel:t}=this;t.state==="locating"?t.cancelLocate():t.locate().catch(()=>{})}render(){const{viewModel:t,icon:o}=this,{state:r}=t,i=r==="locating",n=i?this.messages.cancel:this.messages.title,l=r==="feature-unsupported",O=ge===void 0?I:void 0,x=this._localizeError(this.viewModel?.error);return C`<div class=${U(Z(k.base,k.button))}>${!l&&C`<calcite-button class=${U(we.widgetButton)} .disabled=${r==="disabled"} .loading=${i} .iconStart=${i?void 0:o??O} kind=neutral .label=${n} @click=${this._locate} title=${n??Y} ${ee(this.locateButtonElement)}></calcite-button>`||""}${x?C`<calcite-tooltip .open=${this.isErrorTooltipOpen} overlay-positioning=fixed .referenceElement=${this.locateButtonElement.value}>${x}</calcite-tooltip>`:null}</div>`}};P.properties={isErrorTooltipOpen:16,view:0,autoDestroyDisabled:5,geolocationOptions:0,goToLocationDisabled:7,goToOverride:0,graphic:0,icon:1,label:1,messageOverrides:0,popupDisabled:5,position:3,referenceElement:1,scale:9,state:3},P.styles=be;let D=P;re("arcgis-locate",D);export{D as ArcgisLocate};
