import{L as U,c as t,d as V,f as s,gB as S,l as _}from"./index-Brd6-W-v.js";const g=class g extends U{constructor(){super(...arguments),this._showInvalidVersionNotice=!0,this.arcgisCreateVersionList=t(),this.arcgisFlowItemBack=t(),this.arcgisFlowItemClose=t(),this.arcgisGetVersions=t(),this.arcgisManageVersion=t(),this.arcgisNewVersion=t()}disconnectedCallback(){super.disconnectedCallback(),this.versionListContainer?.remove()}render(){const{serviceItemElementProps:{allowEditing:I,closable:p,currentUser:$,executionError:b,currentVersionIdentifier:a,flowElement:f,heading:u,isInitialVersionInvalid:w,isVersionAdministrator:N,isVersioningApiAvailable:C,mode:E,pageSize:x,serviceName:n,serviceUrl:c,state:L,strings:o,versionInfos:r}}=this;let{_versionList:l}=this;const A=w.get(c)&&this._showInvalidVersionNotice?s`<calcite-notice class=${V(this._showInvalidVersionNotice?"invalid-initial-version-notice":"")} closable kind=warning open scale=s width=full icon @calciteNoticeClose=${()=>this._showInvalidVersionNotice=!1}><div slot=title>${o.headers.invalidInitialVersion}</div><div slot=message>${o.loadErrors.invalidInitialVersion}</div></calcite-notice>`:void 0,k=s`<calcite-combobox clear-disabled .label=${n} max-items=5 overlay-positioning=fixed selection-mode=single-persist @calciteComboboxChange=${i=>{const d=i.target,e=r.find(M=>M.versionIdentifier.guid===d.value);this.arcgisManageVersion.emit({actionType:"changeVersion",serviceUrl:c,versionInfo:e})}}>${r?r.map(i=>s`<calcite-combobox-item class=${V(E==="dialog"?"":"calcite-combobox-item")} .selected=${a.guid===i.versionIdentifier.guid&&a.name===i.versionIdentifier.name} .textLabel=${i.versionIdentifier.name} .value=${i.versionIdentifier.guid}></calcite-combobox-item>`):void 0}</calcite-combobox>`;let v,h;return I&&(v=s`<calcite-action .id=${`actionManageVersions_${n}`} icon=list scale=s slot=control text @click=${async()=>{const i={closable:p,currentUser:$,currentVersionIdentifier:a,executionError:b,heading:u,isVersionAdministrator:N,isVersioningApiAvailable:C,pageSize:x,serviceName:n,serviceUrl:c,state:L,strings:o,versionInfos:r};this.versionListContainer=document.createElement("div");const d=S(s`<arcgis-version-management-version-list .versionListElementProps=${i} selected show-back-button @arcgisFlowItemBack=${e=>{e.preventDefault(),this.arcgisFlowItemBack.emit()}} @arcgisFlowItemClose=${()=>this.arcgisFlowItemClose.emit()} @arcgisGetVersions=${e=>this.arcgisGetVersions.emit({serviceUrl:e.detail.serviceUrl})} @arcgisManageVersion=${e=>this.arcgisManageVersion.emit(e.detail)} @arcgisNewVersion=${e=>this.arcgisNewVersion.emit({serviceUrl:e.detail.serviceUrl})}></arcgis-version-management-version-list>`,this.versionListContainer);l=Array.from(d.parentNode.childNodes).find(e=>e.nodeName.toUpperCase()==="ARCGIS-VERSION-MANAGEMENT-VERSION-LIST"),f?.append(l),this.arcgisCreateVersionList.emit(l)}}></calcite-action>`,h=s`<calcite-tooltip overlay-positioning=fixed .referenceElement=${`actionManageVersions_${n}`}><span>${o.headers.manageVersions}</span></calcite-tooltip>`),s`<calcite-block open .heading=${n}>${A}${k}${v}${h}</calcite-block>`}};g.properties={_showInvalidVersionNotice:16,serviceItemElementProps:0};let m=g;_("arcgis-version-management-service-item",m);export{m as ArcgisVersionManagementServiceItem};
