import{L as F,v as b,hO as P,u as N,c as C,f as g,hP as z,p as T,b as v,k as M,D as k,d as _,f3 as S,i as H,l as O}from"./index-BrQW8HOS.js";import{z as W}from"./FeaturesViewModel-KWIn8HXK.js";import{s as R}from"./useT9n-Cr4kUTAO.js";import{v as V}from"./useViewModel-DDXl3W0X.js";import{i as I}from"./stringUtils-BTK5CX_y.js";import{m as j}from"./screenLocation-BhdxHBgF.js";import"./customElement-BBLIw1vZ.js";import"./geometryUtils-DV6xDwql.js";import"./symbolUtils-C3MaPSzp.js";import"./gfxUtils-DDSu4Luj.js";import"./cimSymbolUtils-CmFYUdpV.js";import"./svgUtils-BB2umWtg.js";import"./mat2df32-Dpt2CT5P.js";import"./mat2d-BbBq4Byx.js";import"./utils-6_NAbAK3.js";import"./FeatureViewModel-DUcUeCTn.js";import"./throttle-CTJgdIni.js";import"./AttachmentsViewModel-BorO2JWS.js";import"./AttachmentInfo-Be-qgHMP.js";import"./featureUtils-D2UmGJHI.js";import"./utils-BJ7fw6dI.js";import"./executeQueryJSON-CQzDonsh.js";import"./query-D5mFMRFz.js";import"./pbfQueryUtils-PegbNvJC.js";import"./pbf-bO1aG1II.js";import"./arcadeFeatureUtils-D1_gLIP2.js";import"./shared-DBXlHENV.js";import"./isImageryGraphicOrigin-Ccuhb4eK.js";import"./isImageryTileGraphicOrigin-ZR-gBf9D.js";import"./streamLayerUtils-DFlbJ4P1.js";import"./FeatureRelationshipViewModel-BmyR0OK6.js";import"./featureFormUtils-NJdl1KAp.js";import"./dateUtils-DCwqoPkL.js";import"./substitute-D-eLZ17Q.js";import"./FeatureUtilityNetworkAssociationsViewModel-bOY5P1li.js";import"./NetworkElement-te1zus-P.js";import"./getFeatureTitle-Mrr3SXNI.js";import"./actionUtils-8wl7T0BJ.js";import"./legacyIcon-BpbXCnGp.js";import"./AnchorElementViewModel-Djy63Zpd.js";import"./useView-Cya0Zpns.js";import"./projectOperator-p23D9sjF.js";import"./operatorProject-DxiD_TZp.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./globalCss-UPH6MMtF.js";const p="arcgis-popup",u=`${p}--is-docked`,r={base:p,baseHidden:`${p}--hidden`,main:`${p}__main-container`,shadow:`${p}--shadow`,isDocked:u,isDockedTopLeft:`${u}-top-left`,isDockedTopCenter:`${u}-top-center`,isDockedTopRight:`${u}-top-right`,isDockedBottomLeft:`${u}-bottom-left`,isDockedBottomCenter:`${u}-bottom-center`,isDockedBottomRight:`${u}-bottom-right`,isXlWidthBreakpoint:`${p}--is-xl-width-breakpoint`,isLgWidthBreakpoint:`${p}--is-lg-width-breakpoint`,isMdWidthBreakpoint:`${p}--is-md-width-breakpoint`,isSmWidthBreakpoint:`${p}--is-sm-width-breakpoint`,isXsWidthBreakpoint:`${p}--is-xs-width-breakpoint`,isXlHeightBreakpoint:`${p}--is-xl-height-breakpoint`,isLgHeightBreakpoint:`${p}--is-lg-height-breakpoint`,isMdHeightBreakpoint:`${p}--is-md-height-breakpoint`,isSmHeightBreakpoint:`${p}--is-sm-height-breakpoint`,isXsHeightBreakpoint:`${p}--is-xs-height-breakpoint`,alignTopCenter:`${p}--aligned-top-center`,alignBottomCenter:`${p}--aligned-bottom-center`,alignTopLeft:`${p}--aligned-top-left`,alignBottomLeft:`${p}--aligned-bottom-left`,alignTopRight:`${p}--aligned-top-right`,alignBottomRight:`${p}--aligned-bottom-right`,pointer:`${p}__pointer`,pointerDirection:`${p}__pointer-direction`},X=H`:host{display:contents;--arcgis-internal-popup-pointer-size: 12px;--arcgis-internal-popup-content-small-size: 280px;--arcgis-internal-popup-content-medium-size: 340px;--arcgis-internal-popup-content-large-size: 400px;--arcgis-internal-popup-content-x-large-size: 460px;--arcgis-internal-popup-content-min-size-y: 48px;--arcgis-internal-popup-pointer-size-half: calc(var(--arcgis-internal-popup-pointer-size) / 2);--arcgis-internal-popup-pointer-size-half-negative: calc(var(--arcgis-internal-popup-pointer-size-half) * -1)}.arcgis-popup{display:flex;position:absolute;flex-flow:column nowrap;z-index:1;pointer-events:none}.arcgis-popup--hidden{visibility:hidden}arcgis-features{flex:1;width:100%}.arcgis-popup--shadow{box-shadow:var(--calcite-shadow-sm)}.arcgis-popup--aligned-top-center{transform-origin:50% 100%}.arcgis-popup--aligned-bottom-center{transform-origin:50% -5%}.arcgis-popup--aligned-top-left,.arcgis-popup--aligned-bottom-left{transform-origin:100% 50%}.arcgis-popup--aligned-top-right,.arcgis-popup--aligned-bottom-right{transform-origin:-5% 50%}.arcgis-popup--aligned-top-center,.arcgis-popup--aligned-top-left,.arcgis-popup--aligned-top-right{animation:popup-intro-animation-down .2s ease-in-out}.arcgis-popup--aligned-bottom-center,.arcgis-popup--aligned-bottom-left,.arcgis-popup--aligned-bottom-right{animation:popup-intro-animation-up .2s ease-in-out}.arcgis-popup__main-container{display:flex;position:relative;z-index:1;background-color:var(--calcite-color-foreground-1);width:var(--arcgis-internal-popup-content-medium-size);min-height:var(--arcgis-internal-popup-content-min-size-y);max-height:var(--arcgis-internal-popup-content-medium-size);overflow:hidden;pointer-events:auto}.arcgis-popup__pointer{position:absolute;width:0;height:0}.arcgis-popup__pointer-direction{position:absolute;width:var(--arcgis-internal-popup-pointer-size);height:var(--arcgis-internal-popup-pointer-size);content:"";background-color:var(--calcite-color-foreground-1)}.arcgis-popup--aligned-top-center .arcgis-popup__pointer{top:100%;left:50%;margin:0 0 0 var(--arcgis-internal-popup-pointer-size-half-negative)}.arcgis-popup--aligned-bottom-center .arcgis-popup__pointer{bottom:100%;left:50%;margin:0 0 0 var(--arcgis-internal-popup-pointer-size-half-negative)}.arcgis-popup--aligned-top-left .arcgis-popup__pointer{right:var(--arcgis-internal-popup-pointer-size-half);bottom:var(--arcgis-internal-popup-pointer-size-half);transform:rotate(-45deg)}.arcgis-popup--aligned-bottom-left .arcgis-popup__pointer{top:var(--arcgis-internal-popup-pointer-size-half);right:var(--arcgis-internal-popup-pointer-size-half);transform:rotate(45deg)}.arcgis-popup--aligned-top-right .arcgis-popup__pointer{bottom:var(--arcgis-internal-popup-pointer-size-half);left:var(--arcgis-internal-popup-pointer-size-half);transform:rotate(45deg)}.arcgis-popup--aligned-bottom-right .arcgis-popup__pointer{top:var(--arcgis-internal-popup-pointer-size-half);left:var(--arcgis-internal-popup-pointer-size-half);transform:rotate(-45deg)}.arcgis-popup--aligned-top-center .arcgis-popup__pointer-direction,.arcgis-popup--aligned-bottom-center .arcgis-popup__pointer-direction{transform:scale(.75,2) rotate(45deg)}.arcgis-popup--aligned-top-left .arcgis-popup__pointer-direction,.arcgis-popup--aligned-bottom-left .arcgis-popup__pointer-direction,.arcgis-popup--aligned-top-right .arcgis-popup__pointer-direction,.arcgis-popup--aligned-bottom-right .arcgis-popup__pointer-direction{top:var(--arcgis-internal-popup-pointer-size-half-negative);left:var(--arcgis-internal-popup-pointer-size-half-negative);transform:scale(.75,2.5) rotate(45deg)}.arcgis-popup--aligned-top-center .arcgis-popup__pointer-direction{top:var(--arcgis-internal-popup-pointer-size-half-negative);left:0}.arcgis-popup--aligned-bottom-center .arcgis-popup__pointer-direction{bottom:var(--arcgis-internal-popup-pointer-size-half-negative);left:0}.arcgis-popup--is-xl-width-breakpoint .arcgis-popup__main-container{width:var(--arcgis-internal-popup-content-x-large-size)}.arcgis-popup--is-lg-width-breakpoint .arcgis-popup__main-container{width:var(--arcgis-internal-popup-content-large-size)}.arcgis-popup--is-md-width-breakpoint .arcgis-popup__main-container{width:var(--arcgis-internal-popup-content-medium-size)}.arcgis-popup--is-sm-width-breakpoint .arcgis-popup__main-container,.arcgis-popup--is-xs-width-breakpoint .arcgis-popup__main-container{width:var(--arcgis-internal-popup-content-small-size)}.arcgis-popup--is-xs-width-breakpoint.arcgis-popup--is-docked-top-center,.arcgis-popup--is-xs-width-breakpoint.arcgis-popup--is-docked-bottom-center{margin:0;width:auto}.arcgis-popup--is-xs-width-breakpoint.arcgis-popup--is-docked-top-center .arcgis-popup__main-container,.arcgis-popup--is-xs-width-breakpoint.arcgis-popup--is-docked-bottom-center .arcgis-popup__main-container{position:absolute;right:0;left:0;width:100%;max-height:75%}.arcgis-popup--is-xs-width-breakpoint.arcgis-popup--is-docked-bottom-center .arcgis-popup__main-container{bottom:0}.arcgis-popup--is-xs-width-breakpoint.arcgis-popup--is-docked-top-center .arcgis-popup__main-container{top:0}.arcgis-popup--is-xl-height-breakpoint .arcgis-popup__main-container{max-height:var(--arcgis-internal-popup-content-x-large-size)}.arcgis-popup--is-lg-height-breakpoint .arcgis-popup__main-container{max-height:var(--arcgis-internal-popup-content-large-size)}.arcgis-popup--is-sm-height-breakpoint .arcgis-popup__main-container,.arcgis-popup--is-xs-height-breakpoint .arcgis-popup__main-container{max-height:var(--arcgis-internal-popup-content-small-size)}.arcgis-popup--is-docked{inset:0;margin:var(--calcite-spacing-lg) var(--calcite-spacing-lg) var(--calcite-spacing-xxxl) var(--calcite-spacing-lg);animation:docking-animation .25s ease-out}.arcgis-popup--is-docked-top-left,.arcgis-popup--is-docked-top-center,.arcgis-popup--is-docked-top-right{align-items:flex-start}.arcgis-popup--is-docked-bottom-left,.arcgis-popup--is-docked-bottom-center,.arcgis-popup--is-docked-bottom-right{align-items:flex-end}.arcgis-popup--is-docked-top-left,.arcgis-popup--is-docked-bottom-left{justify-content:flex-start}.arcgis-popup--is-docked-top-center,.arcgis-popup--is-docked-bottom-center{justify-content:center}.arcgis-popup--is-docked-top-right,.arcgis-popup--is-docked-bottom-right{justify-content:flex-end}.arcgis-popup--is-docked-top-left .arcgis-popup__main-container,.arcgis-popup--is-docked-top-right .arcgis-popup__main-container,.arcgis-popup--is-docked-bottom-left .arcgis-popup__main-container,.arcgis-popup--is-docked-bottom-right .arcgis-popup__main-container{max-height:80%}.arcgis-popup--is-docked-top-center .arcgis-popup__main-container,.arcgis-popup--is-docked-bottom-center .arcgis-popup__main-container{max-height:40%}.arcgis-popup--is-docked{flex-flow:row nowrap}:dir(rtl) .arcgis-popup--is-docked-top-left,:dir(rtl) .arcgis-popup--is-docked-bottom-left{justify-content:flex-end}:dir(rtl) .arcgis-popup--is-docked-top-right,:dir(rtl) .arcgis-popup--is-docked-bottom-right{justify-content:flex-start}@media (prefers-reduced-motion){.arcgis-popup--aligned-top-center,.arcgis-popup--aligned-top-left,.arcgis-popup--aligned-top-right,.arcgis-popup--aligned-bottom-center,.arcgis-popup--aligned-bottom-left,.arcgis-popup--aligned-bottom-right{animation:none}}@media (prefers-reduced-motion){.arcgis-popup--is-docked{animation:none}}@keyframes docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{transform:translateY(calc(var(--calcite-spacing-xs) * -1));opacity:0}to{transform:translate(0);opacity:1}}@keyframes popup-intro-animation-up{0%{transform:translateY(var(--calcite-spacing-xs));opacity:0}to{transform:translate(0);opacity:1}}`;function w(D){return D&&Number.parseInt(D.replaceAll(/[^-\d.]/gu,""),10)||0}const Y=V(W),A={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},x=class x extends F{constructor(){super(...arguments),this._featuresComponent=b(),this._dockAction=new P({id:"popup-dock-action"}),this._mainContainerNode=b(),this._pointerNode=b(),this.messages=R({}),this.viewModel=Y(this),this._containerNode=b(),this.screenLocation=j(this),this.actions=this.viewModel.actions,this.active=this.viewModel.active,this.alignment="auto",this.autoCloseEnabled=this.viewModel.autoCloseEnabled,this.autoDestroyDisabled=!1,this.collapsed=!1,this.content=this.viewModel.content,this.defaultPopupTemplateEnabled=this.viewModel.defaultPopupTemplateEnabled,this.dockEnabled=!1,this.featureCount=this.viewModel.featureCount,this.featureMenuOpen=this.viewModel.featureMenuOpen,this.features=this.viewModel.features,this.goToOverride=this.viewModel.goToOverride,this.heading=this.viewModel.title,this.headingLevel=2,this.hideActionBar=!1,this.hideCloseButton=!1,this.hideCollapseButton=!1,this.hideFeatureMenuHeading=!1,this.hideFeatureNavigation=!1,this.hideFeatureListLayerTitle=!1,this.hideHeading=!1,this.hideSpinner=!1,this.highlightDisabled=this.viewModel.highlightEnabled,this.includeDefaultActionsDisabled=this.viewModel.includeDefaultActions,this.initialDisplayMode=this.viewModel.initialDisplayMode,this.location=this.viewModel.location,this.promises=this.viewModel.promises,this.selectedFeature=this.viewModel.selectedFeature,this.selectedFeatureIndex=this.viewModel.selectedFeatureIndex,this.state=this.viewModel.state,this.updateLocationEnabled=this.viewModel.updateLocationEnabled,this.view=this.viewModel.view,this.visible=this.viewModel.visible,this.arcgisPropertyChange=N()("active","collapsed","currentAlignment","dockEnabled","featureCount","featureMenuOpen","features","promises","selectedDrillInFeature","selectedFeature","selectedFeatureComponent","selectedFeatureIndex","state","visible"),this.arcgisReady=C(),this.arcgisClose=C(),this.arcgisTriggerAction=C()}get trackLocation(){return this.viewModel.active&&!this.dockEnabled}get _featureNavigationTop(){const{currentAlignment:t,currentDockPosition:i}=this;return t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right"}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._dockOptions||A}set dockOptions(t){const i={...A},o=this.viewModel?.view?.breakpoints,a={};o&&(a.width=o.xsmall,a.height=o.xsmall);const e={...i,...t},n={...i.breakpoint,...a},{breakpoint:s}=e;typeof s=="object"?e.breakpoint={...n,...s}:s&&(e.breakpoint=n),this._dockOptions=e}get selectedDrillInFeature(){return this._featuresComponent.value?.selectedDrillInFeature??null}get selectedFeatureComponent(){return this._featuresComponent.value?.selectedFeatureComponent??null}async handleViewClick(t){return this.viewModel.handleViewClick(t)}async clear(){return this.viewModel.clear()}async destroy(){await this.manager.destroy(),this._dockAction.destroy()}async fetchFeatures(t,i){return await this.viewModel.fetchFeatures(t,i)}async next(){return this.viewModel.next()}async open(t){this.viewModel.open(t)}async previous(){return this.viewModel.previous()}async setFocus(){this._featuresComponent.value?.setFocus()}async triggerAction(t){return await this._featuresComponent.value?.triggerAction(t)}loaded(){this.manager.onLifecycle(()=>[g(()=>[this.viewModel?.view?.widthBreakpoint,this.dockEnabled],()=>this._handleDockIcon(),{initial:!0}),g(()=>[this.dockEnabled,this.messages?.undock,this.messages?.dock],()=>this._handleDockEnabled(),{initial:!0}),g(()=>this.dockOptions,t=>{const{_dockAction:i}=this,o=this._featuresComponent.value?.headerActions;o?.remove(i),t.buttonEnabled&&o?.add(i)},{initial:!0}),g(()=>[this._featuresComponent.value,this._mainContainerNode.value,this._pointerNode.value,this.alignment,this.currentAlignment,this.dockEnabled,this.dockOptions,this.screenLocation,this.viewModel?.active,this.viewModel?.location,this.viewModel?.view?.padding,this.viewModel?.view?.size],()=>this._positionContainer(),{initial:!0}),g(()=>this.viewModel?.view?.size,(t,i)=>this._updateDockEnabledForViewSize(t,i)),g(()=>this.viewModel?.view?.ready,()=>this._setDockEnabledForViewSize(this.dockOptions),{initial:!0}),g(()=>this.view?.map,t=>{this.viewModel.map=t},{initial:!0}),g(()=>this.screenLocation,(t,i)=>this._autoClose(t,i))])}_handleClose(t){t.stopPropagation(),this.arcgisClose.emit()}_autoClose(t,i){this.autoCloseEnabled&&t!=null&&i!=null&&(this.visible=!1)}_handleArcgisPropertyChange(t){t.detail.name==="collapsed"&&(this.collapsed=t.target.collapsed)}_handleArcgisTriggerAction(t){t.stopPropagation(),t.detail.action===this._dockAction&&(this.dockEnabled=!this.dockEnabled),this.arcgisTriggerAction.emit({action:t.detail.action})}_isOutsideView(t){const{popupHeight:i,popupWidth:o,screenLocation:a,side:e,view:n}=t;if(Number.isNaN(o)||Number.isNaN(i)||!n||!a)return!1;const s=n.padding;return e==="right"&&a.x+o/2>n.width-(s?.right??0)||e==="left"&&a.x-o/2<(s?.left??0)||e==="top"&&a.y-i<(s?.top??0)||e==="bottom"&&a.y+i>n.height-(s?.bottom??0)}_getPointerSize(){const{_pointerNode:t}=this,i=t.value?window.getComputedStyle(t.value):null,o=w(i?.height),a=w(i?.width);return Math.hypot(o,a)}_calculateAutoAlignment(t){if(t!=="auto")return t;const{_mainContainerNode:i,viewModel:o}=this,{view:a}=o,{screenLocation:e}=this;if(e==null||!a||!i.value)return"top-center";const n=window.getComputedStyle(i.value),s=w(n.maxHeight),l=w(n.height),c=this._getPointerSize(),{height:h,width:d}=i.value.getBoundingClientRect(),m=d+c,f=Math.max(h,s,l)+c,B=this._isOutsideView({popupHeight:f,popupWidth:m,screenLocation:e,side:"right",view:a}),E=this._isOutsideView({popupHeight:f,popupWidth:m,screenLocation:e,side:"left",view:a}),y=this._isOutsideView({popupHeight:f,popupWidth:m,screenLocation:e,side:"top",view:a}),L=this._isOutsideView({popupHeight:f,popupWidth:m,screenLocation:e,side:"bottom",view:a});return E?y?"bottom-right":"top-right":B?y?"bottom-left":"top-left":y?L?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(t){return typeof t=="function"?t.call(this):t}_getCurrentAlignment(){return this.dockEnabled||!this.viewModel.active||!this._mainContainerNode.value?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(this.alignment)))}_calculatePositionResult(t){const i=["left","right"];return z(this.el)==="rtl"&&i.reverse(),t?.replace(/start/giu,i[0]).replace(/end/giu,i[1])}_callDockPosition(t){return typeof t=="function"?t.call(this):t}_getDockPosition(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_calculateAutoDockPosition(t){if(t!=="auto")return t;const i=this.viewModel?.view,o=z(this.el)==="rtl"?"top-left":"top-right";if(!i)return o;const a=i.padding,e=i.width-(a?.left??0)-(a?.right??0),{breakpoints:n}=i;return n?.xsmall&&e<=n.xsmall?"bottom-center":o}_getDockIcon(){const t=this._getDockPosition();if(this.dockEnabled)return"minimize";switch(t){case"top-left":case"bottom-left":return"dock-left";case"top-center":return"maximize";case"bottom-center":return"dock-bottom";default:return"dock-right"}}_handleDockIcon(){this._dockAction.icon=this._getDockIcon()}_handleDockEnabled(){this._dockAction.title=this.dockEnabled?this.messages?.undock:this.messages?.dock}_positionContainer(){this.positionStyle=this._calculatePositionStyle()}_calculateFullWidth(t){const{currentAlignment:i}=this;return i==="top-left"||i==="bottom-left"||i==="top-right"||i==="bottom-right"?t+this._getPointerSize():t}_calculateAlignmentPosition(t,i,o,a){const{currentAlignment:e}=this;if(!o)return;const{padding:n}=o,s=a/2,l=o.height-i,c=o.width-t,h=this._getPointerSize(),d=h/2;if(e==="bottom-center")return{top:i+h-(n?.top??0),left:t-s-(n?.left??0)};if(e==="top-left")return{bottom:l+d-(n?.bottom??0),right:c+d-(n?.right??0)};if(e==="bottom-left")return{top:i+d-(n?.top??0),right:c+d-(n?.right??0)};if(e==="top-right")return{bottom:l+d-(n?.bottom??0),left:t+d-(n?.left??0)};if(e==="bottom-right")return{top:i+d-(n?.top??0),left:t+d-(n?.left??0)};if(e==="top-center")return{bottom:l+h-(n?.bottom??0),left:t-s-(n?.left??0)}}_calculatePositionStyle(){const{screenLocation:t}=this,{view:i}=this.viewModel,o=this._mainContainerNode.value?.getBoundingClientRect().width??0;if(!i||this.dockEnabled||t==null||!o)return;const a=this._calculateFullWidth(o),e=this._calculateAlignmentPosition(t.x,t.y,i,a);if(e)return{top:e.top!==void 0?`${e.top}px`:"auto",left:e.left!==void 0?`${e.left}px`:"auto",bottom:e.bottom!==void 0?`${e.bottom}px`:"auto",right:e.right!==void 0?`${e.right}px`:"auto"}}_dockingThresholdCrossed(t,i,o){const[a,e]=t,[n,s]=i,{width:l=0,height:c=0}=o??{};return a<=l&&n>l||a>l&&n<=l||e<=c&&s>c||e>c&&s<=c}_updateDockEnabledForViewSize(t,i){if(!t||!i)return;const o=this.viewModel?.view?.padding,a=(o?.left??0)+(o?.right??0),e=(o?.top??0)+(o?.bottom??0),n=[],s=[];n[0]=t[0]-a,n[1]=t[1]-e,s[0]=i[0]-a,s[1]=i[1]-e;const{dockOptions:l}=this,c=l.breakpoint;typeof c=="object"&&this._dockingThresholdCrossed(n,s,c)&&this._setDockEnabledForViewSize(l)}_shouldDockAtCurrentViewSize(t){const i=t.breakpoint,o=this.viewModel?.view?.ui;if(!o)return!1;const{width:a,height:e}=o;if(Number.isNaN(a)||Number.isNaN(e)||typeof i!="object")return!1;const n=typeof i.width=="number"&&a<=(i.width??0),s=typeof i.height=="number"&&e<=(i.height??0);return n||s}_setDockEnabledForViewSize(t){this.viewModel?.view?.ready&&typeof t.breakpoint=="object"&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(t))}render(){const{dockEnabled:t,currentAlignment:i,currentDockPosition:o,positionStyle:a}=this,{active:e,view:n}=this.viewModel,s=e&&t,l=e&&!t,c=n?.widthBreakpoint,h=n?.heightBreakpoint,d={[r.alignTopCenter]:i==="top-center",[r.alignBottomCenter]:i==="bottom-center",[r.alignTopLeft]:i==="top-left",[r.alignBottomLeft]:i==="bottom-left",[r.alignTopRight]:i==="top-right",[r.alignBottomRight]:i==="bottom-right",[r.isDocked]:s,[r.shadow]:l,[r.isDockedTopLeft]:o==="top-left",[r.isDockedTopCenter]:o==="top-center",[r.isDockedTopRight]:o==="top-right",[r.isDockedBottomLeft]:o==="bottom-left",[r.isDockedBottomCenter]:o==="bottom-center",[r.isDockedBottomRight]:o==="bottom-right",[r.isXlWidthBreakpoint]:c==="xlarge",[r.isLgWidthBreakpoint]:c==="large",[r.isMdWidthBreakpoint]:c==="medium",[r.isSmWidthBreakpoint]:c==="small",[r.isXsWidthBreakpoint]:c==="xsmall",[r.isXlHeightBreakpoint]:h==="xlarge",[r.isLgHeightBreakpoint]:h==="large",[r.isMdHeightBreakpoint]:h==="medium",[r.isSmHeightBreakpoint]:h==="small",[r.isXsHeightBreakpoint]:h==="xsmall"};return _`<div style=${T(this.positionStyle)} .ariaHidden=${!e} .ariaLabel=${I(this.heading??"")} class=${v(M(r.base,d,{[r.baseHidden]:!e||!a&&!t}))} role=dialog ${k(this._containerNode)}>${this._renderMainContainer()}${this._renderPointer()}</div>`}_renderPointer(){return!this.dockEnabled||!this.active?_`<div class=${v(r.pointer)} role=presentation><div class=${v(M(r.pointerDirection,r.shadow))} ${k(this._pointerNode)}></div></div>`:null}_renderMainContainer(){const t={[r.shadow]:this.dockEnabled};return _`<div class=${v(M(r.main,t))} ${k(this._mainContainerNode)}>${S(this.viewModel,_`<arcgis-features .collapsed=${this.collapsed} .featureNavigationTop=${this._featureNavigationTop} .headingLevel=${this.headingLevel} .hidden=${!this.active} .hideActionBar=${this.hideActionBar} .hideCloseButton=${this.hideCloseButton} .hideFeatureListLayerTitle=${this.hideFeatureListLayerTitle} .hideFeatureMenuHeading=${this.hideFeatureMenuHeading} .hideFeatureNavigation=${this.hideFeatureNavigation} .hideHeading=${this.hideHeading} .hideSpinner=${this.hideSpinner} @arcgisPropertyChange=${this._handleArcgisPropertyChange} @arcgisTriggerAction=${this._handleArcgisTriggerAction} @arcgisClose=${this._handleClose} .referenceElement=${this.referenceElement} .responsiveActionsEnabled=${!0} .showCollapseButton=${!this.hideCollapseButton} .viewModel=${this.viewModel} ${k(this._featuresComponent)}></arcgis-features>`)}</div>`}};x.properties={screenLocation:16,positionStyle:16,_featureNavigationTop:16,actions:0,active:0,alignment:1,autoCloseEnabled:5,autoDestroyDisabled:5,collapsed:0,content:1,currentAlignment:32,currentDockPosition:32,defaultPopupTemplateEnabled:5,dockEnabled:5,dockOptions:0,featureCount:0,featureMenuOpen:5,features:0,goToOverride:0,heading:1,headingLevel:9,hideActionBar:5,hideCloseButton:5,hideCollapseButton:5,hideFeatureMenuHeading:5,hideFeatureNavigation:5,hideFeatureListLayerTitle:5,hideHeading:5,hideSpinner:5,highlightDisabled:5,includeDefaultActionsDisabled:5,initialDisplayMode:1,label:1,location:0,messageOverrides:0,promises:0,referenceElement:1,selectedDrillInFeature:32,selectedFeature:0,selectedFeatureComponent:32,selectedFeatureIndex:9,state:3,updateLocationEnabled:5,view:0,visible:5},x.styles=X;let $=x;O("arcgis-popup",$);export{$ as ArcgisPopup};
