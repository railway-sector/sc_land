const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CVzGOCNQ.js","assets/index-ni9qn0ie.css"])))=>i.map(i=>d[i]);
import{en as Q,a2 as U,k as N,by as X,k6 as Y,cU as J,a3 as ee,gP as te,Q as R,tN as B,tO as ie,tP as re,bz as le,Z as d,$ as h,a0 as G,W as oe,X as se,_ as ne,Y as s,bE as O,bA as p,O as V,bC as S,a6 as Z,L as ae,c as ce,I as de,i as he,l as ue}from"./index-CVzGOCNQ.js";import{s as C,l as fe}from"./Heading-DCecCONm.js";const _="esri-floor-filter",y=`${_}__filter-menu`,a={floorFilter:_,floorFilterLayout:`${_}__layout--`,floorFilterPosition:`${_}__position--`,buttonContainer:`${_}__button-container`,buttonInfo:`${_}__button-info`,buttonLabel:`${_}__button-label`,browseButton:`${_}__browse-button`,closeLevelsButton:`${_}__close-levels-button`,zoomButton:`${_}__zoom-button`,zoomButtonLevels:`${_}__zoom-button--levels`,minimizeToggleButton:`${_}__minimize-toggle-button`,levelsContainer:`${_}__levels-container`,levelButton:`${_}__level-button`,iconClose:`${_}__icon-close`,iconFlip:`${_}__icon-flip`,iconLeft:`${_}__icon-left`,iconRight:`${_}__icon-right`,separator:`${_}__separator`,filterMenu:y,filterMenuHeader:`${y}-header`,filterMenuHeaderTextGroup:`${y}-header-text-group`,filterMenuHeaderText:`${y}-header-text`,filterMenuHeaderSubtext:`${y}-header-subtext`,filterMenuHeaderBack:`${y}-header-back`,filterMenuSearch:`${y}-search`,filterMenuSearchInput:`${y}-search-input`,filterMenuItems:`${y}-items`,filterMenuItemName:`${y}-item-name`,filterMenuSelectedItem:`${y}-item-name--selected`,filterMenuSite:`${y}-site`,filterMenuFacility:`${y}-facility`,selectedItemCircle:`${_}__selected-item-circle`};function ve(e){return e.declaredClass==="esri.WebScene"}let f=class extends Q(U){constructor(e){super(e),this.filterMenuOpen=!1,this.filterMenuType="site",this.filterMode="base-floors",this.levelsExpanded=!0,this.searchTerm=null,this.view=null,this._updateFloorFilterTask=null,this._viewHeightBreakpoint=null,this._viewWidthBreakpoint=null}initialize(){this.addHandles([N(()=>this.view?.map,e=>{this._updateFloorFilterTask!=null&&(this._updateFloorFilterTask.abort(),this._updateFloorFilterTask=null),this._updateFloorFilterTask=Y(async t=>{await this._updateFloorFilterFromMap(e),J(t),this._setInitialViewState(e)})},X),N(()=>this.view,(e,t)=>{this._unregisterWidget(t),this._registerWidget(e),this._watchSearchResults(e)},ee),N(()=>this.view?.widthBreakpoint??null,e=>{this._viewWidthBreakpoint=e}),N(()=>this.view?.heightBreakpoint??null,e=>{this._viewHeightBreakpoint=e})])}destroy(){this._unregisterWidget(this.view),this.view=null,this._updateFloorFilterTask!=null&&(this._updateFloorFilterTask.abort(),this._updateFloorFilterTask=null)}set enabled(e){this._callOverride("enabled",e)}set facility(e){if(e&&this._isOverridden("facility")){const t=this.getFacility(e);this.hasMultipleSites&&(this.site=t?.siteId||null)}this._callOverride("facility",e)}set filterFeatures(e){this._callOverride("filterFeatures",e)}set filterLayers(e){this._callOverride("filterLayers",e)}get hasFacilities(){return this.filterLayers?.facilityLayer!=null&&this.filterFeatures?.facilities?.facilitiesInfo?.length>0}get hasLevels(){return this.filterLayers?.levelLayer!=null&&this.filterFeatures?.levels?.levelsInfo?.length>0}get hasMultipleSites(){return this.filterLayers?.siteLayer!=null&&this.filterFeatures?.sites?.sitesInfo?.length>1}get isNormalMode(){let e=!0;const t=this._viewWidthBreakpoint;return this._viewHeightBreakpoint!=="xsmall"&&t!=="xsmall"||(e=!1),e}set level(e){if(!e)return this._callOverride("level",e),this.facility=null,this.site=null,void this.setFloors(null);let t=null,i=null;const l=e?.split("--");l?.length>1&&l[0]==="all"?(i=l[1],t={id:e,facilityId:i,shortName:null,longName:null,levelNumber:null,verticalOrder:null}):(t=this.getLevel(e),i=t?.facilityId??null),this.level!==e||this.isNormalMode||this.levelsExpanded?(t&&this.hasFacilities&&this.hasLevels?(this.facility=i,this.hasMultipleSites&&(this.site=this.getFacility(i)?.siteId||null),this.setFloors(t)):this._isOverridden("level")&&(this.facility=null,this.site=null,this.hasMultipleSites&&(this.filterMenuType="site"),this.setFloors(null)),this._callOverride("level",e)):this.getFacilityLevels(i)?.length>1&&(this.levelsExpanded=!0)}set longNames(e){this._callOverride("longNames",e)}set minimized(e){this._callOverride("minimized",e)}set pinnedLevels(e){this._callOverride("pinnedLevels",e)}set site(e){this._callOverride("site",e)}get state(){return this.view&&this.filterFeatures&&this.hasFacilities&&this.hasLevels?"ready":this.view&&!this.filterFeatures?"loading":"disabled"}filterFacilities(e){let t=e;return this.searchTerm&&(this.searchTerm=this.searchTerm.trim(),t=e.filter(i=>{const{name:l}=i;return l.toLowerCase().includes(this.searchTerm?.toLowerCase())})),this.site&&(t=t.filter(i=>i.siteId===this.site)),t.sort((i,l)=>{const r=i.name,o=l.name;return r.localeCompare(o,void 0,{sensitivity:"base"})})}filterSites(e){let t=e;return this.searchTerm&&(this.searchTerm=this.searchTerm.trim(),t=e.filter(i=>{const{name:l}=i;return l.toLowerCase().includes(this.searchTerm?.toLowerCase())})),t.sort((i,l)=>{const r=i.name,o=l.name;return r.localeCompare(o,void 0,{sensitivity:"base"})})}getBaseLevel(e){const t=this.filterFeatures?.levels?.levelsInfo;let i=null;if(e){const{id:l}=e;if(t&&t.length>0&&(t.forEach(r=>{r.verticalOrder===0&&r.facilityId===l&&(i=r)}),!i)){let r=null;t.forEach(o=>{o.facilityId===l&&(r?(o.verticalOrder??0)>=0?r.verticalOrder!=null&&(r.verticalOrder<0||(o.verticalOrder??0)<r.verticalOrder)&&(r=o):r.verticalOrder!=null&&o.verticalOrder!=null&&r.verticalOrder<0&&o.verticalOrder>r.verticalOrder&&(r=o):r=o)}),r&&(i=r)}}return i}getFacility(e){return this.filterFeatures?.facilities?.facilitiesInfo?.find(t=>t.id===e)??null}getFacilityLevels(e){return!e||!this.filterFeatures?.levels?.levelsInfo?[]:this.filterFeatures.levels.levelsInfo.filter(t=>t.facilityId===e).sort((t,i)=>{const l=t.verticalOrder??0,r=i.verticalOrder??0;return l>r?-1:l===r?0:1})}getLevel(e){return this.filterFeatures?.levels?.levelsInfo?.find(t=>t.id===e)??null}getSite(e){return this.filterFeatures?.sites?.sitesInfo?.find(t=>t.id===e)??null}goTo(e){const{view:t}=this;if(!t||!e)return;const{geometry:i}=e;i&&i.extent&&this.callGoTo({target:i.extent,options:{duration:te(1e3),easing:"quad-in-out"}})}setFloors(e){const{view:t}=this;t&&(t?.map?.allLayers?.forEach(i=>{i.type==="feature"&&this._computeViewAllModeFloors(i)}),t.floors=new R(this._computeFloors(e)))}updateWebDocument(e){if(B(e)){const t=new ie({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site??null,facility:this.facility??null,level:this.level??null});e.widgets?e.widgets.floorFilter=t:e.widgets=new re({floorFilter:t})}}_computeFloors(e){if(this.filterMode==="single-floor")this._computeSingleFloor(e);else if(this.filterMode==="base-floors")return this.view?.type==="3d"?this._computeBaseFloors3D(e):this._computeBaseFloors(e);return this._computeEmptyFloors()}_computeSingleFloor(e){if(!e)return this._computeEmptyFloors();const t=[];return e?.id==="all"?this.getFacilityLevels(e.facilityId).forEach(i=>{i.id&&t.push(i.id)}):e&&t.push(e.id),t}_computeBaseFloors(e){const t=this.filterFeatures?.levels?.levelsInfo;if(!t?.length)return this._computeEmptyFloors();const i=[];e?.id==="all"?this.getFacilityLevels(e.facilityId).forEach(r=>{r.id&&i.push(r.id)}):e&&i.push(e.id);const l=e?.facilityId;return t.forEach(r=>{const{id:o,facilityId:n,verticalOrder:c}=r;(l||c!==0||i.includes(o))&&(n===l||c!==0||i.includes(o))||i.push(o)}),i}_computeBaseFloors3D(e){const t=this.filterFeatures?.levels?.levelsInfo;if(!t?.length)return this._computeEmptyFloors();const i=[],l=e?.id.split("--")??[];l?.length>1&&l[0]==="all"?this.getFacilityLevels(e?.facilityId).forEach(o=>{o.id&&i.push(o.id)}):e&&i.push(e.id);const r=e?.facilityId;return t.forEach(o=>{const{id:n,facilityId:c}=o;(r||i.includes(n))&&(c===r||i.includes(n))||i.push(n)}),i}_computeEmptyFloors(){return[]}async _setFilterLayers(){const{view:e}=this;if(e&&!this._isOverridden("filterLayers")){if(!B(e.map)&&!ve(e.map))throw new le("floorfilter:unsupported-map","Map must be a webmap or webscene");{const t=e.map,i=t?.allLayers;if(i?.items?.length>0){const l={siteLayer:null,facilityLayer:null,levelLayer:null},r=t.floorInfo?.siteLayer?.layerId,o=t.floorInfo?.facilityLayer?.layerId,n=t.floorInfo?.levelLayer?.layerId,c=t.floorInfo?.siteLayer?.sublayerId||t.floorInfo?.facilityLayer?.sublayerId||t.floorInfo?.levelLayer?.sublayerId;if(!o||!n)return;const v=i.items.filter(u=>u.type==="feature"||u.type==="scene"),g=i.items.filter(u=>u.type==="map-image");if(g?.length>0&&c){await Promise.all(g.map(w=>w.load()));const u=t.floorInfo?.siteLayer?.sublayerId,b=t.floorInfo?.facilityLayer?.sublayerId,F=t.floorInfo?.levelLayer?.sublayerId;g.forEach(w=>{const x=w.id,M=w?.allSublayers,L=M?.items;(x===r||x===o||x===n)&&L?.length>0&&M.items.forEach(I=>{const k=I.id;x===r&&k===u?l.siteLayer=I:k===b?l.facilityLayer=I:k===F&&(l.levelLayer=I)})})}v?.length>0&&v.forEach(u=>{const b=u.id;b===r?l.siteLayer=u:b===o?l.facilityLayer=u:b===n&&(l.levelLayer=u)}),this.filterLayers=l}}}}async _getFilterFeatures(){if(this._isOverridden("filterFeatures"))return this.filterFeatures;const[e,t,i]=await Promise.all([this._getSites(),this._getFacilities(),this._getLevels()]);return{sites:e,facilities:t,levels:i}}async _getSites(){const e={sitesInfo:[]},{filterLayers:t,view:i}=this,l=i?.map,{siteLayer:r}=t;if(!r||!l?.floorInfo?.siteLayer)return e;const o=r.createQuery();o.returnGeometry=!0,o.outFields=["*"],o.returnZ=!0,"type"in r&&r.type==="scene"&&(o.multipatchOption="xyFootprint");const{siteIdField:n,nameField:c}=l.floorInfo.siteLayer,v=await r.queryFeatures(o);if(v?.features?.length>0){const g=v.features,u=r?.fieldsIndex.get(n)?.name||n,b=r?.fieldsIndex.get(c)?.name||c;u!=null&&b!=null&&g.forEach(F=>{const w=F.attributes,x=F.geometry,M=w[u],L=w[b];M&&L&&e.sitesInfo.push({id:M,name:L,geometry:x})})}return e}async _getFacilities(){const{filterLayers:e,view:t}=this,i=t?.map,{facilityLayer:l}=e,r={facilitiesInfo:[]};if(!l||!i?.floorInfo?.facilityLayer)return r;const o=l.createQuery();o.returnGeometry=!0,o.outFields=["*"],o.returnZ=!0,"type"in l&&l.type==="scene"&&(o.multipatchOption="xyFootprint");const{facilityIdField:n,siteIdField:c,nameField:v}=i.floorInfo.facilityLayer,g=await l.queryFeatures(o);if(g?.features?.length>0){const u=g.features,b=l?.fieldsIndex.get(n)?.name||n,F=l?.fieldsIndex.get(c)?.name||c,w=l?.fieldsIndex.get(v)?.name||v;b&&F&&w&&u.forEach(x=>{const M=x.attributes,L=x.geometry,I=M[b],k=M[F],T=M[w];I&&T&&r.facilitiesInfo.push({id:I,siteId:k,name:T,geometry:L})})}return r}async _getLevels(){const{filterLayers:e,view:t}=this,i=t?.map,{levelLayer:l}=e,r={levelsInfo:[]};if(!l||!i?.floorInfo?.levelLayer)return r;const o=l.createQuery();o.returnGeometry=!0,o.outFields=["*"],o.returnZ=!0;const{levelIdField:n,facilityIdField:c,longNameField:v,shortNameField:g,levelNumberField:u,verticalOrderField:b}=i.floorInfo.levelLayer,F=await l.queryFeatures(o);if(F?.features?.length>0){const w=F.features,x=l?.fieldsIndex.get(n)?.name||n,M=l?.fieldsIndex.get(c)?.name||c,L=l?.fieldsIndex.get(v)?.name||v,I=l?.fieldsIndex.get(g)?.name||g,k=l?.fieldsIndex.get(u)?.name||u,T=l?.fieldsIndex.get(b)?.name||b;x&&M&&L&&I&&k&&T&&w.forEach(K=>{const z=K.attributes,A=z[x],H=z[M],W=z[L],D=z[I],P=z[k],j=z[T];A&&H&&W&&D&&typeof P=="number"&&typeof j=="number"&&r.levelsInfo.push({id:A,facilityId:H,longName:W,shortName:D,levelNumber:P,verticalOrder:j})})}return r}_registerWidget(e){e?.persistableViewModels.includes(this)||e?.persistableViewModels.add(this)}_unregisterWidget(e){e?.persistableViewModels.remove(this)}_watchSearchResults(e){e?.on("select-result-floor",t=>{const i=this.getLevel(t);i&&this.level!==t&&(this.level=t,this.setFloors(i))})}async _setInitialViewState(e){if(this.view)try{await this.view.when(),await this._setFilterLayers();const t=await this._getFilterFeatures();if(!t)return;if(this.filterFeatures=t,!this.hasFacilities||!this.hasLevels)return void console.error("Facilities and Levels are required for the Floor Filter widget");if(this.hasMultipleSites||(this.filterMenuType="facility"),this.facility&&this.level){this.filterMenuType="facility";const i=this.getFacility(this.facility),l=this.getLevel(this.level);this.site||(this.site=i?.siteId||void 0),this.setFloors(l)}else if(this.facility&&!this.level){this.filterMenuType="facility";const i=this.getFacility(this.facility),l=this.getBaseLevel(i);this.site||(this.site=i?.siteId||void 0),this.level=l?.id||void 0,this.setFloors(l)}else if(!this.facility&&this.level){this.filterMenuType="facility";const i=this.getLevel(this.level),l=this.getFacility(i?.facilityId);this.facility=l?.id||void 0,this.site||(this.site=l?.siteId||void 0),this.setFloors(i)}else if(!this.site||this.facility||this.level){if(!e||!B(e))return void this.setFloors(null);const i=e?.widgets?.floorFilter;if(!i)return void this.setFloors(null);i.site&&!this.site&&(this.site=i.site,this.filterMenuType="facility"),this.setFloors(null)}else this.filterMenuType="site",this.setFloors(null)}catch(t){console.error("Couldn't retrieve sites, facilities, and levels",t)}}_callOverride(e,t){this._override(e,t)}async _updateFloorFilterFromMap(e){if(!e||!B(e))return;const t=e?.widgets?.floorFilter;t&&(this._isOverridden("enabled")||(this.enabled=t.enabled),this._isOverridden("longNames")||(this.longNames=t.longNames),this._isOverridden("minimized")||(this.minimized=t.minimized),this._isOverridden("pinnedLevels")||(this.pinnedLevels=t.pinnedLevels),this._isOverridden("site")||(this.site=t.site),this._isOverridden("facility")||(this.facility=t.facility),this._isOverridden("level")||(this.level=t.level))}_computeViewAllModeFloors(e){const{filterFeatures:t}=this;if(e.floorInfo?.viewAllMode&&this.hasLevels&&this.hasFacilities&&this.filterMode==="base-floors"){const{level:i,facility:l}=this,r=[];t.levels.levelsInfo.forEach(o=>{const{id:n,facilityId:c}=o;l&&c===l?i&&n===i&&r.push(n):r.push(n)}),e.floorInfo.viewAllLevelIds=new R(r)}}};d([h({value:!1})],f.prototype,"enabled",null),d([h({value:void 0})],f.prototype,"facility",null),d([h({value:null})],f.prototype,"filterFeatures",null),d([h({value:null})],f.prototype,"filterLayers",null),d([h()],f.prototype,"filterMenuOpen",void 0),d([h()],f.prototype,"filterMenuType",void 0),d([h()],f.prototype,"filterMode",void 0),d([h()],f.prototype,"hasFacilities",null),d([h()],f.prototype,"hasLevels",null),d([h()],f.prototype,"hasMultipleSites",null),d([h({readOnly:!0})],f.prototype,"isNormalMode",null),d([h({value:void 0})],f.prototype,"level",null),d([h({value:!1})],f.prototype,"longNames",null),d([h()],f.prototype,"levelsExpanded",void 0),d([h({value:!1})],f.prototype,"minimized",null),d([h({value:!1})],f.prototype,"pinnedLevels",null),d([h()],f.prototype,"searchTerm",void 0),d([h({value:void 0})],f.prototype,"site",null),d([h({readOnly:!0})],f.prototype,"state",null),d([h()],f.prototype,"view",void 0),d([h()],f.prototype,"_viewHeightBreakpoint",void 0),d([h()],f.prototype,"_viewWidthBreakpoint",void 0),d([h()],f.prototype,"updateWebDocument",null),f=d([G("esri.widgets.FloorFilter.FloorFilterViewModel")],f);const q=f,ge=new Set(["ArrowUp","ArrowDown","End","Home"]);let m=class extends oe{constructor(e,t){super(e,t),this._activeMenu=null,this._activeMenuIndex={levels:-1,menuItems:-1},this._baseNode=null,this._facilitiesListNode=null,this._levelsListNode=null,this._sitesListNode=null,this._searchInput=null,this.viewModel=new q,this.messages=null,this.messagesCommon=null,this.headingLevel=2,this._resizeObserver=new ResizeObserver(()=>this.scheduleRender()),this.addHandles(N(()=>this._searchInput,()=>this._focusSearch()))}loadDependencies(){return se({icon:()=>ne(()=>import("./index-CVzGOCNQ.js").then(e=>e.Os),__vite__mapDeps([0,1]))})}destroy(){this._resizeObserver?.disconnect()}get enabled(){return this.viewModel.enabled}set enabled(e){this.viewModel.enabled=e}get longNames(){return this.viewModel.longNames}set longNames(e){this.viewModel.longNames=e}get minimized(){return this.viewModel.minimized}set minimized(e){this.viewModel.minimized=e}get pinnedLevels(){return this.viewModel.pinnedLevels}set pinnedLevels(e){this.viewModel.pinnedLevels=e}get site(){return this.viewModel.site}set site(e){this.viewModel.site=e}get facility(){return this.viewModel.facility}set facility(e){this.viewModel.facility=e}get level(){return this.viewModel.level}set level(e){this.viewModel.level=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return"urban-model"}set icon(e){this._overrideIfSome("icon",e)}updateWebDocument(e){return this.viewModel.updateWebDocument(e)}render(){const{longNames:e}=this,t=e&&this.viewModel.isNormalMode?"expanded":"collapsed",i=this._renderButtons(),l=this._renderFilterMenu(),r=s("div",{class:this.classes(a.separator)}),o=this._getComponentPosition(),n=this._getPosition(o),c=o==="top-right"||o==="bottom-right",v=o==="top-left"||o==="bottom-left",g=O(this.container),u=g&&v||!g&&c?l:i,b=g&&v||!g&&c?i:l;return s("div",{afterCreate:this._afterBaseNodeCreate,class:this.classes(a.floorFilter,p.widget,`${a.floorFilterLayout}${t}`,`${a.floorFilterPosition}${n}`),key:"floor-filter-menu"},u,this.viewModel?.filterMenuOpen?r:null,b)}_renderButtons(){const e=this._getComponentPosition(),t=[];return this._getPosition(e)==="top"?(t.push(this._renderBrowseButton()),t.push(this._renderLevelButtons()),t.push(this._renderCloseLevelsButton()),t.push(this._renderZoomButton()),t.push(this._renderCollapseToggleButton())):(t.push(this._renderCollapseToggleButton()),t.push(this._renderZoomButton()),t.push(this._renderCloseLevelsButton()),t.push(this._renderLevelButtons()),t.push(this._renderBrowseButton())),s("div",{class:this.classes(p.widget,a.buttonContainer),key:"button-container"},t)}_renderBrowseButton(){const{longNames:e,messages:t}=this;return s("button",{"aria-expanded":this.viewModel.filterMenuOpen.toString(),"aria-label":t.buttons.browse,bind:this,class:this.classes(p.widget,p.widgetButton,p.interactive,(this.viewModel.state==="loading"||this.viewModel.state==="disabled")&&p.buttonDisabled,a.browseButton,this.viewModel?.filterMenuOpen&&p.widgetButtonActive),key:"browse-button",onclick:this._toggleFilterMenu,title:t.buttons.browse,type:"button"},s("div",{class:this.classes(a.buttonInfo)},s("calcite-icon",{icon:this.icon,scale:"s"}),s("span",{class:this.classes(a.buttonLabel)},e&&this.viewModel.isNormalMode?t.buttons.browse:null)))}_renderLevelButtons(){if(!this.viewModel?.filterFeatures?.levels?.levelsInfo||!this.facility)return null;const{facility:e,messagesCommon:t,messages:i}=this,l=this.viewModel?.getFacility(e),r=this.viewModel?.getFacilityLevels(e),o=r.map(c=>this._renderLevelButton(c));if(!o.length)return null;const n=l&&V(i.selector.levelsLabel,{name:`"${l.name}"`});if(this._isWebScene(this.view?.map)&&o?.length>1){const c={id:`all--${e}`,facilityId:e,shortName:t.all,longName:t.all,levelNumber:null,verticalOrder:null},v=this._renderLevelButton(c);o.push(v)}return s("ul",{afterCreate:S,"aria-label":n,bind:this,class:this.classes(a.levelsContainer),"data-id":"levels","data-node-ref":"_levelsListNode",key:"levels-button-container",onkeydown:this._handleListKeydown},o)}_renderLevelButton(e){const{longNames:t}=this,{shortName:i,longName:l,id:r}=e,o=`levels--${r}`,n=this.level===r,c=t&&this.viewModel.isNormalMode?l:i;return this.viewModel.isNormalMode||n||this.viewModel.levelsExpanded?s("li",{key:o},s("button",{bind:this,class:this.classes(p.widgetButton,n?p.widgetButtonActive:null,p.interactive,a.levelButton),"data-id":r,"data-list-id":"levels",onclick:this._levelSelected,onfocus:this._onItemFocus,type:"button"},c)):null}_renderCloseLevelsButton(){if(!this.level||this.viewModel.isNormalMode||!this.viewModel.levelsExpanded)return null;const{messagesCommon:e}=this;return s("button",{"aria-label":e.close,bind:this,class:this.classes(p.widget,p.widgetButton,p.interactive,a.closeLevelsButton),key:"close-levels-button",onclick:this._closeLevels,title:e.close,type:"button"},s("div",{class:this.classes(a.buttonInfo)},s("calcite-icon",{icon:"x"})))}_renderZoomButton(){const{longNames:e,messages:t,facility:i,site:l}=this,r=this.viewModel?.filterMenuType,o=this.viewModel?.filterMenuOpen,n=this.viewModel?.getSite(l),c=this.viewModel?.getFacility(i),v=r==="site"&&o?!n:!c;return s("button",{"aria-label":t.buttons.zoomTo,bind:this,class:this.classes(p.widget,p.widgetButton,v&&p.buttonDisabled,p.interactive,this.viewModel?.getFacilityLevels(i).length>0?a.zoomButtonLevels:a.zoomButton),key:"zoom-button",onclick:this._zoomToClicked,title:t.buttons.zoomTo,type:"button"},s("div",{class:this.classes(a.buttonInfo)},s("calcite-icon",{icon:"zoom-to-object",scale:"s"}),s("span",{class:this.classes(a.buttonLabel)},e&&this.viewModel.isNormalMode?t.buttons.zoomTo:null)))}_renderCollapseToggleButton(){const{longNames:e,messagesCommon:t}=this,i=e?"chevrons-right":"chevrons-left",l=e?t.collapse:t.expand;return s("button",{"aria-label":l,bind:this,class:this.classes(p.widget,p.widgetButton,p.interactive,a.minimizeToggleButton),key:"minimize-toggle-button",onclick:this._toggleCollapsed,title:l,type:"button"},s("div",{class:this.classes(a.buttonInfo)},s("calcite-icon",{class:this.classes(a.iconFlip),icon:i,scale:"s"}),s("span",{class:this.classes(a.buttonLabel)},e&&this.viewModel.isNormalMode?t.collapse:null)))}_renderFilterMenu(){return this.viewModel?.filterMenuOpen?this.viewModel?.filterMenuType==="site"?this._renderSiteFilterMenu():this.viewModel?.filterMenuType==="facility"?this._renderFacilityFilterMenu():null:null}_renderSiteFilterMenu(){const{messages:e,messagesCommon:t}=this,i=this.site?this.viewModel?.getSite(this.site)?.name:e.selector.selectSite,l=s("div",{class:this.classes(`${a.filterMenuHeader}`),key:"filter-menu-site-header"},s("div",{class:this.classes(a.filterMenuHeaderTextGroup)},s(C,{class:this.classes(a.filterMenuHeaderText),level:this.headingLevel},i)),s("button",{bind:this,class:this.classes(a.iconClose),onclick:this._closeClicked,title:t.close,type:"button"},s("calcite-icon",{icon:"x"}))),r=this._renderSearchInput(),o=this._renderSiteItems();return s("div",{class:this.classes(a.filterMenu),key:"filter-menu-site"},l,r,o)}_renderFacilityFilterMenu(){const{messages:e,messagesCommon:t,site:i}=this,l=this.viewModel?.getSite(i)?.name,r=this.facility&&this.viewModel?.getFacility(this.facility)?.name||e.selector.selectFacility,o=this.viewModel.hasMultipleSites?s("button",{bind:this,class:this.classes(a.filterMenuHeaderBack),onclick:this._backClicked,title:t.back,type:"button"},s("calcite-icon",{class:this.classes(O(this.container)?a.iconRight:a.iconLeft),icon:O(this.container)?"chevron-right":"chevron-left"})):null,n=this.viewModel.hasMultipleSites?s(C,{class:this.classes(a.filterMenuHeaderSubtext),level:fe(this.headingLevel)},l):null,c=s("div",{class:this.classes(a.filterMenuHeader),key:"filter-menu-site-header"},o,s("div",{class:this.classes(a.filterMenuHeaderTextGroup)},s(C,{class:this.classes(a.filterMenuHeaderText),level:this.headingLevel},r),n),s("button",{bind:this,class:this.classes(a.iconClose),onclick:this._closeClicked,title:t.close,type:"button"},s("calcite-icon",{icon:"x"}))),v=this._renderSearchInput(),g=this._renderFacilityItems();return s("div",{class:this.classes(a.filterMenu),key:"filter-menu-facility"},c,v,g)}_renderSearchInput(){const{messagesCommon:e}=this,t=!!(this.viewModel.searchTerm&&this.viewModel.searchTerm?.length>0);return s("div",{class:this.classes(a.filterMenuSearch),key:"filter-menu-search"},s("calcite-icon",{icon:"search",key:"filter-menu-search-icon"}),s("input",{afterCreate:S,bind:this,class:this.classes(a.filterMenuSearchInput),"data-node-ref":"_searchInput",oninput:this._onSearchChange,onpaste:this._onSearchChange,placeholder:e.search,value:this.viewModel.searchTerm??void 0}),t?s("calcite-icon",{bind:this,class:this.classes(a.iconClose),icon:"x",key:"filter-menu-search-clear",onclick:this._onSearchClear,title:e.clear}):null)}_renderBlueCircle(){return s("span",{class:this.classes(a.selectedItemCircle),key:"floor-filter__selected-item-circle"})}_renderSiteItems(){if(!this.viewModel?.filterFeatures?.sites?.sitesInfo)return null;const{messages:e}=this,t=this.viewModel.filterFeatures.sites.sitesInfo,i=this.viewModel.filterSites(t).map(r=>this._renderSiteItem(r)),l=i.length===0&&this.viewModel?.searchTerm&&s("div",{class:this.classes(p.empty)},e.noResults);return s("ul",{afterCreate:S,"aria-label":e.selector.sitesLabel,bind:this,class:this.classes(a.filterMenuItems),"data-id":"sites","data-node-ref":"_sitesListNode",key:"filter-menu-items--sites",onkeydown:this._handleListKeydown,tabIndex:-1},i,l)}_renderSiteItem(e){const{name:t,id:i}=e,l=`filter-menu-site--${i}`,r=this.site===i;return s("li",{key:l},s("button",{bind:this,class:this.classes(a.filterMenuSite),"data-id":i,"data-list-id":"sites",onclick:this._siteSelected,onfocus:this._onItemFocus,type:"button"},r?this._renderBlueCircle():null,s("span",{class:this.classes(r?a.filterMenuSelectedItem:a.filterMenuItemName)},t),s("calcite-icon",{class:this.classes(O(this.container)?a.iconLeft:a.iconRight),icon:"chevron-right",scale:"s"})))}_renderFacilityItems(){if(!this.viewModel?.filterFeatures?.facilities?.facilitiesInfo)return null;const{messages:e,site:t}=this,i=this.viewModel.getSite(t),l=this.viewModel.filterFeatures.facilities.facilitiesInfo,r=this.viewModel.filterFacilities(l).map(c=>this._renderFacilityItem(c)),o=r.length===0&&this.viewModel?.searchTerm&&s("div",{class:this.classes(p.empty)},e.noResults),n=i?V(e.selector.siteFacilitiesLabel,{name:`"${i.name}"`}):e.selector.facilitiesLabel;return s("ul",{afterCreate:S,"aria-label":n,bind:this,class:this.classes(a.filterMenuItems),"data-id":"facilities","data-node-ref":"_facilitiesListNode",key:"filter-menu-items--facilities",onkeydown:this._handleListKeydown,tabIndex:-1},r,o)}_renderFacilityItem(e){const{name:t,id:i}=e,l=`filter-menu-facility--${i}`,r=this.facility===i;return s("li",{key:l},s("button",{bind:this,class:this.classes(a.filterMenuFacility),"data-id":i,"data-list-id":"facilities",onclick:this._facilitySelected,onfocus:this._onItemFocus,type:"button"},r?this._renderBlueCircle():null,s("span",{class:this.classes(r?a.filterMenuSelectedItem:a.filterMenuItemName)},t)))}_afterBaseNodeCreate(e){this._baseNode&&this._resizeObserver?.unobserve(this._baseNode),this._baseNode=e,this._resizeObserver?.observe(this._baseNode)}_toggleCollapsed(){this.longNames=!this.longNames}_toggleFilterMenu(){const e=this.viewModel?.filterMenuOpen??!1;this.viewModel.filterMenuOpen=!e}_setFilterMenuType(e){this.viewModel.filterMenuType=e}_zoomToClicked(){if(this.site&&this.viewModel?.filterMenuType==="site"&&this.viewModel?.filterMenuOpen){const e=this.viewModel?.getSite(this.site);this.viewModel.goTo(e)}else if(this.facility){const e=this.viewModel?.getFacility(this.facility);this.viewModel.goTo(e)}else if(this.site){const e=this.viewModel?.getSite(this.site);this.viewModel.goTo(e)}}_onSearchChange(e){const t=e.target;t.value===""?this.viewModel.searchTerm=null:t.value&&this.viewModel?.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value)}_onSearchClear(){this.viewModel.searchTerm=null}_closeClicked(){this.viewModel.searchTerm=null,this.viewModel.filterMenuOpen=!1}_backClicked(){this._setFilterMenuType("site"),this.viewModel.searchTerm=null}_siteSelected(e){const t=e.currentTarget.getAttribute("data-id"),i=this.viewModel.getSite(t);let l=!1;this.site!==t&&(this.facility=null,this.level=null,l=!0,this.viewModel.levelsExpanded=!1),this.site=t,this.viewModel.searchTerm=null,this._setFilterMenuType("facility"),this.viewModel.goTo(i),l&&this.viewModel.setFloors(null)}_facilitySelected(e){const t=e.currentTarget.getAttribute("data-id"),i=this.viewModel.getFacility(t);let l=!1;if(this.facility!==t){if(this.viewModel.filterMode==="base-floors"){const r=this.viewModel?.getBaseLevel(i);this.level=r?r.id:null}else this.level=null;l=!0,this.viewModel.levelsExpanded=!1}if(this.facility=t,this.viewModel.goTo(i),l){const r=this.viewModel.getLevel(this.level);this.viewModel.setFloors(r)}this.viewModel.isNormalMode||this.viewModel.getFacilityLevels(t)?.length>1&&(this.viewModel.levelsExpanded=!0),setTimeout(()=>this._focusActiveLevel(),50)}_levelSelected(e){const t=e.currentTarget.getAttribute("data-id");this.level=t}_closeLevels(){this.viewModel.levelsExpanded=!1}_isWebScene(e){return e?.declaredClass==="esri.WebScene"}_getComponentPosition(){return this.container!=null?this.view?.ui?.getPosition(this.container):null}_getPosition(e){switch(e){case"bottom-right":case"bottom-left":return"bottom";default:return"top"}}_handleListKeydown(e){const t=e.currentTarget.getAttribute("data-id");let i=null;t==="sites"||t==="facilities"?(this._activeMenu!==t&&(this._activeMenuIndex.menuItems=-1),this._activeMenu=t,i="menuItems"):t==="levels"&&(i="levels");const l=t==="sites"?this._sitesListNode:t==="facilities"?this._facilitiesListNode:t==="levels"?this._levelsListNode:null,{key:r}=e,o=r==="Tab",n=ge.has(r);n&&e.preventDefault();const c=l?.getElementsByTagName("li");c&&c.length!==0&&(n||o)&&this._handleItemNavigation(r,e.shiftKey,c,o,i)}_handleItemNavigation(e,t,i,l,r){if(!r)return;this._activeMenuIndex[r]===i.length&&this._activeMenuIndex[r]--,this._activeMenuIndex[r]===-1&&this._activeMenuIndex[r]++;const o=this._activeMenuIndex[r];switch(e){case"Home":this._activeMenuIndex[r]=0;break;case"End":this._activeMenuIndex[r]=i.length-1;break;case"ArrowUp":this._activeMenuIndex[r]=this._activeMenuIndex[r]<=0?i.length-1:this._activeMenuIndex[r]-1;break;case"ArrowDown":this._activeMenuIndex[r]=this._activeMenuIndex[r]===i.length-1?0:this._activeMenuIndex[r]+1}if(e==="Tab"&&t&&this._activeMenuIndex[r]>=0&&this._activeMenuIndex[r]--,e==="Tab"&&!t&&this._activeMenuIndex[r]<i.length&&this._activeMenuIndex[r]++,o!==this._activeMenuIndex[r]&&this._activeMenuIndex[r]>-1&&this._activeMenuIndex[r]<i.length&&!l){const n=i[this._activeMenuIndex[r]].getElementsByTagName("button");(n?.length===1?n[0]:null)?.focus()}}_focusSearch(){this._searchInput?.focus()}_focusActiveLevel(){const{level:e}=this,t=this._levelsListNode,i=t?.getElementsByTagName("li");if(!e||!t||!i)return;const l=this._facilitiesListNode?.getElementsByTagName("li");this._activeMenuIndex.menuItems=l?l.length-1:-1;const r=[];for(let o=0;o<i.length;o++){const n=i[o].getElementsByTagName("button");n?.length===1&&r.push(n[0])}r.forEach((o,n)=>{o.getAttribute("data-id")===e&&(o.focus(),this._activeMenuIndex.levels=n)})}_onItemFocus(e){const t=e.currentTarget,i=t.getAttribute("data-list-id"),l=t.getAttribute("data-id"),r=i==="sites"?this._sitesListNode:i==="facilities"?this._facilitiesListNode:i==="levels"?this._levelsListNode:null;if(!r)return;const o=r?.getElementsByTagName("li");if(!o)return;const n=[];Array.from(o).forEach(g=>{const u=g.getElementsByTagName("button");u?.length===1&&n.push(u[0])});let c=null;switch(i){case"sites":case"facilities":c="menuItems";break;case"levels":c="levels"}if(!c)return;const v=c;n.forEach((g,u)=>{g.getAttribute("data-id")===l&&this._activeMenuIndex[v]!==u&&(this._activeMenuIndex[v]=u)})}};d([h()],m.prototype,"_searchInput",void 0),d([h()],m.prototype,"enabled",null),d([h()],m.prototype,"longNames",null),d([h()],m.prototype,"minimized",null),d([h()],m.prototype,"pinnedLevels",null),d([h()],m.prototype,"site",null),d([h()],m.prototype,"facility",null),d([h()],m.prototype,"level",null),d([h()],m.prototype,"view",null),d([h({type:q})],m.prototype,"viewModel",void 0),d([h(),Z("esri/widgets/FloorFilter/t9n/FloorFilter")],m.prototype,"messages",void 0),d([h(),Z("esri/t9n/common")],m.prototype,"messagesCommon",void 0),d([h()],m.prototype,"goToOverride",null),d([h()],m.prototype,"headingLevel",void 0),d([h()],m.prototype,"icon",null),m=d([G("esri.widgets.FloorFilter")],m);const pe=m;const _e=he`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-button{box-sizing:border-box;cursor:pointer;white-space:normal;word-break:normal;color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info);justify-content:center;align-items:center;width:100%;min-height:var(--calcite-spacing-xxxl);padding:6px 7px;font-family:inherit;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out,border .125s ease-in-out;display:flex;overflow:hidden;&:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info-hover);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info-hover)}}.esri-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-text-2);border:1px solid var(--calcite-color-text-2)}.esri-button.esri-button--small{min-height:var(--calcite-spacing-xl);font-size:var(--calcite-font-size-sm)}.esri-button.esri-button--half{width:50%;display:inline-block}.esri-button.esri-button--third{width:33%;display:inline-block}.esri-button--secondary{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-button--tertiary{color:var(--calcite-color-brand);background-color:var(--calcite-color-transparent);border-color:var(--calcite-color-transparent)}.esri-button--tertiary:hover{color:var(--calcite-color-brand-hover);background-color:var(--calcite-color-foreground-2);border-color:var(--calcite-color-transparent)}.esri-button--disabled{opacity:.4;pointer-events:none}.esri-button--drill-in{outline-offset:-4px;cursor:pointer;text-align:unset;background-color:var(--calcite-color-foreground-1);border:none;border-radius:2px;justify-content:space-between;align-items:center;margin:var(--calcite-spacing-md) 7px;padding:var(--calcite-spacing-md) 7px;text-decoration:none;transition:background-color .125s ease-in-out;display:flex;box-shadow:0 0 0 1px #adadad4d}.esri-button--drill-in:hover,.esri-button--drill-in:focus{background-color:var(--calcite-color-foreground-2)}.esri-button--drill-in__title{font-size:var(--calcite-font-size)}.esri-button--drill-in [class^=esri-icon-],.esri-button--drill-in [class*=" esri-icon-"]{padding:0 7px}.esri-widget--button{cursor:pointer;text-align:center;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);flex-flow:row;justify-content:center;align-items:center;width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);margin:0;padding:0;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out;display:flex;overflow:hidden}.esri-widget--button:is(calcite-button):not(:hover){--calcite-icon-color: var(--calcite-color-text-3)}.esri-widget--button:not([appearance]),.esri-widget--button[appearance=solid]{--calcite-color-foreground-3: var(--calcite-color-foreground-1)}.esri-widget--button:is(calcite-button){--calcite-offset-invert-focus: 1}.esri-widget--button calcite-loader[inline]{margin:auto}.esri-button--secondary{color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);&:hover{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-status-info);border:1px solid var(--calcite-color-status-info)}}:host{display:flex;--arcgis-floor-filter-align-items: flex-start;--arcgis-internal-floor-filter-column-direction: column;--arcgis-internal-floor-filter-button-border-width: 1px 0 0;--arcgis-internal-floor-filter-button-display: flex;--arcgis-internal-floor-filter-menu-width: 300px;--arcgis-internal-floor-filter-menu-max-height: 240px;--arcgis-internal-floor-filter-levels-max-height: 156px}.esri-floor-filter{background:0 0;border:none;flex-direction:var(--arcgis-row-direction);display:flex;box-shadow:none!important}.esri-widget--button{cursor:pointer;text-align:center;color:var(--calcite-color-text-3);background:var(--calcite-color-foreground-1);flex-flow:row;justify-content:center;align-items:center;width:32px;height:32px;margin:0;padding:0;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out;display:flex;overflow:hidden}.esri-widget--button-active{color:var(--calcite-color-text-highlight)!important;background:var(--calcite-color-foreground-current)!important}.esri-floor-filter__icon-flip{transform:var(--arcgis-collapse-icon-flip)}.esri-floor-filter__position--top{align-items:var(--arcgis-floor-filter-align-items)}.esri-floor-filter__position--top .esri-floor-filter__levels-container,.esri-floor-filter__position--top .esri-floor-filter__close-levels-button,.esri-floor-filter__position--top .esri-floor-filter__zoom-button,.esri-floor-filter__position--top .esri-floor-filter__zoom-button--levels,.esri-floor-filter__position--top .esri-floor-filter__minimize-toggle-button{border-width:var(--arcgis-internal-floor-filter-button-border-width)}.esri-floor-filter__button-container{display:flex;flex-direction:var(--arcgis-internal-floor-filter-column-direction)}.esri-floor-filter__layout--collapsed .esri-floor-filter__button-container{max-width:48px}.esri-floor-filter__layout--expanded .esri-floor-filter__button-container{max-width:300px}.esri-floor-filter__layout--collapsed .esri-floor-filter__button-container .esri-floor-filter__browse-button{border:none;width:48px;height:48px;padding:12px}.esri-floor-filter__layout--collapsed .esri-floor-filter__button-container .esri-floor-filter__zoom-button{border-style:solid;border-color:var(--calcite-color-border-1);width:48px;height:48px;padding:12px}.esri-floor-filter__layout--collapsed .esri-floor-filter__button-container .esri-floor-filter__zoom-button--levels{border-style:solid;border-color:var(--calcite-color-border-1);width:48px;height:32px;padding:8px 12px}.esri-floor-filter__layout--collapsed .esri-floor-filter__button-container .esri-floor-filter__minimize-toggle-button{border-style:solid;border-color:var(--calcite-color-border-1);width:48px;height:32px;padding:4px 12px}.esri-floor-filter__layout--expanded .esri-floor-filter__button-container .esri-floor-filter__button-info{inline-size:100%}.esri-floor-filter__layout--expanded .esri-floor-filter__button-container .esri-floor-filter__browse-button{border:none;width:auto;height:48px;padding:12px}.esri-floor-filter__layout--expanded .esri-floor-filter__button-container .esri-floor-filter__level-button{text-align:start;justify-content:flex-start;padding:16px}.esri-floor-filter__layout--expanded .esri-floor-filter__button-container .esri-floor-filter__zoom-button{border-style:solid;border-color:var(--calcite-color-border-1);width:auto;height:48px;padding:12px}.esri-floor-filter__layout--expanded .esri-floor-filter__button-container .esri-floor-filter__zoom-button--levels{border-style:solid;border-color:var(--calcite-color-border-1);width:auto;height:32px;padding:8px 12px}.esri-floor-filter__layout--expanded .esri-floor-filter__button-container .esri-floor-filter__minimize-toggle-button{border-style:solid;border-color:var(--calcite-color-border-1);width:auto;height:32px;padding:4px 12px}.esri-floor-filter__layout--expanded .esri-floor-filter__button-info{gap:var(--calcite-spacing-sm)}.esri-floor-filter__button-container .esri-floor-filter__button-info{display:flex;align-items:center}.esri-floor-filter__level-button{border:none;width:100%;height:48px}.esri-floor-filter__levels-container{margin:unset;padding:unset;scrollbar-width:thin;border-style:solid;border-color:var(--calcite-color-border-1);width:100%;max-height:var(--arcgis-internal-floor-filter-levels-max-height);list-style-type:none;overflow:auto}.esri-floor-filter__levels-container .esri-widget--button-active{font-weight:var(--calcite-font-weight-semibold)}.esri-floor-filter__levels-container::-webkit-scrollbar{width:6px}.esri-floor-filter__levels-container::-webkit-scrollbar-track{background:var(--calcite-color-text-1)}.esri-floor-filter__levels-container::-webkit-scrollbar-thumb{background-color:var(--calcite-color-transparent-tint);border:3px solid var(--calcite-color-transparent-tint);border-radius:20px}.esri-floor-filter__button-container{box-shadow:0 1px 2px #0000004d}.esri-floor-filter__filter-menu{background:var(--calcite-color-foreground-1);flex-direction:column;align-items:stretch;width:var(--arcgis-internal-floor-filter-menu-width);max-height:var(--arcgis-internal-floor-filter-menu-max-height);display:flex;box-shadow:0 1px 2px #0000004d}.esri-floor-filter__filter-menu .esri-floor-filter__filter-menu-header{color:var(--calcite-color-text-2);flex-direction:row;align-items:stretch;height:auto;line-height:var(--calcite-font-line-height-relative-tight);display:flex;box-shadow:0 .5px var(--calcite-color-foreground-3)}.esri-floor-filter__filter-menu-header .esri-floor-filter__icon-close{color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;align-items:center;padding:20px 10px}.esri-floor-filter__filter-menu .esri-floor-filter__filter-menu-header-back{margin:unset;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;border-inline-end:1px solid var(--calcite-color-border-1);justify-content:center;align-items:center;min-width:28px;padding:20px 0;display:flex}.esri-floor-filter__filter-menu .esri-floor-filter__filter-menu-header-text-group{flex-direction:column;justify-content:center;padding:12px;display:flex;flex:1}.esri-floor-filter__filter-menu .esri-floor-filter__filter-menu-header-text{margin:unset;text-overflow:ellipsis;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;font-size:var(--calcite-font-size-md);font-style:normal;font-weight:var(--calcite-font-weight-semibold);display:-webkit-box;overflow:hidden}.esri-floor-filter__filter-menu .esri-floor-filter__filter-menu-header-subtext{text-overflow:ellipsis;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;margin:4px 0 0;font-size:var(--calcite-font-size);font-style:normal;font-weight:var(--calcite-font-weight-normal);display:-webkit-box;overflow:hidden}.esri-floor-filter__filter-menu .esri-floor-filter__icon-close:hover{cursor:pointer;color:var(--calcite-color-text-1);background:var(--calcite-color-foreground-2)}.esri-floor-filter__filter-menu .esri-floor-filter__filter-menu-search{background:var(--calcite-color-foreground-2);align-items:center;margin-top:.5px;margin-bottom:1px;padding:10px;display:flex;gap:6px;box-shadow:0 .5px var(--calcite-color-foreground-3)}.esri-floor-filter__filter-menu-search-input{color:var(--calcite-color-text-2);background:0 0;border:none;outline:none;width:100%;font-size:var(--calcite-font-size)}.esri-floor-filter__filter-menu .esri-floor-filter__filter-menu-items{margin:unset;padding:unset;color:var(--calcite-color-text-2);width:100%;max-height:300px;list-style-type:none;overflow-y:auto}.esri-floor-filter__filter-menu-site:hover,.esri-floor-filter__filter-menu-site:focus,.esri-floor-filter__filter-menu-facility:hover,.esri-floor-filter__filter-menu-facility:focus,.esri-floor-filter__level-button:focus,.esri-floor-filter__level-button:hover,.esri-widget--button:hover,.esri-floor-filter__filter-menu-header-back:hover{cursor:pointer;background:var(--calcite-color-foreground-2)}.esri-floor-filter__filter-menu-site:active,.esri-floor-filter__filter-menu-facility:active{color:var(--calcite-color-text-highlight);background-color:var(--calcite-color-foreground-current)}.esri-floor-filter__filter-menu-site,.esri-floor-filter__filter-menu-facility{color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1);border:none;flex-direction:row;align-items:center;gap:10px;inline-size:100%;line-height:var(--calcite-font-line-height-relative-tight);padding:18px;display:flex}.esri-floor-filter__filter-menu-site .esri-floor-filter__icon-left{transform:rotate(180deg)}.esri-floor-filter__filter-menu-item-name{font-size:var(--calcite-font-size)}.esri-floor-filter__filter-menu-item-name--selected{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size);font-weight:var(--calcite-font-weight-bold)}.esri-floor-filter__filter-menu-item-name,.esri-floor-filter__filter-menu-item-name--selected{text-align:start;flex:1}.esri-floor-filter__selected-item-circle{background:var(--calcite-color-brand-hover);border-radius:50%;width:4px;height:4px;margin-inline-start:-10px}.esri-floor-filter__separator{box-shadow:none;background:0 0;border:none;width:10px}.esri-expand__content{width:max-content}.esri-floor-filter__zoom-button,.esri-floor-filter__zoom-button--levels,.esri-floor-filter__minimize-toggle-button{display:var(--arcgis-internal-floor-filter-button-display)}.esri-floor-filter__close-levels-button{background:var(--calcite-color-foreground-2);border-style:solid;border-color:var(--calcite-color-border-1);width:48px;height:48px;padding:12px}`,me=de(pe),$=class $ extends ae{constructor(){super(...arguments),this.widget=me(this),this.viewModel=this.widget.viewModel,this.view=this.widget.view,this.autoDestroyDisabled=!1,this.facility=this.widget.facility,this.headingLevel=this.widget.headingLevel,this.icon=this.widget.icon,this.label=this.widget.label,this.level=this.widget.level,this.longNames=this.widget.longNames,this.site=this.widget.site,this.arcgisReady=ce()}async destroy(){await this.manager.destroy()}async updateWebDocument(t){this.widget?.updateWebDocument(t)}};$.properties={view:0,autoDestroyDisabled:5,facility:3,headingLevel:9,icon:1,label:1,level:3,longNames:5,position:1,referenceElement:1,site:3},$.styles=_e;let E=$;ue("arcgis-floor-filter",E);export{E as ArcgisFloorFilter};
