import{L as b,b as f,d as p,I as $,i as v,l as I}from"./index-BrQW8HOS.js";import{i as c}from"./sanitizerUtils-3YSXsAfy.js";import{U as _,c as w,b as y,W as F}from"./feature-utils-BrGc70Ta.js";import{a as g}from"./stringUtils-BTK5CX_y.js";const A=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/iu,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/iu,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/iu,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/iu,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function N(u,a){const e=A.find(r=>r.pattern.test(a));if(!e)return a;const s=a.match(e.pattern)?.[2],l=g(g(e.label,{messages:u,hierPart:s}),{appName:e.appName}),t=e.target?` target="${e.target}"`:"",n=e.target==="_blank"?' rel="noreferrer"':"";return c.sanitizeUrl(new URL(a,window.location.origin).toString()).replace(e.pattern,`<a${t} href="$1"${n}>${l}</a>`)}const x=v`.arcgis-feature-fields__table{border:none;width:100%;border-collapse:collapse;color:var(--calcite-color-text-2)}.arcgis-feature-fields__table caption{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.arcgis-feature-fields__table tr:nth-child(odd){background-color:var(--calcite-color-foreground-1)}.arcgis-feature-fields__table tr:nth-child(2n){background-color:var(--calcite-color-foreground-2)}.arcgis-feature-fields__table tr a{color:var(--calcite-color-text-link)}.arcgis-feature-fields__table tr a:hover,.arcgis-feature-fields__table tr a:focus{color:var(--calcite-color-brand-hover)}.arcgis-feature-fields__table tr td,.arcgis-feature-fields__table tr th{padding:var(--calcite-spacing-xs) var(--calcite-spacing-sm);vertical-align:top;word-break:break-word;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular);line-height:var(--calcite-font-line-height-relative-normal)}.arcgis-feature-fields__table tr th{border-inline-end:var(--calcite-border-width-md) solid var(--calcite-color-border-3);width:50%;text-align:start}.arcgis-feature-fields__table tr td{width:50%}`,h="arcgis-feature-fields",m={base:h,table:`${h}__table`},o=class o extends b{constructor(){super(...arguments),this.headingLevel=2}get formattedFieldInfos(){const{expressionInfos:a,fieldInfos:e,layer:s,graphic:l,isContentFieldInfos:t}=this,n=[];return e?.forEach(r=>{if(!(!("visible"in r)||r.visible))return;const i=r.clone();i.label=_({fieldInfo:i,expressionInfos:a,layer:s,graphic:l,isContentFieldInfos:t}),w(s)&&y({fieldInfo:r,graphic:l})&&(i.fieldFormat=F({fieldInfo:i,isContentFieldInfos:t,layer:s})),n.push(i)}),n}render(){return p`<div class=${f(m.base)}><arcgis-feature-element-info .heading=${this.heading} .description=${this.description} .headingLevel=${this.headingLevel}></arcgis-feature-element-info>${this._renderFields()}</div>`}_renderFieldInfo(a){const{values:e}=this,s=a.fieldName||"",l=a.label||s,t=e?e[s]==null?"":e[s]:"",n=a?.fieldFormat?.type==="date-time",r={openInApp:this.messages?.openInApp??"",view:this.messages?.view??""},i=typeof t=="number"&&!n?$(`${t}`):typeof t=="string"?N(r,t):`${t}`;return p`<tr><th .innerHTML=${c.sanitize(l)??""}></th><td .innerHTML=${c.sanitize(i)??""}></td></tr>`}_renderFields(){const{formattedFieldInfos:a}=this;return a?.length?p`<table class=${f(m.table)}><caption>${this.messages?.fieldsSummary}</caption><tbody>${a.map(e=>this._renderFieldInfo(e))}</tbody></table>`:null}};o.properties={values:0,description:1,expressionInfos:0,fieldInfos:0,heading:1,isContentFieldInfos:5,graphic:0,layer:0,headingLevel:9,messages:0},o.styles=x;let d=o;I("arcgis-feature-fields",d);export{d as ArcgisFeatureFields};
