import{a7 as B,aX as x,p8 as R,eN as D,e$ as U,oz as j,al as P,aj as O,oA as W,oB as E,g0 as F,ai as C,e_ as G,eX as _,a5 as m,x as y,y as N,L as V,b as X,c as A,j as I,w as Y,bY as Z,d as u,_ as b,e as z,Q as q,f as v,P as M,v as Q,i as H,l as J}from"./index-aRi8Xk-b.js";function K(i){return i>.5?{min:.5,max:1}:i>.2?{min:.2,max:.5}:{min:.1,max:.2}}function T(i,e){switch(e){case"metric":return i>1e3?{distance:_(i,"meters","kilometers"),unit:"kilometer"}:i>1?{distance:i,unit:"meter"}:i>.01?{distance:_(i,"meters","centimeters"),unit:"centimeter"}:{distance:_(i,"meters","millimeters"),unit:"millimeter"};case"imperial":return i>1609.344?{distance:_(i,"meters","miles"),unit:"mile"}:i>.3048?{distance:_(i,"meters","feet"),unit:"foot"}:{distance:_(i,"meters","inches"),unit:"inch"}}}function ee(i){const{isWebMercator:e,wkt:t,wkt2:r}=i;return e||((r||t)?.includes("WGS_1984_Web_Mercator")??!1)}function S({state:{paddedViewState:i},spatialReference:e,width:t}){return e.isWrappable&&i.worldScreenWidth<t}function L(i,e){const{x:t,y:r}=i?G(e,!0):e;return[t,r]}let f=class extends B{constructor(i){super(i),this.scaleComputedFrom=x(),this.view=null}get state(){return this.view?.ready&&this.view.type==="2d"?R(this.view)&&!this.view.inGeographicLayout?"disabled":"ready":"disabled"}getScaleBarProperties(i,e){if(this.state==="disabled"||isNaN(i)||!e||!this.view)return null;const t=this._getDistanceInMeters();return t==null?null:this._getScaleBarProps(i,t,e)}_getDistanceInMeters(){const{state:i,spatialReference:e}=this.view;if(!D(e))return null;const{isGeographic:t}=e,r=ee(e);if(!t&&!r)return i.extent.width*(U(e)??1);const[n,a]=this._getScaleMeasuringPoints(),l=r||t&&!j(e)?P.WGS84:e,p=new O({paths:[[L(r,n),L(r,a)]],spatialReference:l}),s=W(p,10);let d;try{[d]=E([s],"meters")}catch{return null}return d}_getScaleMeasuringPoints(){const i=this.view,{width:e,height:t,position:r,spatialReference:n}=i;if(S(i)){const s=F(n),{valid:d}=s;return[new C(d[0],0,n),new C(d[1],0,n)]}let a=this.scaleComputedFrom.y-r[1];a>t?a=t:a<0&&(a=0);const l=x(0,a),p=x(e,a);return[i.toMap(l),i.toMap(p)]}_getScaleBarProps(i,e,t){const r=this.view,n=i*e/(S(r)?r.state.paddedViewState.worldScreenWidth:r.width);if(n<.001)return null;const a=T(n,t),{distance:l,unit:p}=a;let s=l,d=0;for(;s>=1;)s/=10,d++;const{min:h,max:g}=K(s),$=g/s>=s/h?h:g;return{length:i*($/s),value:10**d*$,unit:p}}};m([y()],f.prototype,"scaleComputedFrom",void 0),m([y({readOnly:!0})],f.prototype,"state",null),m([y()],f.prototype,"view",void 0),f=m([N("esri.widgets.ScaleBar.ScaleBarViewModel")],f);const ie=f;function te(i=0,e=0){return{x:i,y:e}}const c="esri-scale-bar",o={base:c,labelContainer:`${c}__label-container`,rulerLabelContainer:`${c}__label-container--ruler`,lineLabelContainer:`${c}__label-container--line`,topLabelContainer:`${c}__label-container--top`,bottomLabelContainer:`${c}__label-container--bottom`,label:`${c}__label`,line:`${c}__line`,topLine:`${c}__line--top`,bottomLine:`${c}__line--bottom`,ruler:`${c}__ruler`,barContainer:`${c}__bar-container`,rulerBarContainer:`${c}__bar-container--ruler`,lineBarContainer:`${c}__bar-container--line`},re=H`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-scale-bar{box-shadow:none!important;background:0 0}.esri-component.esri-scale-bar.esri-widget,.esri-scale-bar.esri-widget{box-shadow:none;background:0 0}.esri-scale-bar__bar-container{align-items:flex-end;font-size:var(--calcite-font-size-sm);transition:width .25s ease-in-out;display:flex;position:relative}.esri-scale-bar__bar-container--ruler{flex-direction:column}.esri-scale-bar__ruler{--color-ruler-background: var(--calcite-color-inverse);--color-ruler-foreground: var(--calcite-color-foreground-1);height:var(--calcite-spacing-xs);box-shadow:0 0 0 1px var(--calcite-color-text-1),0 1px 2px var(--calcite-color-foreground-1)}.esri-scale-bar__ruler:before,.esri-scale-bar__ruler:after{content:"";display:block;height:50%;background-image:linear-gradient(to right,var(--color-ruler-foreground) 0%,var(--color-ruler-foreground) 25%,var(--color-ruler-background) 25%,var(--color-ruler-background) 50%,var(--color-ruler-foreground) 50%,var(--color-ruler-foreground) 75%,var(--color-ruler-background) 75%,var(--color-ruler-background) 100%)}.esri-scale-bar__ruler:after{transform:scaleX(-1)}.esri-scale-bar__bar-container--line:last-child{align-items:flex-start}.esri-scale-bar__line{--line-thickness: 2px;--tic-height: 1.5em;--border-style: var(--line-thickness) solid var(--calcite-color-text-1);background-color:color-mix(in srgb,var(--calcite-color-foreground-1) 50%,transparent);height:var(--tic-height);position:relative;left:0}.esri-scale-bar__line--top{border-bottom:var(--border-style)}.esri-scale-bar__line--bottom{border-top:var(--border-style);top:calc(-1 * var(--line-thickness))}.esri-scale-bar__line--top:before,.esri-scale-bar__line--top:after,.esri-scale-bar__line--bottom:before,.esri-scale-bar__line--bottom:after{content:"";background-color:color-mix(in srgb,var(--calcite-color-foreground-1) 50%,transparent);border-right:var(--border-style);width:1px;height:var(--tic-height);display:block;position:absolute}.esri-scale-bar__line--top:before{bottom:calc(-1 * var(--line-thickness));left:0}.esri-scale-bar__line--top:after{bottom:calc(-1 * var(--line-thickness));right:0}.esri-scale-bar__line--bottom:before{top:calc(-1 * var(--line-thickness));left:0}.esri-scale-bar__line--bottom:after{height:var(--tic-height);top:calc(-1 * var(--line-thickness));right:0}.esri-scale-bar__label-container--line{position:absolute;left:0}.esri-scale-bar__label-container--ruler{justify-content:space-between;width:100%;display:flex;position:relative}.esri-scale-bar__label-container--ruler .esri-scale-bar__label{text-shadow:1px 0 var(--calcite-color-foreground-1),0 1px var(--calcite-color-foreground-1),1px 1px var(--calcite-color-foreground-1),-1px 0 var(--calcite-color-foreground-1),0 -1px var(--calcite-color-foreground-1),-1px -1px var(--calcite-color-foreground-1);padding:6px 0 0}.esri-scale-bar__label-container--top{bottom:0}.esri-scale-bar__label-container--bottom{top:1px}.esri-scale-bar__label{white-space:nowrap;color:var(--calcite-color-text-1);font-size:inherit;padding:0 7px;font-weight:var(--calcite-font-weight-semibold)}:dir(rtl) .esri-scale-bar__ruler{margin:0 .5ch 0 2ch}:dir(rtl) .esri-scale-bar__label-container--line{left:auto;right:0}`,ae=Q(ie),w=class w extends V{constructor(){super(...arguments),this._defaultUnit="metric",this.messages=X(),this.viewModel=ae(this),this.view=this.viewModel.view,this.autoDestroyDisabled=!1,this.barStyle="line",this.icon="actual-size",this.arcgisReady=A()}get unit(){return this._unit??this._defaultUnit}set unit(e){this._unit=e}async destroy(){await this.manager.destroy()}updated(){this._handleRootCreateOrUpdate()}loaded(){this.manager.onLifecycle(()=>I(()=>({defaultUnit:this.viewModel.view?Y(this.viewModel.view):void 0,stationary:this.viewModel.view?.stationary,center:this.viewModel.view?.center,scale:this.viewModel.view?.scale,zoom:this.viewModel.view?.zoom}),({defaultUnit:e,stationary:t})=>{this._defaultUnit=e??"metric",t&&this.requestUpdate()},{initial:!0}))}_handleContainerRef(e){e!==void 0&&this._handleRootCreateOrUpdate()}_handleRootCreateOrUpdate(){const e=this.el;if(!this.viewModel&&!e.childElem)return;const t=e.childElem?.getBoundingClientRect();if(!t)return;const{scaleComputedFrom:r}=this.viewModel,n=t.left+window.pageXOffset,a=t.top+window.pageYOffset,l=te(n,a);(l.x!==r.x||l.y!==r.y)&&(this.viewModel.scaleComputedFrom=l)}_formatDistance(e,t){return Z(e,{style:"unit",unit:t,unitDisplay:"short"})}render(){const e=this.viewModel.state==="disabled",t={[z.disabled]:e};let r,n;if(!e){const{unit:a,barStyle:l}=this,p=a==="imperial"||a==="dual",s=a==="metric"||a==="dual",d=100,h=a==="dual"?"line":l;if(p){const g=this.viewModel.getScaleBarProperties(d,"imperial");g&&(n=h==="ruler"?this._renderRuler(g):this._renderLine(g,"bottom"))}if(s){const g=this.viewModel.getScaleBarProperties(d,"metric");g&&(r=h==="ruler"?this._renderRuler(g):this._renderLine(g,"top"))}}return v`<div class=${u(b(o.base,z.widget,t))} ${q(this._handleContainerRef)}>${r}${n}</div>`}_renderRuler(e){const{length:t,unit:r,value:n}=e,a=Math.round(t),l=this._formatDistance(n,r);return v`<div class=${u(b(o.barContainer,o.rulerBarContainer))}><div class=${u(o.ruler)} style=${M({width:`${a}px`})}></div><div class=${u(b(o.labelContainer,o.rulerLabelContainer))}><div class=${u(o.label)}>0</div><div class=${u(o.label)}>${l}</div></div></div>`}_renderLine(e,t){const{length:r,unit:n,value:a}=e,l=Math.round(r),p=this._formatDistance(a,n),s={[o.topLabelContainer]:t==="top",[o.bottomLabelContainer]:t==="bottom"},d=v`<div class=${u(b(o.labelContainer,o.lineLabelContainer,s))}><div class=${u(o.label)}>${p}</div></div>`,h={[o.topLine]:t==="top",[o.bottomLine]:t==="bottom"},g=v`<div class=${u(b(o.line,h))} style=${M({width:`${l}px`})}></div>`;return v`<div class=${u(b(o.barContainer,o.lineBarContainer))}>${[g,d]}</div>`}};w.properties={view:0,autoDestroyDisabled:5,barStyle:1,icon:1,label:1,messageOverrides:0,position:3,referenceElement:1,unit:1},w.styles=re;let k=w;J("arcgis-scale-bar",k);export{k as ArcgisScaleBar};
