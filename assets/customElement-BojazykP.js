import{L as f,C as v,c as d,f as o,Q as b,i as I,l as C}from"./index-aRi8Xk-b.js";const k=I`:host{display:none;background:#bdf2c4}:host([selected]){display:flex}.properties-buttons{display:flex}`,u=class u extends f{constructor(){super(...arguments),this._flowItemElement=v(),this._switchToVersion=!0,this._switchToVersionCheckboxElement=v(),this._versionNameInputElement=v(),this.selected=!1,this.showBackButton=!1,this.arcgisAlterVersion=d(),this.arcgisCreateVersion=d(),this.arcgisFlowItemBack=d(),this.arcgisFlowItemClose=d()}load(){const{versionPropertiesElementProps:{versionInfo:e}}=this;e?(this._mode="edit",this._fullVersionName=e.versionIdentifier.name,this._ownerName=this._fullVersionName.substring(0,this._fullVersionName.lastIndexOf(".")),this._versionName=this._fullVersionName.substring(this._fullVersionName.lastIndexOf(".")+1)):this._mode="create"}updated(){this._mode==="create"&&this._versionNameInputElement.value?.setFocus()}async setFocus(){this._flowItemElement.value?.setFocus()}goBack(){}_handleCancel(){this.arcgisFlowItemBack.emit()}_handleChange(e){const{_mode:i,_ownerName:h,_versionName:p,versionPropertiesElementProps:{currentUser:m,isVersionAdministrator:t,serviceUrl:r,versionInfo:a}}=this;let{_alterVersionParameters:c,_createVersionParameters:s}=this;switch(i==="create"&&(s||(s={access:"public",description:"",featureServerUrl:r,ownerName:m,versionName:""})),i==="edit"&&(c||(c={featureServerUrl:r,versionIdentifier:a.versionIdentifier,ownerName:h,versionName:p,access:a.access,description:a.description})),e.type){case"calciteChipGroupSelect":{const n=e.target.label,l=e.target.selectedItems[0].label;i==="create"&&(s={...s,[n]:l}),i==="edit"&&(c={...c,[n]:l});break}case"calciteInputTextInput":{const n=e.target.name,l=e.target.value;i==="create"&&(s={...s,[n]:l}),i==="edit"&&(c={...c,[n]:l});break}case"calciteTextAreaInput":{const n=e.target.name,l=e.target.value;i==="create"&&(s={...s,[n]:l}),i==="edit"&&(c={...c,[n]:l});break}}i==="create"&&(s.access!=="public"&&m.toUpperCase()!==s.ownerName?.toUpperCase()&&!t?(this._switchToVersionCheckboxElement.value.checked=!1,this._switchToVersionCheckboxElement.value.disabled=!0,this._switchToVersion=!1):this._switchToVersionCheckboxElement.value.disabled=!1,this._createVersionParameters=s),i==="edit"&&(this._alterVersionParameters=c)}_handleClose(){this.arcgisFlowItemClose.emit()}_handleSave(){const{_alterVersionParameters:e,_createVersionParameters:i,_mode:h,_switchToVersion:p}=this;h==="create"&&this.arcgisCreateVersion.emit({createVersionParameters:i,switchToVersion:p}),h==="edit"&&this.arcgisAlterVersion.emit({alterVersionParameters:e})}_handleSwitchToVersionChange(e){this._switchToVersion=e.target.checked}render(){const{selected:e,showBackButton:i,versionPropertiesElementProps:{closable:h,currentUser:p,state:m,strings:t,versionInfo:r},_mode:a,_ownerName:c,_versionName:s}=this,n=o`<div class="properties-buttons"><calcite-button appearance=outline width=half @click=${this._handleCancel}>${t.actions.cancelSave}</calcite-button><calcite-button width=half @click=${this._handleSave}>${t.actions.saveVersion}</calcite-button></div>`,l=o`<calcite-label>${t.input.versionAccess}<calcite-chip-group label=access @calciteChipGroupSelect=${this._handleChange} selection-mode=single-persist><calcite-chip .selected=${a==="edit"&&r.access==="public"||a==="create"} label=public>${t.accessLevels.public}</calcite-chip><calcite-chip .selected=${a==="edit"&&r.access==="protected"} label=protected>${t.accessLevels.protected}</calcite-chip><calcite-chip .selected=${a==="edit"&&r.access==="private"} label=private>${t.accessLevels.private}</calcite-chip></calcite-chip-group></calcite-label>`,$=o`<calcite-label>${t.input.versionDescription}<calcite-text-area name=description @calciteTextAreaInput=${this._handleChange} resize=vertical .value=${a==="edit"?r.description:""}></calcite-text-area></calcite-label>`,w=o`<calcite-label>${t.input.versionName}<calcite-input-text name=versionName @calciteInputTextInput=${this._handleChange} max-length=62 .value=${a==="edit"?s:""} ${b(this._versionNameInputElement)}></calcite-input-text></calcite-label>`,g=o`<calcite-label>${t.input.versionOwner}<calcite-input-text name=ownerName @calciteInputTextInput=${this._handleChange} .value=${a==="edit"?c:p}></calcite-input-text></calcite-label>`,V=a==="create"?o`<calcite-label layout=inline><calcite-checkbox checked name=switchToVersion @calciteCheckboxChange=${this._handleSwitchToVersionChange} ${b(this._switchToVersionCheckboxElement)}></calcite-checkbox>${t.actions.switchToVersion}</calcite-label>`:void 0;return o`<calcite-flow-item .closable=${h} .description=${r?r.versionIdentifier.name:""} .heading=${r?t.actions.editVersion:t.actions.newVersion} .selected=${e} .showBackButton=${i} @calciteFlowItemClose=${this._handleClose} ${b(this._flowItemElement)}><calcite-panel .loading=${m==="executing"}><calcite-block .label=${t.headers.versionProperties} open>${w}${$}${l}${g}${V}${n}</calcite-block></calcite-panel></calcite-flow-item>`}};u.properties={selected:7,showBackButton:7,versionPropertiesElementProps:0},u.styles=k;let _=u;C("arcgis-version-management-version-properties",_);export{_ as ArcgisVersionManagementVersionProperties};
