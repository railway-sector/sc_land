import{L as c,u as g,c as h,bH as o,f as n,b as p,k as m,d as a,i as f,l as u}from"./index-BrQW8HOS.js";import{_ as v}from"./LegendViewModel-BHOwxYDq.js";import{l as _}from"./useHandles-q_p6ew3d.js";import{s as y}from"./useT9n-Cr4kUTAO.js";import{v as w}from"./useViewModel-DDXl3W0X.js";import{e as l}from"./globalCss-UPH6MMtF.js";import"./featureReductionUtils-Caulfaw_.js";import"./EffectView-c1UGgQSH.js";import"./ExportImageParameters-BgkEQlXw.js";import"./floorFilterUtils-DKzVzLpH.js";import"./sublayerUtils-BEQnBRaB.js";import"./pixelRangeUtils-BvOub3JO.js";import"./rendererConversion-BfDljF_Y.js";import"./cimSymbolUtils-CmFYUdpV.js";import"./symbolUtils-C3MaPSzp.js";import"./gfxUtils-DDSu4Luj.js";import"./svgUtils-BB2umWtg.js";import"./mat2df32-Dpt2CT5P.js";import"./mat2d-BbBq4Byx.js";import"./utils-6_NAbAK3.js";import"./utils-jHLUFzoE.js";import"./utils-BJ7fw6dI.js";import"./previewSymbol3D-D79fd6qD.js";import"./previewUtils-ZcsefAEI.js";import"./webStyleSymbolUtils-UgSam_rJ.js";import"./devEnvironmentUtils-8WtPGj6h.js";import"./webStyleAcceptedFormats-CG7ZQ6BV.js";import"./previewCIMSymbol-DvFqDqA7.js";import"./CIMSymbolHelper-BlfMWOZ7.js";import"./BidiEngine-BvER9tXK.js";import"./labelPoint-CgDrQQb-.js";import"./rasterizingUtils-Bv-DctWv.js";import"./Rect-CUzevAry.js";import"./BoundingBox-BuUpzzb5.js";import"./CIMSymbolRasterizer-Cscg1bz_.js";import"./CIMResourceManager-CKLYpEab.js";import"./OverrideHelper-Dz66q1dD.js";import"./callExpressionWithFeature-DHWn7DZ3.js";import"./utils-DSU3hqCN.js";import"./useView-Cya0Zpns.js";const b=f`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}:host{overflow:auto;width:var(--arcgis-legend-internal-width, 300px)}:host([card-style-layout="side-by-side"]){--arcgis-legend-internal-width: auto}`,x=w(v),t=class t extends c{constructor(){super(...arguments),this.messages=y({}),this.final=_("destroy"),this.viewModel=x(this),this._isCardStyle=!1,this.view=this.viewModel.view,this.icon="legend",this.activeLayerInfos=this.viewModel.activeLayerInfos,this.basemapLegendVisible=this.viewModel.basemapLegendVisible,this.headingLevel=3,this.hideLayersNotInCurrentView=this.viewModel.hideLayersNotInCurrentView,this.respectLayerDefinitionExpression=this.viewModel.respectLayerDefinitionExpression,this.layerInfos=this.viewModel.layerInfos,this.loading=this.viewModel.loading,this.legendStyle="classic",this.autoDestroyDisabled=!1,this.label=this.messages?.componentLabel,this.state=this.viewModel.state,this.arcgisPropertyChange=g()("state"),this.arcgisReady=h()}get ignoreLayerVisibility(){return!this.viewModel.respectLayerVisibility}set ignoreLayerVisibility(e){this.viewModel.respectLayerVisibility=!e}get respectLayerVisibilityDisabled(){return!this.viewModel.respectLayerVisibility}set respectLayerVisibilityDisabled(e){this.viewModel.respectLayerVisibility=!e}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[o(()=>this.el.view,"resize",()=>this.requestUpdate()),o(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),n(()=>[this.cardStyleLayout,this.legendStyle,typeof this.legendStyle=="object"?this.legendStyle.type:void 0,typeof this.legendStyle=="object"?this.legendStyle.layout:void 0],()=>{const e=this.legendStyle,i=typeof e=="object"?e:{type:e};this._isCardStyle=i.type==="card",this._isCardStyle?(this.cardStyleLayout=this.cardStyleLayout||i.layout||"auto",this.cardStyleLayout==="auto"&&this.el.closest("arcgis-expand")&&(this.cardStyleLayout="stack"),this.setAttribute("card-style-layout",this.cardStyleLayout)):this.removeAttribute("card-style-layout")},{initial:!0})])}_refreshActiveLayerInfos(e){e.forEach(i=>{this.final.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)}),this.requestUpdate()}render(){return a`<div class=${p(m(l.widget,{[l.panel]:!this._isCardStyle}))}>${this._isCardStyle&&this.view?a`<arcgis-legend-card-view .activeLayerInfos=${this.activeLayerInfos} .headingLevel=${this.headingLevel} .messages=${this.messages} .layout=${this.cardStyleLayout} .view=${this.view}></arcgis-legend-card-view>`:a`<arcgis-legend-classic-view .activeLayerInfos=${this.activeLayerInfos} .headingLevel=${this.headingLevel} .messages=${this.messages}></arcgis-legend-classic-view>`}</div>`}_renderOnActiveLayerInfoChange(e){const i=n(()=>e.version,()=>this.requestUpdate());this.final.addHandles(i,`version_${e.layer.uid}`);const d=o(()=>e.children,"change",()=>e.children.forEach(r=>this._renderOnActiveLayerInfoChange(r)));this.final.addHandles(d,`version_${e.layer.uid}`),e.children.forEach(r=>this._renderOnActiveLayerInfoChange(r))}};t.properties={_isCardStyle:16,view:0,referenceElement:1,position:1,icon:1,activeLayerInfos:0,basemapLegendVisible:5,headingLevel:9,hideLayersNotInCurrentView:5,respectLayerDefinitionExpression:5,ignoreLayerVisibility:5,respectLayerVisibilityDisabled:5,layerInfos:0,loading:39,cardStyleLayout:1,legendStyle:1,autoDestroyDisabled:5,messageOverrides:0,label:1,state:3},t.styles=b;let s=t;u("arcgis-legend",s);export{s as ArcgisLegend};
