import{L as o,f as g,b as n,d as s,k as h,i as v,l as f}from"./index-BrQW8HOS.js";import{v as m}from"./heading-CcgmnFKY.js";import{e as _}from"./globalCss-UPH6MMtF.js";import{s as u}from"./substitute-D-eLZ17Q.js";const y=v`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}:host{display:flex;flex-direction:row;position:relative;transition:max-width .25s ease-in-out;overflow-x:auto}calcite-carousel-item[selected]{flex:1;overflow:auto}.arcgis-legend--card__message{padding:.5em 1em}.arcgis-legend--card__service-caption-text{margin:0}.arcgis-legend--card__service-content{display:flex;flex:1}.arcgis-legend--card__service-content>arcgis-legend-card-element:not(:first-child){border-left:1px solid var(--calcite-color-border-2)}.arcgis-legend--card__service{border-left:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);min-width:fit-content;display:flex;flex-direction:column;flex:1}.arcgis-legend--card__service-caption-container{border-bottom:1px solid var(--calcite-color-border-2);padding:var(--calcite-spacing-md)}`,a={message:"arcgis-legend--card__message",serviceCaptionText:"arcgis-legend--card__service-caption-text",serviceContent:"arcgis-legend--card__service-content",service:"arcgis-legend--card__service",serviceCaptionContainer:"arcgis-legend--card__service-caption-container"},$=768,c=class c extends o{constructor(){super(...arguments),this.stacked=!1,this.headingLevel=3,this.layout="auto",this.type="card"}loaded(){this.manager.onLifecycle(()=>[g(()=>[this.layout,this.view.width],()=>{this.stacked=this.layout==="stack"||(!this.layout||this.layout==="auto")&&this.view.width<=$},{initial:!0})])}render(){return(this.stacked?this._renderCarousel():this._renderLayers())||s`<div class=${n(a.message)}>${this.messages.noLegend}</div>`}_renderTitle(e){return s`<div class=${n(a.serviceCaptionContainer)}>${m({class:h(a.serviceCaptionText,_.heading),level:this.headingLevel,children:e})}</div>`}_renderCarousel(){const e=[],t=this.activeLayerInfos;if(t)for(const i of t)this._renderSections(i,e);return e?.length?s`<calcite-carousel .label=${this.messages.carousel??""}>${e.map((i,r)=>s`<calcite-carousel-item .label=${u(this.messages?.pagination?.pageText??"",{index:r+1,total:e.length})}>${i}</calcite-carousel-item>`)}</calcite-carousel>`:null}_renderLayers(){const e=this.activeLayerInfos?.toArray()?.map(t=>this._renderLegendForLayer(t)).filter(Boolean);return e?.length?e:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.toArray().map(this._renderLegendForLayer,this);return s`<section class=${n(a.service)}>${this._renderTitle(e.title)}<div class=${n(a.serviceContent)}>${t}</div></section>`}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){const t=e.legendElements?.filter(Boolean);if(!t?.length)return null;const i=t.map(r=>s`<arcgis-legend-card-element .activeLayerInfo=${e} .cssEffectFilter=${e.cssEffectFilter??void 0} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${e.layer} .legendElement=${r} .messages=${this.messages}></arcgis-legend-card-element>`);return s`<section class=${n(a.service)}>${this._renderTitle(e.title)}<div class=${n(a.serviceContent)}>${i}</div></section>`}_renderSections(e,t){if(!e.ready)return;if(e.children.length)for(const r of e.children)this._renderSections(r,t);const i=e.legendElements;if(i?.length)for(const r of i){const d=s`<arcgis-legend-card-element .activeLayerInfo=${e} .cssEffectFilter=${e.cssEffectFilter??void 0} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${e.layer} .legendElement=${r} .messages=${this.messages}></arcgis-legend-card-element>`;d&&t.push(d)}}};c.properties={stacked:16,activeLayerInfos:0,headingLevel:9,messages:0,view:0,layout:1,type:32},c.styles=y;let l=c;f("arcgis-legend-card-view",l);export{l as LegendCardView};
