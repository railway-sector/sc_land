import{L as W,b as o,d as b,p as w,i as A,l as F}from"./index-CgzAF5Ey.js";import{F as H,L as q,N as u}from"./utils2-pl0dc0aQ.js";import"./stringUtils-CYW5IRJr.js";const B=A`.arcgis-spike-ramp__container{display:flex;flex-direction:row;gap:var(--calcite-spacing-sm-plus);margin-left:var(--calcite-spacing-sm)}.arcgis-spike-ramp__preview-container{display:flex;position:relative;gap:var(--calcite-spacing-sm-plus);border-bottom:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);padding:0 var(--calcite-spacing-xl)}.arcgis-spike-ramp__preview{display:flex;gap:var(--calcite-spacing-sm-plus);align-items:end}.arcgis-spike-ramp__symbol-preview{display:flex}.arcgis-spike-ramp__lines{display:flex;position:absolute;bottom:0}.arcgis-spike-ramp__labels-container{display:flex;position:relative;top:-5px;flex:1;min-width:120px}.arcgis-spike-ramp__label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:1em;word-break:break-all;font-size:var(--calcite-font-size-sm)}.arcgis-spike-ramp__label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}`,r={spikeRampContainer:"arcgis-spike-ramp__container",spikeRampPreviewContainer:"arcgis-spike-ramp__preview-container",spikeRampPreview:"arcgis-spike-ramp__preview",spikeRampSymbolPreview:"arcgis-spike-ramp__symbol-preview",spikeRampLines:"arcgis-spike-ramp__lines",spikeRampLabelsContainer:"arcgis-spike-ramp__labels-container",spikeRampLabel:"arcgis-spike-ramp__label"},D="#ddd",e=window.devicePixelRatio;function $(h){return h.infos.filter((d,t)=>t%2===0)}function f(h){return!!(h&&typeof h=="object")}const k=class k extends W{constructor(){super(...arguments),this.legendElement=null}render(){return this.legendElement.infos.length!==5?null:b`<div class=${o(r.spikeRampContainer)}><div class=${o(r.spikeRampPreviewContainer)}>${this._renderSpikeRampLines()}${this._renderSpikeRampPreview()}</div>${this._renderSpikeRampLabels()}</div>`}_renderSpikeRampPreview(){const d=this.legendElement,[t,p,m]=$(d).map(({preview:c,label:l})=>{if(!c)return null;const s=c.cloneNode(!0);return s.classList.add(r.spikeRampSymbolPreview),H(s,q(this.messages,l)),s});return!t||!p||!m?null:b`<div class=${o(r.spikeRampPreview)}><div>${m}</div><div>${p}</div><div>${t}</div></div>`}_renderSpikeRampLines(){const d=this.legendElement,[{width:t,height:p},{width:m},{width:c,height:l}]=$(d).map(({size:_})=>f(_)?{width:u(_.width),height:u(_.height)}:{width:0,height:0}),s=10,g=8,n=t+m+c+s*3,v=p,a=document.createElement("canvas");a.width=(n+s)*e,a.height=v*e,a.style.width=`${a.width/e}px`,a.style.height=`${a.height/e}px`;const i=a.getContext("2d");i.beginPath();const x=n-(t/2+s),y=0,L=n+g;i.moveTo(x*e,y*e),i.lineTo(L*e,0*e);const S=(n-g)/2,P=(p-l)/2,C=n+g,E=(p-l)/2;i.moveTo(S*e,P*e),i.lineTo(C*e,E*e);const T=c/2,z=v-l,M=n+g,j=v-l;return i.moveTo(T*e,z*e),i.lineTo(M*e,j*e),i.strokeStyle=D,i.lineWidth=.5*e,i.stroke(),b`<div class=${o(r.spikeRampLines)}>${a}</div>`}_renderSpikeRampLabels(){const d=this.legendElement,[{label:t,height:p},{label:m},{label:c,height:l}]=$(d).map(({label:a,size:i})=>({label:a,height:f(i)?u(i.height):0})),s=p-l,g={position:"absolute",top:"0"},n={position:"absolute",top:`${s/2}px`},v={position:"absolute",top:`${s}px`};return b`<div class=${o(r.spikeRampLabelsContainer)}><div class=${o(r.spikeRampLabel)} style=${w(g)}>${t}</div><div class=${o(r.spikeRampLabel)} style=${w(n)}>${m}</div><div class=${o(r.spikeRampLabel)} style=${w(v)}>${c}</div></div>`}};k.properties={legendElement:0,messages:0},k.styles=B;let R=k;F("arcgis-legend-spike-ramp",R);export{R as ArcgisLegendSpikeRamp};
