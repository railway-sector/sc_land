var _e=i=>{throw TypeError(i)};var ne=(i,t,e)=>t.has(i)||_e("Cannot "+e);var o=(i,t,e)=>(ne(i,t,"read from private field"),e?e.call(i):t.get(i)),v=(i,t,e)=>t.has(i)?_e("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),g=(i,t,e,r)=>(ne(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e),O=(i,t,e)=>(ne(i,t,"access private method"),e);import{L as Re,d as Ze,e as fe,p as Be,c as be,x as Fe,n as oe,D as Ge,f as _,g as Ye,j as qe,k as ve,q as Ke,v as Je,w as Ve,y as We,z as Qe,B as ze,C as Oe,i as Xe,E as ie,F as ei,G as we,H as ii,J as ti,K as xe,M as ri,N as ce,l as si}from"./index-CVzGOCNQ.js";const ni=Xe`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted var(--calcite-color-foreground-current)}}.esri-slider{-webkit-user-select:none;user-select:none;direction:ltr;width:100%;height:100%;display:flex}.esri-disabled{pointer-events:none}.esri-disabled .esri-slider__content,.esri-disabled .esri-slider__min,.esri-disabled .esri-slider__max{opacity:var(--calcite-opacity-light)}.esri-slider--reversed.esri-slider--horizontal{flex-direction:row-reverse}.esri-slider--reversed.esri-slider--vertical{flex-direction:column}.esri-slider--horizontal{flex-direction:row}.esri-slider--horizontal .esri-slider__content{height:auto}.esri-slider--horizontal .esri-slider__track{width:100%;height:2px}.esri-slider--horizontal .esri-slider__segment--interactive:hover{cursor:ew-resize}.esri-slider--horizontal .esri-slider__anchor{width:1px;height:100%}.esri-slider--horizontal .esri-slider__label{text-align:center;margin:0 11px;top:-30px;left:-50px}.esri-slider--horizontal .esri-slider__label-input{text-align:center}.esri-slider--horizontal .esri-slider__max,.esri-slider--horizontal .esri-slider__min{flex:none;width:50px;height:auto;margin:auto}.esri-slider--horizontal .esri-slider__ticks{width:100%;margin:9px 0 0;top:100%;left:0}.esri-slider--horizontal .esri-slider__tick{width:1px;height:5px}.esri-slider--horizontal .esri-slider__tick-label{margin-top:18px}.esri-slider--vertical{flex-direction:column-reverse}.esri-slider--vertical .esri-slider__content{flex-direction:column;width:auto}.esri-slider--vertical .esri-slider__track{flex-direction:column;flex:1 0 0;width:2px;height:100%}.esri-slider--vertical .esri-slider__segment--interactive:hover{cursor:ns-resize}.esri-slider--vertical .esri-slider__anchor{width:100%;height:1px}.esri-slider--vertical .esri-slider__label{text-align:left;top:-10px;left:20px}.esri-slider--vertical .esri-slider__max,.esri-slider--vertical .esri-slider__min{flex:0 0 22px;width:100%;margin:auto}.esri-slider--vertical .esri-slider__ticks{margin:0 0 0 11px;top:0;left:100%}.esri-slider--vertical .esri-slider__tick{width:5px;height:1px}.esri-slider--vertical .esri-slider__tick-label{margin-left:30px}.esri-slider__content{z-index:0;flex:1 0 auto;justify-content:center;align-items:center;margin:auto;line-height:0;display:flex;position:relative}.esri-slider__track{touch-action:none;background-color:var(--calcite-color-border-ghost);display:inline-block;position:relative}.esri-slider__segment{transform-origin:0 0;will-change:transform;touch-action:none;width:100%;height:100%;position:absolute;top:0;left:0}.esri-slider__segment:hover{cursor:pointer}.esri-slider__anchor{touch-action:none;-webkit-user-select:none;user-select:none;background-color:var(--calcite-color-brand);position:absolute}.esri-slider__anchor:focus .esri-slider__thumb,.esri-slider__anchor:focus .esri-slider__label{outline:inherit}.esri-slider__anchor--moving:focus .esri-slider__thumb{cursor:grabbing;border:3px solid var(--calcite-color-brand-press)}.esri-slider__anchor--moving .esri-slider__label:hover,.esri-slider__anchor--moving .esri-slider__label--interactive:hover{cursor:grabbing}.esri-slider__thumb{box-sizing:border-box;z-index:1;touch-action:none;background-color:var(--calcite-color-foreground-2);border:2px solid var(--calcite-color-brand);border-radius:16px;width:16px;height:16px;transition:all .125s ease-in-out;position:absolute;top:-7px;left:-7px}.esri-slider__thumb:hover{cursor:grab;border-width:3px;border-color:var(--calcite-color-brand-press);width:19.2px;height:19.2px;top:-8.6px;left:-8.6px}.esri-slider__label{min-width:80px;line-height:var(--calcite-font-line-height-fixed-xl);position:absolute}.esri-slider__label:hover{cursor:grab}.esri-slider__label--interactive:hover,.esri-slider__max--interactive:hover,.esri-slider__min--interactive:hover{cursor:pointer;text-decoration:underline}.esri-slider__label-input{z-index:1;width:100%;position:relative}.esri-slider__extra-content{display:inline-block}.esri-slider__max,.esri-slider__min{text-align:center;justify-content:center;align-items:center;height:22px;line-height:var(--calcite-font-line-height-fixed-xl);display:flex}.esri-slider__max--interactive:hover,.esri-slider__min--interactive:hover{background-color:var(--calcite-color-foreground-2)}.esri-slider__range-input{text-align:center;width:100%;padding:1px 0}.esri-slider__ticks{z-index:0;height:100%;display:inline-block;position:absolute}.esri-slider__tick{background:var(--calcite-color-foreground-1);position:absolute}.esri-slider__tick-label{width:max-content;position:absolute}:dir(rtl) .esri-slider__label,:dir(rtl) .esri-slider__max,:dir(rtl) .esri-slider__min,:dir(rtl) .esri-slider__tick-label{direction:rtl;unicode-bidi:plaintext}:dir(rtl) .esri-slider__range-input,:dir(rtl) .esri-slider__label-input{unicode-bidi:plaintext}:host{width:350px}.wrapper{display:flex;flex-direction:column;overflow:hidden;gap:var(--calcite-spacing-md);justify-content:space-between;padding:var(--esri-widget-padding);position:relative;calcite-label{--calcite-label-margin-bottom: 0}&.loading>*:not(calcite-scrim){opacity:0}}.unsupported{padding:0 var(--calcite-spacing-lg);animation:esri-fade-in .25s ease-in-out}.slider{padding-block-end:var(--label-wrap-padding, 0)}.time-configuration{--date-play-button-offset: 11px;--slider-play-button-offset: 8px;display:grid;gap:var(--calcite-spacing-md);grid-template-columns:1fr min-content;.slider-container{grid-column:1;+calcite-button{grid-column:2;transform:translateY(var(--slider-play-button-offset))}}.timezone-input-container{grid-column:1;min-width:0;+span{grid-column:2}}.date-picker-container{grid-column:1;+calcite-button{grid-column:2;transform:translateY(var(--date-play-button-offset))}}calcite-button{place-self:center}}`;Intl.DateTimeFormat().resolvedOptions().timeZone;const ye={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function Q(i,t,e){return i===0?0:i*ye[t]/ye[e]}function q(i){return i instanceof Date&&!Number.isNaN(i.getTime())}function Z(i,t,e="hours"){const r=new Date(i.getTime()),s=Q(t,e,"milliseconds");return r.setTime(r.getTime()+s),r}function L(i,t){const e=Q(t,"hours","milliseconds"),r=new Date(i.getTime()+e),s=r.toISOString().slice(0,10),n=r.getUTCHours()*60+r.getUTCMinutes();return{localDate:s,minutesSinceMidnight:n}}var te=Math.PI,f=Math.sin,I=Math.cos,ai=Math.asin,li=Math.acos,C=te/180,Ue=1e3*60*60*24,Me=2440588,Ee=2451545;function oi(i){return i.valueOf()/Ue-.5+Me}function K(i){return new Date((i+.5-Me)*Ue)}function ci(i){return oi(i)-Ee}var Se=C*23.4397;function di(i,t){return ai(f(t)*I(Se)+I(t)*f(Se)*f(i))}function hi(i){return C*(357.5291+.98560028*i)}function gi(i){return C*(1.9148*f(i)+.02*f(2*i)+3e-4*f(3*i))}function ui(i,t){var e=C*102.9372;return i+t+e+te}var M={};M.PolarException={NORMAL:0,MIDNIGHT_SUN:1,POLAR_NIGHT:2};var ae=[[-.83,"sunrise","sunset"]],Ae=9e-4;function pi(i,t){return Math.round(i-Ae-t/(2*te))}function De(i,t,e){return Ae+(i+t)/(2*te)+e}function Te(i,t,e){return Ee+i+.0053*f(t)-.0069*f(2*e)}function mi(i,t,e){return li((f(i)-f(t)*f(e))/(I(t)*I(e)))}M.getTimes=function(i,t,e){var r=C*-e,s=C*t,n=ci(i),l=pi(n,r),a=De(0,r,l),d=hi(a),h=gi(d),c=ui(d,h),p=di(c,0),b=Te(a,d,c);function P(se){var Y=mi(se,s,p),Ie=De(Y,r,l);return Te(Ie,d,c)}function z(se){var Y=(f(se)-f(s)*f(p))/(I(s)*I(p));return Y<-1?M.PolarException.MIDNIGHT_SUN:Y>1?M.PolarException.POLAR_NIGHT:M.PolarException.NORMAL}var y={solarNoon:K(b),nadir:K(b-.5),polarException:M.PolarException.NORMAL},k,x,G,re,me;for(k=0,x=ae.length;k<x;k+=1)G=ae[k],re=P(G[0]*C),me=b-(re-b),y[G[1]]=K(me),y[G[2]]=K(re);return y.polarException=z(ae[0][0]*C),y};const _i={spring:{dayOfMonth:20,month:2},summer:{dayOfMonth:21,month:5},fall:{dayOfMonth:23,month:8},winter:{dayOfMonth:21,month:11}},de=["spring","summer","fall","winter"];function R(i,t,e){const r=ue(t,e),{dayOfMonth:s,month:n}=_i[r],l=new Date(i.getTime());return l.setMonth(n,s),l}function fi(i,t){const e=bi(i);return ue(e,t)}function bi(i){const t=i.getTime(),e=R(i,"spring","northern").getTime(),r=R(i,"summer","northern").getTime(),s=R(i,"fall","northern").getTime(),n=R(i,"winter","northern").getTime();return t>=e&&t<r?"spring":t>=r&&t<s?"summer":t>=s&&t<n?"fall":"winter"}function ue(i,t){return t==="northern"?i:vi(i)}function ke(i){return i>=0?"northern":"southern"}function vi(i){const t=de.indexOf(i);return de[(t+2)%4]}const X=1440,wi=864e5;function xi(i,t,e,r){const s=M.getTimes(i,t,e),n=s.sunrise,l=s.sunset,a=Z(i,r),d=Z(n,r),h=Z(l,r);if(a.getUTCDate()!==d.getUTCDate()||a.getUTCDate()!==h.getUTCDate()){const c=a.getTime()-d.getTime()>0?1:-1;n.setUTCDate(n.getUTCDate()+c),l.setUTCDate(l.getUTCDate()+c)}return{sunrise:n,sunset:l}}function w(i){return i?.type==="sun"}function pe(i,t){return(i%t+t)%t}const Le={hour:"numeric",minute:"numeric",timeZone:"UTC"},yi={hour:"numeric",timeZone:"UTC"};function Si(i){const t=Math.round(Q(i,"minutes","hours"));return new Date(Q(t,"hours","milliseconds"))}function Di(i){return new Date(i*6e4)}function Ti(i){const t=Si(i);let e=ce(t,Le);if(e.includes(" ")){e=ce(t,yi),e=e.replace(":00","");const r="â ";e=e.split(" ").map(s=>Array.from(s).join(r)).join(" ")}return e}function ki(i){const t=Di(i);let e=ce(t,Le);return i!==0&&e==="00:00"&&(e="24:00"),e}const $i=(i,t)=>{switch(t){case"tick":return Ti(i);case"max":case"min":case"value":return ki(i)}},Ci=X-1,Pi=Ci/4;function zi(i){return _`<calcite-slider class="slider" .disabled=${i.disabled} fill-placement=none label-ticks label-handles .labelFormatter=${$i} min=0 .max=${X-1} @calciteSliderInput=${t=>{const e=Array.isArray(t.target.value)?t.target.value[0]:t.target.value;e!=null&&i.onTimeChanged(e)}} .scale=${i.scale} .step=${i.steps} snap style=${ze({gridArea:"slider"})} .ticks=${Pi} .value=${pe(i.value??0,X)} ${Oe(i.ref)}></calcite-slider>`}function Oi(i,t){return i/15}function Ui(i,t){const e=i?.[0];if(e==null)return null;t||(t={hours:0,minutes:0,seconds:0}),t.hours=Oi(e);const r=t.hours%1;t.hours-=r,t.minutes=r*60;const s=t.minutes%1;return t.minutes-=s,t.seconds=Math.round(s*60),t}function Mi(i){const t=Ui([i.longitude,i.latitude]);return t==null?0:Math.round(t.hours+t.minutes/60+t.seconds/3600)}const Ei=100,Ai=1e3,S=12e5,J=72e5;function $e(i,t){return pe(i+t,24)}function Li({mode:i,lighting:t,getPlaySpeed:e,onProgress:r,beforeProgress:s}){let n=-1;function l(a=Date.now()){const d=t.date,h=Date.now()-(a??0);if(i==="day"){a=Date.now();const c=e()/Ei*h;if(c>0){let p=new Date(d.getTime()+c);const b=t.displayUTCOffset??0,P=$e(p.getUTCHours(),b),z=$e(d.getUTCHours(),b);P<z&&(p=new Date(d.getTime()+c-wi));const y=t.clone();s?.(),t.date=p,r?.(y,t)}}else if(h>Ai){a=Date.now();const c=(d.getUTCMonth()+1)%12,p=new Date(d.getTime());p.setUTCMonth(c);const b=t.clone();s?.(),t.date=p,r?.(b,t)}n=requestAnimationFrame(()=>l(a))}return l(),oe(()=>cancelAnimationFrame(n))}const V=S/4;function Ni(i,t,e,r){const{day:s,night:n=s,twilight:l=s}=r,a=s*V,d=n*V,h=l*V;if(i==null||t==null||Number.isNaN(i.getTime())&&Number.isNaN(t.getTime()))return a;const c=e.getTime(),p=i.getTime(),b=t.getTime(),P=p-J/2,z=p+J/2,y=b-J/3*2,k=b+J/3;let x=a;return c>=P&&c<=z?c-P<=S?x=d-(c-P)/S*(d-h):z-c<=S/2?x=a-(z-c)/S*2*(a-h):x=h:c>=y&&c<=k?c-y<=S/2?x=a-(c-y)/S*2*(a-h):k-c<=S?x=d-(k-c)/S*(d-h):x=h:(c<p||c>b)&&(x=d),x}function U(i){return i.hidden?null:i.children}function Ce(i){const{children:t,hideHeader:e,headingLevel:r=2,label:s,title:n}=i;return _`<div aria-label=${s??ie} class=${ei({...typeof i.class=="string"?{[i.class]:!0}:i.class,[we.widget]:!0,[we.panel]:!0})} role=presentation>${U({hidden:e||!n,children:ii({level:r,children:n})})}${t}</div>`}class Hi{#e;#i;#t=ti(()=>{this.#r()});constructor(t){this.#i=t;let e;xe(this.#t,()=>{e=t()}),this.#e=ri(e)}#r(){const t=this.#e.value;xe(this.#t,()=>{this.#e.value=this.#i(t)})}mutate(t){this.#e.value=t}get value(){return this.#e.value}}function le(i){return new Hi(i)}const ji={day:1,night:6,twilight:2/3};var E,N,H,$,A,D,B,F,m,W,Ne,He,u,ge,j,T,je;const ee=class ee extends Re{constructor(){super(...arguments);v(this,m);v(this,E);v(this,N);v(this,H);v(this,$);v(this,A);v(this,D);v(this,B);v(this,F);v(this,u);v(this,j);v(this,T);this.messages=Ze({blocking:!0}),g(this,N,"none"),g(this,H,null),g(this,A,fe()),g(this,D,fe()),g(this,B,200),g(this,F,200),g(this,u,{}),this._offset=le(e=>w(this._lighting)?this._lighting.displayUTCOffset??e:e),this._timesliderPosition=le(e=>{if(w(this._lighting)){const r=this._lighting.displayUTCOffset??0,s=this._lighting.date;if(q(s)){const{minutesSinceMidnight:n}=L(s,r);return n}else return e}return e}),this._localDate=le(e=>{if(w(this._lighting)){const r=this._lighting.displayUTCOffset??0,s=this._lighting.date;if(q(s)){const{localDate:n}=L(s,r);return n}else return e}return e}),this.view=Be(this),this.autoDestroyDisabled=!1,this.dateOrSeason="date",this.headingLevel=2,this.hideDatePicker=!1,this.hideHeader=!1,this.hidePlayButtons=!1,this.hideShadowsToggle=!1,this.hideSunLightingToggle=!1,this.hideTimezone=!1,this.icon="brightness",this.playSpeedMultiplier=1,this.timeSliderSteps=5,this.arcgisReady=be(),this.arcgisUserDateTimeChange=be(),g(this,j,!1)}get _view(){return this.view?.type==="3d"?this.view:void 0}get localDateAsString(){return this._localDate.value??""}get _playingState(){return o(this,N)}set _playingState(e){g(this,N,e),o(this,T)?.remove(),e==="none"?o(this,E)?.remove():(this._play(e),this._emitUserDateTimeChangeEvent())}get _lighting(){return this._view?.environment?.lighting}get _sunlightingDisabled(){return!w(this._lighting)}set _sunlightingDisabled(e){o(this,u).sunlightingDisabled=e;const r=this._view?.environment;if(r==null)return;const s=r.lighting,n=o(this,H);g(this,H,s);const l={directShadowsEnabled:s.directShadowsEnabled};w(s)&&(l.cameraTrackingEnabled=s.cameraTrackingEnabled);const a=e?"virtual":"sun";let d;n!=null&&n.type===a?d=n:d=e?new Ye:new qe,d.set(l),r.lighting=d,e||(this._stopPlaying(),o(this,A).value&&(o(this,A).value.open=!1))}get currentSeason(){const e=this._view?.camera?.position?.latitude??0,r=ke(e);return fi(this.localDate,r)}set currentSeason(e){this._stopPlaying();const r=this._view?.camera?.position?.latitude??0,s=ke(r),n=ue(e,s);this.localDate=R(this.localDate,n,"northern"),this._emitUserDateTimeChangeEvent()}get dayPlaying(){return this._playingState==="day"}set dayPlaying(e){this._playingState=e?"day":"none"}get _directShadowsDisabled(){return!this._lighting?.directShadowsEnabled}set _directShadowsDisabled(e){o(this,u).directShadowsDisabled=e,this._lighting&&(this._lighting.directShadowsEnabled=!e)}get utcOffset(){return this._offset.value}set utcOffset(e){this._offset.mutate(e),O(this,m,W).call(this)}get timeSliderPosition(){return this._timesliderPosition.value}set timeSliderPosition(e){this._timesliderPosition.mutate(pe(e??0,X)),O(this,m,W).call(this)}get localDate(){return this._localDate.value!=null?new Date(this._localDate.value):new Date}set localDate(e){const r=new Date(e);if(q(r)){r.setUTCFullYear(r.getFullYear(),r.getMonth(),r.getDate());const s=r.toISOString().slice(0,10);this._localDate.mutate(s),O(this,m,W).call(this)}}get yearPlaying(){return this._playingState==="year"}set yearPlaying(e){this._playingState=e?"year":"none"}async destroy(){await this.manager.destroy()}async load(){o(this,u).utcOffset=this.utcOffset,o(this,u).timeSliderPosition=this.timeSliderPosition,o(this,u).localDate=this.localDateAsString,this.manager.onLifecycle(()=>[ve(()=>{let e=null;if(w(this._lighting)){const r=this._lighting.displayUTCOffset??0,s=this._lighting.date;if(q(s)){const{minutesSinceMidnight:n}=L(s,r);e=n}}return e},e=>{const r=o(this,m,ge);e!=null&&r!==e&&this._emitUserDateTimeChangeEvent()},{sync:!0}),ve(()=>{const e=this._view?.camera?.position;return e?Mi(e):void 0},e=>{const r=this._lighting;w(r)&&r.cameraTrackingEnabled&&(r.displayUTCOffset=e)},{sync:!0,initial:!0}),Ke(()=>!w(this._lighting),()=>{this._stopPlaying()}),Je(()=>{this.requestUpdate()})]),this.manager.onDisconnected(()=>{o(this,E)?.remove(),o(this,$)?.remove(),o(this,T)?.remove()})}willUpdate(e){if(super.willUpdate(e),!!o(this,j)&&w(this._lighting)&&e.has("utcOffset")){const r=this.utcOffset??0,s=this._lighting.displayUTCOffset??0,n=this.timeSliderPosition??0,l=this.localDate,a=n-s*60,d=Z(l,a,"minutes"),{minutesSinceMidnight:h,localDate:c}=L(d,r);this._timesliderPosition.mutate(h),this._localDate.mutate(c)}}updated(e){super.updated(e),this._adjustTimeSliderLabels()}async loaded(){const e=new AbortController;this.manager.onDisconnected(()=>({remove:()=>{e.abort()}})),await Ve(We(()=>this._view?.ready,{signal:e.signal}).then(()=>{this.utcOffset=o(this,u).utcOffset??this.utcOffset,this.timeSliderPosition=o(this,u).timeSliderPosition??this.timeSliderPosition,this.localDate=o(this,u).localDate??this.localDate,o(this,u).directShadowsDisabled!=null&&(this._directShadowsDisabled=o(this,u).directShadowsDisabled),o(this,u).sunlightingDisabled!=null&&(this._sunlightingDisabled=o(this,u).sunlightingDisabled),g(this,u,{})})),g(this,j,!0)}_adjustTimeSliderLabels(){const e=o(this,D).value;e&&Fi(e,Qe())}_emitUserDateTimeChangeEvent(){this.isConnected&&this.arcgisUserDateTimeChange.emit()}_stopPlaying(){this._playingState="none"}_play(e){o(this,E)?.remove();const r=this._view;if(r==null||this._sunlightingDisabled)return;const s=r.environment.lighting;if(!w(s))return;let n=0;g(this,E,Li({mode:e,lighting:s,beforeProgress:()=>{n=o(this,m,ge)??0},onProgress:(l,a)=>{this._timesliderPosition.mutate(n),O(this,m,je).call(this,a)},getPlaySpeed:()=>{const l=this._view,a=this._view?.environment.lighting;if(l!=null&&w(a)){const d=l.camera.position.latitude??0,h=l.camera.position.longitude??0,{sunrise:c,sunset:p}=xi(a.date,d,h,a.displayUTCOffset??0);return Ni(c,p,a.date,ji)*this.playSpeedMultiplier}else return V*this.playSpeedMultiplier}}))}render(){const{messages:e,dateOrSeason:r}=this,s=this._sunlightingDisabled,n="m";if(this._view?.type!=="3d")return Ce({class:"wrapper",label:e.componentLabel,title:e.title,hideHeader:this.hideHeader,headingLevel:this.headingLevel,children:_`<div class="unsupported"><p>${e.unsupported}</p></div>`});const l=(this.utcOffset??0)*60,a=this.view?.ready===!0,d=Array.isArray(this.timeSliderSteps)?this.timeSliderSteps.at(0):this.timeSliderSteps;return Ce({class:{wrapper:!0,loading:!a},label:e.componentLabel,title:e.title,hideHeader:this.hideHeader,headingLevel:this.headingLevel,children:_`${a?void 0:_`<calcite-scrim loading></calcite-scrim>`}<div class="time-configuration" style=${ze({columnGap:this.hidePlayButtons?"0":void 0})}><calcite-label class="slider-container" .scale=${n}>${e.timeSliderLabel}${zi({ref:o(this,D),disabled:this._sunlightingDisabled,scale:n,value:this.timeSliderPosition??0,steps:d,onTimeChanged:h=>{this._stopPlaying(),this._emitUserDateTimeChangeEvent(),this.timeSliderPosition=h}})}</calcite-label>${U({hidden:this.hidePlayButtons,children:Pe({disabled:this._sunlightingDisabled,playing:this.dayPlaying,label:e.playDay,onClick:()=>{this._playingState==="day"?this._stopPlaying():this._playingState="day"},scale:n})})}${U({hidden:this.hideTimezone,children:_`<calcite-label .scale=${n} class="timezone-input-container">${e.timezone}<calcite-input-time-zone mode=offset overlay-positioning=fixed .scale=${n} .disabled=${this._sunlightingDisabled} .value=${`${l}`} .referenceDate=${this.localDateAsString} @calciteInputTimeZoneChange=${h=>{const c=+h.target.value;this.utcOffset=c/60,this._stopPlaying()}} ${Oe(o(this,A))}></calcite-input-time-zone></calcite-label><span></span>`})}${U({hidden:this.hideDatePicker,children:r==="date"?O(this,m,Ne).call(this,{scale:n,disabled:s}):O(this,m,He).call(this,{scale:n,disabled:s})})}</div>${U({hidden:this.hideSunLightingToggle,children:Zi({scale:n,messages:e.sunLightingToggle,sunlightingEnabled:!this._sunlightingDisabled,onSunLightingToggle:h=>{this._sunlightingDisabled=!h}})})}${U({hidden:this.hideShadowsToggle,children:Bi({scale:n,messages:e.shadowsToggle,onShadowCheckboxChange:h=>{this._directShadowsDisabled=!h},shadowEnabled:!this._directShadowsDisabled})})}`})}};E=new WeakMap,N=new WeakMap,H=new WeakMap,$=new WeakMap,A=new WeakMap,D=new WeakMap,B=new WeakMap,F=new WeakMap,m=new WeakSet,W=function(){if(o(this,$))return;const e=Fe(()=>{if(o(this,$)?.remove(),w(this._lighting)){const r=this.utcOffset??0,s=this.timeSliderPosition??0,n=this.localDate,l=s-r*60,a=Z(n,l,"minutes");this._lighting.date=a,this._lighting.displayUTCOffset=r}},{timeout:o(this,B)});g(this,$,oe(()=>{Ge(e),g(this,$,void 0)}))},Ne=function({scale:e,disabled:r}){const{messages:s}=this;return _`<calcite-label .scale=${e} class="date-picker-container">${s.date}${Ii({disabled:r,scale:e,date:this.localDateAsString,onDateChange:n=>{const l=n.currentTarget.value,a=Array.isArray(l)?l[0]:l;this._stopPlaying(),this.localDate=a,this._emitUserDateTimeChangeEvent()}})}</calcite-label>${U({hidden:this.hidePlayButtons,children:Pe({playing:this.yearPlaying,disabled:r,label:s.playYear,onClick:()=>{this._playingState==="year"?this._playingState="none":this._playingState="year"},scale:e})})}`},He=function({scale:e,disabled:r}){const{messages:s}=this;return _`<calcite-label .scale=${e} class="date-picker-container">${s.season}${Ri({scale:e,selectedSeason:this.currentSeason,disabled:r,messages:s,onSeasonChange:n=>{this._stopPlaying(),this.currentSeason=n.currentTarget.value}})}</calcite-label>`},u=new WeakMap,ge=function(){return Array.isArray(o(this,D)?.value?.value)?o(this,D)?.value?.value[0]:o(this,D)?.value?.value},j=new WeakMap,T=new WeakMap,je=function(e){if(o(this,T))return;const r=setTimeout(()=>{const s=e.displayUTCOffset??0,n=e.date,{minutesSinceMidnight:l}=L(n,s);this._timesliderPosition.mutate(l),o(this,T)?.remove()},o(this,F));g(this,T,oe(()=>{clearTimeout(r),g(this,T,void 0);const s=this._lighting;if(w(s)){const n=s.displayUTCOffset??0,l=s.date,{minutesSinceMidnight:a}=L(l,n);this._timesliderPosition.mutate(a)}}))},ee.properties={view:0,_playingState:16,_sunlightingDisabled:16,autoDestroyDisabled:5,currentSeason:1,dateOrSeason:3,dayPlaying:5,_directShadowsDisabled:16,headingLevel:9,hideDatePicker:5,hideHeader:5,hidePlayButtons:5,hideShadowsToggle:5,hideSunLightingToggle:5,hideTimezone:5,icon:3,label:1,playSpeedMultiplier:9,position:1,referenceElement:1,timeSliderSteps:9,utcOffset:9,timeSliderPosition:9,localDate:1,yearPlaying:5},ee.styles=ni;let he=ee;function Pe({disabled:i,playing:t,onClick:e,label:r,scale:s="m"}){return _`<calcite-button appearance=solid .scale=${s} .disabled=${i} .iconStart=${t?"pause-f":"play-f"} .label=${r} @click=${e} round title=${r??ie} type=button></calcite-button>`}function Ii({disabled:i,date:t,onDateChange:e,scale:r}){return _`<calcite-input-date-picker data-testid=daylight-date-picker .disabled=${i} overlay-positioning=fixed placement=bottom .value=${t} .scale=${r} @calciteInputDatePickerChange=${e}></calcite-input-date-picker>`}function Ri({messages:i,disabled:t,scale:e,selectedSeason:r,onSeasonChange:s}){return _`<calcite-select .disabled=${t} .label=${i.season} .scale=${e} .value=${r} @calciteSelectChange=${n=>{s(n)}}>${de.map(n=>_`<calcite-option .selected=${r===n} .value=${n}>${i[n]}</calcite-option>`)}</calcite-select>`}function Zi({messages:i,sunlightingEnabled:t,onSunLightingToggle:e,scale:r}){return _`<calcite-label layout=inline .scale=${r} title=${i?.tooltip??ie}><calcite-checkbox .scale=${r} .checked=${t} @calciteCheckboxChange=${s=>e(s.target.checked)}></calcite-checkbox>${i?.label}</calcite-label>`}function Bi({messages:i,shadowEnabled:t,onShadowCheckboxChange:e,scale:r}){return _`<calcite-label layout=inline .scale=${r} title=${i?.tooltip??ie}><calcite-checkbox .checked=${t} @calciteCheckboxChange=${s=>e(s.target.checked)}></calcite-checkbox>${i.label}</calcite-label>`}function Fi(i,t){const e=Yi(t),r=e?.language??"",s=e?.region??"",n=["ar","bg","el","en","ko"].includes(r)||r==="zh"&&["HK","TW"].includes(s);if(i.style.setProperty("--label-wrap-padding",n?"5px":"0"),i.style.setProperty("--label-wrapping",n?"normal":"nowrap"),!i.hasAttribute("data-slider-label-stylesheet-attatched")&&i.shadowRoot){const l=i.shadowRoot.adoptedStyleSheets,a=new CSSStyleSheet;a.replaceSync(`
      .tick__label {
        text-align: center;
        white-space: var(--label-wrapping, normal);
      }
    `),i.shadowRoot.adoptedStyleSheets=[...l,a],i.toggleAttribute("data-slider-label-stylesheet-attatched",!0)}}const Gi=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/u;function Yi(i){return Gi.exec(i)?.groups}si("arcgis-daylight",he);export{he as ArcgisDaylight};
