import{ds as $,ye as H,aQ as N,yf as V,yg as W,yh as Z,a4 as h,yi as K,yj as J,yk as z,jI as I,yl as X,bF as ee,Y as A,f as u,rI as te,B as ie,fe as T,_ as r,e as o,g as R,O as v,ym as F,mZ as ae,jN as re,a2 as j,bI as se,b1 as oe,$ as ne,bO as E,dq as le,bH as ce,y as G,b9 as S,dU as pe,gR as de,gS as me,rG as he,yn as ue,yo as ge,L as fe,u as ye,c as be,b as _,d as y,n as M,k as we,p as ve,i as _e,l as xe}from"./index-BrQW8HOS.js";import{e as ke}from"./utils-BQBvadb7.js";import{s as $e}from"./useT9n-Cr4kUTAO.js";import{v as Be}from"./useViewModel-DDXl3W0X.js";import{v as Re}from"./heading-CcgmnFKY.js";import{e as x}from"./globalCss-UPH6MMtF.js";import{t as g}from"./basemap-gallery-resources-Xv9qpU7t.js";import"./useView-Cya0Zpns.js";async function Le(e,t={}){const{basemap:i,view:a}=e;await i.load(t),Fe(i),await ze(i,a,t),$(t)}async function Ce(e,t={}){const{basemap:i,view:a}=e;$(t);const n=i.baseLayers.find(c=>c.type==="unknown")?.loadError;if(n!=null)throw n;if(!a||"spatialReferenceLocked"in a&&!a.spatialReferenceLocked||(await i.load(t),$(t),i.baseLayers.length===0))return;const s=i.baseLayers.at(0);if(!H(s))return;if(i.spatialReference){if(a.spatialReference.equals(i.spatialReference))return;O()}await s.load(t),$(t);const l=(("supportedSpatialReferences"in s?s.supportedSpatialReferences:null)||["tileInfo"in s?s.tileInfo?.spatialReference:null]).filter(N);l.length!==0&&l.every(c=>!a.spatialReference.equals(c))&&O()}function O(){throw new h("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}function Fe(e){if(e.baseLayers.length===0&&e.groundLayers.length===0&&e.referenceLayers.length===0)return;const t=e.baseLayers.concat(e.referenceLayers).toArray().filter(i=>!V(i)).map(i=>P(i));if(t.length||e.groundLayers&&e.groundLayers.filter(i=>!W(i)).map(i=>P(i)).length)throw t[0]}function P(e){return new h("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:e,operationalLayerType:e.operationalLayerType||"unknown"})}async function ze(e,t,i){let a=e.baseLayers.at(0);if(e.groundLayers?.length>0)a=e.groundLayers.at(0);else{if(!(e.baseLayers.length>0))return;a=e.baseLayers.at(0)}if(Z(a)){try{await a.load(i)}catch(n){const s="basemap-compatibility:unknown-error",l="Unknown basemap compatibility error",{name:c=s,message:f=l,details:L}=n;throw new h(c,f,L)}Ie(a,t)}}function Ie(e,t){const i=t.state.viewingMode;if(!i)return;let a,n;if(e?.type==="wmts"){const c=K(e,t.spatialReference,i);if(c.tileInfo==null)throw new h("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");a=c.tileInfo,n=c.fullExtent}else a=e.tileInfo,n=e.fullExtent;if(a==null)return;if(!J(a.spatialReference,i))throw new h(`basemapgalleryitem:spatial-reference-unsupported-${z(i)}`,`Basemap spatial reference is unsupported in ${z(i)} mode`);const s=e?.type==="vector-tile"?a.getCompatibleForVTL(256):null;if(i===1){let c=I(a,n,null,i);if(c&&e?.type==="vector-tile"&&n!=null&&s&&!I(s,n,null,i)&&(c=null),c){const f=a.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new h(`basemapgalleryitem:tiling-scheme-unsupported-${f}-global`,"Basemap tiling scheme is unsupported in global mode",{error:c})}}else if(X.checkUnsupported(a))throw new h("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const l=t.basemapTerrain?.tilingScheme;if(l&&!l.compatibleWith(a)&&(e?.type!=="vector-tile"||!s||!l.compatibleWith(s)))throw new h("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let d=class extends ee(A){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.addHandles([u(()=>this.basemap?.loadStatus,e),u(()=>this.compatibilityFunction,e),u(()=>this.view&&"basemapTerrain"in this.view&&this.view.basemapTerrain?.tilingScheme,e),u(()=>this.view?.ready,e),u(()=>this.view?.spatialReference,e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return te(this.view,this.basemap)}set basemap(e){e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set("state","loading");const e=this.basemap?.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:i}=t;this.compatibilityFunction(this,{signal:i}).then(()=>ie(()=>!this._spatialReferenceTask.updating,i)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(a=>{T(a)||(this._set("state","error"),this._set("error",a))}),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};r([o({readOnly:!0})],d.prototype,"_spatialReferenceTask",null),r([o()],d.prototype,"basemap",null),r([o()],d.prototype,"compatibilityFunction",void 0),r([o({readOnly:!0})],d.prototype,"error",void 0),r([o({readOnly:!0})],d.prototype,"spatialReference",null),r([o({readOnly:!0})],d.prototype,"state",void 0),r([o()],d.prototype,"view",void 0),d=r([R("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],d);const D=d,q=v.ofType(F);let b=class extends A{constructor(e){super(e),this.basemaps=new q}destroy(){this.basemaps.forEach(e=>e.destroy())}get state(){return"ready"}refresh(){}};r([o({type:q})],b.prototype,"basemaps",void 0),r([o({readOnly:!0})],b.prototype,"state",null),b=r([R("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],b);const Y=b,U=v.ofType(F);let m=class extends ae(re(Y)){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new U,this.filterFunction=null,this.portal=j.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles(u(()=>[this.filterFunction,this.loadStatus,this.portal?.basemapGalleryGroupQuery,this.portal?.basemapGalleryGroupQuery3D,this.portal?.user,this.query,this.updateBasemapsCallback],()=>oe(this.refresh()),se))}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach(e=>e.destroy())}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if(this.loadStatus!=="loaded")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const i=await e.fetchBasemaps(this._toQueryString(this.query),{signal:t.signal,include3d:this.viewType==="3d"||void 0});await this._updateBasemaps(i)}catch(i){if(T(i))throw i;ne.getLogger(this).warn(new h("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:i})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(t=>`${t}:${e[t]}`).join(" AND "):e}async _updateBasemaps(e=[]){let t=await this._filterBasemaps(e);t=this.updateBasemapsCallback?await this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}async _filterBasemaps(e){if(!this.filterFunction)return e;const t=e.map(this.filterFunction),i=await Promise.all(t);return e.filter((a,n)=>i[n])}};r([o({readOnly:!0,type:U})],m.prototype,"basemaps",void 0),r([o()],m.prototype,"filterFunction",void 0),r([o({type:j})],m.prototype,"portal",void 0),r([o()],m.prototype,"query",void 0),r([o({readOnly:!0})],m.prototype,"state",null),r([o()],m.prototype,"updateBasemapsCallback",void 0),r([o()],m.prototype,"viewType",void 0),m=r([R("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],m);const w=m,Q=v.ofType(D);function Ee(e){return e&&e.declaredClass==="esri.portal.Portal"}function Se(e){return e&&!(e instanceof w)&&(!!e.portal||!!e.query)}function Me(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}let p=class extends le{constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new Q,this.source=new w,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([u(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),ce(()=>this.source?.basemaps,"change",e,{onListenerAdd:e}),G(()=>this.view,()=>{this.source instanceof w&&(this.source.viewType=this.view?.type)},{once:!0})])}destroy(){const e=this.source.basemaps.find(t=>t===this.activeBasemap);e&&this.source.basemaps.remove(e),this.source?.destroy()}get activeBasemap(){return this.view?.map?.basemap??null}set activeBasemap(e){const t=this.view;if(!t?.map)return;if(!e||!t.ready)return t.map.basemap=e,void this._clearOverride("activeBasemap");const i=e.spatialReference||this.items?.find(a=>this.basemapEquals(e,a.basemap))?.spatialReference;if(i&&"spatialReferenceLocked"in t&&!t.spatialReferenceLocked){const a=t.spatialReference;if(i!=null&&!S(a,i)&&!pe(t.spatialReference,i)&&!de())return this._override("activeBasemap",e),this._loadingProjectionEngine=!0,void me().then(()=>{this._get("activeBasemap")===e&&(t.map.basemap=e,t.spatialReference=i,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});t.map.basemap=e,this._clearOverride("activeBasemap"),i==null||S(t.spatialReference,i)||(t.spatialReference=i)}else t.map.basemap=e,this._clearOverride("activeBasemap")}castActiveBasemap(e){return he(e)}get activeBasemapIndex(){const{state:e,activeBasemap:t}=this;return e!=="ready"?-1:this._findBasemapIndex(t)}get compatibilityFunction(){return this.view?.type==="3d"?Le:Ce}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||v.isCollection(e)?new Y({basemaps:Array.isArray(e)?new v(e):e}):Ee(e)?new w({portal:e}):Se(e)?new w(e):Me(e)?e:null}get state(){return this.view?.ready&&this.source?ke(this.view)&&!this.view.inGeographicLayout?"unsupported":this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return ue(e,t)}refresh(){this._recreateItems()}load(){return this.loadSource()}loadSource(e){return this.addResolvingPromise(ge(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:t}=this,i=t.findIndex(a=>a.basemap===e);return i===-1?t.findIndex(a=>this.basemapEquals(a.basemap,e)):i}_recreateItems(){const e=this.source?.basemaps??[],{view:t,compatibilityFunction:i}=this,a=new Map(this.items.map(s=>[s.basemap,s])),n=e.map(s=>{const l=a.get(s);return l?(a.delete(s),l):new D({basemap:s,compatibilityFunction:i,view:t})});this.items.removeAll(),this.items.addMany(n),a.forEach(s=>s.destroy())}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};r([o()],p.prototype,"_loadingProjectionEngine",void 0),r([o({type:F})],p.prototype,"activeBasemap",null),r([E("activeBasemap")],p.prototype,"castActiveBasemap",null),r([o({readOnly:!0})],p.prototype,"activeBasemapIndex",null),r([o()],p.prototype,"compatibilityFunction",null),r([o({readOnly:!0,type:Q})],p.prototype,"items",void 0),r([o()],p.prototype,"source",void 0),r([E("source")],p.prototype,"castSource",null),r([o({readOnly:!0})],p.prototype,"state",null),r([o()],p.prototype,"view",void 0),p=r([R("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],p);const Oe=p;const Pe=_e`@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}:host{display:flex;width:var(--arcgis-internal-panel-width, 300px)}:host(:focus-within){z-index:1;outline-offset:var(--calcite-spacing-base);outline:var(--calcite-spacing-base) solid var(--calcite-color-brand)}.basemap-gallery{position:relative;overflow-y:auto;container-type:inline-size;width:100%;min-height:32px;transition:max-height .25s ease-in-out}.basemap-gallery .basemap-gallery__loader:before,.basemap-gallery .basemap-gallery__loader:after{opacity:1;content:"";height:var(--calcite-spacing-px);transition:opacity .5s ease-in-out;position:absolute;top:0}.basemap-gallery .basemap-gallery__loader:before{z-index:0;background-color:var(--calcite-color-foreground-1);width:100%}.basemap-gallery .basemap-gallery__loader:after{z-index:0;background-color:var(--calcite-color-foreground-3);width:20%;animation:1.5s linear infinite looping-progresss-bar-ani}.esri-disabled arcgis-basemap-gallery-item{opacity:var(--calcite-opacity-light);pointer-events:none;animation:none}.basemap-gallery__empty-message{padding:12px 15px;animation:.5s ease-in-out esri-fade-in}.basemap-gallery__loader{width:100%;height:var(--calcite-spacing-base);animation:.5s ease-in-out esri-fade-in;position:absolute;top:0;left:0;right:0}.basemap-gallery__item-container{flex-flow:column;gap:3px;margin:0;padding-block:3px;padding-inline:3px;list-style:none;transition:opacity .25s ease-in-out;display:flex;position:relative}calcite-popover>.basemap-gallery{width:280px;max-height:80vh}.ui-corner calcite-panel>.basemap-gallery.widget.widget--panel{width:unset}.view-width-greater-than-large calcite-popover>.basemap-gallery,.view-width-greater-than-large .ui-corner>.basemap-gallery{width:450px}@container (width<=200px) or (width>=350px){.basemap-gallery .basemap-gallery__item-container{grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:var(--calcite-spacing-md) var(--calcite-spacing-lg);padding-block:var(--calcite-spacing-md);padding-inline:var(--calcite-spacing-lg);display:grid}}`,Ae=Be(Oe),k={small:200,default:280,wide:435},B=class B extends fe{constructor(){super(...arguments),this.messages=$e({}),this.viewModel=Ae(this),this._width=0,this.view=this.viewModel.view,this.activeBasemap=this.viewModel.activeBasemap,this.autoDestroyDisabled=!1,this.disabled=!1,this.headingLevel=2,this.icon="basemap",this.label="",this.source=this.viewModel.source,this.state=this.viewModel.state,this.arcgisPropertyChange=ye()("activeBasemap","state"),this.arcgisReady=be()}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[G(()=>this.source,()=>{this.viewModel.loadSource()},{sync:!0,initial:!0}),(()=>{const t=new ResizeObserver(a=>{for(const n of a)this._width=n.contentRect.width}),i=this.el;return i&&t.observe(i),{remove(){t?.disconnect()}}})()])}_getRoundRobinIndex(t,i){return(t+i)%i}_handleKeyDown(t){const{key:i}=t;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;t.preventDefault();const{items:a,activeBasemapIndex:n}=this.viewModel,s=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(n-1,-1),a.length):this._getRoundRobinIndex(n+1,a.length),l=a.at(s);l?.state==="ready"&&(this.viewModel.activeBasemap=l.basemap)}render(){const t=this.source.state==="loading",i=this.disabled||this.state==="disabled",a=this.viewModel.items,n={[g.sourceLoading]:t,[x.disabled]:i},s=this._width;n[g.layoutGrid]=s>=k.wide||s<=k.small,n[g.narrowItems]=s<k.default;const l=t?y`<div class=${_(g.loader)}></div>`:null,c=t?null:a.length>0?y`<div aria-disabled=${this.disabled??M} aria-label=${this.label??M} class=${_(g.itemContainer)} @keydown=${this._handleKeyDown} role=radiogroup>${a.map((f,L)=>y`<arcgis-basemap-gallery-item .disabled=${i} .item=${f} .itemIndex=${L} .viewModel=${this.viewModel} .messages=${this.messages}></arcgis-basemap-gallery-item>`)}</div>`:y`<div class=${_(x.empty)}>${Re({level:this.headingLevel,children:this.messages.noBasemaps})}</div>`;return y`<div class=${_(we(g.base,x.widget,x.panel,n))} style=${ve({"--esri-basemap-gallery-small":`${k.small}px`})}>${[l,c]}</div>`}};B.properties={_width:16,view:0,activeBasemap:1,autoDestroyDisabled:5,disabled:7,headingLevel:9,icon:1,label:1,messageOverrides:0,position:1,referenceElement:1,source:0,state:3},B.styles=Pe;let C=B;xe("arcgis-basemap-gallery",C);export{C as ArcgisBasemapGallery};
