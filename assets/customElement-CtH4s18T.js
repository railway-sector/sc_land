import{a7 as R,a5 as u,x as b,y as U,ew as N,cR as J,Y as $,lr as q,bR as K,j as P,M as Z,n5 as Q,a9 as F,bI as _,bH as Y,ao as X,ai as B,O as V,K as ee,ra as oe,bO as ie,ts as te,L as re,b as ne,C as se,c as D,u as ce,d as a,_ as x,f,n as d,R as E,e as O,Q as ae,v as le,i as de,l as he}from"./index-aRi8Xk-b.js";import{R as j,p as pe,c as A,u as ue,f as ve}from"./formatUtils-Up0g9T8q.js";import"./number-CRnfhq1R.js";import"./coordinateFormatter-CGfDtUZx.js";function L(i){return i.hasDisplayProperties}let C=class extends R{constructor(i){super(i),this.format=null,this.position={coordinate:null,location:null}}get displayCoordinate(){return this.format?.getDisplayCoordinate(this.position?.coordinate)}};u([b({readOnly:!0})],C.prototype,"displayCoordinate",null),u([b({type:j})],C.prototype,"format",void 0),u([b()],C.prototype,"position",void 0),C=u([U("esri.widgets.CoordinateConversion.support.Conversion")],C);const y=C,ge=new B([0,0,500]),fe="xy",be=["mgrs","utm","usng","dd","dms","ddm"],G="esri__coordinateConversionWidgetState",m={conversions:"conversions",formats:"formats",view:"view",viewChange:"view-change",cursor:"cursor"},me="esri/images/search/search-symbol-32.png";let g=class extends N(J){constructor(i){super(i),this._conversionPromise=null,this._locationGraphic=null,this._pointerCount=0,this.conversions=new $,this.formats=new $,this.formatterAvailable=!1,this.messages=null,this.filteredFormats=new $,this.locationSymbol=new q({url:K(me),width:24,height:24}),this.storageEnabled=!0,this.storageType="session",this.view=null,this._saveWidgetState=this._saveWidgetState.bind(this),this._handleFormatChange=this._handleFormatChange.bind(this),this._handleConversionChange=this._handleConversionChange.bind(this),this._handleViewChange=this._handleViewChange.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerUp=this._onPointerUp.bind(this)}initialize(){const i=async()=>this.messages=await oe("esri/widgets/CoordinateConversion/t9n/CoordinateConversion");this.formats.addMany(pe()),i().then(()=>{if(!this.destroyed&&(A(this.messages,this.formats),this.storageEnabled&&this._loadWidgetState(),this.formats.forEach(e=>{e.viewModel=this,this.addHandles(P(()=>e.currentPattern,this._saveWidgetState),e.name??"unnamed-format")}),this.addHandles(this.conversions.on("change",this._handleConversionChange),m.conversions),this.addHandles(this.formats.on("change",this._handleFormatChange),m.formats),this.addHandles(Z(()=>{i().then(()=>{A(this.messages,this.formats)})})),Q().then(()=>{this.formatterAvailable=!0}).catch(e=>{F.getLogger(this).error(new _("coordinate-conversion:projection-load-failed","Failed to load the projection module.",{error:e})),this.formatterAvailable=!1,this._filterFormatsAndConversions()}).then(()=>this.addHandles(P(()=>this.view,this._handleViewChange,Y),m.viewChange)),this.conversions.length===0)){const e=this.formats.find(o=>o.name===fe)||this.formats.at(0);this.conversions.add(new y({format:e}))}})}destroy(){this.removeHandles(),this._cleanUpView(this.view),this.view=null}castConversions(i){return this._castToConversions(i)}set currentLocation(i){this._set("currentLocation",i),this._updateConversions()}get currentLocation(){return this._get("currentLocation")||null}set mode(i){switch(i){case"capture":this.currentLocation=null,this._startCaptureMode(),this._set("mode",i);break;case"live":this._startLiveMode(),this._set("mode",i)}}get mode(){return this._get("mode")||"live"}get state(){const{messages:i,view:e}=this,o=e?.ready;return i?o?"ready":e?"loading":"disabled":"disabled"}get storage(){const{storageType:i}=this;return i==="session"?sessionStorage:localStorage}get waitingForConversions(){return this._conversionPromise!=null}setLocation(i){if(this._locationGraphic&&this.view?.graphics.remove(this._locationGraphic),!i)return;const e=i.clone();e.hasZ&&(e.z=void 0),this._locationGraphic=new X({geometry:e,symbol:this.locationSymbol}),this.view?.graphics.add(this._locationGraphic)}async convert(i,e){if(!ue(e))throw new _("coordinate-conversion:invalid-point","Invalid point cannot be converted.",{point:e});return Promise.resolve().then(()=>i.convert(e))}async goToLocation(i){const{view:e}=this;if(!e)throw new _("coordinate-conversion:go-to-failed","no view");const o=e.type==="3d"?e.clippingArea:null,t=e.map?.basemap?.baseLayers;if(o||(t?.length??0)>0){const r=o??t?.at(0)?.fullExtent;if(r!=null&&!r.contains(i))throw new _("coordinate-conversion:go-to-failed","Point outside basemap extent.",{point:i})}return this.callGoTo({target:i})}pause(){this.currentLocation=null,this.removeHandles(m.view),this.view&&(this.removeHandles(m.cursor),this._locationGraphic&&this.view.graphics.remove(this._locationGraphic))}async previewConversion(i,e=this.currentLocation||ge){return(await H(i,e)).displayCoordinate}resume(){this.mode==="capture"?this._startCaptureMode():this._startLiveMode()}reverseConvert(i,e){return e.reverseConvert(i)}async updateConversions(i,e){if(e?.type!=="point")throw this._clearConversions(this.conversions),new _("coordinate-conversion:invalid-input-point","Point is invalid, conversions cannot be updated.",{point:e});return this._convertMany(i,e)}_castToConversions(i){const e=new $;return i.forEach(o=>{let t=null;if(o instanceof y)t=o;else if(typeof o=="string"){const r=this.formats.find(s=>s.name===o);r&&(t=new y({format:r}))}t&&e.add(t)}),e}_cleanUpView(i){i&&(this._locationGraphic&&i.graphics.remove(this._locationGraphic),this.removeHandles(m.view),this.removeHandles(m.cursor))}_clearConversions(i){i.forEach(e=>{e.position={location:null,coordinate:null}})}async _convertMany(i,e){return Promise.all(i.map(o=>H(o,e)))}_handleConversionChange(i){for(const e of i.added){const{format:o}=e;o&&(o.viewModel=this,this.currentLocation&&(this._set("waitingForConversions",!0),this.convert(o,this.currentLocation).then(t=>{e.position=t,this._set("waitingForConversions",!1)})))}this._saveWidgetState()}_handleFormatChange(i){i.added.forEach(e=>{this.addHandles(P(()=>e.currentPattern,this._saveWidgetState),e.name??"unnamed-format"),e.viewModel=this}),i.removed.forEach(e=>{e.viewModel=null;const o=this.conversions.filter(t=>t.format===e);this.conversions.removeMany(o),e.name&&this.removeHandles(e.name)})}_loadWidgetState(){try{const i=JSON.parse(this.storage.getItem(G));i&&this._setWidgetState(i)}catch(i){F.getLogger(this).error(new _("coordinate-conversion:invalid-session-storage-json","Could not read from storage.",{error:i}))}}_startCaptureMode(){this.removeHandles(m.view),this.view&&(this.currentLocation&&this.setLocation(this.currentLocation),this.removeHandles(m.cursor),this.addHandles(this.view.acquireCursor("crosshair","high"),m.cursor),this.addHandles(this.view.on("click",this._onClick),m.view))}_startLiveMode(){this._pointerCount=0,this.removeHandles(m.view),this.view&&(this.removeHandles(m.cursor),this._locationGraphic&&this.view.graphics.remove(this._locationGraphic),this.addHandles([this.view.on("pointer-down",this._onPointerDown),this.view.on("pointer-up",this._onPointerUp),this.view.on("pointer-move",this._onPointerMove)],m.view))}_handleViewChange(i,e){e&&e!==i&&this._cleanUpView(e),i&&(this.mode==="capture"?this._startCaptureMode():this._startLiveMode(),e&&this._filterFormatsAndConversions())}_onClick(i){if(i.button===0){const e=this.view?.toMap(i),o=e?.normalize();this.setLocation(o),this.currentLocation=o}}_onPointerDown(i){const{pointerType:e}=i;if(this._pointerCount++,(e==="touch"||e==="pen")&&this._pointerCount===1){const o=this.view?.toMap(i);this.currentLocation=o?.normalize()}}_onPointerMove(i){const{pointerType:e}=i;if(e==="mouse"||this._pointerCount===1){const o=this.view?.toMap(i);this.currentLocation=o?.normalize()}}_onPointerUp(){this._pointerCount--}_setWidgetState(i){try{i.formats.forEach(e=>{const o=this.formats.find(t=>t.name===e.name);o&&i.locale===V()&&e.currentPattern&&(o.currentPattern=e.currentPattern),o&&e.index>=0&&this.conversions.add(new y({format:o}))})}catch(e){F.getLogger(this).warn(new _("coordinate-conversion:session-storage-read-error","Could not get state from stored JSON.",{error:e}))}}_saveWidgetState(){if(!this.storageEnabled)return;const i=this._toJSON();try{this.storage.setItem(G,JSON.stringify({formats:i,locale:V()}))}catch(e){F.getLogger(this).error(new _("coordinate-conversion:local-storage-write-error","Could not write to localStorage.",{error:e}))}}async _updateConversions(){try{await this.updateConversions(this.conversions.toArray(),this.currentLocation)}catch{}}_toJSON(){return this.formats.filter(i=>{const e=i.name;return e==="xy"||e==="basemap"||ve(e)}).map(i=>({name:i.name,currentPattern:i.currentPattern,defaultPattern:i.defaultPattern,index:this.conversions.findIndex(e=>e.format===i)})).sort((i,e)=>i.index-e.index).toArray()}_filterFormatsAndConversions(){const{formatterAvailable:i,conversions:e,formats:o}=this;i||this.addHandles(ee(()=>this.view?.spatialReference,t=>{const r=t.isWebMercator||t.isWGS84,s=o.filter(h=>{const{name:p}=h;return!!we(p)||p==="xy"&&!r}),c=this.filteredFormats.filter(h=>h.name==="xy"&&r&&!this.formats.includes(h)),v=e.filter(h=>s.includes(h.format));o.removeMany(s),e.removeMany(v),this.filteredFormats.addMany(s.filter(h=>!this.filteredFormats.includes(h))),o.addMany(c)},{once:!0,initial:!0}),m.view)}};async function H(i,e){try{i.position=await i.format?.convert(e)}catch{i.position=null}return i}function we(i){return be.includes(i)}u([b({type:$.ofType(y)})],g.prototype,"conversions",void 0),u([ie("conversions")],g.prototype,"castConversions",null),u([b({type:B})],g.prototype,"currentLocation",null),u([b({type:$.ofType(j)})],g.prototype,"formats",void 0),u([b()],g.prototype,"messages",void 0),u([b()],g.prototype,"mode",null),u([b()],g.prototype,"filteredFormats",void 0),u([b({readOnly:!0})],g.prototype,"state",null),u([b({types:te})],g.prototype,"locationSymbol",void 0),u([b({readOnly:!0,dependsOn:["storageType"]})],g.prototype,"storage",null),u([b()],g.prototype,"storageEnabled",void 0),u([b()],g.prototype,"storageType",void 0),u([b({readOnly:!0})],g.prototype,"waitingForConversions",null),u([b()],g.prototype,"view",void 0),g=u([U("esri.widgets.CoordinateConversion.CoordinateConversionViewModel")],g);const _e=g;const l="arcgis-coordinate-conversion",n={base:l,expandUp:`${l}__conversions-view--expand-up`,expandDown:`${l}__conversions-view--expand-down`,noBasemap:`${l}__no-basemap`,coordDisplay:`${l}__coordinate-display`,conversionRow:`${l}__conversion-row`,rowSelect:`${l}__row-select`,conversionsView:`${l}__conversions-view`,conversionsList:`${l}__conversion-list`,toolDisplay:`${l}__tool-display`,copyButton:`${l}__copy-button`,coordinateConversionAlert:`${l}__alert`,coordinateInput:`${l}__coordinate-input`,inputForm:`${l}__input-form`,sectionHeading:`${l}__section-heading`,inputFormGroup:`${l}__coordinate-input__form-group`,inputSelect:`${l}__coordinate-input__select`,sectionTitle:`${l}__section-title`,patternInput:`${l}__pattern-input`,previewCoordinate:`${l}__preview-coordinate`,settings:`${l}__settings`,firstSettingsGroup:`${l}__settings__form-group-first`,settingsFormGroup:`${l}__settings__form-group`,settingsFormGroupHorizontal:`${l}__settings__form-group-horizontal`},xe=de`[class^=esri-icon-],[class*=" esri-icon-"]{speak:none;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:var(--calcite-font-weight-normal);line-height:1;font-family:CalciteWebCoreIcons!important}.esri-icon-close:before{content:"";color:inherit}.esri-icon-drag-horizontal:before{content:"";color:inherit}.esri-icon-drag-vertical:before{content:"";color:inherit}.esri-icon-handle-horizontal:before{content:"";color:inherit}.esri-icon-handle-vertical:before{content:"";color:inherit}.esri-icon-check-mark:before{content:"";color:inherit}.esri-icon-left-triangle-arrow:before{content:"";color:inherit}.esri-icon-right-triangle-arrow:before{content:"";color:inherit}.esri-icon-down-arrow:before{content:"";color:inherit}.esri-icon-up-arrow:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-left:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-right:before{content:"";color:inherit}.esri-icon-overview-arrow-top-left:before{content:"";color:inherit}.esri-icon-overview-arrow-top-right:before{content:"";color:inherit}.esri-icon-maximize:before{content:"";color:inherit}.esri-icon-minimize:before{content:"";color:inherit}.esri-icon-checkbox-unchecked:before{content:"";color:inherit}.esri-icon-checkbox-checked:before{content:"";color:inherit}.esri-icon-radio-unchecked:before{content:"";color:inherit}.esri-icon-radio-checked:before{content:"";color:inherit}.esri-icon-up-arrow-circled:before{content:"";color:inherit}.esri-icon-down-arrow-circled:before{content:"";color:inherit}.esri-icon-left-arrow-circled:before{content:"";color:inherit}.esri-icon-right-arrow-circled:before{content:"";color:inherit}.esri-icon-zoom-out-fixed:before{content:"";color:inherit}.esri-icon-zoom-in-fixed:before{content:"";color:inherit}.esri-icon-refresh:before{content:"";color:inherit}.esri-icon-edit:before{content:"";color:inherit}.esri-icon-authorize:before{content:"";color:inherit}.esri-icon-map-pin:before{content:"";color:inherit}.esri-icon-blank-map-pin:before{content:"";color:inherit}.esri-icon-table:before{content:"";color:inherit}.esri-icon-plus:before{content:"+";color:inherit}.esri-icon-minus:before{content:"";color:inherit}.esri-icon-beginning:before{content:"";color:inherit}.esri-icon-reverse:before{content:"";color:inherit}.esri-icon-pause:before{content:"";color:inherit}.esri-icon-play:before{content:"";color:inherit}.esri-icon-forward:before{content:"";color:inherit}.esri-icon-end:before{content:"";color:inherit}.esri-icon-erase:before{content:"";color:inherit}.esri-icon-up-down-arrows:before{content:"";color:inherit}.esri-icon-left:before{content:"";color:inherit}.esri-icon-right:before{content:"";color:inherit}.esri-icon-announcement:before{content:"";color:inherit}.esri-icon-notice-round:before{content:"";color:inherit}.esri-icon-notice-triangle:before{content:"";color:inherit}.esri-icon-home:before{content:"";color:inherit}.esri-icon-locate:before{content:"";color:inherit}.esri-icon-expand:before{content:"";color:inherit}.esri-icon-collapse:before{content:"";color:inherit}.esri-icon-layer-list:before{content:"";color:inherit}.esri-icon-basemap:before{content:"";color:inherit}.esri-icon-globe:before{content:"";color:inherit}.esri-icon-applications:before{content:"";color:inherit}.esri-icon-arrow-up-circled:before{content:"";color:inherit}.esri-icon-arrow-down-circled:before{content:"";color:inherit}.esri-icon-arrow-left-circled:before{content:"";color:inherit}.esri-icon-arrow-right-circled:before{content:"";color:inherit}.esri-icon-minus-circled:before{content:"";color:inherit}.esri-icon-plus-circled:before{content:"";color:inherit}.esri-icon-add-attachment:before{content:"";color:inherit}.esri-icon-attachment:before{content:"";color:inherit}.esri-icon-calendar:before{content:"";color:inherit}.esri-icon-close-circled:before{content:"";color:inherit}.esri-icon-browser:before{content:"";color:inherit}.esri-icon-collection:before{content:"";color:inherit}.esri-icon-comment:before{content:"";color:inherit}.esri-icon-configure-popup:before{content:"";color:inherit}.esri-icon-contact:before{content:"";color:inherit}.esri-icon-dashboard:before{content:"";color:inherit}.esri-icon-deny:before{content:"";color:inherit}.esri-icon-description:before{content:"";color:inherit}.esri-icon-directions:before{content:"";color:inherit}.esri-icon-directions2:before{content:"";color:inherit}.esri-icon-documentation:before{content:"";color:inherit}.esri-icon-duplicate:before{content:"";color:inherit}.esri-icon-review:before{content:"";color:inherit}.esri-icon-environment-settings:before{content:"";color:inherit}.esri-icon-error:before{content:"";color:inherit}.esri-icon-error2:before{content:"";color:inherit}.esri-icon-experimental:before{content:"";color:inherit}.esri-icon-feature-layer:before{content:"";color:inherit}.esri-icon-filter:before{content:"";color:inherit}.esri-icon-grant:before{content:"";color:inherit}.esri-icon-group:before{content:"";color:inherit}.esri-icon-key:before{content:"";color:inherit}.esri-icon-labels:before{content:"";color:inherit}.esri-icon-tag:before{content:"";color:inherit}.esri-icon-layers:before{content:"";color:inherit}.esri-icon-left-arrow:before{content:"";color:inherit}.esri-icon-right-arrow:before{content:"";color:inherit}.esri-icon-link-external:before{content:"";color:inherit}.esri-icon-link:before{content:"";color:inherit}.esri-icon-loading-indicator:before{content:"";color:inherit}.esri-icon-maps:before{content:"";color:inherit}.esri-icon-marketplace:before{content:"";color:inherit}.esri-icon-media:before{content:"";color:inherit}.esri-icon-media2:before{content:"";color:inherit}.esri-icon-menu:before{content:"";color:inherit}.esri-icon-mobile:before{content:"";color:inherit}.esri-icon-phone:before{content:"";color:inherit}.esri-icon-navigation:before{content:"";color:inherit}.esri-icon-pan:before{content:"";color:inherit}.esri-icon-printer:before{content:"";color:inherit}.esri-icon-pie-chart:before{content:"";color:inherit}.esri-icon-chart:before{content:"";color:inherit}.esri-icon-line-chart:before{content:"";color:inherit}.esri-icon-question:before{content:"";color:inherit}.esri-icon-resend-invitation:before{content:"";color:inherit}.esri-icon-rotate:before{content:"";color:inherit}.esri-icon-save:before{content:"";color:inherit}.esri-icon-settings:before{content:"";color:inherit}.esri-icon-settings2:before{content:"";color:inherit}.esri-icon-share:before{content:"";color:inherit}.esri-icon-sign-out:before{content:"";color:inherit}.esri-icon-support:before{content:"";color:inherit}.esri-icon-user:before{content:"";color:inherit}.esri-icon-time-clock:before{content:"";color:inherit}.esri-icon-trash:before{content:"";color:inherit}.esri-icon-upload:before{content:"";color:inherit}.esri-icon-download:before{content:"";color:inherit}.esri-icon-zoom-in-magnifying-glass:before{content:"";color:inherit}.esri-icon-search:before{content:"";color:inherit}.esri-icon-zoom-out-magnifying-glass:before{content:"";color:inherit}.esri-icon-locked:before{content:"";color:inherit}.esri-icon-unlocked:before{content:"";color:inherit}.esri-icon-favorites:before{content:"";color:inherit}.esri-icon-compass:before{content:"";color:inherit}.esri-icon-down:before{content:"";color:inherit}.esri-icon-up:before{content:"";color:inherit}.esri-icon-chat:before{content:"";color:inherit}.esri-icon-dock-bottom:before{content:"";color:inherit}.esri-icon-dock-left:before{content:"";color:inherit}.esri-icon-dock-right:before{content:"";color:inherit}.esri-icon-organization:before{content:"";color:inherit}.esri-icon-north-navigation:before{content:"";color:inherit}.esri-icon-locate-circled:before{content:"";color:inherit}.esri-icon-dial:before{content:"";color:inherit}.esri-icon-polygon:before{content:"";color:inherit}.esri-icon-polyline:before{content:"";color:inherit}.esri-icon-visible:before{content:"";color:inherit}.esri-icon-non-visible:before{content:"";color:inherit}.esri-icon-link-vertical:before{content:"";color:inherit}.esri-icon-unlocked-link-vertical:before{content:"";color:inherit}.esri-icon-link-horizontal:before{content:"";color:inherit}.esri-icon-unlocked-link-horizontal:before{content:"";color:inherit}.esri-icon-swap:before{content:"";color:inherit}.esri-icon-cta-link-external:before{content:"";color:inherit}.esri-icon-reply:before{content:"";color:inherit}.esri-icon-public:before{content:"";color:inherit}.esri-icon-share2:before{content:"";color:inherit}.esri-icon-launch-link-external:before{content:"";color:inherit}.esri-icon-rotate-back:before{content:"";color:inherit}.esri-icon-pan2:before{content:"";color:inherit}.esri-icon-tracking:before{content:"";color:inherit}.esri-icon-expand2:before{content:"";color:inherit}.esri-icon-arrow-down:before{content:"";color:inherit}.esri-icon-arrow-up:before{content:"";color:inherit}.esri-icon-hollow-eye:before{content:"";color:inherit}.esri-icon-play-circled:before{content:"";color:inherit}.esri-icon-volume-off:before{content:"";color:inherit}.esri-icon-volume-on:before{content:"";color:inherit}.esri-icon-bookmark:before{content:"";color:inherit}.esri-icon-lightbulb:before{content:"";color:inherit}.esri-icon-sketch-rectangle:before{content:"";color:inherit}.esri-icon-north-navigation-filled:before{content:"";color:inherit}.esri-icon-default-action:before{content:"";color:inherit}.esri-icon-undo:before{content:"";color:inherit}.esri-icon-redo:before{content:"";color:inherit}.esri-icon-cursor:before{content:"";color:inherit}.esri-icon-cursor-filled:before{content:"";color:inherit}.esri-icon-measure:before{content:"";color:inherit}.esri-icon-measure-line:before{content:"";color:inherit}.esri-icon-measure-area:before{content:"";color:inherit}.esri-icon-legend:before{content:"";color:inherit}.esri-icon-sliders:before{content:"";color:inherit}.esri-icon-sliders-horizontal:before{content:"";color:inherit}.esri-icon-cursor-marquee:before{content:"";color:inherit}.esri-icon-lasso:before{content:"";color:inherit}.esri-icon-elevation-profile:before{content:"";color:inherit}.esri-icon-slice:before{content:"";color:inherit}.esri-icon-line-of-sight:before{content:"";color:inherit}.esri-icon-zoom-to-object:before{content:"";color:inherit}.esri-icon-urban-model:before{content:"";color:inherit}.esri-icon-measure-building-height-shadow:before{content:"";color:inherit}.esri-icon-partly-cloudy:before{content:"";color:inherit}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-button{box-sizing:border-box;cursor:pointer;white-space:normal;word-break:normal;color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info);justify-content:center;align-items:center;width:100%;min-height:var(--calcite-spacing-xxxl);padding:6px 7px;font-family:inherit;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out,border .125s ease-in-out;display:flex;overflow:hidden;&:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info-hover);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info-hover)}}.esri-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-text-2);border:1px solid var(--calcite-color-text-2)}.esri-button.esri-button--small{min-height:var(--calcite-spacing-xl);font-size:var(--calcite-font-size-sm)}.esri-button.esri-button--half{width:50%;display:inline-block}.esri-button.esri-button--third{width:33%;display:inline-block}.esri-button--secondary{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-button--tertiary{color:var(--calcite-color-brand);background-color:var(--calcite-color-transparent);border-color:var(--calcite-color-transparent)}.esri-button--tertiary:hover{color:var(--calcite-color-brand-hover);background-color:var(--calcite-color-foreground-2);border-color:var(--calcite-color-transparent)}.esri-button--disabled{opacity:.4;pointer-events:none}.esri-button--drill-in{outline-offset:-4px;cursor:pointer;text-align:unset;background-color:var(--calcite-color-foreground-1);border:none;border-radius:2px;justify-content:space-between;align-items:center;margin:var(--calcite-spacing-md) 7px;padding:var(--calcite-spacing-md) 7px;text-decoration:none;transition:background-color .125s ease-in-out;display:flex;box-shadow:0 0 0 1px #adadad4d}.esri-button--drill-in:hover,.esri-button--drill-in:focus{background-color:var(--calcite-color-foreground-2)}.esri-button--drill-in__title{font-size:var(--calcite-font-size)}.esri-button--drill-in [class^=esri-icon-],.esri-button--drill-in [class*=" esri-icon-"]{padding:0 7px}.esri-widget--button{cursor:pointer;text-align:center;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);flex-flow:row;justify-content:center;align-items:center;width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);margin:0;padding:0;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out;display:flex;overflow:hidden}.esri-widget--button:is(calcite-button):not(:hover){--calcite-icon-color: var(--calcite-color-text-3)}.esri-widget--button:not([appearance]),.esri-widget--button[appearance=solid]{--calcite-color-foreground-3: var(--calcite-color-foreground-1)}.esri-widget--button:is(calcite-button){--calcite-offset-invert-focus: 1}.esri-widget--button calcite-loader[inline]{margin:auto}.esri-button--secondary{color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);&:hover{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-status-info);border:1px solid var(--calcite-color-status-info)}}:host{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);--coordinate-conversion-width: 425px;--coordinate-font-size: var(--calcite-font-size-sm);--alert-width: 225px;--arcgis-coordinate-conversion-flex-direction: column;width:var(--coordinate-conversion-width)}calcite-alert{width:var(--alert-width);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);margin-top:12.5%}.arcgis-coordinate-conversion__no-basemap{padding:var(--calcite-spacing-xxs)}.arcgis-coordinate-conversion{background-color:var(--calcite-color-foreground-1);position:relative;width:var(--coordinate-conversion-width)}.arcgis-coordinate-conversion__conversions-view{display:flex;flex-direction:var(--arcgis-coordinate-conversion-flex-direction)}.arcgis-coordinate-conversion__conversion-list{flex-direction:var(--arcgis-coordinate-conversion-flex-direction)}.arcgis-coordinate-conversion__conversions-view--expand-down{display:flex;flex-direction:column}.arcgis-coordinate-conversion__conversions-view--expand-down .arcgis-coordinate-conversion__conversion-list{flex-direction:column}.arcgis-coordinate-conversion__conversions-view--expand-up{display:flex;flex-direction:column-reverse}.arcgis-coordinate-conversion__conversions-view--expand-up .arcgis-coordinate-conversion__conversion-list{flex-direction:column-reverse}.arcgis-coordinate-conversion__conversion-list{display:flex;padding-left:0;margin:0}.arcgis-coordinate-conversion__tool-display{list-style:none;display:flex;margin:0;padding:0;font-size:var(--calcite-font-size-sm)}.arcgis-coordinate-conversion__conversion-row{padding:0 var(--esri-widget-padding-y);justify-content:space-between;align-items:center;display:flex}.arcgis-coordinate-conversion__conversion-row:hover .arcgis-coordinate-conversion__copy-button{display:block}.arcgis-coordinate-conversion__conversions-view{padding:var(--calcite-spacing-md)}.arcgis-coordinate-conversion__coordinate-display{font-size:var(--coordinate-font-size);word-break:break-word;word-wrap:break-word;direction:ltr;flex:auto;display:flex;align-items:center;padding-left:var(--calcite-spacing-sm);min-height:var(--calcite-spacing-xxxl)}.arcgis-coordinate-conversion__coordinate-display:hover{background:var(--calcite-color-transparent-hover)}.arcgis-coordinate-conversion__copy-button{display:none}.arcgis-coordinate-conversion__row-select{width:5rem;flex-shrink:0;text-align-last:center}.arcgis-coordinate-conversion__section-heading{display:flex;align-items:center;background-color:var(--calcite-color-background);width:100%;height:var(--calcite-size-fixed-xxxl)}.arcgis-coordinate-conversion__section-title{margin:0 auto!important}.arcgis-coordinate-conversion__coordinate-input__form-group{display:flex;align-items:center;justify-content:space-between;margin:var(--calcite-spacing-md) auto var(--calcite-spacing-md) auto;width:80%}.arcgis-coordinate-conversion__input-form{display:flex;flex-direction:column}.arcgis-coordinate-conversion__coordinate-input{flex:1;margin:0;font-size:var(--coordinate-font-size)}.arcgis-coordinate-conversion__settings{display:flex;flex-direction:column;align-items:center}.arcgis-coordinate-conversion__settings__form-group{display:flex;flex-direction:column;align-items:center;width:60%}.arcgis-coordinate-conversion__settings__form-group-horizontal{display:flex;position:relative;flex-direction:row;width:100%}.arcgis-coordinate-conversion__settings__form-group-first{margin-top:var(--calcite-spacing-sm)}.arcgis-coordinate-conversion__settings__form-group:last-child{width:100%;text-align:center}.arcgis-coordinate-conversion__preview-coordinate{min-height:var(--calcite-spacing-xl)}`,ye=2500,Ce=1e3,$e=new B({x:0,y:0}),w={chevronDown:"chevron-down",chevronUp:"chevron-up",copy:"copy",pinTear:"pin-tear",pinTearF:"pin-tear-f",arrowLeft:"arrow-left",refresh:"refresh"},ke=le(_e),M=class M extends re{constructor(){super(...arguments),this.alertTimer=-1,this.messages=ne(),this._coordinateInput=se(),this._currentView="conversions",this._multipleConversionsDisabled=!1,this.viewModel=ke(this),this.clearAlertTimeout=()=>{window.clearTimeout(this.alertTimer),this.alertProperties={...this.alertProperties,open:!1}},this.alertProperties={kind:"brand",message:null,title:null,open:!1},this.invalidInput=!1,this.goToEnabled=!1,this.inputFormat=null,this.previewConversion=null,this.settingsFormat=null,this.view=this.viewModel.view,this.autoDestroyDisabled=!1,this.conversions=this.viewModel.conversions,this.currentLocation=this.viewModel.currentLocation,this.expanded=!1,this.formats=this.viewModel.formats,this.goToOverride=this.viewModel.goToOverride,this.headingLevel=4,this.hideCaptureButton=!1,this.hideInputButton=!1,this.hideExpandButton=!1,this.hideSettingsButton=!1,this.icon="coordinate-system",this.label=this.messages?.componentLabel,this.locationSymbol=this.viewModel.locationSymbol,this.mode=this.viewModel.mode,this.orientation="auto",this.state=this.viewModel.state,this.storageDisabled=this.viewModel.storageEnabled,this.storageType=this.viewModel.storageType,this.arcgisConversionChange=D(),this.arcgisPropertyChange=ce()("currentLocation","state","expanded","mode"),this.arcgisReady=D()}get currentView(){return this._currentView}set currentView(e){e!=="conversions"?this.viewModel.pause():this.viewModel.resume(),e==="settings"&&this.setPreviewConversion(),this._currentView=e}get multipleConversionsDisabled(){return this._multipleConversionsDisabled}set multipleConversionsDisabled(e){e&&(this.expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._multipleConversionsDisabled=e}async destroy(){this.clearAlertTimeout(),await this.manager.destroy()}async reverseConvert(e,o){return await this.viewModel.reverseConvert(e,o)}addConversion(e){const o=e.target,t=o.selectedOption.value,r=Te(o);if(t==null||r==null)return;const s=new y({format:t});o.value="default",r>=0?(this.conversions.removeAt(r),this.conversions.add(s,r)):this.conversions.add(s),this.arcgisConversionChange.emit()}async copyToClipboard(e){e&&(e=e.replace(/‎/gu,""),await navigator.clipboard.writeText(e),this.showAlertMessage(null,this.messages.copySuccessMessage,"success",Ce))}findSettingsFormat(){return this.settingsFormat||this.conversions.reduceRight((e,o)=>{const t=o.format;return t&&L(t)?t:e},null)||this.formats.find(e=>L(e))||null}getId(e){return`arcgis-coordinate-conversion-${e}`}async processUserInput(e,o){const{viewModel:t}=this;try{const r=await this._reverseConvert(e,o);if(!r)throw new Error("failed to process user input");this.mode==="capture"?t.resume():this.mode="capture",this.invalidInput=!1,this.currentLocation=r??void 0,t.setLocation(r),this.currentView="conversions",this._coordinateInput.value&&(this._coordinateInput.value.value="")}catch(r){console.error(r),this.showAlertMessage(null,this.messages?.invalidCoordinate,"warning"),this.invalidInput=!0}}async processUserKeyboardInput(e){const{key:o}=e;if(o==="Enter"){const t=this.inputFormat||this.conversions.at(0)?.format,r=this._coordinateInput.value?.value;if(!t||!r)return;await this.processUserInput(r,t)}else this.invalidInput=!1}async processUserMouseInput(){const e=this.inputFormat||this.conversions.at(0)?.format,o=this._coordinateInput.value?.value;!e||!o||await this.processUserInput(o,e)}removeConversion(e){this.conversions.remove(e),this.arcgisConversionChange.emit()}async _reverseConvert(e,o){const t=this.viewModel,r=await o.reverseConvert(e);return this.goToEnabled&&r&&t.goToLocation(r).catch(s=>{console.warn(s),this.showAlertMessage(null,this.messages?.locationOffBasemap,"warning")}),r}setDefaultPattern(e){e.stopPropagation();const o=this.findSettingsFormat();o?.defaultPattern&&(o.currentPattern=o.defaultPattern)}setInputFormat(e){const o=e.target.selectedOption.value;o!=null&&(this.inputFormat=o)}setPreviewConversion(){const e=this.findSettingsFormat(),o=this.viewModel;if(e){const t=this.conversions.find(r=>r.format===e);this.previewConversion=new y({format:e,position:{location:this.currentLocation,coordinate:t?.position?.coordinate}}),this.previewConversion.position?.coordinate||o.previewConversion(this.previewConversion,o.currentLocation??$e)}}setSettingsFormat(e){const o=e.target.selectedOption.value;o!=null&&(this.settingsFormat=o,this.setPreviewConversion())}showAlertMessage(e,o,t,r=ye){this.alertProperties={...this.alertProperties,title:e,message:o,kind:t,open:!0},window.clearTimeout(this.alertTimer),this.alertTimer=window.setTimeout(()=>{this.alertProperties={...this.alertProperties,open:!1}},r)}toggleGoTo(){this.goToEnabled=!this.goToEnabled}toggleMode(){this.mode=this.mode==="live"?"capture":"live"}updateCurrentPattern(e){e.stopPropagation();const o=e.target,t=this.findSettingsFormat();t&&(t.currentPattern=o.value)}render(){const{currentView:e}=this;let o;return this.viewModel.state==="disabled"||e==="no-basemap"?o=this.renderNoBasemapView():e==="coordinate-input"?o=this.renderCoordinateInputView():e==="settings"?o=this.renderSettingsView():o=this.renderConversionsView(),f`<div class=${a(x(n.base))}>${o}${this.renderAlert()}</div>`}renderAlert(){const{messages:e}=this,{open:o,message:t,title:r,kind:s}=this.alertProperties;return f`<calcite-alert class=${a(n.coordinateConversionAlert)} .open=${o} scale=s .kind=${s} .label=${e.alertLabel} @calciteAlertClose=${this.clearAlertTimeout}>${r?f`<div slot=title>${r}</div>`:null}${t?f`<div slot=message>${t}</div>`:null}</calcite-alert>`}renderConversionOptions(e,o,t){const r=this.conversions.at(0),s=r?.format?.name;return e.map((c,v)=>{const h=o??!r?!1:s===c.name||this.conversions.map(p=>p.format?.name).includes(c.name);return f`<calcite-option .disabled=${h} .label=${c.label.toUpperCase()} .selected=${v===t} .value=${c}>${c.label}</calcite-option>`})}renderConversionView(e,o){const{messages:t}=this,{format:r}=e,s=r?.label??"",c=o===0,v=this.getId(`list-item-${o}`),h=t.conversionOutput.replace("{format name}",s),p=c||this.expanded,k=c?this.renderFirstConversionTools(e):this.renderTools(e,v),T=c&&!e.displayCoordinate?t.noLocation:e.displayCoordinate,z=f`<div aria-label=${T??d} class=${a(n.coordDisplay)} data-conversion=${e??d} tabindex=0 title=${T??""??d}>${T}</div>`,I=this.renderConversionOptions(this.formats.filter(W=>W!==r));return p?f`<li aria-label=${h??d} class=${a(n.conversionRow)} id=${v??d} tabindex=0><calcite-select aria-controls=${v??d} class=${a(n.rowSelect)} data-index=${String(o)??d} .label=${t.selectFormat??""} scale=s @calciteSelectChange=${this.addConversion}><calcite-option .label=${s.toUpperCase()} selected>${s.toUpperCase()}</calcite-option>${I}</calcite-select>${z}${k}</li>`:null}renderConversionsView(){const{messages:e}=this,o=this.viewModel.conversions.map(this.renderConversionView.bind(this)),t=this.getId("conversion-list"),r=this.expanded?f`<div class=${a(n.conversionRow)}><calcite-select aria-controls=${t??d} data-index=-1 .label=${e.addConversion} scale=s @calciteSelectChange=${this.addConversion} title=${e.addConversion??d}><calcite-option disabled selected value=default>${e.addConversion}</calcite-option>${this.renderConversionOptions(this.formats)}</calcite-select>${this.renderPrimaryTools()}</div>`:null,s={[n.expandUp]:this.orientation==="expand-up",[n.expandDown]:this.orientation==="expand-down"};return f`<div class=${a(x(n.conversionsView,s))}><ul aria-expanded=${this.expanded??d} class=${a(n.conversionsList)} id=${t??d}>${o}</ul>${r}</div>`}renderCoordinateInputView(){const e=this.inputFormat??this.conversions.at(0)?.format,o=this.formats.findIndex(p=>p.name===e?.name),t=this.getId(n.coordinateInput),r=this.getId(`${n.coordinateInput}__header`),s=this.renderConversionOptions(this.formats,!1,o),{messages:c,headingLevel:v}=this;if(!c)return null;const h=this.renderIconButton({iconType:w.arrowLeft,flipRtl:!0,clickFunction:()=>{this.currentView="conversions"},label:c.back,title:c.back});return f`<div aria-labelledby=${r??d} class=${a(n.inputForm)} role=search><div class=${a(n.sectionHeading)}>${h}${E({class:x(n.sectionTitle,O.heading),id:r,level:v,children:c.inputCoordTitle})}</div><div class=${a(n.inputFormGroup)}><calcite-select aria-controls=${t??d} class=${a(n.inputSelect)} .label=${c.selectFormat} scale=s @calciteSelectChange=${this.setInputFormat}>${s}</calcite-select><calcite-input aria-labelledby=${r??d} class=${a(n.coordinateInput)} data-format=${e??d} id=${t??d} @keydown=${this.processUserKeyboardInput} .placeholder=${c.inputCoordTitle} required scale=s .status=${this.invalidInput?"invalid":"idle"} ${ae(this._coordinateInput)}></calcite-input></div><div class=${a(n.inputFormGroup)}><calcite-label layout=inline scale=s><calcite-checkbox .checked=${this.goToEnabled} @calciteCheckboxChange=${this.toggleGoTo}></calcite-checkbox>${c.goTo}</calcite-label><calcite-button appearance=outline kind=neutral @click=${this.processUserMouseInput} type=button width=auto>${c.convert}</calcite-button></div></div>`}renderCopyButton(e){const{messages:o}=this;return this.renderIconButton({iconType:w.copy,clickFunction:()=>this.copyToClipboard(e.displayCoordinate),buttonClasses:[n.copyButton],ariaLabel:o.copy,title:o.copy})}renderFirstConversionTools(e){const{messages:o,multipleConversionsDisabled:t,hideCaptureButton:r,hideExpandButton:s}=this;if(!o)return null;const c=this.mode==="live"?o.captureMode:o.liveMode,v=this.expanded?o.collapse:o.expand,h=e.displayCoordinate&&this.mode==="capture"?this.renderCopyButton(e):null,p=!t&&!s?this.renderIconButton({iconType:this.expanded?w.chevronDown:w.chevronUp,clickFunction:()=>{this.expanded=!this.expanded},ariaControls:this.getId("conversion-list"),label:v,title:v}):null,k=t&&!r?this.renderIconButton({iconType:this.mode==="live"?w.pinTear:w.pinTearF,clickFunction:this.toggleMode,label:c,title:c}):null;return f`<ul class=${a(n.toolDisplay)}><li>${h}</li><li>${p}</li><li>${k}</li></ul>`}renderIconButton(e){const{iconType:o,clickFunction:t,buttonClasses:r,ariaLabel:s,ariaControls:c,label:v,flipRtl:h,title:p}=e;return f`<calcite-button appearance=transparent aria-label=${s??d} aria-controls=${c??d} class=${a(x(r))} .iconFlipRtl=${h?"start":void 0} .iconStart=${o} kind=neutral .label=${v} @click=${t} title=${p??d}></calcite-button>`}renderNoBasemapView(){return f`<div class=${a(x(n.noBasemap,n.base))}>${this.messages.noBasemap}</div>`}renderPrimaryTools(){const{messages:e,hideInputButton:o,hideCaptureButton:t,hideSettingsButton:r}=this;if(!e)return null;const s=this.mode==="live"?e.captureMode:e.liveMode,c=o?null:this.renderIconButton({iconType:"pencil",clickFunction:()=>{this.currentView="coordinate-input"},label:e.inputCoordTitle,title:e.inputCoordTitle}),v=t?null:this.renderIconButton({iconType:this.mode==="live"?w.pinTear:w.pinTearF,clickFunction:this.toggleMode,label:s,title:s}),h=r?null:this.renderIconButton({iconType:"gear",clickFunction:()=>{this.currentView="settings"},label:e.settingsTitle,title:e.settingsTitle});return f`<ul class=${a(n.toolDisplay)}><li>${c}</li><li>${v}</li><li>${h}</li></ul>`}renderSettingsView(){const e=this.getId(n.patternInput),o=this.getId(`${n.patternInput}__header`),t=this.getId(n.previewCoordinate),r=this.formats.filter(I=>L(I)),s=this.findSettingsFormat(),c=s?r.indexOf(s):-1,v=this.renderConversionOptions(r,!0,c),h=s?.currentPattern,{messages:p,headingLevel:k}=this;if(!p)return null;const T=this.renderIconButton({iconType:w.arrowLeft,flipRtl:!0,clickFunction:()=>{this.currentView="conversions"},label:p.back,title:p.back}),z=this.renderIconButton({iconType:w.refresh,clickFunction:this.setDefaultPattern,label:p.defaultPattern,title:p.defaultPattern});return f`<div aria-labelledby=${o??d} class=${a(n.settings)}><div class=${a(n.sectionHeading)}>${T}${E({class:x(n.sectionTitle,O.heading),id:o,level:k,children:p.settingsTitle})}</div><div class=${a(x(n.settingsFormGroup,n.firstSettingsGroup))}><calcite-label alignment=center .for=${e} scale=s>${p.changeCoordinateDisplay}<calcite-select .label=${p.selectFormat} width=full @calciteSelectChange=${this.setSettingsFormat}>${v}</calcite-select><div class=${a(n.settingsFormGroupHorizontal)}><calcite-input aria-controls=${t??d} class=${a(n.patternInput)} id=${e??d} type=text .value=${h} @calciteInputInput=${this.updateCurrentPattern}></calcite-input>${z}</div></calcite-label></div><div class=${a(n.settingsFormGroup)}><calcite-label alignment=center scale=s>${p.preview}<div class=${a(n.previewCoordinate)} id=${t??d} tabindex=0>${this.previewConversion?.displayCoordinate}</div></calcite-label></div></div>`}renderTools(e,o){const t=e.displayCoordinate&&this.mode==="capture"?this.renderCopyButton(e):null,{messages:r}=this;if(!r)return null;const s=this.renderIconButton({iconType:"x",clickFunction:()=>this.removeConversion(e),ariaControls:o,label:r.removeConversion,title:r.removeConversion});return f`<ul class=${a(n.toolDisplay)}><li>${t}</li><li>${s}</li></ul>`}};M.properties={alertProperties:16,invalidInput:16,currentView:16,goToEnabled:16,inputFormat:16,previewConversion:16,settingsFormat:16,view:0,autoDestroyDisabled:5,conversions:0,currentLocation:0,expanded:7,formats:0,goToOverride:0,headingLevel:9,hideCaptureButton:7,hideInputButton:7,hideExpandButton:7,hideSettingsButton:7,icon:1,label:1,locationSymbol:0,mode:3,multipleConversionsDisabled:7,orientation:3,position:3,referenceElement:1,state:3,storageDisabled:7,storageType:1},M.styles=xe;let S=M;function Te(i){const e=i.getAttribute("data-index");return e?window.parseInt(e):null}he("arcgis-coordinate-conversion",S);export{S as ArcgisCoordinateConversion};
