import{fT as S,a5 as s,x as r,qX as z,y as h,fN as J,eK as u,bE as T,bD as N,Y as B,bC as W,fj as X,a9 as Y,aj as K,ag as ee,L as te,b as ie,u as re,c as ne,b1 as U,j as O,nU as j,Co as se,n as M,d as F,e as V,f as d,Q as oe,v as ae,i as le,g as ce,w as de,nT as he,Cp as A,nV as pe,F as ue,l as ge}from"./index-aRi8Xk-b.js";import{c as ve}from"./dehydratedFeatureComparison-CXYz4r6Q.js";import{M as ye}from"./elevationProfileGeometryUtils-DsGF4lJZ.js";let w=class extends S{constructor(e){super(e),this.distance=null,this.elevation=null}equals(e){return this===e||this.distance===e.distance&&this.elevation===e.elevation}};s([r({type:z,value:null})],w.prototype,"distance",void 0),s([r({type:z,value:null})],w.prototype,"elevation",void 0),w=s([h("esri.analysis.ElevationProfile.ElevationProfileDisplayUnits")],w);const H=w;let k=class extends S{constructor(e){super(e),this.lineVisible=!0}equals(e){return this===e||this.lineVisible===e.lineVisible}};s([r()],k.prototype,"lineVisible",void 0),k=s([h("esri.analysis.ElevationProfile.ElevationProfileLineChartOptions")],k);const Z=k;let b=class extends S{constructor(e){super(e),this.lineVisible=!0,this.hoveredPointVisible=!0}equals(e){return this===e||this.lineVisible===e.lineVisible&&this.hoveredPointVisible===e.hoveredPointVisible}};s([r()],b.prototype,"lineVisible",void 0),s([r()],b.prototype,"hoveredPointVisible",void 0),b=s([h("esri.analysis.ElevationProfile.ElevationProfileLineViewOptions")],b);const R=b;let y=class extends S{constructor(e){super(e),this.type=null,this.id=J(),this.chartOptions=new Z,this.color=new u("#000000"),this.enabled=!0,this.title=null,this.viewOptions=new R}equals(e){return this===e||this.type===e.type&&this.chartOptions.equals(e.chartOptions)&&this.color.equals(e.color)&&this.enabled===e.enabled&&this.title===e.title&&this.viewOptions.equals(e.viewOptions)}};s([r({nonNullable:!0})],y.prototype,"id",void 0),s([r({type:Z,nonNullable:!0})],y.prototype,"chartOptions",void 0),s([r({type:u,nonNullable:!0})],y.prototype,"color",void 0),s([r()],y.prototype,"enabled",void 0),s([r()],y.prototype,"title",void 0),s([r({type:R,nonNullable:!0})],y.prototype,"viewOptions",void 0),y=s([h("esri.analysis.ElevationProfile.ElevationProfileLine")],y);const $=y;let x=class extends ${constructor(e){super(e),this.type="ground",this.color=new u("#ff7f00")}};s([r()],x.prototype,"type",void 0),s([r({type:u,nonNullable:!0})],x.prototype,"color",void 0),x=s([h("esri.analysis.ElevationProfile.ElevationProfileLineGround")],x);const G=x;let C=class extends ${constructor(e){super(e),this.type="input",this.color=new u("#00c8c8")}};s([r()],C.prototype,"type",void 0),s([r({type:u,nonNullable:!0})],C.prototype,"color",void 0),C=s([h("esri.analysis.ElevationProfile.ElevationProfileLineInput")],C);const fe=C;let m=class extends ${constructor(t){super(t),this.type="query",this.color=new u("#db334a"),this.source=null}equals(t){return this===t||super.equals(t)&&this.source===t.source}};s([r()],m.prototype,"type",void 0),s([r({type:u,nonNullable:!0})],m.prototype,"color",void 0),s([r({clonable:"reference"})],m.prototype,"source",void 0),m=s([h("esri.analysis.ElevationProfile.ElevationProfileLineQuery")],m);const me=m;let f=class extends ${constructor(e){super(e),this.type="scene",this.color=new u("#cf4ccf"),this.include=null,this.exclude=null}equals(e){return this===e||super.equals(e)&&L(this.include,e.include)&&L(this.exclude,e.exclude)}};function L(t,e){return T(t,e,(i,n)=>N(Array.from(i),Array.from(n)))}s([r()],f.prototype,"type",void 0),s([r({type:u,nonNullable:!0})],f.prototype,"color",void 0),s([r()],f.prototype,"include",void 0),s([r()],f.prototype,"exclude",void 0),f=s([h("esri.analysis.ElevationProfile.ElevationProfileLineScene")],f);const _e=f,we={base:$,key:"type",typeMap:{ground:G,input:fe,query:me,scene:_e},errorContext:"elevation-profile-line"},be=B.ofType(we);let E=class extends S{constructor(e){super(e),this.geometryVisualizationVisible=!0}equals(e){return this===e||this.geometryVisualizationVisible===e.geometryVisualizationVisible}};s([r()],E.prototype,"geometryVisualizationVisible",void 0),E=s([h("esri.analysis.ElevationProfile.ElevationProfileViewOptions")],E);const Q=E;let p=class extends W{constructor(t){super(t),this.type="elevation-profile",this.geometry=null,this.displayUnits=new H,this.viewOptions=new Q,t?.profiles||(this.profiles=new B([new G]))}initialize(){const t=e=>!e?.declaredClass?.startsWith("esri.widgets.ElevationProfile")||(Y.getLogger(this).errorOnce("Classes from the 'esri/widgets/ElevationProfile' namespace are meant for use with the Elevation Profile widget and are not supported in the 'profiles' collection of the ElevationProfileAnalysis. Use classes from 'esri/analysis/ElevationProfile' instead."),!1);this.profiles.on("before-changes",e=>{t(e.item)||e.preventDefault()});for(const e of Array.from(this.profiles))t(e)||this.profiles.remove(e)}get elevationInfo(){return this._get("elevationInfo")}set elevationInfo(t){this._set("elevationInfo",t)}get profiles(){return this._get("profiles")}set profiles(t){const e=this._get("profiles"),i=t??new B;this._set("profiles",X(i,e))}get valid(){return ye(this.geometry)}equals(t){return this===t||super.equals(t)&&ve(this.geometry,t.geometry)&&T(this.elevationInfo,t.elevationInfo)&&N(this.profiles.toArray(),t.profiles.toArray(),(e,i)=>e.equals(i))&&this.displayUnits.equals(t.displayUnits)&&this.viewOptions.equals(t.viewOptions)}clear(){this.geometry=null,this.elevationInfo=null}};s([r({type:["elevation-profile"]})],p.prototype,"type",void 0),s([r({type:K})],p.prototype,"geometry",void 0),s([r({type:ee})],p.prototype,"elevationInfo",null),s([r({type:be,nonNullable:!0})],p.prototype,"profiles",null),s([r({type:H,nonNullable:!0})],p.prototype,"displayUnits",void 0),s([r()],p.prototype,"valid",null),s([r({type:Q,nonNullable:!0})],p.prototype,"viewOptions",void 0),p=s([h("esri.analysis.ElevationProfileAnalysis")],p);const xe=p;const Ce=le`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-widget--panel{min-width:300px;min-height:32px;padding:var(--esri-widget-padding);transition:max-height .25s ease-in-out;overflow-y:auto}:host{--internal-chart-height: 180px;--internal-gap: var(--calcite-spacing-sm-plus);width:550px;isolation:isolate;padding:var(--esri-widget-padding);position:relative;container-type:inline-size;resize:horizontal}.container{display:flex;flex-direction:column;width:100%;min-width:0;gap:var(--internal-gap)}.header{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;margin-bottom:calc(var(--internal-gap) * -1)}.actions{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;gap:var(--calcite-spacing-xs)}.action-button{width:auto;min-height:32px}.main-container{display:flex;position:relative;flex-flow:column;width:100%;height:var(--internal-chart-height)}.chart-container{position:relative;width:100%;height:100%}.prompt-container{box-sizing:border-box;display:grid;place-content:center;padding-inline:var(--calcite-spacing-md);height:100%;text-align:center}.prompt-message{margin:0;width:100%}.spinner{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transition:opacity .15s ease-in-out;transition-delay:0;opacity:0;&.visible{transition-delay:50ms;opacity:1}&.small{inset-inline-start:0;top:-22px;left:unset;transform:none;color:var(--calcite-color-brand)}}@container (max-width: 400px){.esri-widget--panel{height:auto}.actions{flex-direction:column}.action-button{align-self:stretch}}`;function Se({geometry:t}){return t!=null&&t.type==="polyline"&&t.paths.length>0&&t.paths.every(e=>e.length>=2)}function $e({geometry:t}){return t?.type==="polyline"&&t.paths.reduce((e,i)=>e+i.length,0)>0}function ke(t){return t?.samples?.some(e=>e.z!=null)??!1}function Ee(t){return t?.type==="polyline"}async function Oe(t,e,i){const n=await Pe(t,e);return pe(i),Me(n)?n.highlight(e):ue()}async function Pe(t,e){const i=e?.layer;if(!(!i||i.type==="subtype-sublayer"||i.type==="sublayer"||i.type==="building-component"))return await t.whenLayerView(i)}function Me(t){return t!=null&&"highlight"in t&&typeof t.highlight=="function"}var Ve=Object.defineProperty,Be=Object.getOwnPropertyDescriptor,l=(t,e,i,n)=>{for(var o=n>1?void 0:n?Be(e,i):e,c=t.length-1,g;c>=0;c--)(g=t[c])&&(o=(n?g(e,i,o):g(o))||o);return n&&o&&Ve(e,i,o),o};let a=class extends ce{constructor(){super(...arguments),this.highlightEnabled=!0,this.uniformChartScaling=!1,this.shouldForceInteractive=!1,this.supportedViewType="both",this.unsupportedErrorMessage=""}get _measurementSystem(){return this.view?de(this.view):void 0}get _hasSamples(){const{progress:t}=this;return this._analysisView?.results?.some(e=>e.available&&(t<1||ke(e)))??!1}get doneButtonAvailable(){if(this.featureSelected)return!1;const{geometry:t}=this.analysis;return Ee(t)&&t.paths.length>0&&t.paths[0].length>2}get effectiveDisplayUnits(){return this.analysisView?.effectiveDisplayUnits}get errorState(){if(!Se(this.analysis))return"no-valid-input";const t=this.analysisView?.error;if(t)switch(t.name){case"too-complex":return"too-complex";case"invalid-geometry":return"invalid-geometry";case"elevation-query-error":return"no-valid-input";default:return"unknown"}return this._hasSamples?"none":"no-available-profiles"}get featureSelected(){return this._selectedFeature!=null}get hasVertices(){return $e(this.analysis)}get hoveredPosition(){return this.analysisView?.hoveredPosition??void 0}get geometry(){return this.analysis.geometry}set geometry(t){this.analysis.geometry=t}get elevationInfo(){return this.analysis.elevationInfo}set elevationInfo(t){this.analysis.elevationInfo=t}get profiles(){return this.analysis.profiles}set profiles(t){this.analysis.profiles=t}get progress(){return this.analysisView?.progress??0}get results(){return this.analysisView?.results??[]}get selectButtonAvailable(){for(const t of this.view?.map?.allLayers.toArray()??[])if(t.type==="graphics"&&!("internal"in t&&t.internal)&&t.graphics.some(e=>e.geometry?.type==="polyline")||"geometryType"in t&&t.geometryType==="polyline")return!0;return!!this.view?.graphics?.some(t=>t.geometry?.type==="polyline")}get state(){return this.disabled||!this.ready?"disabled":this._selectingPromise?"selecting":this.operationState==="active"?"creating":this.analysis.valid?this.featureSelected?"selected":"created":"ready"}get unitDistance(){return I(this._userUnitDistance??this.analysis.displayUnits?.distance??void 0,this.unitOptionsDistance,this._measurementSystem)}set unitDistance(t){this._userUnitDistance=t}get unitElevation(){return I(this._userUnitElevation??this.analysis.displayUnits?.elevation??void 0,this.unitOptionsElevation,this._measurementSystem)}set unitElevation(t){this._userUnitElevation=t}get unitOptionsDistance(){return q(this._userUnitOptionsDistance)}set unitOptionsDistance(t){this._userUnitOptionsDistance=t}get unitOptionsElevation(){return q(this._userUnitOptionsElevation)}set unitOptionsElevation(t){this._userUnitOptionsElevation=t}initialize(){this.addHandles([O(()=>({analysis:this.analysis,unitDistance:this.unitDistance,unitElevation:this.unitElevation}),({analysis:t,unitDistance:e,unitElevation:i})=>{if(t!=null){const n=t.displayUnits;n.elevation=i,n.distance=e}},{sync:!0,initial:!0}),O(()=>({selectedFeature:this._selectedFeature,profiles:this.analysis.profiles.toArray()}),({selectedFeature:t,profiles:e},i)=>{this._highlightSelectedFeature(this.highlightEnabled?t:void 0),this.analysis.viewOptions.geometryVisualizationVisible=this.highlightEnabled&&t==null;const n=i?.selectedFeature;e.forEach(o=>{switch(o.type){case"scene":this._excludeSelectedFeatureFromProfile(o,t,n);break;case"input":o.chartOptions.lineVisible=t!=null,o.viewOptions.lineVisible=t!=null;break}})},{initial:!0})])}destroy(){this._removeSelectionHighlight()}async select(){const t=this.analysisView;if(!t)return;const e=super.start({operation:async i=>{const n=await t.pickFeature(i);i?.signal?.aborted||(t.interactive=!1,this._selectedFeature=n.feature)},clear:!1});e.finally(()=>{this._selectingPromise===e&&(this._selectingPromise=void 0)}),this._selectingPromise=e,await e.catch()}async place(t){await this.analysisView?.place(t)}clearAnalysis(){this.geometry=null,this.elevationInfo=null,this._selectedFeature=void 0}constructAnalysis(){return new xe}_highlightSelectedFeature(t){this._removeSelectionHighlight();const e=this.view;!e||!t||(this._selectionHighlightTask=j(async i=>await Oe(e,t,{signal:i})))}_removeSelectionHighlight(){this._selectionHighlightTask?.value?.remove(),this._selectionHighlightTask=he(this._selectionHighlightTask)}_excludeSelectedFeatureFromProfile(t,e,i){const n=new Set(t.exclude??[]);i&&n.delete(i),e&&n.add(e),t.exclude=Array.from(n)}};l([r()],a.prototype,"_userUnitOptionsDistance",2);l([r()],a.prototype,"_userUnitOptionsElevation",2);l([r()],a.prototype,"_userUnitDistance",2);l([r()],a.prototype,"_userUnitElevation",2);l([r({readOnly:!0})],a.prototype,"_measurementSystem",1);l([r()],a.prototype,"_selectingPromise",2);l([r()],a.prototype,"_selectedFeature",2);l([r()],a.prototype,"_selectionHighlightTask",2);l([r()],a.prototype,"_hasSamples",1);l([r()],a.prototype,"doneButtonAvailable",1);l([r({readOnly:!0})],a.prototype,"effectiveDisplayUnits",1);l([r({readOnly:!0})],a.prototype,"errorState",1);l([r()],a.prototype,"featureSelected",1);l([r({readOnly:!0})],a.prototype,"hasVertices",1);l([r()],a.prototype,"highlightEnabled",2);l([r()],a.prototype,"hoveredPosition",1);l([r()],a.prototype,"geometry",1);l([r()],a.prototype,"elevationInfo",1);l([r()],a.prototype,"profiles",1);l([r({readOnly:!0})],a.prototype,"progress",1);l([r({readOnly:!0})],a.prototype,"results",1);l([r({readOnly:!0})],a.prototype,"selectButtonAvailable",1);l([r({readOnly:!0})],a.prototype,"state",1);l([r()],a.prototype,"uniformChartScaling",2);l([r()],a.prototype,"unitDistance",1);l([r()],a.prototype,"unitElevation",1);l([r()],a.prototype,"unitOptionsDistance",1);l([r()],a.prototype,"unitOptionsElevation",1);a=l([h("components.elevation-profile.ElevationProfileViewModel")],a);function I(t,e,i){return t&&e.includes(t)?t:i&&e.includes(i)?i:e[0]}function q(t){const e=t?.filter(i=>A.includes(i));return e&&e.length>0?e:A.slice()}const De=ae(a),P=class P extends te{constructor(){super(...arguments),this.viewModel=De(this),this._messages=ie(),this._hideZoomOutButton=!0,this.analysis=this.viewModel.analysis,this.view=this.viewModel.view,this.autoDestroyDisabled=!1,this.effectiveDisplayUnits=this.viewModel.effectiveDisplayUnits,this.hideChart=!1,this.hideClearButton=!1,this.hideLegend=!1,this.hideSelectButton=!1,this.hideSettingsButton=!1,this.hideSketchButton=!1,this.hideUniformChartScalingToggle=!1,this.hideUnitSelector=!1,this.highlightEnabled=this.viewModel.highlightEnabled,this.hoveredPosition=this.viewModel.hoveredPosition,this.icon="altitude",this.geometry=this.viewModel.geometry,this.elevationInfo=this.viewModel.elevationInfo,this.profiles=this.viewModel.profiles,this.progress=this.viewModel.progress,this.state=this.viewModel.state,this.uniformChartScaling=this.viewModel.uniformChartScaling,this.unitDistance=this.viewModel.unitDistance,this.unitElevation=this.viewModel.unitElevation,this.unitOptionsDistance=this.viewModel.unitOptionsDistance,this.unitOptionsElevation=this.viewModel.unitOptionsElevation,this.arcgisPropertyChange=re()("geometry","effectiveDisplayUnits","progress","state"),this.arcgisReady=ne()}get _selectButtonVisible(){return!this.hideSelectButton&&this.viewModel.selectButtonAvailable}get _chart(){return this._chartInitializationTask?.value}async destroy(){await this.manager.destroy()}async select(){U(this.viewModel.select())}async start(){U(this.viewModel.start())}async stop(){this.viewModel.stop()}load(){this.manager.onLifecycle(()=>[O(()=>({container:this._chartContainer}),({container:e})=>{this._destroyChart(),e&&(this._chartInitializationTask=j(async i=>await se({view:this.viewModel.view,analysisView:this.viewModel.analysisView,container:e,messages:this._messages,signal:i,uniformScaling:this.viewModel.uniformChartScaling,onRangeChange:(n,o)=>{this._hideZoomOutButton=n===1&&o===1},onCursorPositionChange:(n,o)=>{const{analysisView:c}=this.viewModel;c&&(c.hoveredPosition=n)}})))},{sync:!0,initial:!0}),O(()=>({chart:this._chart,view:this.viewModel.view,analysisView:this.viewModel.analysisView,uniformScaling:this.viewModel.uniformChartScaling}),({chart:e,view:i,analysisView:n,uniformScaling:o})=>{e&&(e.view=i,e.analysisView=n,e.uniformScaling=o)},{sync:!0,initial:!0}),{remove:()=>this._destroyChart()}])}_destroyChart(){const e=this._chart;this._chartInitializationTask?.abort(),this._chartInitializationTask=void 0,e?.destroy()}_onCancelButtonClick(){this.viewModel.stop()}_onDoneButtonClick(){this.viewModel.stop()}_getErrorMessage(){const e=ze[this.viewModel.errorState];return e?this._messages?.errors?.[e]:void 0}_onClearButtonClick(){this.viewModel.clear()}_onZoomOutButtonClick(){this._chart?.zoomOut()}_onChartContainerRef(e){this._chartContainer=e}render(){return d`<div aria-label=${this._messages.componentLabel??M} class=${F({container:!0,[V.widget]:!0,[V.widgetDisabled]:this.viewModel.state==="disabled",[V.panel]:!0})} role=presentation>${this._renderContentForState()}</div>`}_renderContentForState(){switch(this.viewModel.state){case"ready":return this._renderContentForReadyState();case"selecting":return this._renderContentForSelectingState();case"creating":return this._renderContentForCreatingState();case"selected":return this._renderContentForSelectedState();case"created":return this._renderContentForCreatedState();case"disabled":return this._renderContentForReadyState()}}_renderContentForReadyState(){const{_messages:e,hideSelectButton:i,hideSketchButton:n}=this,{selectButtonAvailable:o}=this.viewModel,c=!i&&o;let g;return!n&&c?g=e.readyPrompt:n?c?g=e.readyPromptSelectOnly:g=e.errors?.noProfile:g=e.readyPromptCreateOnly,this._renderContent({prompt:g,chart:!1,actions:_})}_renderContentForSelectingState(){const{view:e}=this.viewModel;if(!e)return;const i=this._messages[`selectingPrompt-${e.type}`];return this._renderContent({prompt:i,chart:!1,actions:[{type:"select-cancel"}]})}_renderContentForCreatingState(){const{viewModel:e}=this,{view:i}=e;if(!i)return;const n=e.hasVertices?[{type:"sketch-cancel"},{type:"sketch-done",disabled:!e.doneButtonAvailable}]:[{type:"select"},{type:"sketch",disabled:!0}];if(e.errorState==="no-valid-input"){const c=this._messages[`creatingPrompt-${i.type}`];return this._renderContent({chart:!1,actions:n,prompt:c})}const o=this._getErrorMessage();return o?this._renderContent({chart:!1,actions:n,prompt:o}):this._renderContent({chart:!0,actions:n})}_renderContentForSelectedState(){const e=this._getErrorMessage();return e?this._renderContent({chart:!1,actions:_,prompt:e}):this._renderContent({chart:!0,actions:_})}_renderContentForCreatedState(){const e=this._getErrorMessage();return e?this._renderContent({chart:!1,actions:_,prompt:e}):this._renderContent({chart:!0,actions:_})}_renderContent(e){const{viewModel:i}=this,n=i.geometry!=null;return d`<header class="header">${v({hidden:this._hideZoomOutButton,children:this._renderZoomOutButton()})}${v({hidden:this.hideClearButton||!n,children:this._renderClearButton()})}${v({hidden:this.hideSettingsButton,children:this._renderSettingsButton()})}</header><div class="main-container">${e.prompt!=null?this._renderPrompt(e.prompt):e.chart?this._renderChart():void 0}</div>${v({hidden:this.hideLegend,children:this._renderLegend()})}${this._renderActions(e)}`}_renderPrompt(e){return[d`<div class="prompt-container"><p class="prompt-message">${e}</p></div>`]}_renderZoomOutButton(){const e=this._messages.zoomOut??"";return d`<calcite-action appearance=transparent icon=magnifying-glass-minus @click=${this._onZoomOutButtonClick} scale=s .text=${e} title=${e??M}></calcite-action>`}_renderChart(){if(this.hideChart)return;const e=this._chart;return d`${this._renderSpinner({size:e?.chartVisible?"small":"large",visible:e?.spinnerVisible??!1})}<div class="chart-container" ${oe(this._onChartContainerRef)}></div>`}_renderSpinner(e){const i=e.size==="small",n=e.visible??!0;return d`<calcite-loader class=${F({spinner:!0,small:i,visible:n})} .inline=${i} label scale=s></calcite-loader>`}_renderClearButton(){const e=this._messages.clearProfile??"";return d`<calcite-action appearance=transparent icon=trash @click=${this._onClearButtonClick} scale=s .text=${e} title=${e??M}></calcite-action>`}_renderLegend(){return d`<arcgis-elevation-profile-legend .effectiveDisplayUnits=${this.viewModel.effectiveDisplayUnits} .featureSelected=${this.viewModel.featureSelected} .messages=${this._messages} .results=${this.viewModel.results}></arcgis-elevation-profile-legend>`}_renderSettingsButton(){return d`<arcgis-elevation-profile-settings .analysis=${this.viewModel.analysis} .hideUniformChartScalingToggle=${this.hideUniformChartScalingToggle} .hideUnitSelector=${this.hideUnitSelector} .messages=${this._messages} .uniformChartScaling=${this.viewModel.uniformChartScaling} .unitOptionsDistance=${this.viewModel.unitOptionsDistance} .unitOptionsElevation=${this.viewModel.unitOptionsElevation} @arcgisElevationProfileSettingsUniformChartScalingChange=${e=>{this.viewModel.uniformChartScaling=e.detail}}></arcgis-elevation-profile-settings>`}_renderActions({actions:e}){const i=this._messages,n=e.map(o=>{switch(o.type){case"sketch":return v({hidden:this.hideSketchButton,children:this._renderAction({action:o,label:i.sketchButtonLabel,primary:!0,onClick:()=>{this.start()}})});case"sketch-cancel":return v({hidden:this.hideSketchButton,children:this._renderAction({action:o,label:i.cancelButtonLabel,primary:!1,onClick:this._onCancelButtonClick})});case"sketch-done":return v({hidden:this.hideSketchButton,children:this._renderAction({action:o,label:i.doneButtonLabel,primary:!0,onClick:this._onDoneButtonClick})});case"select":return v({hidden:!this._selectButtonVisible,children:this._renderAction({action:o,label:i.selectButtonLabel,primary:!1,onClick:()=>{this.select()}})});case"select-cancel":return v({hidden:!this._selectButtonVisible,children:this._renderAction({action:o,label:i.cancelButtonLabel,primary:!1,onClick:this._onCancelButtonClick})});default:return}}).filter(Boolean);return n.length?d`<footer class="actions">${n}</footer>`:void 0}_renderAction({action:e,label:i,onClick:n,primary:o}){return d`<calcite-button .appearance=${o?"solid":"outline-fill"} class="action-button" .disabled=${e.disabled||void 0} @click=${n}>${i}</calcite-button>`}};P.properties={_hideZoomOutButton:16,_chartContainer:16,analysis:0,view:0,autoDestroyDisabled:5,effectiveDisplayUnits:32,hideChart:5,hideClearButton:5,hideLegend:5,hideSelectButton:5,hideSettingsButton:5,hideSketchButton:5,hideUniformChartScalingToggle:5,hideUnitSelector:5,highlightEnabled:5,hoveredPosition:9,icon:3,geometry:0,elevationInfo:0,label:1,messageOverrides:0,position:1,referenceElement:1,profiles:0,progress:40,state:3,uniformChartScaling:5,unitDistance:1,unitElevation:1,unitOptionsDistance:0,unitOptionsElevation:0},P.styles=Ce;let D=P;function v(t){return t.hidden?void 0:t.children}const _=[{type:"select"},{type:"sketch"}],ze={none:void 0,"no-valid-input":"noProfile","no-available-profiles":"noProfile","too-complex":"tooComplex",unknown:"unknown","invalid-geometry":"invalidGeometry"};ge("arcgis-elevation-profile-next",D);export{D as ArcgisElevationProfileNext};
