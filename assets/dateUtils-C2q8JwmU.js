import{ct as j,cu as k,cv as E,N as H,bW as S,cw as R,cx as s,cy as W,cz as Z,cA as B,cB as G,bz as J,cC as P,cD as M,z as U,cE as x,aR as _,cF as $,cG as b}from"./index-Bp3GeDhQ.js";const q=M,F={date:null,time:null,timeZoneOffset:null},ee=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]),K="latn",L=e=>"valueAsDate"in e;function c(e){return{locale:U(),numberingSystem:K,zone:e??q}}function N(e,n){return e==null?null:s.fromMillis(e,c(n))}function Q(e,n){if(e==null||!R(e)||e===""){if(n){const l=s.local({zone:n});return{date:null,time:null,timeZoneOffset:l.isValid?l.offset.toString():null}}return F}const t=s.fromISO(e,{setZone:!0});return{date:t.toFormat(Z,c()),time:t.toFormat(W.HMS_MS,c()),timeZoneOffset:t.offset.toString()}}function ne(e,n){if(e==null||!B(e)||isNaN(e))return F;const t=N(e,n);return t?{date:t.toFormat(Z,c(n)),time:t.toFormat(G,c(n))}:F}function te(e){switch(e.type){case"date":default:return S("short-date-short-time");case"date-only":return S("short-date");case"time-only":return S("short-time");case"timestamp-offset":return{...S("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function le(e,n,t){if(!e||n==null)return null;switch(e.type){case"date":return H(n,t);case"date-only":return E(n,t);case"time-only":return k(n,t);case"timestamp-offset":return j(n,t);default:return null}}function oe(e){const{dateComponent:n,defaultTimeZone:t,timeComponent:l,timeZoneComponent:o,oldValue:r}=e;if(!n?.value)return null;const{year:i,month:a,day:u}=s.fromFormat(n.value,Z),{hour:f,minute:w,second:v,millisecond:d}=I(l,M)??s.now(),y=Q(r,t),m=o?.value===""?null:o?.value,p=m?parseInt(m,10):y.timeZoneOffset!=null?parseInt(y.timeZoneOffset,10):new Date().getTimezoneOffset(),O=P.instance(p),h=s.fromObject({year:i,month:a,day:u,hour:f,minute:w,second:v,millisecond:d},{zone:O});return h.isValid?h.toISO({includeOffset:!0}):null}function ae(e){const{dateComponent:n,timeComponent:t,timeZone:l,max:o,min:r,oldValue:i}=e,a=I(n,l);let u=!!e.applyRange;if(!a)return null;let f=null;if(t?.value!=null){const v=I(t,l),d=Date.now(),y=o!=null&&o<d?o:d,m=s.fromMillis(y,c(l)),p=a||m,{year:O,month:h,day:g}=p,{hour:z,minute:T,second:V,millisecond:A}=v||m;f=p.set({year:O,month:h,day:g,hour:z,minute:T,second:V,millisecond:A})}else{const v=N(D({value:i??Date.now(),max:o,min:r}),l),{year:d,month:y,day:m}=a,{hour:p,minute:O,second:h,millisecond:g}=v;u=!0,f=a.set({year:d,month:y,day:m,hour:p,minute:O,second:h,millisecond:g})}if(!f.isValid)return null;const w=f.toMillis();return u?D({value:w,max:o,min:r}):w}function I(e,n){if(e?.value==null||Array.isArray(e.value))return null;let t=null;return t=L(e)?s.fromFormat(e.value,Z,c(n)):x(e.value),t?.isValid?t:null}function C(e){const{max:n,min:t,value:l}=e;return!isNaN(l)&&!(n!=null&&l>n)&&!(t!=null&&l<t)}function D(e){const{max:n,min:t,value:l}=e;return n!=null&&t!=null?_(l,t,n):n!=null&&l>n?n:t!=null&&l<t?t:l}function X(e){if(!e)return"";const n=e.split(".").at(0);if(!n||n.length<1)throw new J("invalid time-only field",`Cannot parse valid time-only field value from ${e}`);const t=n.split(":"),l=new Array(3);for(let o=0;o<3;o++){const r=t.at(o)??"";l[o]=r.padStart(2,"0")}return l.join(":")}function re(e,n){switch(n){case"date":return e.getTime();case"date-only":return e.toISODate();case"time-only":return X(e.toISOTime(!0,!1));case"timestamp-offset":return e.toISOString(!1);default:return null}}function ue(e){return!!e&&typeof e=="object"&&"getTime"in e&&"toISOString"in e&&"timeZone"in e}function ie(e){const{type:n,range:t,value:l}=e;if(l==null||!t||l===t.min||l===t.max)return!0;if(n==="date")return C({value:l,min:t.min,max:t.max});const{rawMax:o,rawMin:r}=t;let i=null,a=null,u=null;switch(n){case"date-only":i=b(o),a=b(r),u=b(l);break;case"time-only":i=x(o),a=x(r),u=x(l);break;case"timestamp-offset":i=$(o),a=$(r),u=$(l)}return!u||C({value:u.valueOf(),min:a?.valueOf(),max:i?.valueOf()})}export{ne as C,X as E,te as F,re as H,c as I,ue as J,ae as N,ie as R,le as T,Q as V,oe as b,ee as g,K as j,C as k};
