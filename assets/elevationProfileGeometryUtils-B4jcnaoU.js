const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lengthOperator-iEMdnNxf.js","assets/index-Brd6-W-v.js","assets/index-ni9qn0ie.css","assets/Point2D-8Py_srEd.js","assets/Envelope2D-DQ3Tn1o-.js","assets/ProjectionTransformation-CfbkWcJt.js","assets/Transformation2D-Ckyhe4wc.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/jsonConverter-C7-7hi8T.js","assets/apiConverter-CH50OwTE.js"])))=>i.map(i=>d[i]);
import{bI as L,a3 as D,d1 as v,eM as S,eF as M,al as j,oB as T,aU as x,oz as U,rh as B,aj as P,oZ as F,fc as N,aG as O,f2 as k,hN as C,aL as V,aF as H}from"./index-Brd6-W-v.js";class R extends L{constructor(t,n,r){super(t,n,r),this.name="unknown",this.name=t}}class _ extends R{constructor(){super("too-complex","The input geometry has too many points.")}}class le extends R{constructor(){super("invalid-geometry","The input geometry is invalid.")}}class fe extends R{constructor(){super("elevation-query-error","Error querying elevation from provider.")}}class he extends R{constructor(){super("unknown","Unknown error.")}}async function de(e,t,n,r,i,c,s){let a,o,h;const l=e.spatialReference,d=l.isGeographic||l.isWebMercator;let g=0;if(!d){const{execute:u}=await D(()=>import("./lengthOperator-iEMdnNxf.js").then(f=>f.l),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));v(s),g=u(e,{unit:"meters"}),v(s)}const p=1/S(r);if(d){await M([{source:l,dest:r},{source:l,dest:j.WGS84}],s);const u=ce(e);a=T([u],"meters")[0];const f=$(a,i);if(z(e,a,f)>c)throw new _;const y=A(u,t,n);({densifiedPath:o,distances:h}=ee(y,f,p)),o=x(o,r)}else{await M([{source:l,dest:r}],s),a=g;const u=$(a,i);if(z(e,a,u)>c)throw new _;const f=A(e,t,n);({densifiedPath:o,distances:h}=Y(f,u,p)),v(s),o=x(o,r)}return{densifiedPath:o,pathLength:a*p,distances:h}}function $(e,t){const n=e/t.densificationMaxSamples;return Math.max(t.samplingDistance,n)}function A(e,t,n){if(t==null)return b(e);const r=e.spatialReference,i=t.mode,c=B(t,r);let s=null;switch(n.type){case"2d":s=J(e,i,c);break;case"3d":s=K(e,i,c,n)}return s==null?b(e):new P({hasZ:!0,hasM:!1,spatialReference:r,paths:E(e.paths,s)})}function J({hasZ:e},t,n){return t==="absolute-height"?e?([r,i,c])=>[r,i,c+n]:([r,i])=>[r,i,n]:null}function K({spatialReference:e,hasZ:t},n,r,{elevationProvider:i}){const c=(s,a,o,h)=>i?.getElevation(s,a,o,e,h)??0;switch(n){case"on-the-ground":return([s,a])=>[s,a,c(s,a,0,"ground")];case"absolute-height":return t?([s,a,o])=>[s,a,o+r]:([s,a])=>[s,a,r];case"relative-to-ground":return t?([s,a,o])=>[s,a,o+c(s,a,o,"ground")+r]:([s,a])=>[s,a,c(s,a,0,"ground")+r];case"relative-to-scene":return t?([s,a,o])=>[s,a,o+c(s,a,o,"scene")+r]:([s,a])=>[s,a,c(s,a,0,"scene")+r];default:return null}}function b(e){return e.hasZ?new P({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:E(e.paths,([t,n])=>[t,n])}):e}function E(e,t){const n=e.length,r=new Array(n);for(let i=0;i<n;++i){const c=e[i],s=c.length,a=new Array(c.length);r[i]=a;for(let o=0;o<s;++o)a[o]=t(c[o])}return r}function Q(e){return G(e)&&e.paths.some(t=>t.length>1)}function pe(e){return X(e)&&Q(e.geometry)}function X(e){return W(e)&&G(e?.geometry)}function G(e){return!W(e)&&e!=null&&e.type==="polyline"}function W(e){return e!=null&&"geometry"in e}function me(e){const t=e?.layer;return t!=null&&t.type==="graphics"&&t.internal}function q(e,t,n,r,i){const{spatialReference:c,hasZ:s}=e,a={from:null,to:null,distance:0,azimuth:0,reverseAzimuth:0,spatialReference:c,metersPerSR:S(c)},o=[],h=[];let l=0;for(let d=0;d<e.paths.length;++d){const g=e.paths[d],p=new Array,u=new Array;let f=0;for(let y=1;y<g.length;++y){const I=g[y-1],Z=g[y],w=r(a,I,Z);let m;for(m=f;m<w.distance&&!F(m,w.distance);m+=t)p.push(i(w,m)),u.push((l+m)*n);f=m-w.distance,l+=w.distance,p.push(Z),u.push(l*n)}o[d]=p,h[d]=u}return{densifiedPath:new P({spatialReference:c,hasZ:s,paths:o}),distances:h}}function Y(e,t,n){const{hasZ:r}=e;return q(e,t,n,ne,r?oe:ae)}function ee(e,t,n){const{hasZ:r}=e;return q(e,t,n,te,r?se:re)}function te(e,t,n){return e.distance=0,N(e,t,n,e.spatialReference),e.from=t,e.to=n,e}function ne(e,t,n){return e.from=t,e.to=n,e.distance=O(n,t)*e.metersPerSR,e}function re({from:e,azimuth:t,spatialReference:n},r){return k([0,0],e,t,r,n)}function se({from:e,to:t,azimuth:n,distance:r,spatialReference:i},c){const s=c/r,a=[0,0,C(e[2],t[2],s)];return k(a,e,n,c,i),a}function ae({from:e,to:t,distance:n},r){return V([0,0],e,t,r/n)}function oe({from:e,to:t,distance:n},r){return H([0,0,0],e,t,r/n)}function ce(e){return U(e.spatialReference)?e:x(e,j.WGS84)}function ie(e){return e.paths.reduce((t,n)=>t+n.length,0)}function z(e,t,n){return ie(e)+Math.floor(t/n)+Math.max(0,e.paths.reduce(r=>1+r,0)-1)}export{me as A,ie as B,Q as M,G as U,_ as e,he as n,le as o,R as s,fe as t,pe as x,de as y};
