const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lengthOperator-CxFhBUNM.js","assets/index-CgzAF5Ey.js","assets/index-ni9qn0ie.css","assets/Point2D-8Py_srEd.js","assets/Envelope2D-DQ3Tn1o-.js","assets/ProjectionTransformation-D72vYhR2.js","assets/Transformation2D-Ckyhe4wc.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/jsonConverter-EjytI4Do.js","assets/apiConverter-CvNJfrRe.js"])))=>i.map(i=>d[i]);
import{a5 as I,V as L,dq as v,fn as q,fh as Z,ab as S,aW as x,rR as T,ae as P,pM as O,aH as U,ji as V,aM as B,aG as C}from"./index-CgzAF5Ey.js";import{R as H,y as N,q as F,j as W}from"./geodesicUtils-Cfv0uT1u.js";class R extends I{constructor(t,n,r){super(t,n,r),this.name="unknown",this.name=t}}class _ extends R{constructor(){super("too-complex","The input geometry has too many points.")}}class fe extends R{constructor(){super("invalid-geometry","The input geometry is invalid.")}}class he extends R{constructor(){super("elevation-query-error","Error querying elevation from provider.")}}class pe extends R{constructor(){super("unknown","Unknown error.")}}async function de(e,t,n,r,i,c,s){let a,o,h;const l=e.spatialReference,p=l.isGeographic||l.isWebMercator;let g=0;if(!p){const{execute:u}=await L(()=>import("./lengthOperator-CxFhBUNM.js").then(f=>f.l),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));v(s),g=u(e,{unit:"meters"}),v(s)}const d=1/q(r);if(p){await Z([{source:l,dest:r},{source:l,dest:S.WGS84}],s);const u=ce(e);a=H([u],"meters")[0];const f=$(a,i);if(j(e,a,f)>c)throw new _;const y=A(u,t,n);({densifiedPath:o,distances:h}=ee(y,f,d)),o=x(o,r)}else{await Z([{source:l,dest:r}],s),a=g;const u=$(a,i);if(j(e,a,u)>c)throw new _;const f=A(e,t,n);({densifiedPath:o,distances:h}=Y(f,u,d)),v(s),o=x(o,r)}return{densifiedPath:o,pathLength:a*d,distances:h}}function $(e,t){const n=e/t.densificationMaxSamples;return Math.max(t.samplingDistance,n)}function A(e,t,n){if(t==null)return b(e);const r=e.spatialReference,i=t.mode,c=T(t,r);let s=null;switch(n.type){case"2d":s=J(e,i,c);break;case"3d":s=K(e,i,c,n)}return s==null?b(e):new P({hasZ:!0,hasM:!1,spatialReference:r,paths:k(e.paths,s)})}function J({hasZ:e},t,n){return t==="absolute-height"?e?([r,i,c])=>[r,i,c+n]:([r,i])=>[r,i,n]:null}function K({spatialReference:e,hasZ:t},n,r,{elevationProvider:i}){const c=(s,a,o,h)=>i?.getElevation(s,a,o,e,h)??0;switch(n){case"on-the-ground":return([s,a])=>[s,a,c(s,a,0,"ground")];case"absolute-height":return t?([s,a,o])=>[s,a,o+r]:([s,a])=>[s,a,r];case"relative-to-ground":return t?([s,a,o])=>[s,a,o+c(s,a,o,"ground")+r]:([s,a])=>[s,a,c(s,a,0,"ground")+r];case"relative-to-scene":return t?([s,a,o])=>[s,a,o+c(s,a,o,"scene")+r]:([s,a])=>[s,a,c(s,a,0,"scene")+r];default:return null}}function b(e){return e.hasZ?new P({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:k(e.paths,([t,n])=>[t,n])}):e}function k(e,t){const n=e.length,r=new Array(n);for(let i=0;i<n;++i){const c=e[i],s=c.length,a=new Array(c.length);r[i]=a;for(let o=0;o<s;++o)a[o]=t(c[o])}return r}function Q(e){return z(e)&&e.paths.some(t=>t.length>1)}function me(e){return X(e)&&Q(e.geometry)}function X(e){return E(e)&&z(e?.geometry)}function z(e){return!E(e)&&e!=null&&e.type==="polyline"}function E(e){return e!=null&&"geometry"in e}function ge(e){const t=e?.layer;return t!=null&&t.type==="graphics"&&t.internal}function G(e,t,n,r,i){const{spatialReference:c,hasZ:s}=e,a={from:null,to:null,distance:0,azimuth:0,reverseAzimuth:0,spatialReference:c,metersPerSR:q(c)},o=[],h=[];let l=0;for(let p=0;p<e.paths.length;++p){const g=e.paths[p],d=new Array,u=new Array;let f=0;for(let y=1;y<g.length;++y){const D=g[y-1],M=g[y],w=r(a,D,M);let m;for(m=f;m<w.distance&&!O(m,w.distance);m+=t)d.push(i(w,m)),u.push((l+m)*n);f=m-w.distance,l+=w.distance,d.push(M),u.push(l*n)}o[p]=d,h[p]=u}return{densifiedPath:new P({spatialReference:c,hasZ:s,paths:o}),distances:h}}function Y(e,t,n){const{hasZ:r}=e;return G(e,t,n,ne,r?oe:ae)}function ee(e,t,n){const{hasZ:r}=e;return G(e,t,n,te,r?se:re)}function te(e,t,n){return e.distance=0,F(e,t,n,e.spatialReference),e.from=t,e.to=n,e}function ne(e,t,n){return e.from=t,e.to=n,e.distance=U(n,t)*e.metersPerSR,e}function re({from:e,azimuth:t,spatialReference:n},r){return W([0,0],e,t,r,n)}function se({from:e,to:t,azimuth:n,distance:r,spatialReference:i},c){const s=c/r,a=[0,0,V(e[2],t[2],s)];return W(a,e,n,c,i),a}function ae({from:e,to:t,distance:n},r){return B([0,0],e,t,r/n)}function oe({from:e,to:t,distance:n},r){return C([0,0,0],e,t,r/n)}function ce(e){return N(e.spatialReference)?e:x(e,S.WGS84)}function ie(e){return e.paths.reduce((t,n)=>t+n.length,0)}function j(e,t,n){return ie(e)+Math.floor(t/n)+Math.max(0,e.paths.reduce(r=>1+r,0)-1)}export{ge as A,ie as B,Q as M,z as U,_ as e,pe as n,fe as o,R as s,he as t,me as x,de as y};
