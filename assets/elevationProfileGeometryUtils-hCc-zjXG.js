const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lengthOperator-gYjy87fi.js","assets/index-CVzGOCNQ.js","assets/index-ni9qn0ie.css","assets/Point2D-8Py_srEd.js","assets/Envelope2D-DQ3Tn1o-.js","assets/ProjectionTransformation-KGXLRiS7.js","assets/Transformation2D-Ckyhe4wc.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/jsonConverter-5JRjSyWN.js","assets/apiConverter-BzlOtf7d.js"])))=>i.map(i=>d[i]);
import{bz as I,_ as U,cU as v,eD as S,ew as _,ag as W,ow as L,aP as P,ou as T,rf as B,ae as x,oU as O,f4 as C,aB as N,eW as k,hI as V,aG as F,aA as H}from"./index-CVzGOCNQ.js";class R extends I{constructor(t,n,r){super(t,n,r),this.name="unknown",this.name=t}}class A extends R{constructor(){super("too-complex","The input geometry has too many points.")}}class le extends R{constructor(){super("invalid-geometry","The input geometry is invalid.")}}class fe extends R{constructor(){super("elevation-query-error","Error querying elevation from provider.")}}class he extends R{constructor(){super("unknown","Unknown error.")}}async function pe(e,t,n,r,i,c,s){let a,o,h;const l=e.spatialReference,p=l.isGeographic||l.isWebMercator;let g=0;if(!p){const{execute:u}=await U(()=>import("./lengthOperator-gYjy87fi.js").then(f=>f.l),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));v(s),g=u(e,{unit:"meters"}),v(s)}const d=1/S(r);if(p){await _([{source:l,dest:r},{source:l,dest:W.WGS84}],s);const u=ce(e);a=L([u],"meters")[0];const f=M(a,i);if(z(e,a,f)>c)throw new A;const y=$(u,t,n);({densifiedPath:o,distances:h}=ee(y,f,d)),o=P(o,r)}else{await _([{source:l,dest:r}],s),a=g;const u=M(a,i);if(z(e,a,u)>c)throw new A;const f=$(e,t,n);({densifiedPath:o,distances:h}=Y(f,u,d)),v(s),o=P(o,r)}return{densifiedPath:o,pathLength:a*d,distances:h}}function M(e,t){const n=e/t.densificationMaxSamples;return Math.max(t.samplingDistance,n)}function $(e,t,n){if(t==null)return b(e);const r=e.spatialReference,i=t.mode,c=B(t,r);let s=null;switch(n.type){case"2d":s=J(e,i,c);break;case"3d":s=K(e,i,c,n)}return s==null?b(e):new x({hasZ:!0,hasM:!1,spatialReference:r,paths:E(e.paths,s)})}function J({hasZ:e},t,n){return t==="absolute-height"?e?([r,i,c])=>[r,i,c+n]:([r,i])=>[r,i,n]:null}function K({spatialReference:e,hasZ:t},n,r,{elevationProvider:i}){const c=(s,a,o,h)=>i?.getElevation(s,a,o,e,h)??0;switch(n){case"on-the-ground":return([s,a])=>[s,a,c(s,a,0,"ground")];case"absolute-height":return t?([s,a,o])=>[s,a,o+r]:([s,a])=>[s,a,r];case"relative-to-ground":return t?([s,a,o])=>[s,a,o+c(s,a,o,"ground")+r]:([s,a])=>[s,a,c(s,a,0,"ground")+r];case"relative-to-scene":return t?([s,a,o])=>[s,a,o+c(s,a,o,"scene")+r]:([s,a])=>[s,a,c(s,a,0,"scene")+r];default:return null}}function b(e){return e.hasZ?new x({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:E(e.paths,([t,n])=>[t,n])}):e}function E(e,t){const n=e.length,r=new Array(n);for(let i=0;i<n;++i){const c=e[i],s=c.length,a=new Array(c.length);r[i]=a;for(let o=0;o<s;++o)a[o]=t(c[o])}return r}function Q(e){return G(e)&&e.paths.some(t=>t.length>1)}function de(e){return X(e)&&Q(e.geometry)}function X(e){return j(e)&&G(e?.geometry)}function G(e){return!j(e)&&e!=null&&e.type==="polyline"}function j(e){return e!=null&&"geometry"in e}function me(e){const t=e?.layer;return t!=null&&t.type==="graphics"&&t.internal}function q(e,t,n,r,i){const{spatialReference:c,hasZ:s}=e,a={from:null,to:null,distance:0,azimuth:0,reverseAzimuth:0,spatialReference:c,metersPerSR:S(c)},o=[],h=[];let l=0;for(let p=0;p<e.paths.length;++p){const g=e.paths[p],d=new Array,u=new Array;let f=0;for(let y=1;y<g.length;++y){const D=g[y-1],Z=g[y],w=r(a,D,Z);let m;for(m=f;m<w.distance&&!O(m,w.distance);m+=t)d.push(i(w,m)),u.push((l+m)*n);f=m-w.distance,l+=w.distance,d.push(Z),u.push(l*n)}o[p]=d,h[p]=u}return{densifiedPath:new x({spatialReference:c,hasZ:s,paths:o}),distances:h}}function Y(e,t,n){const{hasZ:r}=e;return q(e,t,n,ne,r?oe:ae)}function ee(e,t,n){const{hasZ:r}=e;return q(e,t,n,te,r?se:re)}function te(e,t,n){return e.distance=0,C(e,t,n,e.spatialReference),e.from=t,e.to=n,e}function ne(e,t,n){return e.from=t,e.to=n,e.distance=N(n,t)*e.metersPerSR,e}function re({from:e,azimuth:t,spatialReference:n},r){return k([0,0],e,t,r,n)}function se({from:e,to:t,azimuth:n,distance:r,spatialReference:i},c){const s=c/r,a=[0,0,V(e[2],t[2],s)];return k(a,e,n,c,i),a}function ae({from:e,to:t,distance:n},r){return F([0,0],e,t,r/n)}function oe({from:e,to:t,distance:n},r){return H([0,0,0],e,t,r/n)}function ce(e){return T(e.spatialReference)?e:P(e,W.WGS84)}function ie(e){return e.paths.reduce((t,n)=>t+n.length,0)}function z(e,t,n){return ie(e)+Math.floor(t/n)+Math.max(0,e.paths.reduce(r=>1+r,0)-1)}export{me as A,ie as B,Q as M,G as U,A as e,he as n,le as o,R as s,fe as t,de as x,pe as y};
