const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lengthOperator-Br-Q2qCg.js","assets/index-BrQW8HOS.js","assets/index-lUE0m221.css","assets/Point2D-DNXcsliy.js","assets/Envelope2D-CUWyosZh.js","assets/ProjectionTransformation-BjD312Kq.js","assets/Transformation2D-BUBnKQZf.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/jsonConverter-BHYd2kGf.js","assets/apiConverter---8F7iZ4.js"])))=>i.map(i=>d[i]);
import{a4 as D,U as I,ds as v,fn as b,fh as M,aa as k,aV as x,rK as T,ad as P,pF as U,aG as F,j1 as O,aL as V,aF as B}from"./index-BrQW8HOS.js";import{R as C,y as K,q as N,j as q}from"./geodesicUtils-BJZXB7Hp.js";class R extends D{constructor(t,n,r){super(t,n,r),this.name="unknown",this.name=t}}class _ extends R{constructor(){super("too-complex","The input geometry has too many points.")}}class fe extends R{constructor(){super("invalid-geometry","The input geometry is invalid.")}}class he extends R{constructor(){super("elevation-query-error","Error querying elevation from provider.")}}class pe extends R{constructor(){super("unknown","Unknown error.")}}async function de(e,t,n,r,i,c,s){let a,o,h;const l=e.spatialReference,p=l.isGeographic||l.isWebMercator;let g=0;if(!p){const{execute:u}=await I(()=>import("./lengthOperator-Br-Q2qCg.js").then(f=>f.l),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));v(s),g=u(e,{unit:"meters"}),v(s)}const d=1/b(r);if(p){await M([{source:l,dest:r},{source:l,dest:k.WGS84}],s);const u=ce(e);a=C([u],"meters")[0];const f=$(a,i);if(S(e,a,f)>c)throw new _;const y=A(u,t,n);({densifiedPath:o,distances:h}=ee(y,f,d)),o=x(o,r)}else{await M([{source:l,dest:r}],s),a=g;const u=$(a,i);if(S(e,a,u)>c)throw new _;const f=A(e,t,n);({densifiedPath:o,distances:h}=Y(f,u,d)),v(s),o=x(o,r)}return{densifiedPath:o,pathLength:a*d,distances:h}}function $(e,t){const n=e/t.densificationMaxSamples;return Math.max(t.samplingDistance,n)}function A(e,t,n){if(t==null)return j(e);const r=e.spatialReference,i=t.mode,c=T(t,r);let s=null;switch(n.type){case"2d":s=H(e,i,c);break;case"3d":s=J(e,i,c,n)}return s==null?j(e):new P({hasZ:!0,hasM:!1,spatialReference:r,paths:z(e.paths,s)})}function H({hasZ:e},t,n){return t==="absolute-height"?e?([r,i,c])=>[r,i,c+n]:([r,i])=>[r,i,n]:null}function J({spatialReference:e,hasZ:t},n,r,{elevationProvider:i}){const c=(s,a,o,h)=>i?.getElevation(s,a,o,e,h)??0;switch(n){case"on-the-ground":return([s,a])=>[s,a,c(s,a,0,"ground")];case"absolute-height":return t?([s,a,o])=>[s,a,o+r]:([s,a])=>[s,a,r];case"relative-to-ground":return t?([s,a,o])=>[s,a,o+c(s,a,o,"ground")+r]:([s,a])=>[s,a,c(s,a,0,"ground")+r];case"relative-to-scene":return t?([s,a,o])=>[s,a,o+c(s,a,o,"scene")+r]:([s,a])=>[s,a,c(s,a,0,"scene")+r];default:return null}}function j(e){return e.hasZ?new P({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:z(e.paths,([t,n])=>[t,n])}):e}function z(e,t){const n=e.length,r=new Array(n);for(let i=0;i<n;++i){const c=e[i],s=c.length,a=new Array(c.length);r[i]=a;for(let o=0;o<s;++o)a[o]=t(c[o])}return r}function Q(e){return E(e)&&e.paths.some(t=>t.length>1)}function me(e){return X(e)&&Q(e.geometry)}function X(e){return G(e)&&E(e?.geometry)}function E(e){return!G(e)&&e!=null&&e.type==="polyline"}function G(e){return e!=null&&"geometry"in e}function ge(e){const t=e?.layer;return t!=null&&t.type==="graphics"&&t.internal}function W(e,t,n,r,i){const{spatialReference:c,hasZ:s}=e,a={from:null,to:null,distance:0,azimuth:0,reverseAzimuth:0,spatialReference:c,metersPerSR:b(c)},o=[],h=[];let l=0;for(let p=0;p<e.paths.length;++p){const g=e.paths[p],d=new Array,u=new Array;let f=0;for(let y=1;y<g.length;++y){const L=g[y-1],Z=g[y],w=r(a,L,Z);let m;for(m=f;m<w.distance&&!U(m,w.distance);m+=t)d.push(i(w,m)),u.push((l+m)*n);f=m-w.distance,l+=w.distance,d.push(Z),u.push(l*n)}o[p]=d,h[p]=u}return{densifiedPath:new P({spatialReference:c,hasZ:s,paths:o}),distances:h}}function Y(e,t,n){const{hasZ:r}=e;return W(e,t,n,ne,r?oe:ae)}function ee(e,t,n){const{hasZ:r}=e;return W(e,t,n,te,r?se:re)}function te(e,t,n){return e.distance=0,N(e,t,n,e.spatialReference),e.from=t,e.to=n,e}function ne(e,t,n){return e.from=t,e.to=n,e.distance=F(n,t)*e.metersPerSR,e}function re({from:e,azimuth:t,spatialReference:n},r){return q([0,0],e,t,r,n)}function se({from:e,to:t,azimuth:n,distance:r,spatialReference:i},c){const s=c/r,a=[0,0,O(e[2],t[2],s)];return q(a,e,n,c,i),a}function ae({from:e,to:t,distance:n},r){return V([0,0],e,t,r/n)}function oe({from:e,to:t,distance:n},r){return B([0,0,0],e,t,r/n)}function ce(e){return K(e.spatialReference)?e:x(e,k.WGS84)}function ie(e){return e.paths.reduce((t,n)=>t+n.length,0)}function S(e,t,n){return ie(e)+Math.floor(t/n)+Math.max(0,e.paths.reduce(r=>1+r,0)-1)}export{ge as A,ie as B,Q as M,E as U,_ as e,pe as n,fe as o,R as s,he as t,me as x,de as y};
