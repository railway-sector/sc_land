import{i as q,L as G,v as A,lY as X,c as D,m1 as ce,m2 as Ee,nP as y,b as o,d as u,gv as z,nR as v,f3 as E,h$ as f,m6 as he,D as S,m7 as Y,uX as w,uY as F,uZ as ee,u_ as te,u$ as Oe,v0 as U,v1 as O,v2 as k,v3 as Pe,nL as L,m3 as Me,v4 as $,v5 as ue,m8 as Le,lX as He,mK as Ke,rq as pe,v6 as Ve,v7 as Be,v8 as H,v9 as fe,va as ie,vb as K,vc as ve,vd as Ue,ve as V,vf as m,vg as h,mw as Ne,vh as je,vi as Ce,vj as ge,vk as We,vl as me,vm as be,p as B,vn as we,ma as _e,nH as qe,vo as Ge}from"./index-BrQW8HOS.js";import"./customElement-BSPyQdWb.js";import"./index-3ZhkCLKv.js";import{c as Xe}from"./repeat-Bas_Vp9w.js";import{t as Se}from"./throttle-DExGLcjO.js";const p={imageContainer:"image-container",container:"container",selectable:"selectable",nonInteractive:"non-interactive",selected:"selected",internalSvgContainer:"internal-svg-container",internalSvgDisabled:"internal-svg-disabled",internalSvgEmpty:"internal-svg-empty",swatch:"swatch",checker:"checker",noColorSwatch:"swatch--no-color"},Ye={image:"image"},ye=4,I={squareSize:ye,size:ye*2},T={checker:"checker",shape:"shape",swatchRect:"swatch-rect",swatchSolid:"swatch-solid",swatchTransparent:"swatch-transparent"},Ze=q`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block;--calcite-internal-swatch-inset: var(--calcite-spacing-xxs)}:host([scale=s]) .container{--calcite-internal-swatch-size: var(--calcite-spacing-xl)}:host([scale=m]) .container{--calcite-internal-swatch-size: var(--calcite-spacing-xxl)}:host([scale=l]) .container{--calcite-internal-swatch-size: var(--calcite-spacing-xxxl)}.container{position:relative;box-sizing:border-box;justify-content:center;overflow:hidden;outline-color:transparent;font-size:var(--calcite-internal-swatch-font-size, var(--calcite-font-size));block-size:var(--calcite-internal-swatch-size, auto);inline-size:var(--calcite-internal-swatch-size, auto);min-inline-size:var(--calcite-internal-swatch-size, auto);border-radius:var(--calcite-swatch-corner-radius, 0)}.container:not(.non-interactive):hover{cursor:pointer;box-shadow:0 0 0 var(--calcite-border-width-md) var(--calcite-color-border-2)}.container.selectable{cursor:pointer}.container:not(.non-interactive):focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.swatch{position:absolute;display:inline-flex;overflow:hidden;z-index:calc(var(--calcite-z-index) + 1);block-size:var(--calcite-internal-swatch-size, auto);inline-size:var(--calcite-internal-swatch-size, auto);min-inline-size:var(--calcite-internal-swatch-size, auto);border-radius:var(--calcite-swatch-corner-radius, 0)}:host([selected]) .swatch{inset:var(--calcite-internal-swatch-inset);block-size:calc(var(--calcite-internal-swatch-size, auto) - 2 * var(--calcite-internal-swatch-inset));inline-size:calc(var(--calcite-internal-swatch-size, auto) - 2 * var(--calcite-internal-swatch-inset));min-inline-size:calc(var(--calcite-internal-swatch-size, auto) - 2 * var(--calcite-internal-swatch-inset))}:host([selected]) .container{box-shadow:inset 0 0 0 var(--calcite-border-width-md) var(--calcite-color-text-1),inset 0 0 0 var(--calcite-border-width-lg) var(--calcite-color-foreground-1)}:host([selected]) .image-container{inset:var(--calcite-internal-swatch-inset)}.image-container{position:absolute;display:inline-flex;overflow:hidden;z-index:calc(var(--calcite-z-index) + 2);inset:var(--calcite-spacing-px);display:flex;align-items:center;justify-content:center;pointer-events:none;border-radius:var(--calcite-swatch-corner-radius, 0)}.internal-svg-container{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;z-index:calc(var(--calcite-z-index) + 2)}.swatch{overflow:hidden;block-size:inherit;inline-size:inherit}.swatch--no-color rect{fill:var(--calcite-color-foreground-1)}:host([selected]) #swatch-rect,:host([selected]) #swatch-solid,:host([selected]) #swatch-transparent{stroke-width:0}#swatch-rect,#swatch-solid,#swatch-transparent{stroke:var(--calcite-color-text-1);stroke-width:var(--calcite-border-width-md);stroke-opacity:.3;rx:var(--calcite-swatch-corner-radius)}.internal-svg-disabled{stroke:#6a6a6a;fill:#fff}.internal-svg-empty{stroke:var(--calcite-color-status-danger);stroke-width:3}.checker{fill:#cacaca}:host([hidden]){display:none}[hidden]{display:none}`,N=class N extends G{constructor(){super(),this.containerEl=A(),this.focusSetter=X()(this),this.hasImage=!1,this.disabled=!1,this.interactive=!1,this.scale="m",this.selected=!1,this.selectionMode="none",this.calciteInternalSwatchKeyEvent=D({cancelable:!1}),this.calciteInternalSwatchSelect=D({cancelable:!1}),this.calciteInternalSyncSelectedSwatches=D({cancelable:!1}),this.calciteSwatchSelect=D({cancelable:!1}),this.listen("keydown",this.keyDownHandler)}async setFocus(e){return this.focusSetter(()=>this.el,e)}async load(){this.handleColorChange(this.color)}willUpdate(e){e.has("selected")&&this.hasUpdated&&this.watchSelected(this.selected),e.has("color")&&this.handleColorChange(this.color)}updated(){ce(this)}loaded(){this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalSwatchKeyEvent.emit(e),e.preventDefault();break}}handleSlotImageChange(e){this.hasImage=Ee(e)}handleEmittingEvent(){this.interactive&&this.calciteSwatchSelect.emit()}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedSwatches.emit(),!this.parentSwatchGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalSwatchSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedSwatches.emit()}handleColorChange(e){this.internalColor=e?y(e):null}renderSwatchImage(){return u`<div class=${o(p.imageContainer)}><slot name=${Ye.image} @slotchange=${this.handleSlotImageChange}></slot></div>`}renderEmptyDisplay(){const e=this.scale==="s"?"12":this.scale==="m"?"16":"20";return u`<div class=${o(p.internalSvgContainer)}><svg fill=none height=${e} viewBox=${`0 0 ${e} ${e}`} width=${e} xmlns=http://www.w3.org/2000/svg>${z`<path class=${o(p.internalSvgEmpty)} d=${`M${e} 0L0 ${e}`} />`}</svg></div>`}renderDisabledDisplay(){const e=u`<svg fill=none height=14 viewBox="0 0 14 14" width=14 xmlns=http://www.w3.org/2000/svg>${z`<path class=${o(p.internalSvgDisabled)} d="M7 0.5C10.5899 0.5 13.5 3.41015 13.5 7C13.5 10.5899 10.5899 13.5 7 13.5C3.41015 13.5 0.5 10.5899 0.5 7C0.5 3.41015 3.41015 0.5 7 0.5ZM4.78906 10.917C5.44221 11.2866 6.19529 11.5 7 11.5C9.48528 11.5 11.5 9.48528 11.5 7C11.5 6.19529 11.2866 5.44221 10.917 4.78906L4.78906 10.917ZM7 2.5C4.51472 2.5 2.5 4.51472 2.5 7C2.5 7.95644 2.79808 8.84235 3.30664 9.57129L9.57129 3.30664C8.84235 2.79808 7.95644 2.5 7 2.5Z" />`}</svg>`,t=u`<svg fill=none height=18 viewBox="0 0 18 18" width=18 xmlns=http://www.w3.org/2000/svg>${z`<path class=${o(p.internalSvgDisabled)} d="M9 0.5C13.6944 0.5 17.5 4.30558 17.5 9C17.5 13.6944 13.6944 17.5 9 17.5C4.30558 17.5 0.5 13.6944 0.5 9C0.5 4.30558 4.30558 0.5 9 0.5ZM5.78125 14.2588C6.71828 14.8337 7.81941 15.167 9 15.167C12.4058 15.167 15.167 12.4058 15.167 9C15.167 7.81941 14.8337 6.71828 14.2588 5.78125L5.78125 14.2588ZM9 2.83301C5.59424 2.83301 2.83301 5.59424 2.83301 9C2.83301 10.3817 3.28731 11.6565 4.05469 12.6846L12.6846 4.05469C11.6565 3.28731 10.3817 2.83301 9 2.83301Z" />`}</svg>`;return u`<div class=${o(p.internalSvgContainer)}>${this.scale==="l"?t:e}</div>`}renderSwatch(){const{internalColor:e}=this,t="0",i=!e,a={height:"100%",rx:t,width:"100%"};if(i)return z`<clipPath id=${T.shape}><rect height=100% rx=${t} width=100% /></clipPath>${this.renderSwatchRect({clipPath:`inset(0 round "${t}")`,...a})}<line clip-path=url(#shape) x1=100% x2=0 y1=0 y2=100% />`;const l=e.alpha(),s=v(e),n=v(e,l<1);return z`<defs><pattern height=${I.size} id=${T.checker} patternUnits=userSpaceOnUse width=${I.size} x=0 y=0><rect class=${o(p.checker)} height=${I.squareSize} width=${I.squareSize} x=0 y=0 /><rect class=${o(p.checker)} height=${I.squareSize} width=${I.squareSize} x=${I.squareSize} y=${I.squareSize} /></pattern></defs>${this.renderSwatchRect({fill:"url(#checker)",rx:a.rx,height:a.height,width:a.width})}${this.renderSwatchRect({clipPath:l<1?"polygon(100% 0, 0 0, 0 100%)":`inset(0 round "${t}")`,fill:s,id:T.swatchSolid,...a})}${l<1?this.renderSwatchRect({clipPath:"polygon(100% 0, 100% 100%, 0 100%)",fill:n,id:T.swatchTransparent,key:"opacity-fill",...a}):null}`}renderSwatchRect({clipPath:e,fill:t,height:i,key:a,rx:l,stroke:s,strokeWidth:n,width:r,id:c}){return E(a,z`<rect clip-path=${e??f} fill=${t??f} height=${i??f} id=${(c||T.swatchRect)??f} rx=${l??f} stroke=${s??f} stroke-width=${n??f} width=${r??f} />`)}render(){const{disabled:e}=this,t=e||!e&&!this.interactive,i=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":"presentation",a=!this.internalColor,l={[p.swatch]:!0,[p.noColorSwatch]:a||this.hasImage&&!this.internalColor};return he({disabled:e,children:u`<div .ariaChecked=${this.selectionMode!=="none"&&this.interactive?this.selected:void 0} .ariaLabel=${i!=="presentation"?this.label:""} class=${o({[p.container]:!0,[p.selectable]:this.selectionMode!=="none",[p.selected]:this.selected,[p.nonInteractive]:!this.interactive})} @click=${this.handleEmittingEvent} .role=${i} .tabIndex=${t?-1:0} title=${this.label??f} ${S(this.containerEl)}>${this.renderSwatchImage()}${!this.internalColor&&!this.hasImage&&this.renderEmptyDisplay()||""}${this.disabled&&this.renderDisabledDisplay()||""}<svg class=${o(l)} role=presentation xmlns=http://www.w3.org/2000/svg>${this.renderSwatch()}</svg></div>`})}};N.properties={hasImage:[16,{},{state:!0}],color:1,disabled:[7,{},{reflect:!0,type:Boolean}],interactive:[5,{},{type:Boolean}],label:1,parentSwatchGroup:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,value:1},N.styles=Ze;let se=N;Y("calcite-swatch",se);const ae={container:"container",hexInput:"hex-input",opacityInput:"opacity-input"},Je=q`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}.hex-input{--calcite-input-text-background-color: var(--calcite-color-picker-input-background-color);--calcite-input-text-border-color: var(--calcite-color-picker-input-border-color);--calcite-input-text-text-color: var(--calcite-color-picker-input-text-color);--calcite-input-prefix-background-color: var(--calcite-color-picker-input-prefix-background-color);--calcite-input-prefix-text-color: var(--calcite-color-picker-input-prefix-text-color)}.opacity-input{--calcite-input-number-background-color: var(--calcite-color-picker-input-background-color);--calcite-input-number-border-color: var(--calcite-color-picker-input-border-color);--calcite-input-number-text-color: var(--calcite-color-picker-input-text-color);--calcite-input-suffix-background-color: var(--calcite-color-picker-input-suffix-background-color);--calcite-input-suffix-text-color: var(--calcite-color-picker-input-suffix-text-color)}:host{display:block}.container{display:flex;inline-size:100%;flex-wrap:nowrap;align-items:center}.hex-input{flex-grow:1;text-transform:uppercase}.opacity-input{inline-size:100px;margin-inline-start:-1px}:host([hidden]){display:none}[hidden]{display:none}`,le=y(),j=class j extends G{constructor(){super(...arguments),this.hexInputRef=A(),this.opacityInputRef=A(),this.focusSetter=X()(this),this.internalColor=le,this.alphaChannel=!1,this.allowEmpty=!1,this.hexLabel="Hex",this.scale="m",this.value=w(v(le,this.alphaChannel),this.alphaChannel,!0),this.calciteColorPickerHexInputChange=D({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.hexInputRef.value,e)}connectedCallback(){super.connectedCallback(),this.previousNonNullValue=this.value;const{allowEmpty:e,alphaChannel:t,value:i}=this;if(i){const a=w(i,t);F(a,t)&&this.internalSetValue(a,a,!1);return}e&&this.internalSetValue(void 0,void 0,!1)}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==w(v(le,this.alphaChannel),this.alphaChannel,!0))&&this.internalSetValue(this.value,e.get("value"),!1)}onHexInputBlur(){const e=this.hexInputRef.value,t=e.value,i=`#${t}`,{allowEmpty:a,internalColor:l}=this,s=a&&!t,n=ee(i);(te(i,!0)||te(i,!1))&&this.onHexInputChange(),!(s||F(i)&&n)&&(e.value=a&&!l?"":this.formatHexForInternalInput(Oe(l.object())))}onOpacityInputBlur(){const e=this.opacityInputRef.value,t=e.value,{allowEmpty:i,internalColor:a}=this;i&&!t||(e.value=i&&!a?"":this.formatOpacityForInternalInput(a))}onOpacityInputInput(){this.onOpacityInputChange()}onHexInputChange(){let t=this.hexInputRef.value.value;if(t){const i=w(t,!1);if(F(i)&&this.alphaChannel&&this.internalColor){const l=w(this.internalColor.hexa(),!0).slice(-2);t=`${i+l}`}}this.internalSetValue(t,this.value)}onOpacityInputChange(){const e=this.opacityInputRef.value;let t;if(!e.value)t=e.value;else{const i=U(Number(e.value));t=this.internalColor?.alpha(i).hexa()}this.internalSetValue(t,this.value)}onInputFocus(e){(e.type==="calciteInternalInputTextFocus"?this.hexInputRef:this.opacityInputRef).value.selectText()}onHexInputInput(){const e=`#${this.hexInputRef.value.value}`,t=this.value;F(e,this.alphaChannel)&&ee(e,this.alphaChannel)&&this.internalSetValue(e,t)}onInputKeyDown(e){const{altKey:t,ctrlKey:i,metaKey:a,shiftKey:l}=e,{alphaChannel:s,hexInputRef:n,internalColor:r,value:c}=this,{key:d}=e,C=e.composedPath();if(d==="Tab"&&te(c,this.alphaChannel)||d==="Enter"){C.includes(n.value)?this.onHexInputChange():this.onOpacityInputChange(),d==="Enter"&&e.preventDefault();return}const g=d==="ArrowDown"||d==="ArrowUp",x=this.value;if(g){if(!c){this.internalSetValue(this.previousNonNullValue,x),e.preventDefault();return}const R=d==="ArrowUp"?1:-1,J=l?10:1;this.internalSetValue(v(this.nudgeRGBChannels(r,J*R,C.includes(n.value)?"rgb":"a"),s),x),e.preventDefault();return}const b=t||i||a,Z=d.length===1,P=Pe.test(d);Z&&!b&&!P&&e.preventDefault()}onHexInputPaste(e){const t=e.clipboardData.getData("text");F(t,this.alphaChannel)&&ee(t,this.alphaChannel)&&(e.preventDefault(),this.hexInputRef.value.value=t.slice(1),this.internalSetValue(t,this.value))}internalSetValue(e,t,i=!0){if(e){const{alphaChannel:a}=this,l=w(e,a,a);if(F(l,a)){const{internalColor:s}=this,n=y(l),r=w(v(n,a),a),c=!s||r!==w(v(s,a),a);this.internalColor=n,this.previousNonNullValue=r,this.value=r,c&&i&&this.calciteColorPickerHexInputChange.emit();return}}else if(this.allowEmpty){this.internalColor=void 0,this.value=void 0,i&&this.calciteColorPickerHexInputChange.emit();return}this.value=t}formatHexForInternalInput(e){return e?e.replace("#","").slice(0,6):""}formatOpacityForInternalInput(e){return e?`${O(e.alpha())}`:""}nudgeRGBChannels(e,t,i){let a;const l=e.array(),s=l.slice(0,3);if(i==="rgb")a=[...s.map(r=>r+t),this.alphaChannel?l[3]:void 0];else{const n=U(O(e.alpha())+t);a=[...s,n]}return y(a)}render(){const{alphaChannel:e,hexLabel:t,internalColor:i,messages:a,scale:l,value:s}=this,n=this.formatHexForInternalInput(s),r=this.formatOpacityForInternalInput(i),c=l==="l"?"m":"s";return u`<div class=${o(ae.container)}><calcite-input-text class=${o(ae.hexInput)} .label=${a?.hex||t} .maxLength=${this.alphaChannel?8:6} @keydown=${this.onInputKeyDown} @paste=${this.onHexInputPaste} @calciteInputTextChange=${this.onHexInputChange} @calciteInputTextInput=${this.onHexInputInput} @calciteInternalInputTextBlur=${this.onHexInputBlur} @calciteInternalInputTextFocus=${this.onInputFocus} prefix-text=# .scale=${c} .value=${n} ${S(this.hexInputRef)}></calcite-input-text>${e?E("opacity-input",u`<calcite-input-number class=${o(ae.opacityInput)} .label=${a?.opacity} .max=${k.max} max-length=3 .min=${k.min} number-button-type=none .numberingSystem=${this.numberingSystem} @keydown=${this.onInputKeyDown} @calciteInputNumberInput=${this.onOpacityInputInput} @calciteInternalInputNumberBlur=${this.onOpacityInputBlur} @calciteInternalInputNumberFocus=${this.onInputFocus} .scale=${c} suffix-text=% .value=${r} ${S(this.opacityInputRef)}></calcite-input-number>`):null}</div>`}};j.properties={internalColor:[16,{},{state:!0}],alphaChannel:[5,{},{type:Boolean}],allowEmpty:[5,{},{type:Boolean}],hexLabel:1,messages:[0,{},{attribute:!1}],numberingSystem:1,scale:[3,{},{reflect:!0}],value:[3,{},{reflect:!0}]},j.styles=Je;let ne=j;Y("calcite-color-picker-hex-input",ne);const Qe={container:"container"},et=q`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.container{display:flex;flex-wrap:wrap;gap:var(--calcite-swatch-group-space, var(--calcite-spacing-sm))}:host([scale=s]) .container{gap:var(--calcite-swatch-group-space, var(--calcite-spacing-xs))}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,W=class W extends G{constructor(){super(),this.items=[],this.slotRefEl=A(),this.focusSetter=X()(this),this.disabled=!1,this.scale="m",this.selectedItems=[],this.selectionMode="none",this.calciteSwatchGroupSelect=D({cancelable:!1}),this.listen("calciteInternalSwatchKeyEvent",this.calciteInternalSwatchKeyEventListener),this.listen("calciteSwatchSelect",this.calciteSwatchSelectListener),this.listen("calciteInternalSwatchSelect",this.calciteInternalSwatchSelectListener),this.listen("calciteInternalSyncSelectedSwatches",this.calciteInternalSyncSelectedSwatches)}async setFocus(e){return this.focusSetter(()=>this.el,e)}willUpdate(e){e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")&&this.updateItems()}updated(){ce(this)}calciteInternalSwatchKeyEventListener(e){if(e.composedPath().includes(this.el)){const t=this.items?.filter(i=>!i.disabled);switch(e.detail.key){case"ArrowRight":L(t,e.detail.target,"next");break;case"ArrowLeft":L(t,e.detail.target,"previous");break;case"Home":L(t,e.detail.target,"first");break;case"End":L(t,e.detail.target,"last");break}}e.stopPropagation()}calciteSwatchSelectListener(e){e.composedPath().includes(this.el)&&this.setSelectedItems(!0,e.target),e.stopPropagation()}calciteInternalSwatchSelectListener(e){e.composedPath().includes(this.el)&&this.setSelectedItems(!1,e.target),e.stopPropagation()}calciteInternalSyncSelectedSwatches(e){e.composedPath().includes(this.el)&&(this.updateSelectedItems(),this.selectionMode==="single"&&this.selectedItems.length>1&&this.setSelectedItems(!1,e.target)),e.stopPropagation()}updateItems(e){const t=this.slotRefEl.value?.assignedElements({flatten:!0}).filter(i=>i?.matches("calcite-swatch"));this.items=e?Me(e):t,!(this.items?.length<1)&&(this.items?.forEach(i=>{i.interactive=!0,i.scale=this.scale,i.selectionMode=this.selectionMode,i.parentSwatchGroup=this.el}),this.setSelectedItems(!1))}updateSelectedItems(){this.selectedItems=this.items?.filter(e=>e.selected)}setSelectedItems(e,t){t&&this.items?.forEach(i=>{const a=t===i;switch(this.selectionMode){case"multiple":a&&(i.selected=!i.selected);break;case"single":i.selected=a?!i.selected:!1;break;case"single-persist":i.selected=!!a;break}}),this.updateSelectedItems(),e&&this.calciteSwatchGroupSelect.emit()}render(){const e=this.selectionMode==="none"||this.selectionMode==="multiple"?"group":"radiogroup",{disabled:t}=this;return he({disabled:t,children:u`<div .ariaLabel=${this.label} class=${o(Qe.container)} .role=${e}><slot @slotchange=${this.updateItems} ${S(this.slotRefEl)}></slot></div>`})}};W.properties={disabled:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionMode:[3,{},{reflect:!0}]},W.styles=et;let oe=W;Y("calcite-swatch-group",oe);const tt=q`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}calcite-input-number{--calcite-input-number-background-color: var(--calcite-color-picker-input-background-color);--calcite-input-number-border-color: var(--calcite-color-picker-input-border-color);--calcite-input-number-text-color: var(--calcite-color-picker-input-text-color);--calcite-input-prefix-background-color: var(--calcite-color-picker-input-prefix-background-color);--calcite-input-prefix-text-color: var(--calcite-color-picker-input-prefix-text-color);--calcite-input-suffix-background-color: var(--calcite-color-picker-input-suffix-background-color);--calcite-input-suffix-text-color: var(--calcite-color-picker-input-suffix-text-color)}calcite-button{--calcite-button-text-color: var(--calcite-color-picker-action-text-color);--calcite-button-text-color-press: var(--calcite-color-picker-action-text-color-press)}calcite-button:hover,calcite-button:focus{--calcite-button-text-color: var(--calcite-color-picker-action-text-color-hover)}calcite-button:active{--calcite-button-text-color: var(--calcite-color-picker-action-text-color-press)}calcite-tabs{--calcite-tab-border-color: var(--calcite-color-picker-tab-border-color);--calcite-tab-accent-color-press: var(--calcite-color-picker-tab-accent-color);--calcite-swatch-corner-radius: var(--calcite-color-picker-swatch-corner-radius);--calcite-tab-text-color: var(--calcite-color-picker-tab-text-color)}calcite-tab-title:hover{--calcite-color-text-1: var(--calcite-color-picker-tab-text-color-hover)}calcite-swatch{--calcite-swatch-corner-radius: var(--calcite-color-picker-swatch-corner-radius)}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);inline-size:var(--calcite-internal-color-picker-min-width);min-inline-size:var(--calcite-internal-color-picker-min-width)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]){--calcite-internal-color-picker-min-width: 200px;--calcite-color-picker-spacing: var(--calcite-spacing-sm)}:host([scale=m]){--calcite-internal-color-picker-min-width: 240px;--calcite-color-picker-spacing: var(--calcite-spacing-md)}:host([scale=l]){--calcite-internal-color-picker-min-width: 304px;--calcite-color-picker-spacing: var(--calcite-spacing-lg);font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) .section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}:host([scale=l]) .control-section{display:flex;flex-direction:column;flex-wrap:wrap;align-items:baseline}:host([scale=l]) .color-hex-options{inline-size:100%;display:flex;flex-shrink:1;flex-direction:column;justify-content:space-around}:host([scale=l]) .color-mode-container{flex-shrink:3}.container{display:flex;flex-direction:column;block-size:min-content;border:1px solid var(--calcite-color-picker-border-color, var(--calcite-color-border-1));background-color:var(--calcite-color-picker-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-color-picker-corner-radius, var(--calcite-corner-radius-none));box-shadow:var(--calcite-color-picker-shadow, var(--calcite-shadow-none))}.control-and-scope{position:relative;display:flex;cursor:pointer;touch-action:none}.color-field,.control-and-scope{-webkit-user-select:none;user-select:none;border-radius:var(--calcite-color-picker-corner-radius, var(--calcite-corner-radius-none)) var(--calcite-color-picker-corner-radius, var(--calcite-corner-radius-none)) var(--calcite-corner-radius-none) var(--calcite-corner-radius-none)}.scope{pointer-events:none;position:absolute;z-index:var(--calcite-z-index);block-size:1px;inline-size:1px;border-radius:9999px;background-color:transparent;font-size:var(--calcite-font-size--1);outline-color:transparent}.scope:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))));outline-offset:6px}.hex-and-channels-group{display:flex;inline-size:100%;flex-direction:column;flex-wrap:wrap}.section{padding-block:0 var(--calcite-color-picker-spacing);padding-inline:var(--calcite-color-picker-spacing)}.section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}.sliders{display:flex;flex-direction:column;justify-content:space-between;margin-inline-start:var(--calcite-color-picker-spacing);gap:var(--calcite-spacing-xxs)}.preview-and-sliders{display:flex;align-items:center;padding:var(--calcite-color-picker-spacing)}.color-hex-options,.section--split{flex-grow:1}.header{display:flex;align-items:center;justify-content:space-between;color:var(--calcite-color-picker-text-color, var(--calcite-color-text-1))}.color-mode-container{padding-block-start:var(--calcite-color-picker-spacing)}.channels{display:flex}.channel{flex-grow:1}.channel[data-channel-index="3"]{margin-inline-start:-1px;min-inline-size:81px}:host([scale=s]) .channel[data-channel-index="3"]{min-inline-size:68px}:host([scale=l]) .channel[data-channel-index="3"]{min-inline-size:88px}.saved-colors-buttons{display:flex}.swatch-group{margin-block-start:var(--calcite-color-picker-spacing)}:host([hidden]){display:none}[hidden]{display:none}`,xe=16,_=class _ extends G{constructor(){super(),this._color=$,this.colorFieldScopeRef=A(),this.hueScopeRef=A(),this.internalColorUpdateContext=null,this.isActiveChannelInputEmpty=!1,this.mode=ue.HEX,this.opacityScopeRef=A(),this.resizeObserver=Le("resize",e=>this.resizeCanvas(e)),this.shiftKeyChannelAdjustment=0,this.upOrDownArrowKeyTracker=null,this._valueWasSet=!1,this.messages=He({blocking:!0}),this.captureColorFieldColor=(e,t,i=!0)=>{const{width:a,height:l}=this.dynamicDimensions.colorField,s=Math.round(m.s/a*e),n=Math.round(m.v/l*(l-t));this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(s).value(n),i)},this.cancelable=Ke()(this),this.drawColorControls=Se((e="all")=>{(e==="all"||e==="color-field")&&this.colorFieldRenderingContext&&this.drawColorField(),(e==="all"||e==="hue-slider")&&this.hueSliderRenderingContext&&this.drawHueSlider(),this.alphaChannel&&(e==="all"||e==="opacity-slider")&&this.opacitySliderRenderingContext&&this.drawOpacitySlider()},xe),this.globalPointerMoveHandler=e=>{const{activeCanvasInfo:t,el:i}=this;if(!i.isConnected||!t)return;const{context:a,bounds:l}=t;let s,n;const{clientX:r,clientY:c}=e;a.canvas.matches(":hover")?(s=r-l.x,n=c-l.y):(r<l.x+l.width&&r>l.x?s=r-l.x:r<l.x?s=0:s=l.width,c<l.y+l.height&&c>l.y?n=c-l.y:c<l.y?n=0:n=l.height),a===this.colorFieldRenderingContext?this.captureColorFieldColor(s,n,!1):a===this.hueSliderRenderingContext?this.captureHueSliderColor(s):a===this.opacitySliderRenderingContext&&this.captureOpacitySliderValue(s)},this.globalPointerUpHandler=e=>{if(!pe(e))return;const t=this.activeCanvasInfo;this.activeCanvasInfo=null,this.drawColorControls(),t&&this.calciteColorPickerChange.emit()},this.resizeCanvas=Se(e=>{if(!this.hasUpdated)return;const[t]=e,i=Math.floor(t.contentBoxSize[0].inlineSize);this.dynamicDimensions.colorField.width!==i&&(this.updateDynamicDimensions(i),this.updateCanvasSize(),this.drawColorControls())},xe),this.updateDynamicDimensions=e=>{const t={width:Ve(e,this.staticDimensions,this.alphaChannel),height:this.staticDimensions.slider.height};this.dynamicDimensions={colorField:Be(e),slider:t}},this.focusSetter=X()(this),this.channelMode="rgb",this.channels=this.toChannels($),this.staticDimensions=H.m,this.savedColors=[],this.allowEmpty=!1,this.alphaChannel=!1,this.channelsDisabled=!1,this.clearable=!1,this.disabled=!1,this.fieldDisabled=!1,this.format="auto",this.hexDisabled=!1,this.savedDisabled=!1,this.scale="m",this.calciteColorPickerChange=D({cancelable:!1}),this.calciteColorPickerInput=D({cancelable:!1}),this.listen("keydown",this.handleChannelKeyUpOrDown,{capture:!0}),this.listen("keyup",this.handleChannelKeyUpOrDown,{capture:!0})}get color(){return this._color}set color(e){const t=this._color;this._color=e,this.handleColorChange(e,t)}get value(){return this._value}set value(e){const t=this._value;this._value=e,this.handleValueChange(e,t),this._valueWasSet=!0}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.observeResize(),this.cancelable.add([this.drawColorControls,this.resizeCanvas])}async load(){this._valueWasSet||(this._value??=w(v($,this.alphaChannel))),this.handleAllowEmptyOrClearableChange();const{isClearable:e,color:t,format:i,value:a}=this,l=e&&!a,s=fe(a),n=l||i==="auto"&&s||i===s,r=l?null:n?this.colorFromValue(a,e,s):t;n||this.showIncompatibleColorWarning(a,i),this.setMode(i,!1),this.internalColorSet(r,!1,"initial"),this.updateStaticDimensions(this.scale),this.updateDynamicDimensions(H[this.scale].minWidth);const c=`${ie}${this.storageId}`;this.storageId&&localStorage.getItem(c)&&(this.savedColors=JSON.parse(localStorage.getItem(c)))}willUpdate(e){(e.has("allowEmpty")&&(this.hasUpdated||this.allowEmpty!==!1)||e.has("clearable")&&(this.hasUpdated||this.clearable!==!1))&&this.handleAllowEmptyOrClearableChange(),e.has("alphaChannel")&&(this.hasUpdated||this.alphaChannel!==!1)&&this.handleAlphaChannelChange(this.alphaChannel),this.hasUpdated&&(e.has("alphaChannel")&&this.alphaChannel!==!1||e.has("staticDimensions")&&this.staticDimensions!==H.m)&&this.handleAlphaChannelDimensionsChange(),(e.has("alphaChannel")&&(this.hasUpdated||this.alphaChannel!==!1)||e.has("format")&&(this.hasUpdated||this.format!=="auto"))&&this.handleFormatOrAlphaChannelChange(),e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&this.handleScaleChange(this.scale)}updated(){ce(this)}loaded(){this.handleAlphaChannelDimensionsChange()}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("pointermove",this.globalPointerMoveHandler),window.removeEventListener("pointerup",this.globalPointerUpHandler),this.resizeObserver?.disconnect()}get baseColorFieldColor(){return this.color||this.previousColor||$}get effectiveSliderWidth(){return this.dynamicDimensions.slider.width}observeResize(){this.resizeObserver?.observe(this.el)}handleAllowEmptyOrClearableChange(){this.isClearable=this.clearable||this.allowEmpty}handleAlphaChannelChange(e){const{format:t}=this;e&&t!=="auto"&&!K(t)&&(console.warn(`ignoring alphaChannel as the current format (${t}) does not support alpha`),this.alphaChannel=!1)}handleAlphaChannelDimensionsChange(){this.drawColorControls()}handleColorChange(e,t){this.drawColorControls(),this.updateChannelsFromColor(e),this.previousColor=t}handleFormatOrAlphaChannelChange(){this.setMode(this.format),this.internalColorSet(this.color,!1,"internal")}handleScaleChange(e="m"){this.updateStaticDimensions(e),this.updateCanvasSize(),this.drawColorControls()}handleValueChange(e,t){const{isClearable:i,format:a}=this,l=!i||e;let s=!1;if(l){const d=fe(e);if(!d||a!=="auto"&&d!==a){this.showIncompatibleColorWarning(e,a),this._value=t;return}s=this.mode!==d,this.setMode(d,this.internalColorUpdateContext===null)}const n=this.activeCanvasInfo;if(this.internalColorUpdateContext==="initial")return;if(this.internalColorUpdateContext==="user-interaction"){this.calciteColorPickerInput.emit(),n||this.calciteColorPickerChange.emit();return}const r=this.colorFromValue(e,i,this.mode),c=!ve(r,this.color);(s||c)&&this.internalColorSet(r,this.alphaChannel&&!(this.mode.endsWith("a")||this.mode.endsWith("a-css"))||this.internalColorUpdateContext==="internal","internal")}colorFromValue(e,t=!1,i){return t&&!e?null:y(e!=null&&typeof e=="object"&&K(i)?Ue(e):e)}handleTabActivate(e){this.channelMode=e.currentTarget.getAttribute("data-color-mode"),this.updateChannelsFromColor(this.color)}handleColorFieldScopeKeyDown(e){const{key:t}=e,i={ArrowUp:{x:0,y:-10},ArrowRight:{x:10,y:0},ArrowDown:{x:0,y:10},ArrowLeft:{x:-10,y:0}};i[t]&&(e.preventDefault(),this.scopeOrientation=t==="ArrowDown"||t==="ArrowUp"?"vertical":"horizontal",this.captureColorFieldColor(this.colorFieldScopeLeft+i[t].x||0,this.colorFieldScopeTop+i[t].y||0,!1))}handleHueScopeKeyDown(e){const t=e.shiftKey?10:1,{key:i}=e,a={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};if(a[i]){e.preventDefault();const l=a[i]*t,s=this.baseColorFieldColor.hue(),n=this.baseColorFieldColor.hue(s+l);this.internalColorSet(n,!1)}}handleHexInputChange(e){e.stopPropagation();const{isClearable:t,color:i}=this,l=e.target.value;if(t&&!l){this.internalColorSet(null);return}const s=i&&w(v(i,K(this.mode)));l!==s&&this.internalColorSet(y(l))}handleSavedColorSelect(e){const t=e.currentTarget;this.internalColorSet(y(t.color))}handleChannelInput(e){const t=e.currentTarget,i=Number(t.getAttribute("data-channel-index")),l=i===3?k.max:this.channelMode==="rgb"?V[Object.keys(V)[i]]:m[Object.keys(m)[i]];let s;if(!t.value)s="",this.isActiveChannelInputEmpty=!0,this.upOrDownArrowKeyTracker=null;else{const r=Number(t.value)+this.shiftKeyChannelAdjustment;s=qe(r,0,l).toString()}t.value=s,s!==""&&this.shiftKeyChannelAdjustment!==0?this.handleChannelChange(e):s!==""&&this.handleChannelChange(e)}handleChannelBlur(e){const t=e.currentTarget,i=Number(t.getAttribute("data-channel-index")),a=[...this.channels];!t.value&&!this.isClearable&&(t.value=a[i]?.toString())}handleChannelFocus(e){e.currentTarget.selectText()}handleChannelKeyUpOrDown(e){this.shiftKeyChannelAdjustment=0;const{key:t}=e;if(t!=="ArrowUp"&&t!=="ArrowDown"||!e.composedPath().some(l=>l.classList?.contains(h.channel)))return;const{shiftKey:i}=e;if(e.preventDefault(),!this.color){this.internalColorSet(this.previousColor),e.stopPropagation();return}const a=9;this.shiftKeyChannelAdjustment=t==="ArrowUp"&&i?a:t==="ArrowDown"&&i?-a:0,t==="ArrowUp"&&(this.upOrDownArrowKeyTracker="up"),t==="ArrowDown"&&(this.upOrDownArrowKeyTracker="down")}getChannelInputLimit(e){return this.channelMode==="rgb"?V[Object.keys(V)[e]]:m[Object.keys(m)[e]]}handleChannelChange(e){const t=e.currentTarget,i=Number(t.getAttribute("data-channel-index")),a=[...this.channels];if(this.isClearable&&!t.value){this.channels=[null,null,null,null],this.internalColorSet(null);return}const s=i===3;this.isActiveChannelInputEmpty&&this.upOrDownArrowKeyTracker&&(t.value=this.upOrDownArrowKeyTracker==="up"?(a[i]+1<=this.getChannelInputLimit(i)?a[i]+1:this.getChannelInputLimit(i)).toString():(a[i]-1>=0?a[i]-1:0).toString(),this.isActiveChannelInputEmpty=!1,this.upOrDownArrowKeyTracker=null);const n=t.value?Number(t.value):a[i];a[i]=s?U(n):n,this.updateColorFromChannels(a)}handleSavedColorKeyDown(e){Ne(e.key)&&(e.preventDefault(),this.handleSavedColorSelect(e))}handleColorFieldPointerDown(e){this.handleCanvasControlPointerDown(e,this.colorFieldRenderingContext,this.captureColorFieldColor,this.colorFieldScopeRef.value)}focusScope(e){requestAnimationFrame(()=>{e.focus()})}handleHueSliderPointerDown(e){this.handleCanvasControlPointerDown(e,this.hueSliderRenderingContext,this.captureHueSliderColor,this.hueScopeRef.value)}handleOpacitySliderPointerDown(e){this.handleCanvasControlPointerDown(e,this.opacitySliderRenderingContext,this.captureOpacitySliderValue,this.opacityScopeRef.value)}handleCanvasControlPointerDown(e,t,i,a){pe(e)&&(window.addEventListener("pointermove",this.globalPointerMoveHandler),window.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeCanvasInfo={context:t,bounds:t.canvas.getBoundingClientRect()},i.call(this,e.offsetX,e.offsetY),this.focusScope(a))}handleKeyDown(e){e.key==="Enter"&&e.preventDefault()}showIncompatibleColorWarning(e,t){console.warn(`ignoring color value (${e}) as it is not compatible with the current format (${t})`)}setMode(e,t=!0){const i=e==="auto"?this.mode:e;this.mode=this.ensureCompatibleMode(i,t)}ensureCompatibleMode(e,t){const{alphaChannel:i}=this,a=K(e);if(i&&!a){const l=je(e);return t&&console.warn(`setting format to (${l}) as the provided one (${e}) does not support alpha`),l}if(!i&&a){const l=Ce(e);return t&&console.warn(`setting format to (${l}) as the provided one (${e}) does not support alpha`),l}return e}captureHueSliderColor(e){const t=ge/this.effectiveSliderWidth*e;this.internalColorSet(this.baseColorFieldColor.hue(t),!1)}captureOpacitySliderValue(e){const t=U(k.max/this.effectiveSliderWidth*e);this.internalColorSet(this.baseColorFieldColor.alpha(t),!1)}internalColorSet(e,t=!0,i="user-interaction"){t&&ve(e,this.color)||(this.internalColorUpdateContext=i,this.color=e,this.value=this.toValue(e),this.internalColorUpdateContext=null)}toValue(e,t=this.mode){if(!e)return null;if(t.includes("hex")){const l=t===ue.HEXA;return w(v(e.round(),l),l)}if(t.includes("-css")){const l=e[t.replace("-css","").replace("a","")]().round().string();if((t.endsWith("a")||t.endsWith("a-css"))&&e.alpha()===1){const n=l.slice(0,3),r=l.slice(4,-1);return`${n}a(${r}, ${e.alpha()})`}return l}const a=e[Ce(t)]().round().object();return t.endsWith("a")?We(a):a}getSliderCapSpacing(){const{staticDimensions:{slider:{height:e},thumb:{radius:t}}}=this;return t*2-e}updateStaticDimensions(e="m"){this.staticDimensions=H[e]}deleteColor(){const e=v(this.color,this.alphaChannel);if(!(this.savedColors.indexOf(e)>-1))return;const i=this.savedColors.filter(l=>l!==e);this.savedColors=i;const a=`${ie}${this.storageId}`;this.storageId&&localStorage.setItem(a,JSON.stringify(i))}saveColor(){const e=v(this.color,this.alphaChannel);if(this.savedColors.indexOf(e)>-1)return;const i=[...this.savedColors,e];this.savedColors=i;const a=`${ie}${this.storageId}`;this.storageId&&localStorage.setItem(a,JSON.stringify(i))}drawColorField(){const e=this.colorFieldRenderingContext,{width:t,height:i}=this.dynamicDimensions.colorField;e.fillStyle=this.baseColorFieldColor.hsv().saturationv(100).value(100).alpha(1).string(),e.fillRect(0,0,t,i);const a=e.createLinearGradient(0,0,t,0);a.addColorStop(0,"rgba(255,255,255,1)"),a.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=a,e.fillRect(0,0,t,i);const l=e.createLinearGradient(0,0,0,i);l.addColorStop(0,"rgba(0,0,0,0)"),l.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=l,e.fillRect(0,0,t,i),this.drawActiveColorFieldColor()}setCanvasContextSize(e,{height:t,width:i}){if(!e)return;const a=window.devicePixelRatio||1;e.width=i*a,e.height=t*a,e.style.height=`${t}px`,e.style.width=`${i}px`,e.getContext("2d").scale(a,a)}initColorField(e){e&&(this.colorFieldRenderingContext=e.getContext("2d"),this.updateCanvasSize("color-field"),this.drawColorControls())}initHueSlider(e){e&&(this.hueSliderRenderingContext=e.getContext("2d"),this.updateCanvasSize("hue-slider"),this.drawHueSlider())}initOpacitySlider(e){e&&(this.opacitySliderRenderingContext=e.getContext("2d"),this.updateCanvasSize("opacity-slider"),this.drawOpacitySlider())}updateCanvasSize(e="all"){const{dynamicDimensions:t,staticDimensions:i}=this;(e==="all"||e==="color-field")&&this.setCanvasContextSize(this.colorFieldRenderingContext?.canvas,t.colorField);const a={width:this.effectiveSliderWidth,height:i.slider.height+(i.thumb.radius-t.slider.height/2)*2};(e==="all"||e==="hue-slider")&&this.setCanvasContextSize(this.hueSliderRenderingContext?.canvas,a),(e==="all"||e==="opacity-slider")&&this.setCanvasContextSize(this.opacitySliderRenderingContext?.canvas,a)}drawActiveColorFieldColor(){const{color:e}=this;if(!e)return;const t=e.hsv(),{staticDimensions:{thumb:{radius:i}}}=this,{width:a,height:l}=this.dynamicDimensions.colorField,s=t.saturationv()/(m.s/a),n=l-t.value()/(m.v/l);requestAnimationFrame(()=>{this.colorFieldScopeLeft=s,this.colorFieldScopeTop=n}),this.drawThumb(this.colorFieldRenderingContext,i,s,n,t,!1)}drawThumb(e,t,i,a,l,s){const r=2*Math.PI,c=1;if(e.beginPath(),e.arc(i,a,t,0,r),e.fillStyle="#fff",e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=c,e.stroke(),s&&l.alpha()<1){const C=e.createPattern(this.getCheckeredBackgroundPattern(),"repeat");e.beginPath(),e.arc(i,a,t-3,0,r),e.fillStyle=C,e.fill()}e.globalCompositeOperation="source-atop",e.beginPath(),e.arc(i,a,t-3,0,r);const d=s?l.alpha():1;e.fillStyle=l.rgb().alpha(d).string(),e.fill(),e.globalCompositeOperation="source-over"}drawActiveHueSliderColor(){const{color:e}=this;if(!e)return;const t=e.hsv().saturationv(100).value(100),{staticDimensions:{thumb:{radius:i}}}=this,a=this.effectiveSliderWidth,l=t.hue()/(ge/a),s=i,n=this.getSliderBoundX(l,a,i);requestAnimationFrame(()=>{this.hueScopeLeft=n}),this.drawThumb(this.hueSliderRenderingContext,i,n,s,t,!1)}drawHueSlider(){const e=this.hueSliderRenderingContext,{staticDimensions:{slider:{height:t},thumb:{radius:i}}}=this,a=0,l=i-t/2,s=this.effectiveSliderWidth,n=e.createLinearGradient(0,0,s,0),r=["red","yellow","lime","cyan","blue","magenta","#ff0004"],c=1/(r.length-1);let d=0;r.forEach(C=>{n.addColorStop(d,y(C).string()),d+=c}),e.clearRect(0,0,s,t+this.getSliderCapSpacing()*2),this.drawSliderPath(e,t,s,a,l),e.fillStyle=n,e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=1,e.stroke(),this.drawActiveHueSliderColor()}drawOpacitySlider(){const e=this.opacitySliderRenderingContext,{baseColorFieldColor:t,staticDimensions:{slider:{height:i},thumb:{radius:a}}}=this,l=0,s=a-i/2,n=this.effectiveSliderWidth;e.clearRect(0,0,n,i+this.getSliderCapSpacing()*2);const r=e.createLinearGradient(0,s,n,0),c=t.rgb().alpha(0),d=t.rgb().alpha(.5),C=t.rgb().alpha(1);r.addColorStop(0,c.string()),r.addColorStop(.5,d.string()),r.addColorStop(1,C.string()),this.drawSliderPath(e,i,n,l,s);const g=e.createPattern(this.getCheckeredBackgroundPattern(),"repeat");e.fillStyle=g,e.fill(),e.fillStyle=r,e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=1,e.stroke(),this.drawActiveOpacitySliderColor()}drawSliderPath(e,t,i,a,l){const s=t/2+1;e.beginPath(),e.moveTo(a+s,l),e.lineTo(a+i-s,l),e.quadraticCurveTo(a+i,l,a+i,l+s),e.lineTo(a+i,l+t-s),e.quadraticCurveTo(a+i,l+t,a+i-s,l+t),e.lineTo(a+s,l+t),e.quadraticCurveTo(a,l+t,a,l+t-s),e.lineTo(a,l+s),e.quadraticCurveTo(a,l,a+s,l),e.closePath()}getCheckeredBackgroundPattern(){if(this.checkerPattern)return this.checkerPattern;const e=document.createElement("canvas");e.width=10,e.height=10;const t=e.getContext("2d");return t.fillStyle="#ccc",t.fillRect(0,0,10,10),t.fillStyle="#fff",t.fillRect(0,0,5,5),t.fillRect(5,5,5,5),this.checkerPattern=e,e}drawActiveOpacitySliderColor(){const{color:e}=this;if(!e)return;const t=e,{staticDimensions:{thumb:{radius:i}}}=this,a=this.effectiveSliderWidth,l=O(t.alpha())/(k.max/a),s=i,n=this.getSliderBoundX(l,a,i);requestAnimationFrame(()=>{this.opacityScopeLeft=n}),this.drawThumb(this.opacitySliderRenderingContext,i,n,s,t,!0)}getSliderBoundX(e,t,i){const a=Ge(e,t,i);return a===0?e:a===-1?me(e,0,t,i,i*2):me(e,0,t,t-i*2,t-i)}handleOpacityScopeKeyDown(e){const t=e.shiftKey?10:1,{key:i}=e,a={ArrowUp:.01,ArrowRight:.01,ArrowDown:-.01,ArrowLeft:-.01};if(a[i]){e.preventDefault();const l=a[i]*t,s=this.baseColorFieldColor.alpha(),n=this.baseColorFieldColor.alpha(s+l);this.internalColorSet(n,!1)}}updateColorFromChannels(e){this.internalColorSet(y(e,this.channelMode))}updateChannelsFromColor(e){this.channels=e?this.toChannels(e):[null,null,null,null]}toChannels(e){const{channelMode:t}=this,i=e[t]().round().array();return i.length===3&&i.push(1),i}getAdjustedScopePosition(e,t){return[e-be/2,t-be/2]}render(){const{channelsDisabled:e,color:t,colorFieldScopeLeft:i,colorFieldScopeTop:a,staticDimensions:{thumb:{radius:l}},fieldDisabled:s,hexDisabled:n,hueScopeLeft:r,messages:c,alphaChannel:d,opacityScopeLeft:C,savedColors:g,savedDisabled:x,scale:b,scopeOrientation:Z}=this,P=this.effectiveSliderWidth,R=t?v(t,d):null,J=l,$e=r??P*$.hue()/m.h,Ie=l,ke=C??P*O($.alpha())/k.max,de=t===void 0,Q=Z==="vertical",[De,Ae]=this.getAdjustedScopePosition(i,a),[ze,Fe]=this.getAdjustedScopePosition($e,J),[Re,Te]=this.getAdjustedScopePosition(ke,Ie);return he({disabled:this.disabled,children:u`<div class=${o(h.container)}>${s?null:u`<div class=${o(h.controlAndScope)}><canvas class=${o(h.colorField)} @pointerdown=${this.handleColorFieldPointerDown} ${S(this.initColorField)}></canvas><div .ariaLabel=${Q?c.value:c.saturation} .ariaValueMax=${Q?m.v:m.s} aria-valuemin=0 .ariaValueNow=${(Q?t?.saturationv():t?.value())||"0"} class=${o({[h.scope]:!0,[h.colorFieldScope]:!0})} @keydown=${this.handleColorFieldScopeKeyDown} role=slider style=${B({top:`${Ae||0}px`,left:`${De||0}px`})} tabindex=0 ${S(this.colorFieldScopeRef)}></div></div>`}<div class=${o(h.previewAndSliders)}><calcite-swatch class=${o(h.preview)} .color=${R} .label=${R} .scale=${this.alphaChannel?"l":this.scale}></calcite-swatch><div class=${o(h.sliders)}><div class=${o(h.controlAndScope)}><canvas class=${o({[h.slider]:!0,[h.hueSlider]:!0})} @pointerdown=${this.handleHueSliderPointerDown} ${S(this.initHueSlider)}></canvas><div .ariaLabel=${c.hue} .ariaValueMax=${m.h} aria-valuemin=0 .ariaValueNow=${t?.round().hue()||$.round().hue()} class=${o({[h.scope]:!0,[h.hueScope]:!0})} @keydown=${this.handleHueScopeKeyDown} role=slider style=${B({top:`${Fe}px`,left:`${ze}px`})} tabindex=0 ${S(this.hueScopeRef)}></div></div>${d?u`<div class=${o(h.controlAndScope)}><canvas class=${o({[h.slider]:!0,[h.opacitySlider]:!0})} @pointerdown=${this.handleOpacitySliderPointerDown} ${S(this.initOpacitySlider)}></canvas><div .ariaLabel=${c.opacity} .ariaValueMax=${k.max} .ariaValueMin=${k.min} .ariaValueNow=${(t||$).round().alpha()} class=${o({[h.scope]:!0,[h.opacityScope]:!0})} @keydown=${this.handleOpacityScopeKeyDown} role=slider style=${B({top:`${Te}px`,left:`${Re}px`})} tabindex=0 ${S(this.opacityScopeRef)}></div></div>`:null}</div></div>${n&&e?null:u`<div class=${o({[h.controlSection]:!0,[h.section]:!0})}><div class=${o(h.hexAndChannelsGroup)}>${n?null:u`<div class=${o(h.hexOptions)}><calcite-color-picker-hex-input .allowEmpty=${this.isClearable} .alphaChannel=${d} class=${o(h.control)} .messages=${c} .numberingSystem=${this.numberingSystem} @calciteColorPickerHexInputChange=${this.handleHexInputChange} .scale=${b} .value=${R}></calcite-color-picker-hex-input></div>`}${e?null:u`<calcite-tabs class=${o({[h.colorModeContainer]:!0,[h.splitSection]:!0})} .scale=${b==="l"?"m":"s"}><calcite-tab-nav slot=title-group>${this.renderChannelsTabTitle("rgb")}${this.renderChannelsTabTitle("hsv")}</calcite-tab-nav>${this.renderChannelsTab("rgb")}${this.renderChannelsTab("hsv")}</calcite-tabs>`}</div></div>`}${x?null:u`<div class=${o({[h.savedColorsSection]:!0,[h.section]:!0})}><div class=${o(h.header)}><label>${c.saved}</label><div class=${o(h.savedColorsButtons)}><calcite-button appearance=transparent class=${o(h.deleteColor)} .disabled=${de} .iconStart=${we.minus} kind=neutral .label=${c.deleteColor} @click=${this.deleteColor} .scale=${b} type=button></calcite-button><calcite-button appearance=transparent class=${o(h.saveColor)} .disabled=${de} .iconStart=${we.plus} kind=neutral .label=${c.saveColor} @click=${this.saveColor} .scale=${b} type=button></calcite-button></div></div>${g.length>0?u`<calcite-swatch-group class=${o(h.swatchGroup)} .label=${c.saved} .scale=${b} selection-mode=none>${Xe(g,M=>M,M=>u`<calcite-swatch class=${o(h.savedColor)} .color=${M} .label=${M} @click=${this.handleSavedColorSelect} @keydown=${this.handleSavedColorKeyDown} .scale=${b} tabindex=0></calcite-swatch>`)}</calcite-swatch-group>`:null}</div>`}</div>`})}renderChannelsTabTitle(e){const{channelMode:t,messages:i}=this,a=e===t,l=e==="rgb"?i.rgb:i.hsv;return E(e,u`<calcite-tab-title class=${o(h.colorMode)} data-color-mode=${e??f} @calciteTabsActivate=${this.handleTabActivate} .selected=${a}>${l}</calcite-tab-title>`)}renderChannelsTab(e){const{isClearable:t,channelMode:i,channels:a,messages:l,alphaChannel:s}=this,n=e===i,c=e==="rgb"?[l.red,l.green,l.blue]:[l.hue,l.saturation,l.value],d=_e(this.el),C=s?a:a.slice(0,3);return E(e,u`<calcite-tab class=${o(h.control)} .selected=${n}><div class=${o(h.channels)} dir=ltr>${C.map((g,x)=>{const b=x===3;return b&&(g=t&&!g?g:O(g)),this.renderChannel(g,x,c[x],d,b?"%":"")})}</div></calcite-tab>`)}renderChannel(e,t,i,a,l){return E(t,u`<calcite-input-number class=${o(h.channel)} data-channel-index=${t??f} dir=${a??f} .label=${i} lang=${this.messages._lang??f} number-button-type=none .numberingSystem=${this.numberingSystem} @keydown=${this.handleKeyDown} @calciteInputNumberChange=${this.handleChannelChange} @calciteInputNumberInput=${this.handleChannelInput} @calciteInternalInputNumberBlur=${this.handleChannelBlur} @calciteInternalInputNumberFocus=${this.handleChannelFocus} .scale=${this.scale==="l"?"m":"s"} style=${B({marginLeft:t>0&&!(this.scale==="s"&&this.alphaChannel&&t===3)?"-1px":""})} .suffixText=${l} .value=${e?.toString()}></calcite-input-number>`)}};_.properties={channelMode:[16,{},{state:!0}],channels:[16,{},{state:!0}],colorFieldScopeLeft:[16,{},{state:!0}],colorFieldScopeTop:[16,{},{state:!0}],staticDimensions:[16,{},{state:!0}],hueScopeLeft:[16,{},{state:!0}],opacityScopeLeft:[16,{},{state:!0}],savedColors:[16,{},{state:!0}],scopeOrientation:[16,{},{state:!0}],allowEmpty:[7,{},{reflect:!0,type:Boolean}],alphaChannel:[5,{},{type:Boolean}],channelsDisabled:[5,{},{type:Boolean}],clearable:[7,{},{reflect:!0,type:Boolean}],color:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],fieldDisabled:[7,{},{reflect:!0,type:Boolean}],format:[3,{},{reflect:!0}],hexDisabled:[5,{},{type:Boolean}],messageOverrides:[0,{},{attribute:!1}],numberingSystem:[3,{},{reflect:!0}],savedDisabled:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],storageId:[3,{},{reflect:!0}],value:1},_.styles=tt;let re=_;Y("calcite-color-picker",re);export{re as ColorPicker};
