import{T as Ae}from"./Root-D_vee482.js";import{C as ht,a as ct,D as ut,b as dt,I as gt,N as pt,P as ft,R as mt,c as bt}from"./Root-D_vee482.js";import{a as R}from"./Theme-BVyKZ0d6.js";import{T as _t}from"./Theme-BVyKZ0d6.js";import{E as D,G as x,C as y,b as ve,f as Be,c as E,s as G,L as H,e as F,h as ee,q as Ne,P as N}from"./DefaultTheme-Ca6PCH0Y.js";import{B as vt,l as xt,H as Pt,u as kt,w as Ct,T as Ot,k as Nt,V as Dt,a as Tt,x as jt,y as St,z as Lt,M as Mt,r as Rt}from"./DefaultTheme-Ca6PCH0Y.js";import{O as ze,a as I,s as De,g as Te,S as w,G as Ee,r as V,c as xe,i as Ge,C as j,m as O}from"./Animation-DwFNtLAD.js";import{P as At,U as Bt}from"./Animation-DwFNtLAD.js";import{M as je,C as He,e as A,x as X,i as v,k as ke,a as Q,d as Ve,L as te,j as Se,t as We}from"./Disposer-BEiFQPZr.js";import{A as Et,c as Gt,N as Ht,O as Vt,Q as Wt,T as Xt}from"./Disposer-BEiFQPZr.js";import{B as z,R as W,S as Le,E as Xe}from"./Scrollbar-CpDvWIeJ.js";import{a as Me}from"./ColorSet-XUqsNl67.js";import{b as It,C as Zt,c as qt,D as Jt,J as Kt,L as $t,d as Ut,R as Qt,e as es,S as ts,T as ss,f as is}from"./ColorSet-XUqsNl67.js";import{a as k,p as Re,b as M,P as Ce}from"./Percent-XZYBab5B.js";import{c as as}from"./Percent-XZYBab5B.js";import{S as Oe}from"./Slice-FZ9UutId.js";import"./index-BrQW8HOS.js";let Y;function Ye(d,e,t){const s=e.interfaceColors,i=s.get("secondaryButton").toCSS(),r=s.get("text").toCSS(),a=s.get("alternativeBackground").toCSS(.45);if(!Y){const n=new je([new w(d,".am5-modal",{width:"100%",height:"100%",position:"absolute","z-index":"100000",top:"0",left:"0"},e.nonce),new w(d,".am5-modal-curtain",{top:"0",left:"0",width:"100%",height:"100%",position:"absolute",background:s.get("background").toCSS(.5),"z-index":"100"},e.nonce),new w(d,".am5-modal-wrapper",{top:"0",left:"0",width:"100%",height:"100%",position:"absolute","text-align":"center","white-space":"nowrap",background:s.get("background").toCSS(.5),"z-index":"101"},e.nonce),new w(d,".am5-modal-wrapper:before",{content:"''",display:"inline-block",height:"100%","vertical-align":"middle","margin-right":"-0.25em"},e.nonce),new w(d,".am5-modal-content",{display:"inline-block",padding:"1.2em","vertical-align":"middle","text-align":"start","white-space":"normal",background:s.get("background").toCSS(),"border-radius":"4px","-webkit-box-shadow":"0px 0px 36px 0px "+a,"box-shadow":"0px 0px 36px 0px "+a,color:r},e.nonce),new w(d,".am5-modal-content h1",{"font-size":"1em",margin:"0 0 0.5em 0"},e.nonce),new w(d,".am5-modal-table",{display:"table",margin:"1em 0"},e.nonce),new w(d,".am5-modal-table-row",{display:"table-row"},e.nonce),new w(d,".am5-modal-table-heading",{display:"table-heading",padding:"3px 10px 3px 0"},e.nonce),new w(d,".am5-modal-table-cell",{display:"table-cell",padding:"3px 0 3px 0"},e.nonce),new w(d,".am5-modal-table-cell > *",{"vertical-align":"middle"},e.nonce),new w(d,".am5-modal-content input[type=text], .am5-modal-content input[type=number], .am5-modal-content select",{border:"1px solid "+i,"border-radius":"4px",padding:"3px 5px",margin:"2px"},e.nonce),new w(d,".am5-modal-input-narrow",{width:"50px"},e.nonce),new w(d,".am5-modal-button",{"font-weight":"400",color:s.get("secondaryButtonText").toCSS(),"line-height":"1.5","text-align":"center","text-decoration":"none","vertical-align":"middle",cursor:"pointer",padding:"0.2em 0.8em","font-size":"1em","border-radius":"0.25em",margin:"0 0.25em 0 0",border:"1px solid "+s.get("secondaryButtonStroke").toCSS(),background:s.get("secondaryButton").toCSS()},e.nonce),new w(d,".am5-modal-button:hover",{background:s.get("secondaryButtonHover").toCSS()},e.nonce),new w(d,".am5-modal-button.am5-modal-primary",{color:s.get("primaryButtonText").toCSS(),border:"1px solid "+s.get("primaryButtonStroke").toCSS(),background:s.get("primaryButton").toCSS()},e.nonce),new w(d,".am5-modal-button.am5-modal-primary:hover",{background:s.get("primaryButtonHover").toCSS()},e.nonce)]);Y=new He(()=>{Y=void 0,n.dispose()})}return Y.increment()}class se extends D{_afterNew(){super._afterNewApplyThemes(),this._setRawDefault("deactivateRoot",!0),Ye(ze(this._root.dom),this._root);const e=document.createElement("div");e.className="am5-modal",e.style.display="none",this.root._inner.appendChild(e),this.setPrivate("container",e);const t=document.createElement("div");t.className="am5-modal-curtain",e.appendChild(t),this.setPrivate("curtain",t),this._disposers.push(I(t,"click",()=>{this.cancel()}));const s=document.createElement("div");s.className="am5-modal-wrapper",e.appendChild(s),this.setPrivate("wrapper",s);const i=document.createElement("div");i.className="am5-modal-content",s.appendChild(i),this.setPrivate("content",i);const r=this.get("content");r&&(i.innerHTML=r),De("keyboardevents")&&this._disposers.push(I(document,"keydown",a=>{this.isOpen()&&Te(a)=="Escape"&&this.cancel()}))}_beforeChanged(){super._beforeChanged(),this.isDirty("content")&&(this.getPrivate("content").innerHTML=this.get("content",""))}isOpen(){return this.getPrivate("container").style.display!="none"}open(){this.getPrivate("container").style.display="block",this.get("deactivateRoot")&&this.setTimeout(()=>{this._root._renderer.interactionsEnabled=!1},10),this.events.dispatch("opened",{type:"opened",target:this})}close(){this.getPrivate("container").style.display="none",this.get("deactivateRoot")&&(this._root._renderer.interactionsEnabled=!0),this.events.dispatch("closed",{type:"closed",target:this})}cancel(){this.getPrivate("container").style.display="none",this.get("deactivateRoot")&&(this._root._renderer.interactionsEnabled=!0),this.events.dispatch("cancelled",{type:"cancelled",target:this})}_dispose(){super._dispose();const e=this.getPrivate("container");e.parentElement&&e.parentElement.removeChild(e)}}Object.defineProperty(se,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Modal"});Object.defineProperty(se,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:D.classNames.concat([se.className])});class ie extends D{constructor(){super(...arguments),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}_beforeChanged(){if(super._beforeChanged(),this.isDirty("sprite")){const e=this.get("sprite");e&&(e.setAll({position:"absolute",role:"figure"}),this._disposers.push(e))}(this.isDirty("locationX")||this.isDirty("locationY"))&&this.series&&this.series._positionBullet(this)}}Object.defineProperty(ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Bullet"});Object.defineProperty(ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:D.classNames.concat([ie.className])});class re extends z{constructor(){super(...arguments),Object.defineProperty(this,"_ignoreClick",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.addTag("confirm"),De("keyboardevents")&&this._disposers.push(I(document,"keydown",e=>{const t=Te(e);this.get("active")&&t=="Escape"&&this._cancel()})),this._disposers.push(I(document,"click",()=>{this._ignoreClick||this._cancel(),this._ignoreClick=!1})),this.events.on("click",()=>{this.get("active")||(this._ignoreClick=!0),this._confirm()})}_cancel(){this.get("active")&&(this.events.dispatch("cancelled",{type:"cancelled",target:this}),this.set("active",!1))}_confirm(){this.get("active")&&(this.events.dispatch("confirmed",{type:"confirmed",target:this}),this.set("active",!1),this.isFocus()&&this.setTimeout(()=>{this.set("active",!1),Ee()},10))}_prepareChildren(){super._prepareChildren()}}Object.defineProperty(re,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ConfirmButton"});Object.defineProperty(re,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:z.classNames.concat([re.className])});class Z extends x{_afterNew(){super._afterNew(),this._display.isMeasured=!0,this.setPrivateRaw("trustBounds",!0)}_beforeChanged(){super._beforeChanged(),this.isDirty("radius")&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._display.drawCircle(0,0,Math.abs(this.get("radius",10)))}}Object.defineProperty(Z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Circle"});Object.defineProperty(Z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:x.classNames.concat([Z.className])});class ae extends x{constructor(){super(...arguments),Object.defineProperty(this,"morphAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){if(super._beforeChanged(),this.isDirty("coordinates")){const e=[],t=this.get("coordinates");t&&A(t,s=>{e.push({x:s[0],y:s[1]})}),this.set("points",e)}if(this.isPrivateDirty("points")&&(this._clear=!0),this.isDirty("points")){this._clear=!0;const e=this.get("points"),t=this._prevSettings.points;if(t){if(e){let n=X(e),h=X(t),l=n.length,u=h.length;if(l>u){let o=X(n);for(let c=0;c<l;c++){let g=Math.floor(c/l*u);o[c]={x:h[g].x,y:h[g].y}}h=o}else if(u>l){let o=X(h);for(let c=0;c<u;c++){let g=Math.floor(c/u*l);o[c]={x:n[g].x,y:n[g].y}}n=o}this.setPrivateRaw("previousPoints",h),this.setPrivateRaw("points",n),this.morphAnimation=this.animatePrivate({key:"morphProgress",from:0,to:1,duration:this.get("animationDuration",0),easing:this.get("animationEasing")}),this._root.events.once("frameended",()=>{this._markDirtyPrivateKey("morphProgress")})}}else this.setPrivateRaw("previousPoints",e),this.setPrivateRaw("points",e);let s=1/0,i=-1/0,r=1/0,a=-1/0;if(e)for(let n=1,h=e.length;n<h;n++){const l=e[n];s=Math.min(s,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),a=Math.max(a,l.y)}this.setPrivate("minX",s),this.setPrivate("maxX",i),this.setPrivate("minY",r),this.setPrivate("maxY",r)}this.isPrivateDirty("morphProgress")&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._draw()}_draw(){const e=this.getPrivate("previousPoints"),t=this.getPrivate("points"),s=this.getPrivate("morphProgress",1);if(t&&e){const i=t[0],r=e[0];i&&this._display.moveTo(r.x+(i.x-r.x)*s,r.y+(i.y-r.y)*s);for(let a=1,n=t.length;a<n;a++){const h=t[a],l=e[a];this._display.lineTo(l.x+(h.x-l.x)*s,l.y+(h.y-l.y)*s)}this._display.closePath()}}_updateSize(){this.markDirty(),this._clear=!0}}Object.defineProperty(ae,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Polygon"});Object.defineProperty(ae,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:x.classNames.concat([ae.className])});class ne extends x{_beforeChanged(){super._beforeChanged(),(this.isDirty("radiusX")||this.isDirty("radiusY")||this.isDirty("rotation"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._display.drawEllipse(0,0,Math.abs(this.get("radiusX")),Math.abs(this.get("radiusY")))}}Object.defineProperty(ne,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Ellipse"});Object.defineProperty(ne,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:x.classNames.concat([ne.className])});class oe extends x{_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("spikes"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this._display,t=this.get("radius",0),s=V(this.get("innerRadius",0),t),i=this.get("spikes",0),r=Math.PI/i;let a=Math.PI/2*3;e.moveTo(0,-t);for(let n=0;n<i;n++)e.lineTo(Math.cos(a)*t,Math.sin(a)*t),a+=r,e.lineTo(Math.cos(a)*s,Math.sin(a)*s),a+=r;e.lineTo(0,-t),e.closePath()}}}Object.defineProperty(oe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Star"});Object.defineProperty(oe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:x.classNames.concat([oe.className])});class q extends y{constructor(){super(...arguments),Object.defineProperty(this,"_za",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_txa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_downX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_downY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pinchDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contents",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(y.new(this._root,{width:k,height:k,x:0,y:0,draggable:!0,background:ve.new(this._root,{fill:xe(16777215),fillOpacity:0})}))}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew();const e=this.contents.events;this._disposers.push(e.on("pointerdown",i=>{this._handleThisDown(i)})),this._disposers.push(e.on("globalpointerup",i=>{this._handleThisUp(i)})),this._disposers.push(e.on("globalpointermove",i=>{this._handleThisMove(i)}));const t=this.contents.get("background");t&&(t.adapters.add("width",i=>Number(i)*20),t.adapters.add("height",i=>Number(i)*20),t.adapters.add("x",i=>Number(i)-t.width()/2),t.adapters.add("y",i=>Number(i)-t.height()/2));const s=this.contents;s.adapters.add("x",i=>{const r=s.get("scale",1);if(v(i)&&r>=1){let a=this.get("maxPanOut",.4),n=s.width();i=Math.min(n*a,i),i=Math.max(this.width()-n*r*(1+a),i)}return i}),s.adapters.add("y",i=>{const r=s.get("scale",1);if(v(i)&&r>=1){let a=this.get("maxPanOut",.4),n=s.height();i=Math.min(n*a,i),i=Math.max(this.height()-n*r*(1+a),i)}return i})}_prepareChildren(){super._prepareChildren(),this.isDirty("wheelable")&&this._handleSetWheel(),this.contents._display.cancelTouch=this.get("pinchZoom",!1)}_handleSetWheel(){this.get("wheelable")?(this._wheelDp&&this._wheelDp.dispose(),this._wheelDp=this.events.on("wheel",e=>{const t=e.originalEvent;if(Ge(t,this))t.preventDefault();else return;const s=this.toLocal(e.point);this._handleWheelZoom(t.deltaY,s)}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_handleWheelZoom(e,t){let s=this.get("zoomStep",2),i=this.contents.get("scale",1),r=i;e>0?r=i/s:e<0&&(r=i*s),r!=i&&this.zoomToPoint(t,r)}zoomToPoint(e,t){t&&(t=Be(t,this.get("minZoomLevel",1),this.get("maxZoomLevel",32)));const s=this.contents.get("scale",1);let i=e.x,r=e.y,a=i,n=r;const h=this.contents;let l=h.x(),u=h.y(),o=a-(i-l)/s*t,c=n-(r-u)/s*t;return this._animateTo(o,c,t),this._za}zoomIn(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.contents.get("scale",1)*this.get("zoomStep",2))}zoomOut(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.contents.get("scale",1)/this.get("zoomStep",2))}goHome(){return this._animateTo(0,0,1)}_animateTo(e,t,s){const i=this.get("animationDuration",0),r=this.get("animationEasing"),a=this.contents;this._txa=a.animate({key:"x",to:e,duration:i,easing:r}),this._tya=a.animate({key:"y",to:t,duration:i,easing:r}),this._za=a.animate({key:"scale",to:s,duration:i,easing:r})}_handleThisUp(e){this._downPoints={}}_handleThisDown(e){const t=this.contents;this._downScale=t.get("scale",1);const s=t._downPoints;let i=ke(s).length;if(i==1){let r=s[1];r||(r=s[0]),r&&r.x==e.point.x&&r.y==e.point.y&&(i=0)}if(i>0){this._downX=t.x(),this._downY=t.y();const r=t._getDownPointId();if(r){let a=this._movePoints[r];a&&(t._downPoints[r]=a)}}}_handleThisMove(e){const s=e.originalEvent.pointerId;if(this.get("pinchZoom")&&s&&(this._movePoints[s]=e.point,ke(this.contents._downPoints).length>1)){this._handlePinch();return}}_handlePinch(){let e=0,t=[],s=[];if(Q(this.contents._downPoints,(i,r)=>{t[e]=r;let a=this._movePoints[i];a&&(s[e]=a),e++}),t.length>1&&s.length>1){this.contents._isDragging=!1;let i=t[0],r=t[1],a=s[0],n=s[1];if(i&&r&&a&&n){i=this.toLocal(i),r=this.toLocal(r),a=this.toLocal(a),n=this.toLocal(n);let h=Math.hypot(r.x-i.x,r.y-i.y),u=Math.hypot(n.x-a.x,n.y-a.y)/h*this._downScale,o={x:a.x+(n.x-a.x)/2,y:a.y+(n.y-a.y)/2},c={x:i.x+(r.x-i.x)/2,y:i.y+(r.y-i.y)/2},g=this._downX||0,p=this._downY||0,f=this._downScale,m=o.x-(-g+c.x)/f*u,b=o.y-(-p+c.y)/f*u;this.contents.setAll({x:m,y:b,scale:u})}}}}Object.defineProperty(q,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomableContainer"});Object.defineProperty(q,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.classNames.concat([q.className])});class S extends D{_afterNew(){super._afterNewApplyThemes()}getFill(e){return{addColorStop:(t,s)=>{}}}_changed(){super._changed()}getBounds(e){const t=this.get("target");if(t){let s=t.globalBounds();const i=e.toLocal({x:s.left,y:s.top}),r=e.toLocal({x:s.right,y:s.top}),a=e.toLocal({x:s.right,y:s.bottom}),n=e.toLocal({x:s.left,y:s.bottom});return{left:Math.min(i.x,r.x,a.x,n.x),top:Math.min(i.y,r.y,a.y,n.y),right:Math.max(i.x,r.x,a.x,n.x),bottom:Math.max(i.y,r.y,a.y,n.y)}}return e._display.getLocalBounds()}}Object.defineProperty(S,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Gradient"});Object.defineProperty(S,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:D.classNames.concat([S.className])});class J extends S{getFill(e){const t=this.get("rotation",0);let s=this.getBounds(e),i=s.left||0,r=s.right||0,a=s.top||0,n=s.bottom||0,h=E(t),l=G(t),u=h*(r-i),o=l*(n-a);u==0&&(u=1),o==0&&(o=1);let c=Math.max(u,o);const g=this._root._renderer.createLinearGradient(i,a,i+c*h,a+c*l),p=this.get("stops");if(p){let f=0;A(p,m=>{let b=m.offset;v(b)||(b=f/(p.length-1));let C=m.opacity;v(C)||(C=1);let _=m.color;if(_){const P=m.lighten;P&&(_=j.lighten(_,P));const B=m.brighten;B&&(_=j.brighten(_,B)),g.addColorStop(b,"rgba("+_.r+","+_.g+","+_.b+","+C+")")}f++})}return g}}Object.defineProperty(J,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinearGradient"});Object.defineProperty(J,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:S.classNames.concat([J.className])});class le extends y{constructor(){super(...arguments),Object.defineProperty(this,"labelContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(y.new(this._root,{}))}),Object.defineProperty(this,"markerContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(y.new(this._root,{}))}),Object.defineProperty(this,"startLabel",{enumerable:!0,configurable:!0,writable:!0,value:this.labelContainer.children.push(H.new(this._root,{themeTags:["start"]}))}),Object.defineProperty(this,"endLabel",{enumerable:!0,configurable:!0,writable:!0,value:this.labelContainer.children.push(H.new(this._root,{themeTags:["end"]}))}),Object.defineProperty(this,"markers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new F(R.new({}),()=>W._new(this._root,{themeTags:O(this.markers.template.get("themeTags",[]),[this.get("orientation"),"heatlegend","marker"])},[this.markers.template])))})}_afterNew(){this._settings.themeTags=O(this._settings.themeTags,["heatlegend",this._settings.orientation]),super._afterNew(),this.set("tooltip",Ae.new(this._root,{themeTags:["heatlegend"]}))}makeMarker(){const e=this.markers.make();return e.states.create("disabled",{}),e}showValue(e,t,s){const i=this.getTooltip();if(i&&v(e)){const r=this.get("startValue",0),a=this.get("endValue",1);let n=(e-r)/(a-r);(n==1/0||n==-1/0||isNaN(n))&&(n=.5);const h=this.get("startColor"),l=this.get("endColor");t||(t=this.getNumberFormatter().format(e)),s||(s=j.interpolate(n,h,l)),i.label.set("text",t);let u;this.get("orientation")=="vertical"?u=this.markerContainer.toGlobal({x:0,y:this.innerHeight()*(1-n)}):u=this.markerContainer.toGlobal({x:this.innerWidth()*n,y:0});let o=i.get("background");o&&o.set("fill",s),i.set("pointTo",u),i.show()}}_prepareChildren(){super._prepareChildren();const e=this.labelContainer,t=this.get("orientation"),s=this.startLabel,i=this.endLabel,r=this.getTooltip();if(this.isDirty("orientation")&&(t=="vertical"?(this.markerContainer.setAll({layout:this._root.verticalLayout,height:k}),this.set("layout",this._root.horizontalLayout),s.setAll({y:k,x:void 0,centerY:k,centerX:k}),i.setAll({y:0,x:void 0,centerY:0,centerX:k}),e.setAll({height:k,width:void 0}),r&&r.set("pointerOrientation","horizontal")):(this.markerContainer.setAll({layout:this._root.horizontalLayout,width:k}),this.set("layout",this._root.verticalLayout),s.setAll({x:0,y:void 0,centerX:0,centerY:0}),i.setAll({x:k,y:void 0,centerX:k,centerY:0}),e.setAll({width:k,height:void 0}),r&&r.set("pointerOrientation","vertical"))),this.isDirty("stepCount")){const a=this.get("stepCount",1),n=this.get("startColor"),h=this.get("endColor"),l=this.get("startOpacity",1),u=this.get("endOpacity",1);if(this.markerContainer.children.clear(),a>1)for(let o=0;o<a;o++){const c=this.makeMarker();t=="vertical"?this.markerContainer.children.moveValue(c,0):this.markerContainer.children.push(c),n&&h&&c.setAll({fill:j.interpolate(o/a,n,h),fillOpacity:Re(o/a*100).interpolate(l,u)})}else if(a==1){const o=this.makeMarker();this.markerContainer.children.push(o);const c=J.new(this._root,{stops:[{color:n,opacity:l},{color:h,opacity:u}]});if(t=="vertical"){c.set("rotation",90);let g=c.get("stops");g&&g.reverse()}else c.set("rotation",0);n&&h&&o.set("fillGradient",c)}}(this.isDirty("startText")||this.isDirty("startValue"))&&s.set("text",this.get("startText",this.getNumberFormatter().format(this.get("startValue",0)))),(this.isDirty("endText")||this.isDirty("endValue"))&&i.set("text",this.get("endText",this.getNumberFormatter().format(this.get("endValue",1))))}}Object.defineProperty(le,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HeatLegend"});Object.defineProperty(le,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.classNames.concat([le.className])});class he extends Me{constructor(){super(...arguments),Object.defineProperty(this,"itemContainers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new F(R.new({}),()=>y._new(this._root,{themeTags:O(this.itemContainers.template.get("themeTags",[]),["legend","item"]),themeTagsSelf:O(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"]),background:W.new(this._root,{themeTags:O(this.itemContainers.template.get("themeTags",[]),["legend","item","background"]),themeTagsSelf:O(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"])})},[this.itemContainers.template])))}),Object.defineProperty(this,"markers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new F(R.new({}),()=>y._new(this._root,{themeTags:O(this.markers.template.get("themeTags",[]),["legend","marker"])},[this.markers.template])))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new F(R.new({}),()=>H._new(this._root,{themeTags:O(this.labels.template.get("themeTags",[]),["legend","label"])},[this.labels.template])))}),Object.defineProperty(this,"valueLabels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new F(R.new({}),()=>H._new(this._root,{themeTags:O(this.valueLabels.template.get("themeTags",[]),["legend","label","value"])},[this.valueLabels.template])))}),Object.defineProperty(this,"markerRectangles",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new F(R.new({}),()=>W._new(this._root,{themeTags:O(this.markerRectangles.template.get("themeTags",[]),["legend","marker","rectangle"])},[this.markerRectangles.template])))})}_afterNew(){this._settings.themeTags=O(this._settings.themeTags,["legend"]),this.fields.push("name","stroke","fill"),super._afterNew()}makeItemContainer(e){const t=this.children.push(this.itemContainers.make());return t._setDataItem(e),this.itemContainers.push(t),t.states.create("disabled",{}),t}makeMarker(){const e=this.markers.make();return this.markers.push(e),e.states.create("disabled",{}),e}makeLabel(){const e=this.labels.make();return e.states.create("disabled",{}),e}makeValueLabel(){const e=this.valueLabels.make();return e.states.create("disabled",{}),e}makeMarkerRectangle(){const e=this.markerRectangles.make();return e.states.create("disabled",{}),e}processDataItem(e){super.processDataItem(e);const t=this.makeItemContainer(e),s=this.get("nameField"),i=this.get("fillField"),r=this.get("strokeField");if(t){const a=this.get("clickTarget","itemContainer"),n=e.dataContext;n&&n.set&&n.set("legendDataItem",e),t._setDataItem(e),e.set("itemContainer",t);const h=this.makeMarker();if(h){t.children.push(h),h._setDataItem(e),e.set("marker",h);const o=this.get("useDefaultMarker"),c=h.children.push(this.makeMarkerRectangle());let g=e.get("fill"),p=e.get("stroke");e.set("markerRectangle",c),n&&n.get&&(g=n.get(i,g),p=n.get(r,p)),p||(p=g),o?n.on&&(n.on(i,()=>{c.set("fill",n.get(i))}),n.on(r,()=>{c.set("stroke",n.get(r))})):n&&n.createLegendMarker&&n.createLegendMarker(),c.setAll({fill:g,stroke:p});const f=n.component;f&&f.updateLegendMarker&&f.updateLegendMarker(n)}const l=this.makeLabel();if(l){t.children.push(l),l._setDataItem(e),e.set("label",l),l.text.on("text",()=>{t.setRaw("ariaLabel",l.text._getText()+(this.get("clickTarget")!=="none"?"; "+this._t("Press ENTER to toggle"):"")),t.markDirtyAccessibility()}),n&&n.get&&e.set("name",n.get(s));let o=e.get("name");o&&l.set("text",o)}const u=this.makeValueLabel();if(u&&(t.children.push(u),u._setDataItem(e),e.set("valueLabel",u)),n&&n.show&&(n.on("visible",o=>{t.set("disabled",!o)}),n.get("visible")||t.set("disabled",!0),a!="none")){let o=t;a=="marker"&&(o=h),this._addClickEvents(o,n,e)}this.children.values.sort((o,c)=>{const g=o.dataItem.dataContext,p=c.dataItem.dataContext;if(g&&p){const f=this.data.indexOf(g),m=this.data.indexOf(p);if(f>m)return 1;if(f<m)return-1}return 0}),n&&n.updateLegendValue&&n.updateLegendValue()}}_addClickEvents(e,t,s){e.set("cursorOverStyle","pointer"),e.events.on("pointerover",()=>{const i=t.component;i&&i.hoverDataItem&&i.hoverDataItem(t)}),e.events.on("pointerout",()=>{const i=t.component;i&&i.hoverDataItem&&i.unhoverDataItem(t)}),e.events.on("click",()=>{const i=s.get("label").text._getText();t.show&&t.isHidden&&(t.isHidden()||t.get("visible")===!1)?(t.show(),e.set("disabled",!1),this._root.readerAlert(this._t("%1 shown",this._root.locale,i))):t.hide&&(t.hide(),e.set("disabled",!0),this._root.readerAlert(this._t("%1 hidden",this._root.locale,i)))})}disposeDataItem(e){super.disposeDataItem(e);const t=e.dataContext;t&&t.get&&t.get("legendDataItem")==e&&t.set("legendDataItem",void 0);let s=e.get("itemContainer");s&&(this.itemContainers.removeValue(s),s.dispose());let i=e.get("marker");i&&(this.markers.removeValue(i),i.dispose());let r=e.get("markerRectangle");r&&(this.markerRectangles.removeValue(r),r.dispose());let a=e.get("label");a&&(this.labels.removeValue(a),a.dispose());let n=e.get("valueLabel");n&&(this.valueLabels.removeValue(n),n.dispose())}}Object.defineProperty(he,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Legend"});Object.defineProperty(he,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Me.classNames.concat([he.className])});class L extends x{_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){const e=this.width(),t=this.height(),s=this._display;s.moveTo(-e/2,t/2),s.lineTo(0,-t/2),s.lineTo(e/2,t/2),s.lineTo(-e/2,t/2),s.closePath()}_updateSize(){this.markDirty(),this._clear=!0}}Object.defineProperty(L,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Triangle"});Object.defineProperty(L,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:x.classNames.concat([L.className])});class T extends x{_beforeChanged(){super._beforeChanged(),this.isDirty("points")&&(this._clear=!0)}static makeOrthogonal(e){if(e.length>1){const t=[];for(let s=0;s<e.length-1;s++){const i=e[s],r=e[s+1];t.push(i),i.x!==r.x&&i.y!==r.y&&t.push({x:r.x,y:i.y})}t.push(e[e.length-1]),e=t}return e}_changed(){if(super._changed(),this._clear){const e=this._display;let t=this.get("points",[]);if(t.length===0)return;t=T.makeOrthogonal(t),e.moveTo(t[0].x,t[0].y);for(let s=1;s<t.length;s++){let i=this.get("cornerRadius",0);const r=t[s-1],a=t[s],n=t[s+1],h=a.y===r.y&&a.x!==r.x,l=a.x===r.x&&a.y!==r.y,u=n&&(h&&n.y!==a.y||l&&n.x!==a.x);if(i>0&&n&&u){if(l){i=Math.min(i,Math.abs(a.x-n.x)/2,Math.abs(a.y-r.y)/2);const o=Math.sign(a.y-r.y);e.lineTo(a.x,a.y-i*o);const c=n.x<a.x?-1:1;e.arcTo(a.x,a.y,a.x+i*c,a.y,i)}else if(h){i=Math.min(i,Math.abs(a.y-n.y)/2,Math.abs(a.x-r.x)/2);const o=Math.sign(a.x-r.x);e.lineTo(a.x-i*o,a.y);const c=n.y<a.y?-1:1;e.arcTo(a.x,a.y,a.x,a.y+i*c,i)}}else e.lineTo(a.x,a.y)}}}}Object.defineProperty(T,"className",{enumerable:!0,configurable:!0,writable:!0,value:"OrthogonalLine"});Object.defineProperty(T,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:x.classNames.concat([T.className])});class ce extends y{constructor(){super(...arguments),Object.defineProperty(this,"line",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(T.new(this._root,{themeTags:["line"]}))}),Object.defineProperty(this,"hitLine",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(T.new(this._root,{themeTags:["hit"]}))}),Object.defineProperty(this,"startArrow",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(L.new(this._root,{themeTags:["start","arrow"]}))}),Object.defineProperty(this,"endArrow",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(L.new(this._root,{themeTags:["end","arrow"]}))})}_afterNew(){this.addTag("link"),super._afterNew()}_updateChildren(){if(super._updateChildren(),this.isDirty("points")){let e=T.makeOrthogonal(this.get("points",[]));this.line.set("points",e),this.hitLine.set("points",e);const t=this.startArrow,s=this.endArrow,i=e.length;if(i>1){const[r,a]=e;t.setAll({x:r.x,y:r.y,rotation:ee(r,a)-90});const n=e[i-1],h=e[i-2];s.setAll({x:n.x,y:n.y,rotation:ee(h,n)+90})}else if(i===1){const[r]=e;t.setAll({x:r.x,y:r.y,rotation:0}),s.setAll({x:r.x,y:r.y,rotation:0})}}}}Object.defineProperty(ce,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Link"});Object.defineProperty(ce,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.classNames.concat([ce.className])});class ue extends Ne{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makePicture(void 0)})}_changed(){if(super._changed(),this.isDirty("width")){const e=this.get("width");this._display.width=v(e)?e:void 0}if(this.isDirty("height")){const e=this.get("height");this._display.height=v(e)?e:void 0}if(this.isDirty("shadowColor")){this._display.clear();const e=this.get("shadowColor");this._display.shadowColor=e??void 0}this.isDirty("shadowBlur")&&(this._display.clear(),this._display.shadowBlur=this.get("shadowBlur")),this.isDirty("shadowOffsetX")&&(this._display.clear(),this._display.shadowOffsetX=this.get("shadowOffsetX")),this.isDirty("shadowOffsetY")&&(this._display.clear(),this._display.shadowOffsetY=this.get("shadowOffsetY")),this.isDirty("shadowOpacity")&&(this._display.clear(),this._display.shadowOpacity=this.get("shadowOpacity")),(this.isDirty("src")||this.isDirty("cors"))&&(this._display.clear(),this._load())}_load(){const e=this.get("src");if(e){const t=new Image;t.crossOrigin=this.get("cors","anonymous"),t.src=e;const s=this.events;t.decode().then(()=>{this._display.image=t,this._updateSize(),!s.isDisposed()&&s.isEnabled("loaded")&&s.dispatch("loaded",{type:"loaded",target:this})}).catch(i=>{!s.isDisposed()&&s.isEnabled("loaderror")&&s.dispatch("loaderror",{type:"loaderror",target:this})})}}_updateSize(){super._updateSize();const e=this._display.image;if(e){let t=this.getPrivate("width",this.get("width")),s=this.getPrivate("height",this.get("height"));const i=e.width&&e.height?e.width/e.height:0;v(t)&&v(s)?(this._display.width=t,this._display.height=s):v(t)&&i?s=t/i:v(s)&&i?t=s*i:(t=e.width,s=e.height),v(t)&&(this._display.width=t),v(s)&&(this._display.height=s),this.markDirtyBounds(),this.markDirty()}}}Object.defineProperty(ue,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Picture"});Object.defineProperty(ue,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ne.classNames.concat([ue.className])});class de extends Le{_afterNew(){this._addOrientationClass(),super._afterNew(),this.endGrip.setPrivate("visible",!1),this.thumb.setPrivate("visible",!1)}updateGrips(){super.updateGrips();const e=this.startGrip;this.endGrip.setAll({x:e.x(),y:e.y()}),this.setRaw("end",this.get("start"))}}Object.defineProperty(de,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slider"});Object.defineProperty(de,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Le.classNames.concat([de.className])});class ge extends y{constructor(){super(...arguments),Object.defineProperty(this,"homeButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(z.new(this._root,{width:35,height:35,themeTags:["home"]}))}),Object.defineProperty(this,"plusButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(z.new(this._root,{width:35,height:35,themeTags:["plus"]}))}),Object.defineProperty(this,"minusButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(z.new(this._root,{width:35,height:35,themeTags:["minus"]}))}),Object.defineProperty(this,"_disposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targetDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.set("position","absolute"),this.set("layout",this._root.verticalLayout),this.addTag("zoomtools"),this.plusButton.setAll({icon:x.new(this._root,{themeTags:["icon"]}),layout:void 0}),this.minusButton.setAll({icon:x.new(this._root,{themeTags:["icon"]}),layout:void 0}),this.homeButton.setAll({icon:x.new(this._root,{themeTags:["icon"]}),layout:void 0})}_prepareChildren(){if(super._prepareChildren(),this.isDirty("target")){const e=this.get("target"),t=this._prevSettings.target;e&&(e instanceof q&&(this._targetDisposer=this.addDisposer(e.contents.on("scale",s=>{s==e.get("minZoomLevel")?this.minusButton.set("disabled",!0):this.minusButton.set("disabled",!1),s==e.get("maxZoomLevel")?this.plusButton.set("disabled",!0):this.plusButton.set("disabled",!1)})),this.root.events.once("frameended",()=>{e.get("scale")==e.get("minZoomLevel")&&this.minusButton.set("disabled",!0)})),this._disposer=new je([this.plusButton.events.on("click",()=>{e.zoomIn()}),this.minusButton.events.on("click",()=>{e.zoomOut()}),this.homeButton.events.on("click",()=>{e.goHome()})])),t&&(this._disposer&&this._disposer.dispose(),this._targetDisposer&&this._targetDisposer.dispose())}}}Object.defineProperty(ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomTools"});Object.defineProperty(ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.classNames.concat([ge.className])});class pe extends N{constructor(){super(...arguments),Object.defineProperty(this,"canvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:this.canvas.getContext("2d")}),Object.defineProperty(this,"_clearGrain",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){this.canvas.width=this.get("width",200),this.canvas.height=this.get("height",200),(this.isDirty("size")||this.isDirty("density")||this.isDirty("minOpacity")||this.isDirty("maxOpacity")||this.isDirty("colors")||this.isDirty("horizontalGap")||this.isDirty("verticalGap"))&&(this._clearGrain=!0),super._beforeChanged()}_changed(){if(super._changed(),this._clearGrain){const e=this.get("width",200),t=this.get("height",200),s=this.context.getImageData(0,0,e,t),i=Math.max(1,this.get("size",1)),r=this.get("minOpacity",0),a=this.get("maxOpacity",.3),n=this.get("colors",[this.get("color",j.fromHex(0))]),h=e/i,l=t/i,u=this.get("density",1),o=this.get("horizontalGap",0)+1,c=this.get("verticalGap",0)+1;for(let g=0;g<l;g++)if(!(c>0&&g/c!=Math.round(g/c)))for(let p=0;p<h;p++){const f=n[Math.floor(Math.random()*n.length)],m=(r+Math.random()*(a-r))*255,b=Math.random();o>0&&p/o!=Math.round(p/o)||b<u&&this._setRectData(p,g,i,e,s.data,f.r,f.g,f.b,m)}this.context.putImageData(s,0,0),this._pattern=this.context.createPattern(this.canvas,"repeat")}this._clearGrain=!1}_checkDirtyFill(){return!1}_setRectData(e,t,s,i,r,a,n,h,l){for(var u=e*s;u<e*s+s;u++)for(var o=t*s;o<t*s+s;o++){var c=(o*i+u)*4;r[c]=a,r[c+1]=n,r[c+2]=h,r[c+3]=l}}}Object.defineProperty(pe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GrainPattern"});Object.defineProperty(pe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:N.classNames.concat([pe.className])});class fe extends S{getFill(e){const t=this.getBounds(e);let s=0,i=0,r=t.left||0,a=t.right||0,n=t.top||0,h=t.bottom||0;const l=a-r,u=h-n;let o=e.get("radius");v(o)?(s=0,i=0):(o=Math.min(l,u)/2,s=l/2,i=u/2);let c=this.get("x"),g=this.get("y");c!=null&&(s=V(c,l)),g!=null&&(i=V(g,u));const p=this._root._renderer.createRadialGradient(s,i,0,s,i,o),f=this.get("stops");if(f){let m=0;A(f,b=>{let C=b.offset;v(C)||(C=m/(f.length-1));let _=b.opacity;v(_)||(_=1);let P=b.color;if(P){const B=b.lighten;B&&(P=j.lighten(P,B));const Pe=b.brighten;Pe&&(P=j.brighten(P,Pe)),p.addColorStop(C,"rgba("+P.r+","+P.g+","+P.b+","+_+")")}m++})}return p}}Object.defineProperty(fe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialGradient"});Object.defineProperty(fe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:S.classNames.concat([fe.className])});class K extends N{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("checkered",!1),t=this.get("centered",!0),s=this.get("gap",0),i=this.get("rotation",0);let r=this.get("width",100),a=this.get("height",100),n=this.get("radius",3),h=n*2+s,l=n*2+s,u=Math.round(r/h),o=Math.round(a/l);h=r/u,l=a/o,i!=0&&(this._display.x=h*E(i),this._display.y=l*G(i));const c=this.get("color"),g=this.get("colorOpacity");(c||g)&&this._display.beginFill(c,g);for(let p=i==0?0:-o*2;p<o*2;p++)for(let f=i==0?0:-u*2;f<u*2;f++)if(!e||(p&1)!=1&&(f&1)!=1||(p&1)==1&&(f&1)==1){let m=f*h,b=p*l;t&&(m+=h+s/2,b+=l+s/2),this._display.drawCircle(m-n,b-n,n)}e?(r=r/2-s*2,a=a/2-s*2):(r-=s,a-=s),(c||g)&&this._display.endFill()}}Object.defineProperty(K,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CirclePattern"});Object.defineProperty(K,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:N.classNames.concat([K.className])});class $ extends N{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("width",100),t=this.get("height",100),s=this.get("gap",0),i=this.get("strokeWidth",1);if(!s)this._display.moveTo(0,0),this._display.lineTo(e,0);else{let n=s+i,h=t/n,l=this.get("angle",0)*Math.PI/180;if(l===0)for(let u=-h;u<h*2;u++){const o=Math.round(u*n-n/2)+.5;this._display.moveTo(-e,o),this._display.lineTo(e*2,o)}else{const u=Math.cos(l),o=Math.sin(l),c=Math.sqrt(e*e+t*t)*2,g=n/Math.max(Math.abs(u),Math.abs(o)),p=Math.ceil(c/g)*2;for(let f=-p;f<p;f++){const m=f*n,b=m*o-c*u,C=m*u+c*o,_=m*o+c*u,P=m*u-c*o;this._display.moveTo(b,C),this._display.lineTo(_,P)}}}this._display.lineStyle(i,this.get("color"),this.get("colorOpacity"));let r=this.get("strokeDasharray");v(r)&&(r<.5?r=[0]:r=[r]),this._display.setLineDash(r);const a=this.get("strokeDashoffset");a&&this._display.setLineDashOffset(a),this._display.endStroke()}}Object.defineProperty($,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinePattern"});Object.defineProperty($,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:N.classNames.concat([$.className])});class U extends N{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("checkered",!1),t=this.get("centered",!0),s=this.get("gap",0),i=this.get("rotation",0);let r=this.get("width",100),a=this.get("height",100),n=this.get("maxWidth",5),h=this.get("maxHeight",5);const l=this._display;let u=n+s,o=h+s,c=Math.round(r/u),g=Math.round(a/o);u=r/c,o=a/g,i!=0&&(l.x=u/2*E(i),l.y=-o/2*G(i));for(let m=i==0?0:-g*2;m<g*2;m++)for(let b=i==0?0:-c*2;b<c*2;b++)if(!e||(m&1)!=1&&(b&1)!=1||(m&1)==1&&(b&1)==1){let C=b*u,_=m*o;t&&(C+=(u-n)/2,_+=(o-h)/2),l.drawRect(C,_,n,h)}e?(r=r/2-s*2,a=a/2-s*2):(r-=s,a-=s);const p=this.get("color"),f=this.get("colorOpacity");(p||f)&&(l.beginFill(p,f),l.endFill())}}Object.defineProperty(U,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RectanglePattern"});Object.defineProperty(U,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:N.classNames.concat([U.className])});class me extends N{_beforeChanged(){super._beforeChanged(),this.isDirty("svgPath")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("svgPath");e!=null&&this._display.svgPath(e);const t=this.get("color"),s=this.get("colorOpacity");(t||s)&&(this._display.beginFill(t,s),this._display.endFill())}}Object.defineProperty(me,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PathPattern"});Object.defineProperty(me,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:N.classNames.concat([me.className])});class be extends D{_afterNew(){if(super._afterNewApplyThemes(),this.get("patterns",[]).length===0){const e=this.get("color",this.root.interfaceColors.get("stroke"));this.set("patterns",[this.getLinePattern({width:1e3,height:1e3,rotation:45,strokeWidth:1,color:e}),this.getRectanglePattern({width:10,height:10,rotation:0,maxWidth:4,maxHeight:4,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:-45,strokeWidth:1,gap:6,color:e}),this.getCirclePattern({width:11,height:11,radius:2,color:e}),this.getLinePattern({width:6,height:6,rotation:90,strokeWidth:1,color:e}),this.getRectanglePattern({width:14,height:14,rotation:45,gap:4,maxWidth:6,maxHeight:6,checkered:!0,color:e}),this.getLinePattern({width:6,height:6,rotation:0,strokeWidth:1,color:e}),this.getRectanglePattern({width:15,height:15,rotation:0,gap:5,maxWidth:5,maxHeight:5,checkered:!0,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:45,strokeWidth:2,gap:3,strokeDasharray:[4,2],color:e}),this.getCirclePattern({width:20,height:20,radius:3,gap:4,checkered:!0,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:-45,strokeWidth:2,gap:3,strokeDasharray:[4,2],color:e}),this.getRectanglePattern({width:10,height:10,rotation:0,gap:1,maxWidth:9,maxHeight:9,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:-45,strokeWidth:2,gap:1,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:45,strokeWidth:2,gap:1,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:0,strokeWidth:3,gap:1,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:90,strokeWidth:3,gap:1,color:e})])}this._dirty.patterns=!1}_beforeChanged(){this.isDirty("patterns")&&this.reset()}getIndex(e){const t=this.get("patterns",[]);if(e<t.length&&t[e]!==null)return t[e];if(e>t.length-1){const s=e-Math.floor(e*(e/t.length));return t[s]}return t[e]}next(){let e=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",e+this.get("step",1)),this.getIndex(e)}reset(){this.setPrivate("currentStep",this.get("startIndex",0))}getLinePattern(e){return $.new(this.root,e)}getRectanglePattern(e){return U.new(this.root,e)}getCirclePattern(e){return K.new(this.root,e)}}Object.defineProperty(be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PatternSet"});Object.defineProperty(be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:D.classNames.concat([be.className])});class it{static parse(e,t){t=this._applyDefaults(t);try{if(Ve(e)){let s=JSON.parse(e);return t.reverse&&te(s)&&s.reverse(),s}else{if(te(e)||Se(e))return e;throw"Unable to parse JSON data"}}catch{return}}static _applyDefaults(e){const t={},s={reverse:!1};return e||(e={}),Q(s,(i,r)=>{t[i]=e[i]||r}),t}}class rt{static parse(e,t){t=this._applyDefaults(t);let s=this.CSVToArray(e,t.delimiter),i=[],r=[],a,n;for(n=0;n<t.skipRows;n++)s.shift();if(t.useColumnNames){r=s.shift();for(let l=0;l<r.length;l++)a=r[l]!=null?r[l].replace(/^\s+|\s+$/gm,""):"",a===""&&(a="col"+l),r[l]=a}let h;for(;h=t.reverse?s.pop():s.shift(),!!h;){if(t.skipEmpty&&h.length===1&&h[0]==="")continue;let l={};for(n=0;n<h.length;n++)a=r[n]===void 0?"col"+n:r[n],l[a]=h[n];i.push(l)}return i}static CSVToArray(e,t){t=t||",";let s=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),i=[[]],r=null;for(;r=s.exec(e),!!r;){let a=r[1];a.length&&a!==t&&i.push([]);let n;r[2]?n=r[2].replace(new RegExp('""',"g"),'"'):n=r[3],i[i.length-1].push(n)}return i}static _applyDefaults(e){const t={},s={delimiter:",",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1};return e||(e={}),Q(s,(i,r)=>{t[i]=e[i]||r}),t}}class at extends D{constructor(){super(...arguments),Object.defineProperty(this,"_checkDates",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkNumbers",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkColors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkEmpty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkDeep",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this._checkFeatures(),this.on("dateFields",()=>this._checkFeatures()),this.on("dateFormat",()=>this._checkFeatures()),this.on("numericFields",()=>this._checkFeatures()),this.on("colorFields",()=>this._checkFeatures()),this.on("emptyAs",()=>this._checkFeatures())}_checkFeatures(){(this.isDirty("dateFields")||this.isDirty("dateFormat"))&&(this._checkDates=this.get("dateFields")&&this.get("dateFields").length>0),this.isDirty("numericFields")&&(this._checkNumbers=this.get("numericFields")&&this.get("numericFields").length>0),this.isDirty("colorFields")&&(this._checkColors=this.get("colorFields")&&this.get("colorFields").length>0),this.isDirty("emptyAs")&&(this._checkEmpty=this.get("emptyAs")!=null),this._checkDeepFeatures()}_checkDeepFeatures(){const e=[];A(["dateFields","numericFields","colorFields"],t=>{A(this.get(t,[]),s=>{const i=s.split(".");for(i.pop();i.length>0;)e.push(i.join(".")),i.pop()})}),this._checkDeep=e.length>0,this.setPrivate("deepFields",e)}processMany(e){te(e)&&(this._checkDates||this._checkNumbers||this._checkColors||this._checkEmpty)&&A(e,t=>{this.processRow(t)})}processRow(e,t=""){Q(e,(s,i)=>{const r=t+s;this._checkEmpty&&(e[s]=this._maybeToEmpty(e[s])),this._checkNumbers&&(e[s]=this._maybeToNumber(r,e[s])),this._checkDates&&(e[s]=this._maybeToDate(r,e[s])),this._checkColors&&(e[s]=this._maybeToColor(r,e[s])),this._checkDeep&&this.getPrivate("deepFields",[]).indexOf(r)!==-1&&Se(e[s])&&this.processRow(e[s],r+".")})}_maybeToNumber(e,t){return this.get("numericFields").indexOf(e)!==-1?We(t):t}_maybeToDate(e,t){return this.get("dateFields").indexOf(e)!==-1?this._root.dateFormatter.parse(t,this.get("dateFormat","")).getTime():t}_maybeToEmpty(e){return(e==null||e=="")&&this.get("emptyAs")!=null?this.get("emptyAs"):e}_maybeToColor(e,t){return this.get("colorFields").indexOf(e)!==-1?j.fromAny(t):t}}class ye extends y{constructor(){super(...arguments),Object.defineProperty(this,"rectangle",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ve.new(this._root,{themeTags:["rectangle"],fillOpacity:0,fill:xe(16777215)}))}),Object.defineProperty(this,"gripL",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("left")}),Object.defineProperty(this,"gripR",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("right")}),Object.defineProperty(this,"gripT",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("top")}),Object.defineProperty(this,"gripB",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("bottom")}),Object.defineProperty(this,"_is",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_iw",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_positionDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHover",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this.addTag("resizer"),this.set("visible",!1),this.gripL.events.on("dragged",e=>{this._resize(e.target,-1)}),this.gripR.events.on("dragged",e=>{this._resize(e.target,1)}),this.gripL.events.on("dragstart",e=>{this._resizeStart(e.target)}),this.gripR.events.on("dragstart",e=>{this._resizeStart(e.target)}),this.gripT.events.on("dragged",e=>{this._rotate(e,90)}),this.gripB.events.on("dragged",e=>{this._rotate(e,-90)}),this.gripT.events.on("dragstart",e=>{this._resizeStart(e.target)}),this.gripB.events.on("dragstart",e=>{this._resizeStart(e.target)})}_resizeStart(e){const t=this.get("sprite");t&&(this._is=t.get("scale",1),this._ix=e.x(),this._iw=this.width()/2)}_resize(e,t){const s=this.get("sprite"),i=this.get("spriteTemplate");if(s){const r=Math.max(.01,this._is*(1+t*(e.x()-this._ix)/this._iw));i?i.set("scale",r):s.set("scale",r),s.states.lookup("default").set("scale",r),this._updatePositions()}}_rotate(e,t){const s=this.get("sprite"),i=this.get("spriteTemplate");if(s){const r=this.parent;if(r){const a=this.get("rotationStep",10);let n=Math.round((ee({x:this.x(),y:this.y()},r.toLocal(e.point))+t)/a)*a;i?i.set("rotation",n):s.set("rotation",n),s.states.lookup("default").set("rotation",n),this._updatePositions()}}}_createGrip(e){const t=this.children.push(y.new(this._root,{themeTags:["grip",e],setStateOnChildren:!0,draggable:!0}));return t.children.push(W.new(this._root,{themeTags:["outline"],centerX:M,centerY:M})),t.children.push(W.new(this._root,{centerX:M,centerY:M})),t}_updateChildren(){if(super._updateChildren(),this.isDirty("sprite")){const e=this.get("sprite");if(e){this.show(0),this.setPrivate("visible",!0),this._updatePositions();const t=e.parent;t&&t.children.moveValue(this,0),this._positionDP=e.events.on("positionchanged",()=>{this._updatePositions()}),this._positionDP=e.events.on("boundschanged",()=>{this._updatePositions()})}else this.hide(0),this.setPrivate("visible",!1),this._positionDP&&this._positionDP.dispose()}(this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation"))&&this._updatePositions()}_updatePositions(){const e=this.get("sprite");if(e){let t=e.localBounds(),s=e.get("scale",1),i=20,r=(t.right-t.left)*s+i,a=(t.bottom-t.top)*s+i,n=e.get("rotation",0);const h=this.rectangle;let l=e.get("centerX",M),u=e.get("centerY",M),o=0;l instanceof Ce&&(o=l.value);let c=0;u instanceof Ce&&(c=u.value),h.setAll({centerX:l,centerY:u,width:r,height:a}),this.setAll({x:e.x()+i*(o-.5)*E(n)-i*(c-.5)*G(n),y:e.y()+i*(c-.5)*E(n)+i*(o-.5)*G(n),width:r,height:a,rotation:n}),this.gripT.setAll({x:(.5-o)*r,y:-c*a}),this.gripB.setAll({x:(.5-o)*r,y:(1-c)*a}),this.gripL.setAll({x:-o*r,y:(.5-c)*a}),this.gripR.setAll({x:(1-o)*r,y:(.5-c)*a}),this.rectangle.setAll({width:r,height:a})}}}Object.defineProperty(ye,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SpriteResizer"});Object.defineProperty(ye,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.classNames.concat([ye.className])});class _e extends y{constructor(){super(...arguments),Object.defineProperty(this,"label",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Xe.new(this._root,{}))}),Object.defineProperty(this,"buttonsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(y.new(this._root,{themeTags:["buttons"]}))}),Object.defineProperty(this,"upButton",{enumerable:!0,configurable:!0,writable:!0,value:this.buttonsContainer.children.push(L.new(this._root,{themeTags:["upbutton"]}))}),Object.defineProperty(this,"downButton",{enumerable:!0,configurable:!0,writable:!0,value:this.buttonsContainer.children.push(L.new(this._root,{themeTags:["downbutton"]}))})}_afterNew(){this.addTag("numericstepper"),this.set("layout",this._root.horizontalLayout),this.label.adapters.add("text",e=>(e&&e.replace(/\D/g,""),e===""&&(e="0"),e)),this.set("background",ve.new(this._root,{fillOpacity:0,fill:xe(16777215)})),this.buttonsContainer.states.create("hidden",{opacity:0,visible:!0}),this.events.on("pointerover",()=>{this.buttonsContainer.set("active",!0)}),this.events.on("pointerout",()=>{this.buttonsContainer.set("active",!1)}),this.label.on("text",e=>{if(e){const t=parseFloat(e);isNaN(t)||this.set("value",t)}}),this.upButton.events.on("click",()=>{this.set("value",this.get("value",0)+1)}),this.downButton.events.on("click",()=>{this.set("value",Math.max(0,this.get("value",0)-1))}),super._afterNew()}_updateChildren(){super._updateChildren();const e=this.get("value",0),t=this.label;if(this.isDirty("value")&&t.set("text",e.toString()),this.isDirty("disabled")){const s=this.get("disabled",!1);this.set("interactive",!s),this.upButton.set("interactive",!s),this.downButton.set("interactive",!s),s?(this.label.set("editOn","none"),this.buttonsContainer.hide(0)):(this.label.set("editOn","click"),this.buttonsContainer.show(0))}}}Object.defineProperty(_e,"className",{enumerable:!0,configurable:!0,writable:!0,value:"NumericStepper"});Object.defineProperty(_e,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.classNames.concat([_e.className])});class we extends y{constructor(){super(...arguments),Object.defineProperty(this,"circle",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Z.new(this._root,{themeTags:["background"]}))}),Object.defineProperty(this,"label",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(H.new(this._root,{}))}),Object.defineProperty(this,"slice",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Oe.new(this._root,{isMeasured:!1}))}),Object.defineProperty(this,"backgroundSlice",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Oe.new(this._root,{themeTags:["background"]}))})}_afterNew(){this.addTag("progresspie"),super._afterNew()}_updateChildren(){if(super._updateChildren(),this.isDirty("width")||this.isDirty("height")||this.isDirty("radius")||this.isDirty("innerRadius")){const e=this.innerWidth(),t=this.innerHeight(),s=V(this.get("radius",k),Math.min(e,t)/2),i=V(this.get("innerRadius",Re(80)),s);this.slice.setAll({radius:s,innerRadius:i}),this.backgroundSlice.setAll({radius:s,innerRadius:i}),this.circle.set("radius",s)}if(this.isDirty("value")){const e=this.get("value",0);this.slice.set("arc",e*360),this.backgroundSlice.set("arc",360),this.label.setAll({text:this.getNumberFormatter().format(e*100,this.get("numberFormat","#'"))}),this.root.events.once("frameended",()=>{this.label.markDirtyKey("text")})}}}Object.defineProperty(we,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ProgressPie"});Object.defineProperty(we,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.classNames.concat([we.className])});function Ie(d,e,t){return new Promise((s,i)=>{let r=t!=null&&t.responseType=="blob",a=new XMLHttpRequest;if(a.onload=()=>{if(a.status===200){let n,h;if(r){h=a.response,Fe(h).then(u=>{let o={xhr:a,error:!1,response:u,blob:h,type:a.getResponseHeader("Content-Type"),target:e};s(o)});return}else n=a.responseText||a.response;let l={xhr:a,error:!1,response:n,blob:h,type:a.getResponseHeader("Content-Type"),target:e};s(l)}else i({xhr:a,error:!0,type:a.getResponseHeader("Content-Type"),target:e})},a.onerror=()=>{i({xhr:a,error:!0,type:a.getResponseHeader("Content-Type"),target:e})},a.open("GET",d,!0),t&&t.withCredentials&&(a.withCredentials=!0),t!=null){if(t.requestHeaders!=null)for(let n=0;n<t.requestHeaders.length;n++){let h=t.requestHeaders[n];a.setRequestHeader(h.key,h.value)}t.responseType!=null&&(a.responseType=t.responseType)}a.send()})}function Fe(d){return new Promise((e,t)=>{const s=new FileReader;s.onload=i=>{e(s.result)},s.onerror=i=>{t(i)},s.readAsText(d)})}const nt=Object.freeze(Object.defineProperty({__proto__:null,load:Ie,readBlob:Fe},Symbol.toStringTag,{value:"Module"}));export{Et as ArrayDisposer,vt as BlendMode,ie as Bullet,z as Button,rt as CSVParser,ht as CanvasLayer,ct as CanvasRenderer,It as Chart,Z as Circle,K as CirclePattern,j as Color,Zt as ColorSet,qt as Component,re as ConfirmButton,y as Container,He as CounterDisposer,Jt as DataItem,at as DataProcessor,ut as DateFormatter,Gt as Disposer,dt as DurationFormatter,Xe as EditableLabel,ne as Ellipse,D as Entity,S as Gradient,pe as GrainPattern,x as Graphics,xt as GridLayout,le as HeatLegend,Pt as HorizontalLayout,gt as InterfaceColors,it as JSONParser,Kt as JsonData,H as Label,kt as Layout,he as Legend,$t as Line,$ as LinePattern,J as LinearGradient,ce as Link,Ut as ListData,F as ListTemplate,se as Modal,je as MultiDisposer,Ht as MutableValueDisposer,pt as NumberFormatter,_e as NumericStepper,T as OrthogonalLine,me as PathPattern,N as Pattern,be as PatternSet,Ce as Percent,ue as Picture,Ct as PicturePattern,ft as PointedRectangle,ae as Polygon,we as ProgressPie,fe as RadialGradient,Qt as RadialLabel,es as RadialText,ve as Rectangle,U as RectanglePattern,mt as Root,W as RoundedRectangle,Le as Scrollbar,ts as SerialChart,Me as Series,Oe as Slice,de as Slider,Ne as Sprite,ye as SpriteResizer,oe as Star,R as Template,Ot as Text,Nt as TextFormatter,_t as Theme,ss as Tick,bt as Timezone,Ae as Tooltip,L as Triangle,Dt as VerticalLayout,ge as ZoomTools,q as ZoomableContainer,Tt as addLicense,Vt as array,xe as color,jt as disposeAllRootElements,St as ease,Lt as getRootById,Mt as math,nt as net,Wt as object,as as p0,k as p100,M as p50,Re as percent,At as ready,Rt as registry,is as time,Xt as type,Bt as utils};
