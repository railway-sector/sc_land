const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-aRi8Xk-b.js","assets/index-ni9qn0ie.css"])))=>i.map(i=>d[i]);
import{a1 as h,ep as g,a2 as _,a3 as c,a4 as s,W as m,j as y,a5 as i,x as o,ab as p,y as f,bY as b}from"./index-aRi8Xk-b.js";import{v}from"./FeatureUtilityNetworkAssociationsViewModel-BcJK5cyc.js";const u="esri-utility-network-association-list",d={featureObserver:`${u}__feature-observer`,filterContainer:`${u}__filter-container`,limitNoticeContainer:`${u}__limit-notice-container`,loadingContainer:`${u}__loading-container`};let n=class extends h{constructor(e,t){super(e,t),this._isFeatureCountNoticeOpen=!0,this._observer=new IntersectionObserver(([r])=>{r?.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this._observerNode=null,this.featuresPerPage=50,this.filterText="",this.headingLevel=5,this.maxFeatureCount=1e3,this.messagesFeature=null,this.messagesCommon=null,this.selectedLayer=null,this.tooltipReferenceMap=new g,this.viewModel=new v}initialize(){this.setUpObserver()}loadDependencies(){return _({icon:()=>c(()=>import("./index-aRi8Xk-b.js").then(e=>e.Ou),__vite__mapDeps([0,1])),input:()=>c(()=>import("./index-aRi8Xk-b.js").then(e=>e.O_),__vite__mapDeps([0,1])),loader:()=>c(()=>import("./index-aRi8Xk-b.js").then(e=>e.OH),__vite__mapDeps([0,1])),notice:()=>c(()=>import("./index-aRi8Xk-b.js").then(e=>e.P5),__vite__mapDeps([0,1]))})}destroy(){this.tooltipReferenceMap.clear()}get associatedFeatureCount(){const e=this.viewModel.associationViewModels,t=this.selectedLayer?e.get(this.selectedLayer):null;return t?t.length:0}set currentFeaturePage(e){const{featuresPerPage:t,associatedFeatureCount:r}=this,a=Math.ceil(r/t)||1,l=Math.max(Math.min(e,a),1);this._set("currentFeaturePage",l)}get currentFeaturePage(){return this._get("currentFeaturePage")??1}get endIndex(){const{currentFeaturePage:e,featuresPerPage:t,maxFeatureCount:r}=this;return Math.min(e*t,r)}renderConnectivityIcon(e,t){const{tooltipReferenceMap:r}=this;let a;switch(e){case"junction-edge-from-connectivity":a="connection-end-left";break;case"junction-edge-to-connectivity":a="connection-end-right";break;case"junction-edge-midspan-connectivity":a="connection-middle";break;default:a="connection-to-connection"}return s("calcite-icon",{afterCreate:l=>r.set(t,l),afterRemoved:()=>r.delete(t),icon:a,scale:"s",slot:"content-start"})}renderFeatureCountWarning(){const{associatedFeatureCount:e,maxFeatureCount:t,messagesFeature:r}=this;return e>t?s("calcite-notice",{class:this._isFeatureCountNoticeOpen?d.limitNoticeContainer:void 0,closable:!0,icon:"information",kind:"info",open:!0,scale:"s",width:"full",onCalciteNoticeBeforeOpen:()=>this._isFeatureCountNoticeOpen=!0,onCalciteNoticeClose:()=>this._isFeatureCountNoticeOpen=!1},s("div",{slot:"title"},r.associationsLimitNoticeTitle),s("div",{slot:"message"},m(r.associationsLimitNoticeMessage,{number:t}))):null}renderFeatureObserver(){return s("div",{afterCreate:this._onObserverCreate,bind:this,class:d.featureObserver,key:"feature-observer"})}renderFilter(){return s("div",{class:d.filterContainer,key:"filter"},s("calcite-input",{icon:"search",placeholder:this.messagesFeature.associationFilterPlaceholder,type:"search",onCalciteInputInput:e=>{this.filterText=e.currentTarget.value.trim().toLowerCase(),this.currentFeaturePage=1}}))}renderLoading(){return s("div",{class:d.loadingContainer,key:"loading-container"},this.renderLoadingIcon())}renderLoadingIcon(){return s("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}getConnectivityTooltip(e){const{messagesFeature:t}=this;switch(e){case"connectivity":case"junction-junction-connectivity":return t.associationsJunctionJunction;case"junction-edge-from-connectivity":return t.associationsJunctionEdgeFrom;case"junction-edge-midspan-connectivity":return t.associationsJunctionEdgeMidspan;case"junction-edge-to-connectivity":return t.associationsJunctionEdgeTo;default:return""}}setUpObserver(){this.addHandles(y(()=>this._observerNode,()=>this._onObserverChange()))}_increaseFeaturePage(){this.currentFeaturePage++}_onObserverChange(){this._observerNode&&this._observer.unobserve(this._observerNode);const{state:e,showAllEnabled:t}=this.viewModel;this._observerNode&&e==="ready"&&t&&this._observer.observe(this._observerNode)}_onObserverCreate(e){this._observerNode=e}};i([o()],n.prototype,"_observer",void 0),i([o()],n.prototype,"_observerNode",void 0),i([o()],n.prototype,"associatedFeatureCount",null),i([o()],n.prototype,"currentFeaturePage",null),i([o()],n.prototype,"endIndex",null),i([o()],n.prototype,"featuresPerPage",void 0),i([o()],n.prototype,"filterText",void 0),i([o()],n.prototype,"headingLevel",void 0),i([o()],n.prototype,"maxFeatureCount",void 0),i([o(),p("esri/widgets/Feature/t9n/Feature")],n.prototype,"messagesFeature",void 0),i([o(),p("esri/t9n/common")],n.prototype,"messagesCommon",void 0),i([o()],n.prototype,"selectedLayer",void 0),i([o()],n.prototype,"tooltipReferenceMap",void 0),i([o({type:v})],n.prototype,"viewModel",void 0),n=i([f("esri.widgets.support.UtilityNetworkAssociations.UtilityNetworkAssociationList")],n);function P(e){const{percentAlong:t}=e;return t==null?"":b(t,{style:"percent",maximumFractionDigits:2})}function O(e){const{associationType:t}=e;return t==="connectivity"||t==="junction-junction-connectivity"||t==="junction-edge-from-connectivity"||t==="junction-edge-midspan-connectivity"||t==="junction-edge-to-connectivity"}function w(e){return e.associationType==="junction-edge-midspan-connectivity"}export{w as a,P as b,n as m,O as n};
