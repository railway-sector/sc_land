import{ce as g,Z as o,$ as p,a0 as h,bz as c,d3 as v,d4 as l,d5 as y,c6 as f}from"./index-Bp3GeDhQ.js";import{r as j}from"./serverVersionUtils-D4xNNVm3.js";let t=class extends g{constructor(s){super(s),this.moment=null,this.success=!1}};o([p({type:Date,json:{type:Number,write:{writer:(s,e)=>{e.moment=s?s.getTime():null}}}})],t.prototype,"moment",void 0),o([p({type:Boolean,json:{write:!0}})],t.prototype,"success",void 0),t=o([h("esri.rest.versionManagement.gdbVersion.support.PostResult")],t);const i=new Map;async function b(s,e,r,u){if(i.has(s)||await j(i,s),(i.get(s)?.serverVersion??0)<=11.1)throw new c("post:enterprise-version","versioning API requires ArcGIS Enterprise version 11.2 or higher");if(!e)throw new c("post:missing-guid","guid for version is missing");const n=v(s),a=r.toJSON();r.rows&&(a.rows=JSON.stringify(r.rows));const m=l(n.query,{query:y({...a,f:"json"}),...u,method:"post"});e.startsWith("{")&&(e=e.slice(1,-1));const w=`${n.path}/versions/${e}/post`,{data:d}=await f(w,m);return t.fromJSON(d)}export{b as post,i as serverVersionCacheMap};
