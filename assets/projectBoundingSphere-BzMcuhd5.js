import{ls as h,lt as U,lu as f,lv as p,lw as j,lx as M,ly as d,as as $,gU as A}from"./index-CgzAF5Ey.js";function V(t,o,r,u){if(o==null||u==null)return!1;const e=h(o,u);if(e?.projector==null)return!1;if(e.projector===U)return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3]),!0;const{source:s,dest:i,projector:m}=e;if(i.spatialReferenceId===3){const n=f[s.spatialReferenceId][2];if(n==null)return!1;n(p(t),0,I,0),j(I,0,a,0);const l=R(I[1],t[2],t[3],M.radius);return d(r,a,l),!0}if(s.spatialReferenceId!==2&&s.spatialReferenceId!==5||i.spatialReferenceId!==11){m(p(t),0,a,0);const n=s.metersPerUnit??1,l=i.metersPerUnit??1,c=t[3]*n/l;d(r,a,c)}else{const n=f[s.spatialReferenceId][1],l=f[1][11];let c=t[3];n!=null&&l!=null&&(c=R(t[1],t[2],t[3],M.radius)),m(p(t),0,a,0),d(r,a,c)}return!0}function R(t,o,r,u){const e=u+o;if(e<u/2||r>e)return Number.MAX_VALUE;const s=Math.abs(b*t)+Math.asin(r/e);return s>=Math.PI/2?Number.MAX_VALUE:r/Math.cos(s)}const I=$(),a=$(),b=A(1);export{V as l};
