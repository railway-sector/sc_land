import{df as M,n as e,gv as d,p as P,d as W}from"./index-CgzAF5Ey.js";import{L as Q,R as Z,C as _}from"./svgUtils-smkwubCy.js";import{N as q,v as H}from"./utils2-pl0dc0aQ.js";function J(t){return Q(t)}function K(t){return Z(t)}function V(t,n,i,o,r,l,s,f,h){return _(t,n,i,o,r,l,s,f,h)}let X=0;function Y(){return X++}let tt=0;function et(){return tt++}let it=0;function nt(){return it++}const N=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),ot="http://www.w3.org/2000/svg",rt=Math.PI;function at(t){const{pattern:n,linearGradient:i}=t;if(n)return d`<pattern height=${n.height??e} id=${n.id??e} patternUnits=userSpaceOnUse width=${n.width??e} x=${n.x??0??e} y=${n.y??0??e}><image height=${n.image.height??e} href=${n.image.href??e} width=${n.image.width??e} x=${n.image.x??e} y=${n.image.y??e} /></pattern>`;if(i){const o=i.stops.map(r=>d`<stop offset=${r.offset??e} stop-color=${r.color??e} />`);return d`<linearGradient gradientUnits=userSpaceOnUse id=${i.id??e} x1=${i.x1??e} x2=${i.x2??e} y1=${i.y1??e} y2=${i.y2??e}>${o}</linearGradient>`}return null}function U(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new M(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${Y()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const n=`linearGradientId-${et()}`;return{fill:`url(#${n})`,pattern:null,linearGradient:{id:n,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new M(i.color).toString()}))}}}function O(t){const n={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(n.width=t.width),t.cap&&(n.cap=t.cap),t.join&&(n.join=t.join.toString()),t.color&&(n.color=new M(t.color).toString()),t.dashArray&&(n.dashArray=t.dashArray),t.dashoffset&&(n.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(n.dashArray=st(t).join(",")||"none")),n}function st(t){if(!t?.style)return[];const{dashArray:n,style:i,width:o}=t;if(typeof n=="string"&&n!=="none")return n.split(",").map(s=>Number(s));const r=o??0,l=N.has(i)?N.get(i).map(s=>s*r):[];if(t.cap!=="butt")for(const[s,f]of l.entries())l[s]=s%2===1?f+r:Math.max(f-r,1);return l}function lt(t){return t.map(n=>`${n.command} ${n.values.join(" ")}`).join(" ").trim()}function j(t,n){if(t==null)throw new Error("value is None")}function R(t,n,i,o,r){if(t){if(t.type==="circle")return d`<circle cx=${t.cx??e} cy=${t.cy??e} fill=${n??e} fill-rule=evenodd r=${t.r??e} stroke=${i.color??e} stroke-dasharray=${i.dashArray??void 0??e} stroke-dashoffset=${i.dashOffset??void 0??e} stroke-linecap=${i.cap??e} stroke-linejoin=${i.join??e} stroke-miterlimit=4 stroke-width=${i.width??e} />`;if(t.type==="ellipse")return d`<ellipse cx=${t.cx??e} cy=${t.cy??e} fill=${n??e} fill-rule=evenodd rx=${t.rx??e} ry=${t.ry??e} stroke=${i.color??e} stroke-dasharray=${i.dashArray??void 0??e} stroke-linecap=${i.cap??e} stroke-linejoin=${i.join??e} stroke-miterlimit=4 stroke-width=${i.width??e} />`;if(t.type==="rect")return d`<rect fill=${n??e} fill-rule=evenodd height=${t.height??e} stroke=${i.color??e} stroke-dasharray=${i.dashArray??void 0??e} stroke-linecap=${i.cap??e} stroke-linejoin=${i.join??e} stroke-miterlimit=4 stroke-width=${i.width??e} width=${t.width??e} x=${t.x??e} y=${t.y??e} />`;if(t.type==="image")return d`<image aria-label=${r??""??e} height=${t.height??e} href=${t.src??e} preserveAspectRatio=none width=${t.width??e} x=${t.x??e} y=${t.y??e} />`;if(t.type==="path"){const l=typeof t.path!="string"?lt(t.path):t.path;return d`<path d=${l??e} fill=${n??e} fill-rule=evenodd stroke=${i.color??e} stroke-dasharray=${i.dashArray??void 0??e} stroke-linecap=${i.cap??e} stroke-linejoin=${i.join??e} stroke-miterlimit=4 stroke-width=${i.width??e} />`}if(t.type==="text")return j(o),d`<text dominant-baseline=${(o.dominantBaseline==="inherit"||o.dominantBaseline==="alphabetic"||o.dominantBaseline==="auto"||o.dominantBaseline==="central"||o.dominantBaseline==="hanging"||o.dominantBaseline==="ideographic"||o.dominantBaseline==="mathematical"||o.dominantBaseline==="middle"||o.dominantBaseline==="text-bottom"||o.dominantBaseline==="text-top"?o.dominantBaseline:void 0)??e} fill=${n??e} fill-rule=evenodd font-family=${o.font.family??e} font-size=${o.font.size??e} font-style=${o.font.style??e} font-variant=${o.font.variant??e} font-weight=${o.font.weight??e} kerning=${o.kerning??e} rotate=${o.rotate??e} stroke=${i.color??e} stroke-dasharray=${i.dashArray??void 0??e} stroke-linecap=${i.cap??e} stroke-linejoin=${i.join??e} stroke-miterlimit=4 stroke-width=${i.width??e} text-anchor=${(o.align==="inherit"||o.align==="middle"||o.align==="end"||o.align==="start"?o.align:void 0)??e} text-decoration=${(o.decoration==="inherit"||o.decoration==="none"||o.decoration==="blink"||o.decoration==="line-through"||o.decoration==="overline"||o.decoration==="underline"?o.decoration:void 0)??e} text-rendering=auto x=${t.x??e} y=${t.y??e}>${t.text}</text>`}return null}function dt(t,n,i){const o=E(t);if(!o)return null;const{strength:r,radius:l}=o,s=r>0?l:0,f=5**(n/100)*(.4+n/100),h=(r+s*.5)*f,c=(r+s)*n,u=r*4+1;return d`<filter filterUnits=userSpaceOnUse height=300% .id=${`bloom${i}`} width=300% x=-100% y=-100%><feMorphology in=SourceGraphic operator=dilate radius=${h??e} result=dilate /><feGaussianBlur in=dilate result=blur stdDeviation=${c/25} /><feGaussianBlur in=blur result=intensityBlur stdDeviation=${c/50} /><feComponentTransfer in=SourceGraphic result=intensityBrightness><feFuncR slope=${u??e} type=linear /><feFuncG slope=${u??e} type=linear /><feFuncB slope=${u??e} type=linear /></feComponentTransfer><feMerge><feMergeNode in=intensityBlur /><feMergeNode in=intensityBrightness /><feGaussianBlur stdDeviation=${r/10} /></feMerge></filter>`}function k(t,n){const i=t*(rt/180);return Math.abs(n*Math.sin(i))+Math.abs(n*Math.cos(i))}function F(t,n){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const o=t.alignBaseline,r=o==="baseline"?"auto":o==="top"?"text-top":o==="bottom"?"hanging":o;i.align=t.align,i.dominantBaseline=r,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",j(n),i.font.style=n.style||"normal",i.font.variant=n.variant||"normal",i.font.weight=n.weight||"normal",i.font.size=n.size?.toString()||"10pt",i.font.family=n.family||"serif"}return i}function ft(t,n){if(!t||t.length===0)return null;const i=[];for(const o of t){const{shape:r,fill:l,stroke:s,font:f}=o,h=U(l),c=O(s),u=r.type==="text"?F(r,f):null,a=R(r,h.fill,c,u);a&&i.push(a)}return d`<mask id=${n??e} maskUnits=userSpaceOnUse><g>${i}</g></mask>`}function E(t){const n=t?.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/iu);if(!n)return null;const[,i,o,r]=n;return{strength:Number(i),radius:q(H(o)),threshold:Number(r)}}function $t(t,n,i,o={}){const r=[],l=[],s=nt(),f=dt(o.cssEffectFilter,n,s);let h=null;if(f){const a=E(o.cssEffectFilter),$=o.clipBloomEffect||!a?.strength?0:(a.strength+a.radius/2)/3,g=n+n*$,m=i+i*$;h=[Math.max(g,10),Math.max(m,10)]}let c=n,u=i;if(o.useRotationSize)for(let a=0;a<t.length;a++){const $=o.rotations?.[a]??0;c=Math.max(k($,n),c),u=Math.max(k($,i),u)}for(let a=0;a<t.length;a++){const $=t[a],g=[],m=[];let S=0,x=0,w=0;for(const y of $){const{shape:p,fill:D,stroke:A,font:I,offset:B}=y;!o.ignoreStrokeWidth&&p.type!=="text"&&(S+=A?.width||0);const z=U(D),L=O(A),T=p.type==="text"?F(p,I):null;r.push(at(z)),g.push(R(p,z.fill,L,T,o.ariaLabel)),m.push(J(p)),B&&(x+=B[0],w+=B[1])}const v=o.rotations?.[a]??0;o.useRotationSize&&(x+=(c-k(v,n))/2,w+=(u-k(v,i))/2);const C=K(m),G=V(C,n,i,S,o.scale??!1,v,o.useRotationSize??!1,[x,w],h);let b=null;if(o.masking){const y=`mask-${a}`,p=o.masking[a];r.push(ft(p,y)),b=`url(#${y})`}l.push(b?d`<g mask=${b??e}><g transform=${G??e}>${g}</g></g>`:d`<g transform=${G??e}>${g}</g>`)}return f&&(j(h),c=h[0],u=h[1]),W`<svg aria-label=${o.ariaLabel??e} height=${u??e} role=img style=${P("display: block;")} width=${c??e} xmlns=${ot}>${d`${f}<defs>${r}</defs>${f?d`<g filter=${`url(#bloom${s})`}>${l}</g>`:l}`}</svg>`}export{$t as $,U as D,O as N,R as P,J as n,at as o,K as s,V as u};
