import{c9 as S,al as R,b3 as _,eV as y,aE as c,bj as z,i0 as m,kd as A,aI as U,i4 as V,ke as k,kf as v,kg as $,fp as h,ar as E}from"./index-Brd6-W-v.js";function b(n,f){if(!Array.isArray(n)||n.length<f)return!1;for(const x of n)if(typeof x!="number")return!1;return!0}const I=7645211,W={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850},G=new Map([[5773,new S({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM96_Geoid"})],[3855,new S({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM2008_Geoid"})],[115700,new S({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"WGS_1984"})],[115701,new S({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"ETRS_1989"})],[6360,new S({heightModel:"gravity-related-height",heightUnit:"us-feet",vertCRS:"NAVD88_height_(ftUS)"})],[7837,new S({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"DHHN2016_(height) "})]]);function C(n){if(!n)return null;const f=n.vcsWkid||n.latestVcsWkid;return f?G.get(f):null}function L(n){return!(!(n.extensions?.ESRI_crs?.wkid||n.extensions?.ESRI_crs?.latestWkid||n.extensions?.ESRI_crs?.wkt)||!n.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!n.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function X(n,f=!1){let x=new R({wkid:4326,vcsWkid:115700}),o=n.root?.boundingVolume,w=!1,d=n?.root?.transform;if(f&&(n.extensions?.ESRI_crs?.wkid||n.extensions?.ESRI_crs?.latestWkid||n.extensions?.ESRI_crs?.wkt)&&(n.root?.extensions?.ESRI_crs?.boundingVolume?.box||n.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))x=new R(n.extensions?.ESRI_crs),o=n.root?.extensions?.ESRI_crs?.boundingVolume,d=n.root?.transform,w=!0;else if(!o)return new _(-180,-90,180,90,x);if(o.box){const t=o?.box;if(t[3]>I&&t[7]>I&&t[11]>I)return new _({...W,spatialReference:x})}const p=E();if(!w&&o.region&&b(o.region,6)){const t=o.region,a=y(t[0]),s=y(t[1]),r=t[4],i=y(t[2]),e=y(t[3]),l=t[5];return new _({xmin:a,ymin:s,zmin:r,xmax:i,ymax:e,zmax:l,spatialReference:x})}if(o.sphere&&b(o.sphere,4)){const t=o.sphere,a=c(t[0],t[1],t[2]),s=t[3]/Math.sqrt(3),r=E();z(r,a,c(s,s,s));const i=E();if(m(i,a,c(s,s,s)),d&&b(d,16)){const g=d;A(p,r,g),U(r,p),A(p,i,g),U(i,p)}w||(V(r,k,0,r,R.WGS84,0),V(i,k,0,i,R.WGS84,0));const e=E(),l=E();return v(e,r,i),$(l,r,i),new _({xmin:e[0],ymin:e[1],zmin:e[2],xmax:l[0],ymax:l[1],zmax:l[2],spatialReference:x})}if(o.box&&b(o.box,12)){const t=o.box,a=c(t[0],t[1],t[2]),s=c(t[3],t[4],t[5]),r=c(t[6],t[7],t[8]),i=c(t[9],t[10],t[11]),e=[];for(let u=0;u<8;++u)e.push(E());if(m(e[0],a,s),m(e[0],e[0],r),m(e[0],e[0],i),h(e[1],a,s),m(e[1],e[1],r),m(e[1],e[1],i),m(e[2],a,s),h(e[2],e[2],r),m(e[2],e[2],i),h(e[3],a,s),h(e[3],e[3],r),m(e[3],e[3],i),m(e[4],a,s),m(e[4],e[4],r),h(e[4],e[4],i),h(e[5],a,s),m(e[5],e[5],r),h(e[5],e[5],i),m(e[6],a,s),h(e[6],e[6],r),h(e[6],e[6],i),h(e[7],a,s),h(e[7],e[7],r),h(e[7],e[7],i),d&&b(d,16)){const u=d;for(let M=0;M<8;++M)A(e[M],e[M],u)}const l=c(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),g=c(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let u=0;u<8;++u)w||V(e[u],k,0,e[u],R.WGS84,0),v(g,g,e[u]),$(l,l,e[u]);return new _({xmin:g[0],ymin:g[1],zmin:g[2],xmax:l[0],ymax:l[1],zmax:l[2],spatialReference:x})}return new _(-180,-90,180,90,x)}export{X as E,L as R,C as _};
