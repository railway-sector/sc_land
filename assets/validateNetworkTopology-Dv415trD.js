import{a4 as k,dA as n,dB as l,dC as u,cv as c}from"./index-BrQW8HOS.js";import{i as v}from"./UtilityNetwork-BLUMdklD.js";import"./typeUtils-Dszw1S4V.js";import"./networkFieldUtils-CaYZrGFV.js";import"./TelecomNetworkElement-CwMWpoWJ.js";import"./NetworkElement-te1zus-P.js";async function R(e,t,r){const a=n(e),i=t.toJSON();t.validationSet&&(i.validationSet=JSON.stringify(t.validationSet));const d={...i,returnEdits:!0,f:"json"},o=u({...a.query,...d}),s=l(o,{...r,method:"post"}),p=`${a.path}/validateNetworkTopology`,{data:f}=await c(p,s);return v.fromJSON(m(f))}async function $(e,t,r){if(!t.gdbVersion)throw new k("submit-validate-network-topology-job:missing-gdb-version","version is missing");const a=n(e),i=t.toJSON();t.validationSet&&(i.validationSet=JSON.stringify(t.validationSet));const d=l(a.query,{query:u({...i,returnEdits:!0,async:!0,f:"json"}),...r,method:"post"}),o=`${a.path}/validateNetworkTopology`,{data:s}=await c(o,d);return s?s.statusUrl:null}function m(e){return e.serviceEdits&&(e.serviceEdits=e.serviceEdits.map(t=>(t.editedFeatures.spatialReference&&(t.editedFeatures.spatialReference={wkid:t.editedFeatures.spatialReference.wkid,wkt:t.editedFeatures.spatialReference.wkt,wkt2:t.editedFeatures.spatialReference.wkt2,latestWkid:t.editedFeatures.spatialReference.latestWkid,latestVcsWkid:t.editedFeatures.spatialReference.latestVcsWkid,vcsWkid:t.editedFeatures.spatialReference.vcsWkid}),t={layerId:t.id,editedFeatures:t.editedFeatures}))),e}export{m as handleValidateNetworkTopologyResult,$ as submitValidateNetworkTopologyJob,R as validateNetworkTopology};
