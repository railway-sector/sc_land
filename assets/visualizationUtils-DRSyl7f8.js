import{a7 as v,Y as m,j as u,a8 as P,a5 as c,x as p,y as f}from"./index-aRi8Xk-b.js";import{l as x}from"./customElement-VHkSmNKr.js";import{c as y}from"./AnchorElementViewModel-7JavS10o.js";import{j as _}from"./createUtils-CppWdZ84.js";let l=class extends v{constructor(e){super(e),this._hoveredPoints=new m}initialize(){this.addHandles(u(()=>this._hoveredPoints.toArray().map(({anchor:e,element:o})=>({screenLocation:e.screenLocation,element:o})),e=>{for(const{screenLocation:o,element:r}of e)o&&(r.style.transform=`translate(${o.x}px, ${o.y}px)`)},P))}destroy(){this._hoveredPoints.drain(e=>this._destroyHoveredPoint(e))}update(e){const o=this.view,r=this._hoveredPoints,n=e.length;for(;this._hoveredPoints.length>n;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<n;){const s=this._makeHoveredPoint();r.push(s),o.surface?.appendChild(s.element)}for(let s=0;s<n;++s){const i=r.at(n-1-s),a=e[s];this._updateHoveredPoint(i,a)}}_makeHoveredPoint(){const{size:e,borderStyle:o,borderColor:r,borderWidth:n,boxShadow:s}=x().hoveredPointsStyle,i=this.view,a=new y({view:i,screenLocationEnabled:!0}),d=document.createElement("div"),t=d.style;return t.position="absolute",t.top="0",t.left="0",t.contain="strict",t.boxSizing="border-box",t.width=`${e}px`,t.height=`${e}px`,t.marginTop=`-${e/2}px`,t.marginLeft=`-${e/2}px`,t.border=`${o} ${n}px ${r}`,t.borderRadius=`${e}px`,t.boxShadow=s,{anchor:a,element:d}}_updateHoveredPoint({anchor:e,element:o},r){e.screenLocationEnabled=!0,e.location=r.hoveredPoint;const n=o.style;n.display="block",n.background=r.color.toCss()}_destroyHoveredPoint({anchor:e,element:o}){e.destroy(),this.view.surface?.removeChild(o)}};c([p()],l.prototype,"view",void 0),c([p()],l.prototype,"_hoveredPoints",void 0),l=c([f("esri.widgets.ElevationProfile.support.HoveredPoints")],l);function H(e,o){const r=e.samples??[],n=r.length-1,s=[];let i=[];for(let a=0;a<=n;a++){const{x:d,y:t,z:h}=r[a];h!=null&&i.push([d,t,h]),a!==n&&h!=null||!i.length||(s.push(i),i=[])}return _(s,o,!0)}export{l as a,H as e};
