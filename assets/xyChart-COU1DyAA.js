import{tm as E}from"./index-aRi8Xk-b.js";import{c as J,d as Q,V as $,A as at,a as nt,L as ot}from"./LineSeries-DooA7hXH.js";import{X as mt,b as pt}from"./LineSeries-DooA7hXH.js";import{e as P,v as W,P as R,q as Z,j as L,m as z,g as q,s as K,f as tt,t as B,u as U}from"./Theme-BXLE1ecl.js";import{R as H}from"./Button-CMnCu2Ec.js";import"./ColorSet-WqLrGjmj.js";import"./DefaultTheme-BzklQHGZ.js";import"./Tick-BulKSLS3.js";import"./area-CCUzKFK2.js";class X extends J{constructor(){super(...arguments),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_columnsUpdated",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_makeGraphics(t,e){return this.makeColumn(e,t)}_makeFieldNames(){super._makeFieldNames();const t=this.get("xAxis"),e=this.get("yAxis"),s="CategoryAxis",i="ValueAxis";t.isType(s)&&(this.get("openCategoryXField")||(this._xOpenField=this._xField)),t.isType(i)&&(this.get("openValueXField")||(this._xOpenField=this._xField)),e.isType(s)&&(this.get("openCategoryYField")||(this._yOpenField=this._yField)),e.isType(i)&&(this.get("openValueYField")||(this._yOpenField=this._yField))}_prepareChildren(){super._prepareChildren();const t=this.get("xAxis"),e=this.get("yAxis"),s=this.dataItems.length,i=Math.max(0,this.startIndex()-2),a=Math.min(this.endIndex()+2,s-1);if(t.inited&&e.inited)for(let n=i;n<=a;n++){let o=this.dataItems[n];this._createGraphics(o)}}_updateChildren(){const t=this.chart;t&&(this._ph=t.plotContainer.height(),this._pw=t.plotContainer.width());const e=this.get("xAxis"),s=this.get("yAxis"),i=this.get("baseAxis"),a=this.columns.template;this.isDirty("fill")&&a.get("fill")==null&&a.set("fill",this.get("fill")),this.isDirty("fillPattern")&&a.get("fillPattern")==null&&a.set("fillPattern",this.get("fillPattern")),this.isDirty("stroke")&&a.get("stroke")==null&&a.set("stroke",this.get("stroke"));let n=0,o=0,l=0;P(i.series,_=>{if(_ instanceof X){const I=_.get("stacked");I&&l==0&&o++,!I&&_.get("clustered")&&o++}_===this&&(n=o-1),l++}),this.get("clustered")||(n=0,o=1),o===0&&(o=1,n=0);const h=e.get("renderer"),r=s.get("renderer"),d="cellStartLocation",g="cellEndLocation",c=h.get(d,0),p=h.get(g,1),x=r.get(d,0),u=r.get(g,1);if(this._aLocationX0=c+n/o*(p-c),this._aLocationX1=c+(n+1)/o*(p-c),this._aLocationY0=x+n/o*(u-x),this._aLocationY1=x+(n+1)/o*(u-x),e.inited&&s.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty("vcx")||this.isDirty("vcy")||this._sizeDirty){const _=this.dataItems.length;let I=Math.max(0,this.startIndex()-2),y=Math.min(this.endIndex()+2,_-1);for(let f=0;f<I;f++)this._toggleColumn(this.dataItems[f],!1);let v=this.dataItems[I];for(let f=I;f<=y;f++){let C=this.dataItems[f];if(C.get("valueX")!=null&&C.get("valueY")!=null){if(v=C,f>0&&I>0)for(let F=f-1;F>=0;F--){let m=this.dataItems[F];if(m.get("valueX")!=null&&m.get("valueY")!=null){v=m;break}}break}else this._toggleColumn(C,!1)}this._beforeColumnsDraw();let M=0;s.isType("CategoryAxis")&&e.isType("CategoryAxis")?M=2:e===i?M=0:s===i&&(M=1);for(let f=I;f<=y;f++){let C=this.dataItems[f];this._updateGraphics(C,v,M),C.get("valueX")!=null&&C.get("valueY")!=null&&(v=C)}this._afterColumnsDraw();for(let f=y+1;f<_;f++)this._toggleColumn(this.dataItems[f],!1);this._columnsUpdated=!0}}else this._skipped=!0;this.getPrivate("doNotUpdateLegend")||this.updateLegendMarker(this.get("tooltipDataItem")),super._updateChildren()}_afterChanged(){super._afterChanged(),this._columnsUpdated=!1}_beforeColumnsDraw(){}_afterColumnsDraw(){}_createGraphics(t){let e=t.get("graphics");if(!e){e=this._makeGraphics(this.columns,t),t.set("graphics",e),e._setDataItem(t);const s=t.get("legendDataItem");if(s){const a=s.get("markerRectangle");if(a){const n=a.states.lookup("default");P(W,o=>{const l=e.get(o,this.get(o));a.set(o,l),n.set(o,l)})}}let i=t.get("rangeGraphics");i&&P(i,a=>{a.dispose()}),i=[],t.setRaw("rangeGraphics",i),this.axisRanges.each(a=>{const n=a.container,o=this._makeGraphics(a.columns,t);i&&i.push(o),o.setPrivate("list",a.columns),n.children.push(o)})}}createAxisRange(t){return P(this.dataItems,e=>{const s=e.get("graphics");s&&(s.dispose(),e.set("graphics",void 0))}),super.createAxisRange(t)}_updateGraphics(t,e,s){let i=t.get("graphics");const a=this._xField,n=this._yField,o=t.get(a),l=t.get(n),h=this.get("exactLocationX",!1);if(o!=null&&l!=null){const r=this._xOpenField,d=this._yOpenField,g=this.get("locationX",t.get("locationX",.5)),c=this.get("locationY",t.get("locationY",.5)),p=this.get("openLocationX",t.get("openLocationX",g)),x=this.get("openLocationY",t.get("openLocationY",c)),u=i.get("width"),_=i.get("height"),I=this.get("stacked"),y=this.get("xAxis"),v=this.get("yAxis"),M=y.get("start"),f=y.get("end"),C=v.get("start"),F=v.get("end");let m,w,D,k,O=this.get("vcy",1),S=this.get("vcx",1),G=!1,N=!1;if(s==0){let T=this._aLocationX0+p-.5,A=this._aLocationX1+g-.5;if(u instanceof R){let b=(A-T)*(1-u.value)/2;T+=b,A-=b}if(m=y.getDataItemPositionX(t,r,T,S,h),w=y.getDataItemPositionX(t,a,A,S,h),D=v.getDataItemPositionY(t,n,c,O),this._yOpenField!==this._yField)k=v.getDataItemPositionY(t,d,x,O);else if(I){let b=t.get("stackToItemY");b?k=v.getDataItemPositionY(b,n,x,b.component.get("vcy")):k=v.basePosition()}else k=v.basePosition();t.setRaw("point",{x:m+(w-m)/2,y:D}),N=!0}else if(s==1){let T=this._aLocationY0+x-.5,A=this._aLocationY1+c-.5;if(_ instanceof R){let b=(A-T)*(1-_.value)/2;T+=b,A-=b}if(D=v.getDataItemPositionY(t,d,T,O),k=v.getDataItemPositionY(t,n,A,O),w=y.getDataItemPositionX(t,a,g,S,h),this._xOpenField!==this._xField)m=y.getDataItemPositionX(t,r,p,S,h);else if(I){let b=t.get("stackToItemX");b?m=y.getDataItemPositionX(b,a,p,b.component.get("vcx"),h):m=y.basePosition()}else m=y.basePosition();G=!0,t.setRaw("point",{x:w,y:D+(k-D)/2})}else if(s==2){let T=this._aLocationX0+p-.5,A=this._aLocationX1+g-.5;if(u instanceof R){let b=(A-T)*(1-u.value)/2;T+=b,A-=b}if(m=y.getDataItemPositionX(t,r,T,S),w=y.getDataItemPositionX(t,a,A,S),T=this._aLocationY0+x-.5,A=this._aLocationY1+c-.5,_ instanceof R){let b=(A-T)*(1-_.value)/2;T+=b,A-=b}D=v.getDataItemPositionY(t,d,T,O),k=v.getDataItemPositionY(t,n,A,O),t.setRaw("point",{x:m+(w-m)/2,y:D+(k-D)/2})}this._applyGraphicsStates(t,e),this._updateSeriesGraphics(t,i,m,w,D,k,G,N),m<M&&w<M||m>f&&w>f||D<C&&k<=C||D>=F&&k>F||Z(m)||Z(D)?this._toggleColumn(t,!1):this._toggleColumn(t,!0);let V=t.get("rangeGraphics");V&&P(V,T=>{this._updateSeriesGraphics(t,T,m,w,D,k,G,N)})}else this._toggleColumn(t,!1)}_updateSeriesGraphics(t,e,s,i,a,n,o,l){const h=e.get("width"),r=e.get("height"),d=e.get("maxWidth"),g=e.get("maxHeight"),c=this.getPoint(s,a),p=this.getPoint(i,n),x=t.get("point");if(x){const u=this.getPoint(x.x,x.y);x.x=u.x+this._x,x.y=u.y+this._y}if(s=c.x,i=p.x,a=c.y,n=p.y,L(h)){const u=(i-s-h)/2;s+=u,i-=u}if(L(d)&&d<Math.abs(i-s)){const u=(i-s-d)/2;s+=u,i-=u}if(L(r)){const u=(n-a-r)/2;a+=u,n-=u}if(L(g)&&g<Math.abs(n-a)){const u=(n-a-g)/2;a+=u,n-=u}this.get("adjustBulletPosition")&&(o&&(i=Math.min(Math.max(0,i),this._pw),s=Math.min(Math.max(0,s),this._pw)),l&&(a=Math.min(Math.max(0,a),this._ph),n=Math.min(Math.max(0,n),this._ph))),t.setRaw("left",s),t.setRaw("right",i),t.setRaw("top",a),t.setRaw("bottom",n),e.setPrivate("width",i-s),e.setPrivate("height",n-a),e.set("x",s),e.set("y",n-(n-a))}_handleDataSetChange(){super._handleDataSetChange(),P(this._dataItems,t=>{this._toggleColumn(t,!1)})}_applyGraphicsStates(t,e){const s=t.get("graphics"),i=s.states.lookup("dropFromOpen"),a=s.states.lookup("riseFromOpen"),n=s.states.lookup("dropFromPrevious"),o=s.states.lookup("riseFromPrevious");if(i||n||a||o){const l=this.get("xAxis"),h=this.get("yAxis"),r=this.get("baseAxis");let d,g,c;r===l&&h.isType("ValueAxis")?(d=t.get(this._yOpenField),g=t.get(this._yField),c=e.get(this._yField)):r===h&&l.isType("ValueAxis")&&(d=t.get(this._xOpenField),g=t.get(this._xField),c=e.get(this._xField)),L(d)&&L(g)&&(g<d?i&&i.apply():a&&a.apply(),L(c)&&(g<c?n&&n.apply():o&&o.apply()))}}disposeDataItem(t){super.disposeDataItem(t);const e=t.get("graphics");e&&(this.columns.removeValue(e),e.dispose());const s=t.get("rangeGraphics");s&&P(s,i=>{const a=i.getPrivate("list");a&&a.removeValue(i),i.dispose()})}hideDataItem(t,e){const s=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return E(this,void 0,void 0,function*(){const i=[s.hideDataItem.call(this,t,e)],a=t.get("graphics");a&&i.push(a.hide(e));const n=t.get("rangeGraphics");n&&P(n,o=>{i.push(o.hide(e))}),yield Promise.all(i)})}_toggleColumn(t,e){const s=t.get("graphics");s&&s.setPrivate("visible",e);const i=t.get("rangeGraphics");i&&P(i,n=>{n.setPrivate("visible",e)});const a=t.bullets;a&&P(a,n=>{n.setPrivate("hidden",!e)})}showDataItem(t,e){const s=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return E(this,void 0,void 0,function*(){const i=[s.showDataItem.call(this,t,e)],a=t.get("graphics");a&&i.push(a.show(e));const n=t.get("rangeGraphics");n&&P(n,o=>{i.push(o.show(e))}),yield Promise.all(i)})}updateLegendMarker(t){let e=this.get("legendDataItem");if(this.get("useLastColorForLegendMarker")&&!t){const s=this.dataItems[this.endIndex()-1];s&&(t=s)}if(e){let s=this.columns.template;if(t){let a=t.get("graphics");a&&(s=a)}const i=e.get("markerRectangle");if(i&&!e.get("itemContainer").get("disabled")){const a=i.states.lookup("default");P(W,n=>{const o=s.get(n,this.get(n));i.set(n,o),a.set(n,o)})}}}_getTooltipTarget(t){if(this.get("seriesTooltipTarget")=="bullet")return super._getTooltipTarget(t);let e=t.get("graphics");return e||this}}Object.defineProperty(X,"className",{enumerable:!0,configurable:!0,writable:!0,value:"BaseColumnSeries"});Object.defineProperty(X,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:J.classNames.concat([X.className])});class Y extends Q{constructor(){super(...arguments),Object.defineProperty(this,"_frequency",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_itemMap",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._settings.themeTags=z(this._settings.themeTags,["axis"]),this.fields.push("category","id","cellSize"),this.setPrivateRaw("name","category"),this.addTag("category"),super._afterNew()}_afterDataChange(){super._afterDataChange();const t=this.dataItems.length;t>0&&this.setPrivateRaw("maxZoomFactor",t),this.setPrivateRaw("startIndex",Math.min(this.getPrivate("startIndex",0),t)),this.setPrivateRaw("endIndex",Math.min(this.getPrivate("endIndex",t),1))}_prepareChildren(){super._prepareChildren();const t=this.dataItems.length;let e=0;this._valuesDirty&&(this._itemMap={},P(this.dataItems,n=>{n.setRaw("index",e),this._itemMap[n.get("category")]=n,e++}),this.setPrivateRaw("maxZoomFactor",t));let s=this.get("start",0),i=this.get("end",1),a=this._getIndices(s,i);this.setPrivateRaw("startIndex",a.startIndex),this.setPrivateRaw("endIndex",a.endIndex),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("endIndex")||this.isPrivateDirty("startIndex")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&this.dataItems.length>0&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges())}adjustZoom(){const t=this.dataItems.length;if(t>1){let e=this.get("maxZoomCount",this.dataItems.length),s=this.get("minZoomCount",1),i=0,a=this.getPrivate("startIndex",0),n=this.getPrivate("endIndex",0);const o=this._sAnimation,l=this._eAnimation;let h=this.get("start",0),r=!1;o&&!o.stopped&&(h=Number(o.to),r=!0);let d=this.get("end",1);if(l&&!l.stopped&&(d=Number(l.to),r=!0),r){const g=this._getIndices(h,d);a=g.startIndex,n=g.endIndex}for(let g=a;g<n;g++){const c=this.dataItems[g];i+=c.get("finalCellSize",1)}if(i<=s){let g=0;for(let c=a;c<t;c++){const p=this.dataItems[c];if(g+=p.get("finalCellSize",1),n=c+1,g>=s)break}if(g<s)for(let c=a-1;c>=0;c--){const p=this.dataItems[c];if(g+=p.get("finalCellSize",1),a=c,g>=s)break}this.zoomToIndexes(a,n)}else if(i>=e){let g=i;for(let c=n-1;c>=a;c--){const p=this.dataItems[c];if(g-=p.get("finalCellSize",1),g<=e){n=c+1;break}}this.zoomToIndexes(a,n)}}}_handleRangeChange(){P(this.series,t=>{let e=this.dataItems[this.startIndex()].get("category"),s=this.dataItems[this.endIndex()-1].get("category"),i=t.get("baseAxis"),a=t.get("xAxis"),n=t.get("yAxis");if(a instanceof Y&&n instanceof Y)t._markDirtyAxes();else if(i===this){let o,l,h=n;if(a===i?(t.get("categoryXField")&&(o="categoryX"),t.get("openCategoryXField")&&(l="openCategoryX")):n===i&&(t.get("categoryYField")&&(o="categoryY"),t.get("openCategoryYField")&&(l="openCategoryY"),h=a),h instanceof $&&(o||l)){let g=function(u,_,I,y,v,M){let f,C=_.categoryToIndex(v);for(;!f&&C>=0&&C<_.dataItems.length;){let F=_.dataItems[C].get("category");if(M=="previous")for(let m=u.dataItems.length-1;m>=0;m--){let w=u.dataItems[m];if(I&&w.get(I)===F){f=w;break}if(y&&w.get(y)===F){f=w;break}}else for(let m=0,w=u.dataItems.length;m<w;m++){let D=u.dataItems[m];if(I&&D.get(I)===F){f=D;break}if(y&&D.get(y)===F){f=D;break}}f||(C+=M==="previous"?-1:1)}return f},r,d;r=g(t,this,o,l,e,"next"),d=g(t,this,o,l,s,"previous");let c=0,p=t.dataItems.length;r&&(c=t.dataItems.indexOf(r)),d&&(p=t.dataItems.indexOf(d)+1),t.setPrivate("startIndex",c),t.setPrivate("endIndex",p);let x=!1;for(let u=c;u<p;u++){const _=t.dataItems[u];if(P(t.__valueXShowFields,I=>{_.get(I)!=null&&(x=!0)}),P(t.__valueYShowFields,I=>{_.get(I)!=null&&(x=!0)}),x)break}t.setPrivate("outOfSelection",!x)}t._markDirtyAxes()}})}_prepareAxisItems(){var t;const e=this.get("renderer"),s=this.dataItems.length;let i=this.startIndex();i>0&&i--;let a=this.endIndex();a<s&&a++;const n=e.get("minorLabelsEnabled"),o=e.get("minorGridEnabled",n);let l=e.axisLength()/Math.max(e.get("minGridDistance"),1),h=Math.max(1,Math.min(s,Math.ceil((a-i)/l)));i=Math.floor(i/h)*h,this._frequency=h;for(let d=0;d<s;d++)this._toggleDataItem(this.dataItems[d],!1);let r=this.dataItems[i].get("index",0);for(let d=i;d<a;d=d+h){let g=this.dataItems[d];this._createAssets(g,[]),this._toggleDataItem(g,!0);let c=h;o&&(c=1),this._prepareDataItem(g,r,c),r++}if(e.get("minorGridEnabled"))for(let d=i;d<a;d++){let g=this.dataItems[d];d%h!=0&&(this._createAssets(g,["minor"],!0),this._toggleDataItem(g,!0),this._prepareDataItem(g,0,1),n||(t=g.get("label"))===null||t===void 0||t.setPrivate("visible",!1))}this._updateGhost()}_prepareDataItem(t,e,s){let i=this.get("renderer"),a=t.get("categoryLocation",0),n=t.get("endCategoryLocation",1),o=t.get("index");L(o)||(o=this.categoryToIndex(t.get("category")));let l=this.indexToPosition(o,a),h=t.get("endCategory"),r;h?(r=this.categoryToIndex(h),L(r)||(r=o)):r=o;let d=this.indexToPosition(r,n),g,c;if(t.get("isRange")){if(g=r,!L(o)){this._toggleDataItem(t,!1);return}}else g=o+this._frequency-1;c=this.indexToPosition(g,n),i.updateLabel(t.get("label"),l,d,s),i.updateGrid(t.get("grid"),l,d),i.updateTick(t.get("tick"),l,d,s),i.updateFill(t.get("axisFill"),l,c),this._processBullet(t),i.updateBullet(t.get("bullet"),l,d);const p=this.get("fillRule");p&&p(t,e)}startIndex(){let t=this.dataItems.length;return Math.min(Math.max(this.getPrivate("startIndex",0),0),t-1)}endIndex(){let t=this.dataItems.length;return Math.max(1,Math.min(this.getPrivate("endIndex",t),t))}baseValue(){}basePosition(){return 0}getX(t){let e=this._itemMap[t];return e?this._settings.renderer.positionToCoordinate(this.indexToPosition(e.get("index",0))):NaN}getY(t){let e=this._itemMap[t];return e?this._settings.renderer.positionToCoordinate(this.indexToPosition(e.get("index",0))):NaN}getDataItemPositionX(t,e,s,i){const a=t.get(e),n=this._itemMap[a];return n?this.indexToPosition(n.get("index",0),s):NaN}getDataItemCoordinateX(t,e,s,i){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(t,e,s,i))}getDataItemPositionY(t,e,s,i){const a=t.get(e),n=this._itemMap[a];return n?this.indexToPosition(n.get("index",0),s):NaN}getDataItemCoordinateY(t,e,s,i){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(t,e,s,i))}indexToPosition(t,e,s){let i=this.dataItems.length,a=0;if(i==0||(t>=i&&(t=i-1,e=1),L(e)||(e=.5),!L(t)))return 0;let n=this.get("startLocation",0),o=this.get("endLocation",1);if(!this.get("cellSizeField"))i-=n,i-=1-o,a=(t+e-n)/i;else{let l=s?"finalCellSize":"cellSize";const h=this.dataItems;let r=0;P(this.dataItems,c=>{r+=c.get(l,1)}),r-=n*h[0].get(l,1),r-=(1-o)*h[h.length-1].get(l,1);let d=0;for(let c=0;c<t;c++)d+=h[c].get(l,1);let g=h[t].get(l,1);a=(d+e*g-n*h[0].get(l,1))/r}if(!s){let l=this.dataItems[t];l&&(a+=l.get("deltaPosition",0))}return a}categoryToPosition(t){let e=this._itemMap[t];return e?this.indexToPosition(e.get("index")):NaN}categoryToIndex(t){let e=this._itemMap[t];return e?e.get("index"):NaN}dataItemToPosition(t){return this.indexToPosition(t.get("index"))}roundAxisPosition(t,e){return t+=(.5-e)/this.dataItems.length,this.indexToPosition(this.axisPositionToIndex(t),e)}axisPositionToIndex(t){let e=this.dataItems.length;if(e===0)return 0;if(this.get("cellSizeField")){let s=0,i=[];P(this.dataItems,h=>{const r=h.get("cellSize",1);i.push(r),s+=r});let a=this.get("startLocation",0),n=this.get("endLocation",1);s-=a,s-=1-n;let o=t*s+a,l=0;for(let h=0;h<e;h++){const r=i[h];if(o<l+r)return h;l+=r}return e-1}else return q(Math.floor(t*e),0,e-1)}getTooltipText(t,e){const s=this.dataItems[this.axisPositionToIndex(t)];if(s){const i=s.get("label");if(i)return K(i,this.get("tooltipText",""))}}_updateTooltipText(t,e){t._setDataItem(this.dataItems[this.axisPositionToIndex(e)]),t.label.text.markDirtyText()}getSeriesItem(t,e){if(this.dataItems.length>0){let s=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),i=this.axisPositionToIndex(e),a=t.dataItems[i],n=this.dataItems[i],o=n.get("category");if(a&&n&&a.get(s)===o)return a;for(let l=0,h=t.dataItems.length;l<h;l++){let r=t.dataItems[l];if(r.get(s)===o)return r}}}_getIndices(t,e){let s=this.dataItems.length,i=0,a=s,n="cellSize";if(this.get("cellSizeField")){let o=0;const l=this.dataItems;if(l.length==0)return{startIndex:0,endIndex:0};P(l,r=>{o+=r.get(n,1)}),o-=this.get("startLocation",0)*l[0].get(n,1),o-=(1-this.get("endLocation",1))*l[l.length-1].get(n,1);let h=0;for(let r=0;r<s;r++)if(h+=this.dataItems[r].get(n,1),Math.round(h)>Math.round(t*o)){i=r;break}for(let r=i+1;r<s;r++)if(h+=this.dataItems[r].get(n,1),Math.round(h)>=Math.round(e*o)){a=r+1;break}i=Math.max(i,0),a=Math.min(a,s)}else i=Math.max(Math.round(this.get("start",0)*s),0),a=Math.min(Math.round(this.get("end",1)*s),s);return{startIndex:i,endIndex:a}}zoomToIndexes(t,e,s){let i=this.dataItems.length;this.get("cellSizeField")?(t=Math.min(Math.max(t,0),i),e=Math.max(Math.min(e,i),1),this.setPrivateRaw("startIndex",t),this.setPrivateRaw("endIndex",e),this.zoom(this.indexToPosition(t,0,!0),this.indexToPosition(e,0,!0),s)):this.zoom(t/i,e/i,s)}zoomToCategories(t,e,s){this.zoomToIndexes(this.categoryToIndex(t),this.categoryToIndex(e)+1,s)}getCellWidthPosition(){return this._frequency/this.dataItems.length/(this.get("end",1)-this.get("start",0))}nextPosition(t){t==null&&(t=1),this.get("renderer").getPrivate("letter")=="Y"&&(t*=-1);const e=this.getPrivate("tooltipPosition",0),s=q(this.axisPositionToIndex(e)+t,0,this.dataItems.length-1);return this.toGlobalPosition(this.indexToPosition(s))}}Object.defineProperty(Y,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CategoryAxis"});Object.defineProperty(Y,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Q.classNames.concat([Y.className])});class j extends X{constructor(){super(...arguments),Object.defineProperty(this,"allColumns",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(tt.new(this._root,{}))}),Object.defineProperty(this,"allColumnsData",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"columns",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new B(U.new({}),()=>H._new(this._root,{position:"absolute",themeTags:z(this.columns.template.get("themeTags",[]),["series","column"])},[this.columns.template])))})}makeColumn(t,e){const s=e.make();return this.get("turboMode")?s.virtualParent=this.chart:this.mainContainer.children.push(s),s._setDataItem(t),e.push(s),s}_processAxisRange(t){super._processAxisRange(t),t.columns=new B(U.new({}),()=>H._new(this._root,{position:"absolute",themeTags:z(t.columns.template.get("themeTags",[]),["series","column"])},[this.columns.template,t.columns.template]))}_beforeColumnsDraw(){this.allColumnsData=[]}_afterColumnsDraw(){this.get("turboMode")&&this.allColumns.set("draw",t=>{t.clear(),P(this.allColumnsData,e=>{const s=e.width,i=e.height,a=e.x,n=e.y,o=e.stroke,l=e.fill,h=e.strokeWidth,r=e.strokeOpacity,d=e.fillOpacity;t.beginFill(l,d),t.beginPath(),t.lineStyle(h,o,r),t.drawRect(a,n,s,i),t.endStroke(),t.endFill()})})}_updateSeriesGraphics(t,e,s,i,a,n,o,l){if(this.get("turboMode")){const h=e.get("stroke"),r=e.get("fillOpacity",1),d=e.get("strokeOpacity",1),g=e.get("strokeWidth",1),c=e.get("fill"),p=this.getPoint(s,a),x=this.getPoint(i,n),u=t.get("point");if(u){const _=this.getPoint(u.x,u.y);u.x=_.x+this._x,u.y=_.y+this._y}s=p.x,i=x.x,a=p.y,n=x.y,t.setRaw("left",s),t.setRaw("right",i),t.setRaw("top",a),t.setRaw("bottom",n),this.allColumnsData.push({width:i-s,height:n-a,x:s,y:a,stroke:h,fill:c,strokeWidth:g,strokeOpacity:d,fillOpacity:r})}else super._updateSeriesGraphics(t,e,s,i,a,n,o,l)}}Object.defineProperty(j,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColumnSeries"});Object.defineProperty(j,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:X.classNames.concat([j.className])});export{at as AxisRendererXAm5,nt as AxisRendererYAm5,Y as CategoryAxisAm5,j as ColumnSeriesAm5,ot as LineSeriesAm5,$ as ValueAxisAm5,mt as XYChartAm5,pt as XYCursorAm5};
